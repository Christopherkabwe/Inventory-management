{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/app/dashboard/sales/page.tsx"],"sourcesContent":["import Sidebar from \"@/components/sidebar2\";\r\nimport { getCurrentUser } from \"@/lib/auth\";\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { DollarSign, TrendingUp, Users, ShoppingBag, Calendar, MapPin } from \"lucide-react\";\r\nimport SalesTrendChart from \"@/components/SalesTrendChart\";\r\nimport TopProducts from \"@/components/TopProducts\";\r\nimport LeastProducts from \"@/components/LeastProducts\";\r\nimport RecentSales from \"@/components/RecentSales\";\r\nimport TopCustomers from \"@/components/TopCustomers\";\r\nimport LeastCustomers from \"@/components/LeastCustomers\";\r\nimport SalesByLocation from \"@/components/SalesByLocation\";\r\nimport DashboardSale from \"@/components/DashboardSale\";\r\n\r\ninterface ChartDataPoint {\r\n    date: string;\r\n    value: number;\r\n    quantity: number;\r\n    tonnage: number;\r\n}\r\n\r\ninterface Props {\r\n    currentPath?: string;\r\n}\r\n\r\ninterface CategoryTrendDataPoint {\r\n    date: string;\r\n    [category: string]: number | string;\r\n}\r\n\r\nexport default async function SalesDashboardPage() {\r\n    const user = await getCurrentUser();\r\n    if (!user) return <div>Please log in.</div>;\r\n    const userId = user.id;\r\n\r\n    // Metrics\r\n    const sales: DashboardSale[] = await prisma.sale.findMany({\r\n        where: { createdBy: userId },\r\n        include: {\r\n            product: {\r\n                select: {\r\n                    name: true,\r\n                    price: true,\r\n                    category: true,\r\n                    weightValue: true,\r\n                    packSize: true\r\n                },\r\n            },\r\n            location: { select: { name: true } }\r\n        },\r\n    });\r\n\r\n    // 1. Get product sales with quantities\r\n    const productSales = await prisma.sale.groupBy({\r\n        by: ['productId'],\r\n        where: {\r\n            createdBy: userId,\r\n            saleDate: {\r\n                gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000), // last 30 days\r\n            },\r\n        },\r\n        _sum: {\r\n            quantity: true,\r\n        },\r\n    });\r\n\r\n    // 2. Fetch product details for the IDs\r\n    const productIds = productSales.map((sale) => sale.productId);\r\n    const products = await prisma.productList.findMany({\r\n        where: { id: { in: productIds } },\r\n        select: { id: true, name: true, price: true },\r\n    });\r\n\r\n    // 3. Merge sales data with product info\r\n    const salesByProduct = productSales\r\n        .map((sale) => {\r\n            const product = products.find((p) => p.id === sale.productId);\r\n            if (!product) return null;\r\n            return {\r\n                id: product.id,\r\n                name: product.name,\r\n                totalValue: product.price * (sale._sum.quantity || 0),\r\n                qty: sale._sum.quantity || 0,\r\n            };\r\n        })\r\n        .filter(Boolean) // Remove nulls\r\n        .sort((a, b) => b.totalValue - a.totalValue);\r\n\r\n    const topSellingProducts = salesByProduct.slice(0, 5);\r\n    const leastSellingProducts = salesByProduct.slice(-5).reverse();\r\n\r\n    // Total Sales, Total Orders, Average Order Value\r\n    const totalSales = sales.reduce((sum, sale) => sum + sale.quantity * sale.salePrice, 0);\r\n    const totalOrders = sales.length;\r\n    const avgOrderValue = totalOrders > 0 ? totalSales / totalOrders : 0;\r\n\r\n    const customers = await prisma.customer.findMany({\r\n        where: { createdBy: userId },\r\n        include: {\r\n            sales: {\r\n                include: { product: true }\r\n            }\r\n        },\r\n    });\r\n\r\n\r\n    const totalCustomers = customers.length;\r\n\r\n    // 1. Total Revenue Growth (vs. Last Month)\r\n    const lastMonthStart = new Date(new Date().getFullYear(), new Date().getMonth() - 1, 1);\r\n    const lastMonthEnd = new Date(new Date().getFullYear(), new Date().getMonth(), 0);\r\n    const prevMonthSales = await prisma.sale.findMany({\r\n        where: {\r\n            createdBy: userId,\r\n            saleDate: { gte: lastMonthStart, lte: lastMonthEnd },\r\n        },\r\n    });\r\n    const prevMonthTotal = prevMonthSales.reduce((sum, sale) => sum + sale.quantity * sale.salePrice, 0);\r\n    const growth = prevMonthTotal ? ((totalSales - prevMonthTotal) / prevMonthTotal * 100).toFixed(1) : \"0\";\r\n\r\n    // 2. Conversion Rate\r\n    const conversionRate = totalCustomers > 0 ? (totalOrders / totalCustomers * 100).toFixed(1) : \"0\";\r\n\r\n    // 3. Sales per Product Category\r\n    const salesByCategory = sales.reduce((acc, sale) => {\r\n        const category = sale.product.category || 'Uncategorized';\r\n        if (!acc[category]) {\r\n            acc[category] = { totalValue: 0, qty: 0 };\r\n        }\r\n        acc[category].totalValue += sale.quantity * sale.salePrice;\r\n        acc[category].qty += sale.quantity;\r\n        return acc;\r\n    }, {} as Record<string, { totalValue: number; qty: number }>);\r\n\r\n    // 4. Average Items per Order\r\n    const totalItemsSold = sales.reduce((sum, sale) => sum + sale.quantity, 0);\r\n    const avgItemsPerOrder = totalOrders > 0 ? (totalItemsSold / totalOrders).toFixed(1) : \"0\";\r\n\r\n    // 5. Top Selling Location\r\n    const salesByLocation = sales.reduce((acc, sale) => {\r\n        const loc = sale.location?.name || 'Unknown';\r\n        acc[loc] = (acc[loc] || 0) + sale.quantity * sale.salePrice;\r\n        return acc;\r\n    }, {} as Record<string, number>);\r\n    const topLocation = Object.entries(salesByLocation).sort((a, b) => b[1] - a[1])[0]?.[0] || 'None';\r\n\r\n    // YTD and MTD Sales\r\n    const startOfYear = new Date(new Date().getFullYear(), 0, 1);\r\n    const startOfMonth = new Date(new Date().getFullYear(), new Date().getMonth(), 1);\r\n\r\n    const salesYTD = await prisma.sale.findMany({\r\n        where: { createdBy: userId, saleDate: { gte: startOfYear } },\r\n        include: { product: { select: { price: true } } },\r\n    });\r\n    const totalSalesYTD = salesYTD.reduce((sum, sale) => sum + sale.quantity * sale.salePrice, 0);\r\n\r\n    const salesMTD = await prisma.sale.findMany({\r\n        where: { createdBy: userId, saleDate: { gte: startOfMonth } },\r\n        include: { product: { select: { price: true } } },\r\n    });\r\n    const totalSalesMTD = salesMTD.reduce((sum, sale) => sum + sale.quantity * sale.salePrice, 0);\r\n\r\n    // Recent sales (last 7 days)\r\n    const sevenDaysAgo = new Date();\r\n    sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\r\n    const recentSales = sales\r\n        .filter(sale => sale.saleDate >= sevenDaysAgo)\r\n        .sort((a, b) => b.saleDate.getTime() - a.saleDate.getTime())\r\n        .slice(0, 10);\r\n\r\n    // Top products (by quantity sold)\r\n    const topProducts = sales\r\n        .reduce((acc, sale) => {\r\n            const name = sale.product.name;\r\n            acc[name] = (acc[name] || 0) + sale.quantity;\r\n            return acc;\r\n        }, {} as Record<string, number>)\r\n    const topProductsArray = Object.entries(topProducts)\r\n        .sort((a, b) => b[1] - a[1])\r\n        .slice(0, 5)\r\n        .map(([name, qty]) => ({ name, qty }));\r\n\r\n    // Sales trend data (preparing data for charts)\r\n    const productList = await prisma.productList.findMany({\r\n        select: { id: true, weightValue: true, packSize: true },\r\n    });\r\n\r\n    if (productList.length === 0) {\r\n        console.warn(\"No products found for tonnage calculation.\");\r\n    }\r\n\r\n    const salesTrendData = sales\r\n        .reduce((acc, sale) => {\r\n            const date = new Date(sale.saleDate).toISOString().split('T')[0];\r\n            const product = productList.find(p => p.id === sale.productId);\r\n            const weightInTons = product ? (product.weightValue * sale.quantity * product.packSize) / 1000 : 0;\r\n\r\n            const existing = acc.find(d => d.date === date);\r\n            if (existing) {\r\n                existing.value += sale.salePrice * sale.quantity;\r\n                existing.quantity += sale.quantity;\r\n                existing.tonnage += weightInTons;\r\n            } else {\r\n                acc.push({\r\n                    date,\r\n                    value: sale.salePrice * sale.quantity,\r\n                    quantity: sale.quantity,\r\n                    tonnage: weightInTons,\r\n                });\r\n            }\r\n            return acc;\r\n        }, [] as ChartDataPoint[])\r\n        .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\r\n\r\n    // Sales Category trend data\r\n    const salesCategoryTrendData = (sales || []).reduce((acc, sale) => {\r\n        const date = new Date(sale.saleDate).toISOString().split('T')[0];\r\n        const category = sale.product?.category || 'Uncategorized'; // Optional chaining for safety\r\n        const existing = acc.find(d => d.date === date);\r\n\r\n        if (existing) {\r\n            existing[category] = (existing[category] || 0) + sale.quantity;\r\n        } else {\r\n            acc.push({\r\n                date,\r\n                [category]: sale.quantity,\r\n            });\r\n        }\r\n        return acc;\r\n    }, [] as CategoryTrendDataPoint[]).sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\r\n\r\n    // Top Customers and Least Customers\r\n    const topCustomers = [...customers]\r\n        .sort((a, b) => (b.sales?.length || 0) - (a.sales?.length || 0))\r\n        .slice(0, 5);\r\n\r\n    const leastCustomers = [...customers]\r\n        .sort((a, b) => (a.sales?.length || 0) - (b.sales?.length || 0))\r\n        .slice(0, 5);\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50\">\r\n            <Sidebar currentPath=\"/sales\" />\r\n            <main className=\"ml-64 p-8 space-y-10\">\r\n                {/* Header */}\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold\">Sales Dashboard</h1>\r\n                    <p className=\"text-gray-500 mt-1\">Track your sales performance and trends</p>\r\n                </div>\r\n\r\n                {/* KPIs */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-9 gap-2\">\r\n                    <KPI title=\"Total Sales\" value={`K${totalSales.toFixed(0)}`} icon={<DollarSign />} color=\"blue\" />\r\n                    <KPI title=\"Sales YTD\" value={`K${totalSalesYTD.toFixed(0)}`} icon={<Calendar />} color=\"yellow\" />\r\n                    <KPI title=\"Sales MTD\" value={`K${totalSalesMTD.toFixed(0)}`} icon={<Calendar />} color=\"yellow\" />\r\n                    <KPI title=\"Monthly Growth\" value={`${growth}%`} icon={<TrendingUp />} color=\"blue\" />\r\n                    <KPI title=\"Customers\" value={totalCustomers} icon={<Users />} color=\"yellow\" />\r\n                    <KPI title=\"Orders\" value={totalOrders} icon={<ShoppingBag />} color=\"blue\" />\r\n                    <KPI title=\"Avg. Order Value\" value={`K${avgOrderValue.toFixed(0)}`} icon={<TrendingUp />} color=\"blue\" />\r\n                    <KPI title=\"Items per Order\" value={avgItemsPerOrder} icon={<ShoppingBag />} color=\"green\" />\r\n                    <KPI title=\"Conversion Rate\" value={`${conversionRate}%`} icon={<Users />} color=\"purple\" />\r\n\r\n\r\n                </div>\r\n\r\n                {/* Main Grid */}\r\n                <div>\r\n                    <SalesTrendChart\r\n                        salesTrendData={salesTrendData || []}\r\n                        sales={sales || []}\r\n                        productList={productList || []}\r\n                    />\r\n                </div>\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                    <TopProducts\r\n                        products={topSellingProducts}\r\n                        title=\"Top Selling Products (Last 30 Days)\"\r\n                        iconColor=\"text-yellow-500\"\r\n                    />\r\n                    <LeastProducts products={leastSellingProducts} />\r\n\r\n                    {/* Sales by Category */}\r\n                    <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                        <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                            <Calendar className=\"h-5 w-5 text-blue-500\" /> Sales by Category\r\n                        </h3>\r\n                        {Object.entries(salesByCategory).length === 0 ? (\r\n                            <p className=\"text-sm text-gray-500\">No sales data.</p>\r\n                        ) : (\r\n                            <ul className=\"space-y-3 text-sm overflow-y-auto\">\r\n                                {Object.entries(salesByCategory).map(([category, data]) => (\r\n                                    <li key={category} className=\"flex justify-between items-center\">\r\n                                        <span className=\"font-medium\">{category}</span>\r\n                                        <span>{data.qty} units</span>\r\n                                        <span className=\"font-bold text-purple-600\">K{data.totalValue.toFixed(0)}</span>\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Top Customers and Location */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n                    <TopCustomers\r\n                        customers={topCustomers}\r\n                        title=\"Top Customers (Last 30 Days)\"\r\n                        iconColor=\"text-green-500\"\r\n                    />\r\n                    <LeastCustomers\r\n                        customers={leastCustomers}\r\n                        title=\"Least Active Customers\"\r\n                        iconColor=\"text-red-500\"\r\n                    />\r\n                </div>\r\n                {/* Sales by Location */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-1 gap-8\">\r\n                    <SalesByLocation\r\n                        sales={sales}\r\n                        title=\"Sales by Location\"\r\n                        iconColor=\"text-blue-500\"\r\n                    />\r\n                </div>\r\n                <RecentSales sales={recentSales} />\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n\r\n/* -----------------------------\r\n   REUSABLE COMPONENTS\r\n----------------------------- */\r\nconst iconColors = {\r\n    purple: \"text-purple-600\",\r\n    green: \"text-green-600\",\r\n    yellow: \"text-yellow-500\",\r\n    red: \"text-red-600\",\r\n    blue: \"text-blue-600\",\r\n};\r\n\r\ntype Color = keyof typeof iconColors;\r\n\r\ninterface Props {\r\n    title: string;\r\n    value: string;\r\n    icon: React.ReactNode;\r\n    color: Color;\r\n}\r\n\r\nfunction KPI({ title, value, icon, color }: Props) {\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border flex justify-between items-center\">\r\n            <div>\r\n                <p className=\"text-sm text-gray-500\">{title}</p>\r\n                <h2 className=\"text-2xl font-bold\">{value}</h2>\r\n            </div>\r\n            <div className={iconColors[color]} aria-label={`${title} indicator`}>\r\n                {icon}\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 701, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/Inventory/my-app/src/components/sidebar2.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/Inventory/my-app/src/components/sidebar2.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,6SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAwT,GACrV,sFACA","ignoreList":[0]}},
    {"offset": {"line": 715, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/Inventory/my-app/src/components/sidebar2.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/Inventory/my-app/src/components/sidebar2.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,6SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoS,GACjU,kEACA","ignoreList":[0]}},
    {"offset": {"line": 729, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 737, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesTrendChart.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/Inventory/my-app/src/components/SalesTrendChart.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/Inventory/my-app/src/components/SalesTrendChart.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,6SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+T,GAC5V,6FACA","ignoreList":[0]}},
    {"offset": {"line": 751, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesTrendChart.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/Inventory/my-app/src/components/SalesTrendChart.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/Inventory/my-app/src/components/SalesTrendChart.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,6SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2S,GACxU,yEACA","ignoreList":[0]}},
    {"offset": {"line": 765, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 773, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/TopProducts.tsx"],"sourcesContent":["import { Star } from \"lucide-react\";\r\nimport { Product } from \"./Product\";\r\n\r\ninterface Props {\r\n    products: Product[];\r\n    title: string;\r\n    iconColor: string;\r\n    limit?: number;\r\n}\r\n\r\nexport default function TopProducts({ products, title, iconColor, limit = 5 }: Props) {\r\n    const displayedProducts = products.slice(0, limit);\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <Star className={`h-5 w-5 ${iconColor}`} />\r\n                {title}\r\n            </h3>\r\n            {displayedProducts.length === 0 ? (\r\n                <p className=\"text-sm text-gray-500\">No products sold yet.</p>\r\n            ) : (\r\n                <ul className=\"space-y-3 text-sm\">\r\n                    {displayedProducts.map((product, index) => (\r\n                        <li key={product.id} className=\"flex justify-between items-center\">\r\n                            <span className=\"truncate font-medium\">\r\n                                {index + 1}. {product.name}\r\n                            </span>\r\n                            <span className=\"text-gray-600\">{product.qty} units</span>\r\n                            <span className=\"font-bold text-purple-600\">\r\n                                K{product.totalValue.toFixed(2)}\r\n                            </span>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n            {products.length > limit && (\r\n                <p className=\"text-sm text-gray-500 mt-2\">\r\n                    Showing top {limit} products. <a href=\"#\" className=\"text-blue-500\">View all</a>\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAAA;;;AAUe,SAAS,YAAY,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,CAAC,EAAS;IAChF,MAAM,oBAAoB,SAAS,KAAK,CAAC,GAAG;IAE5C,qBACI,mRAAC;QAAI,WAAU;;0BACX,mRAAC;gBAAG,WAAU;;kCACV,mRAAC,+OAAI;wBAAC,WAAW,CAAC,QAAQ,EAAE,WAAW;;;;;;oBACtC;;;;;;;YAEJ,kBAAkB,MAAM,KAAK,kBAC1B,mRAAC;gBAAE,WAAU;0BAAwB;;;;;qCAErC,mRAAC;gBAAG,WAAU;0BACT,kBAAkB,GAAG,CAAC,CAAC,SAAS,sBAC7B,mRAAC;wBAAoB,WAAU;;0CAC3B,mRAAC;gCAAK,WAAU;;oCACX,QAAQ;oCAAE;oCAAG,QAAQ,IAAI;;;;;;;0CAE9B,mRAAC;gCAAK,WAAU;;oCAAiB,QAAQ,GAAG;oCAAC;;;;;;;0CAC7C,mRAAC;gCAAK,WAAU;;oCAA4B;oCACtC,QAAQ,UAAU,CAAC,OAAO,CAAC;;;;;;;;uBAN5B,QAAQ,EAAE;;;;;;;;;;YAY9B,SAAS,MAAM,GAAG,uBACf,mRAAC;gBAAE,WAAU;;oBAA6B;oBACzB;oBAAM;kCAAW,mRAAC;wBAAE,MAAK;wBAAI,WAAU;kCAAgB;;;;;;;;;;;;;;;;;;AAKxF"}},
    {"offset": {"line": 892, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/LeastProducts.tsx"],"sourcesContent":["import { AlertTriangle } from \"lucide-react\";\r\nimport TopProducts from \"./TopProducts\";\r\nimport { Product } from \"./Product\";\r\n\r\ninterface Props {\r\n    products: Product[];\r\n}\r\n\r\nexport default function LeastProducts({ products }: Props) {\r\n    const sortedProducts = products.sort((a, b) => a.qty - b.qty);\r\n\r\n    return (\r\n        <TopProducts\r\n            products={sortedProducts}\r\n            title=\"Least Selling Products (Last 30 Days)\"\r\n            iconColor=\"text-red-500\"\r\n        />\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAOe,SAAS,cAAc,EAAE,QAAQ,EAAS;IACrD,MAAM,iBAAiB,SAAS,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,GAAG,GAAG,EAAE,GAAG;IAE5D,qBACI,mRAAC,iLAAW;QACR,UAAU;QACV,OAAM;QACN,WAAU;;;;;;AAGtB"}},
    {"offset": {"line": 916, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/RecentSales.tsx"],"sourcesContent":["import { Clock } from \"lucide-react\";\r\n\r\ninterface Sale {\r\n    id: string;\r\n    customerName: string | null;\r\n    product: { name: string };\r\n    location: { name: string };\r\n    quantity: number;\r\n    salePrice: number;\r\n    saleDate: Date;\r\n}\r\n\r\ninterface Props {\r\n    sales: Sale[];\r\n}\r\n\r\nexport default function RecentSales({ sales }: Props) {\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <Clock className=\"h-5 w-5 text-blue-500\" /> Recent Sales\r\n            </h3>\r\n            {sales.length === 0 ? (\r\n                <p className=\"text-sm text-gray-500\">No recent sales.</p>\r\n            ) : (\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"min-w-full text-sm\">\r\n                        <thead className=\"text-gray-500 border-b\">\r\n                            <tr>\r\n                                <th className=\"px-4 py-2 text-left\">Customer</th>\r\n                                <th className=\"px-4 py-2 text-left\">Product</th>\r\n                                <th className=\"px-4 py-2 text-left\">Location</th>\r\n                                <th className=\"px-4 py-2 text-right\">Quantity</th>\r\n                                <th className=\"px-4 py-2 text-right\">Price</th>\r\n                                <th className=\"px-4 py-2 text-right\">Revenue</th>\r\n                                <th className=\"px-4 py-2 text-right\">Date</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {sales.slice(0, 10).map((sale) => (\r\n                                <tr key={sale.id} className=\"border-b last:border-0 hover:bg-gray-50\">\r\n                                    <td className=\"px-4 py-3 truncate\">{sale.customerName}</td>\r\n                                    <td className=\"px-4 py-3 truncate\">{sale.product.name}</td>\r\n                                    <td className=\"px-4 py-3 truncate\">{sale.location?.name || 'N/A'}</td>\r\n                                    <td className=\"px-4 py-3 text-right\">{sale.quantity}</td>\r\n                                    <td className=\"px-4 py-3 text-right\">K{sale.salePrice.toFixed(2)}</td>\r\n                                    <td className=\"px-4 py-3 text-right font-medium\">K{(sale.salePrice * sale.quantity).toFixed(2)}</td>\r\n                                    <td className=\"px-4 py-3 text-right text-xs text-gray-500\">\r\n                                        {new Date(sale.saleDate).toLocaleDateString()}\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAAA;;;AAgBe,SAAS,YAAY,EAAE,KAAK,EAAS;IAChD,qBACI,mRAAC;QAAI,WAAU;;0BACX,mRAAC;gBAAG,WAAU;;kCACV,mRAAC,kPAAK;wBAAC,WAAU;;;;;;oBAA0B;;;;;;;YAE9C,MAAM,MAAM,KAAK,kBACd,mRAAC;gBAAE,WAAU;0BAAwB;;;;;qCAErC,mRAAC;gBAAI,WAAU;0BACX,cAAA,mRAAC;oBAAM,WAAU;;sCACb,mRAAC;4BAAM,WAAU;sCACb,cAAA,mRAAC;;kDACG,mRAAC;wCAAG,WAAU;kDAAsB;;;;;;kDACpC,mRAAC;wCAAG,WAAU;kDAAsB;;;;;;kDACpC,mRAAC;wCAAG,WAAU;kDAAsB;;;;;;kDACpC,mRAAC;wCAAG,WAAU;kDAAuB;;;;;;kDACrC,mRAAC;wCAAG,WAAU;kDAAuB;;;;;;kDACrC,mRAAC;wCAAG,WAAU;kDAAuB;;;;;;kDACrC,mRAAC;wCAAG,WAAU;kDAAuB;;;;;;;;;;;;;;;;;sCAG7C,mRAAC;sCACI,MAAM,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,qBACrB,mRAAC;oCAAiB,WAAU;;sDACxB,mRAAC;4CAAG,WAAU;sDAAsB,KAAK,YAAY;;;;;;sDACrD,mRAAC;4CAAG,WAAU;sDAAsB,KAAK,OAAO,CAAC,IAAI;;;;;;sDACrD,mRAAC;4CAAG,WAAU;sDAAsB,KAAK,QAAQ,EAAE,QAAQ;;;;;;sDAC3D,mRAAC;4CAAG,WAAU;sDAAwB,KAAK,QAAQ;;;;;;sDACnD,mRAAC;4CAAG,WAAU;;gDAAuB;gDAAE,KAAK,SAAS,CAAC,OAAO,CAAC;;;;;;;sDAC9D,mRAAC;4CAAG,WAAU;;gDAAmC;gDAAE,CAAC,KAAK,SAAS,GAAG,KAAK,QAAQ,EAAE,OAAO,CAAC;;;;;;;sDAC5F,mRAAC;4CAAG,WAAU;sDACT,IAAI,KAAK,KAAK,QAAQ,EAAE,kBAAkB;;;;;;;mCAR1C,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkBhD"}},
    {"offset": {"line": 1127, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/TopCustomers.tsx"],"sourcesContent":["import { Star } from \"lucide-react\";\r\nimport { Customer } from \"./Customer\";\r\n\r\ninterface Props {\r\n    customers: Customer[];\r\n    title: string;\r\n    iconColor: string;\r\n    limit?: number;\r\n}\r\n\r\nexport default function TopCustomers({ customers, title, iconColor, limit = 5 }: Props) {\r\n    const thirtyDaysAgo = new Date();\r\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\r\n\r\n    // Calculate total tonnage for each customer in the last 30 days\r\n    const customersWithTonnage = (customers || []).map(customer => {\r\n        const recentSales = customer.sales?.filter(sale => new Date(sale.saleDate) >= thirtyDaysAgo) || [];\r\n\r\n        const totalTonnage = recentSales.reduce((sum, sale) => {\r\n            const productWeight = sale.product?.weightValue || 0;\r\n            const packSize = sale.product?.packSize || 1;\r\n            return sum + (productWeight * sale.quantity * packSize) / 1000; // convert to tons\r\n        }, 0);\r\n\r\n        const totalSalesValue = recentSales.reduce((sum, sale) => {\r\n            return sum + (sale.totalAmount || sale.salePrice * sale.quantity);\r\n        }, 0);\r\n\r\n        return { ...customer, totalTonnage, totalSalesValue, recentSales };\r\n    });\r\n\r\n    // Sort by totalTonnage descending\r\n    const sortedCustomers = customersWithTonnage.sort((a, b) => b.totalTonnage - a.totalTonnage);\r\n    const displayedCustomers = sortedCustomers.slice(0, limit);\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <Star className={`h-5 w-5 ${iconColor}`} />\r\n                {title}\r\n            </h3>\r\n\r\n            {displayedCustomers.length === 0 ? (\r\n                <p className=\"text-sm text-gray-500\">No customers yet.</p>\r\n            ) : (\r\n                <ul className=\"space-y-3 text-sm\">\r\n                    {displayedCustomers.map((customer, index) => {\r\n                        const totalTonnage = customer.totalTonnage;\r\n                        const totalSalesValue = customer.totalSalesValue;\r\n                        const purchaseCount = customer.recentSales.length;\r\n\r\n                        return (\r\n                            <li key={customer.id} className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-1 md:gap-0\">\r\n                                <span className=\"truncate font-medium\">\r\n                                    {index + 1}. {customer.name}\r\n                                </span>\r\n                                <span className=\"font-bold text-purple-600\">\r\n                                    {purchaseCount} purchases\r\n                                </span>\r\n                                <span className=\"font-bold text-green-600\">\r\n                                    {totalTonnage.toFixed(2)} tons\r\n                                </span>\r\n                                <span className=\"font-bold text-blue-600\">\r\n                                    K{totalSalesValue.toFixed(0)}\r\n                                </span>\r\n                            </li>\r\n                        );\r\n                    })}\r\n                </ul>\r\n            )}\r\n\r\n            {customers?.length > limit && (\r\n                <p className=\"text-sm text-gray-500 mt-2\">\r\n                    Showing top {limit} customers. <a href=\"#\" className=\"text-blue-500\">View all</a>\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAUe,SAAS,aAAa,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,CAAC,EAAS;IAClF,MAAM,gBAAgB,IAAI;IAC1B,cAAc,OAAO,CAAC,cAAc,OAAO,KAAK;IAEhD,gEAAgE;IAChE,MAAM,uBAAuB,CAAC,aAAa,EAAE,EAAE,GAAG,CAAC,CAAA;QAC/C,MAAM,cAAc,SAAS,KAAK,EAAE,OAAO,CAAA,OAAQ,IAAI,KAAK,KAAK,QAAQ,KAAK,kBAAkB,EAAE;QAElG,MAAM,eAAe,YAAY,MAAM,CAAC,CAAC,KAAK;YAC1C,MAAM,gBAAgB,KAAK,OAAO,EAAE,eAAe;YACnD,MAAM,WAAW,KAAK,OAAO,EAAE,YAAY;YAC3C,OAAO,MAAM,AAAC,gBAAgB,KAAK,QAAQ,GAAG,WAAY,MAAM,kBAAkB;QACtF,GAAG;QAEH,MAAM,kBAAkB,YAAY,MAAM,CAAC,CAAC,KAAK;YAC7C,OAAO,MAAM,CAAC,KAAK,WAAW,IAAI,KAAK,SAAS,GAAG,KAAK,QAAQ;QACpE,GAAG;QAEH,OAAO;YAAE,GAAG,QAAQ;YAAE;YAAc;YAAiB;QAAY;IACrE;IAEA,kCAAkC;IAClC,MAAM,kBAAkB,qBAAqB,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,YAAY,GAAG,EAAE,YAAY;IAC3F,MAAM,qBAAqB,gBAAgB,KAAK,CAAC,GAAG;IAEpD,qBACI,mRAAC;QAAI,WAAU;;0BACX,mRAAC;gBAAG,WAAU;;kCACV,mRAAC,+OAAI;wBAAC,WAAW,CAAC,QAAQ,EAAE,WAAW;;;;;;oBACtC;;;;;;;YAGJ,mBAAmB,MAAM,KAAK,kBAC3B,mRAAC;gBAAE,WAAU;0BAAwB;;;;;qCAErC,mRAAC;gBAAG,WAAU;0BACT,mBAAmB,GAAG,CAAC,CAAC,UAAU;oBAC/B,MAAM,eAAe,SAAS,YAAY;oBAC1C,MAAM,kBAAkB,SAAS,eAAe;oBAChD,MAAM,gBAAgB,SAAS,WAAW,CAAC,MAAM;oBAEjD,qBACI,mRAAC;wBAAqB,WAAU;;0CAC5B,mRAAC;gCAAK,WAAU;;oCACX,QAAQ;oCAAE;oCAAG,SAAS,IAAI;;;;;;;0CAE/B,mRAAC;gCAAK,WAAU;;oCACX;oCAAc;;;;;;;0CAEnB,mRAAC;gCAAK,WAAU;;oCACX,aAAa,OAAO,CAAC;oCAAG;;;;;;;0CAE7B,mRAAC;gCAAK,WAAU;;oCAA0B;oCACpC,gBAAgB,OAAO,CAAC;;;;;;;;uBAXzB,SAAS,EAAE;;;;;gBAe5B;;;;;;YAIP,WAAW,SAAS,uBACjB,mRAAC;gBAAE,WAAU;;oBAA6B;oBACzB;oBAAM;kCAAY,mRAAC;wBAAE,MAAK;wBAAI,WAAU;kCAAgB;;;;;;;;;;;;;;;;;;AAKzF"}},
    {"offset": {"line": 1284, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/LeastCustomers.tsx"],"sourcesContent":["import { AlertTriangle } from \"lucide-react\";\r\nimport TopCustomers from \"./TopCustomers\";\r\nimport { Customer } from \"./Customer\";\r\n\r\ninterface Props {\r\n    customers: Customer[];\r\n}\r\n\r\nexport default function LeastCustomers({ customers }: Props) {\r\n    const sortedCustomers = customers?.sort((a, b) => (a.sales?.length || 0) - (b.sales?.length || 0));\r\n\r\n    return (\r\n        <TopCustomers\r\n            customers={sortedCustomers}\r\n            title=\"Least Active Customers (Last 30 Days)\"\r\n            iconColor=\"text-red-500\"\r\n        />\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;;;AAOe,SAAS,eAAe,EAAE,SAAS,EAAS;IACvD,MAAM,kBAAkB,WAAW,KAAK,CAAC,GAAG,IAAM,CAAC,EAAE,KAAK,EAAE,UAAU,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,UAAU,CAAC;IAEhG,qBACI,mRAAC,kLAAY;QACT,WAAW;QACX,OAAM;QACN,WAAU;;;;;;AAGtB"}},
    {"offset": {"line": 1308, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesByLocation.tsx"],"sourcesContent":["import { MapPin } from \"lucide-react\";\r\nimport { Sale } from \"./Sale\";\r\n\r\ninterface Props {\r\n    sales: Sale[];\r\n    title: string;\r\n    iconColor: string;\r\n    limit?: number;\r\n}\r\n\r\nexport default function SalesByLocation({ sales, title, iconColor, limit = 5 }: Props) {\r\n    const thirtyDaysAgo = new Date();\r\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\r\n\r\n    // Filter sales in last 30 days\r\n    const recentSales = sales.filter(\r\n        sale => new Date(sale.saleDate) >= thirtyDaysAgo\r\n    );\r\n\r\n    // Aggregate per location\r\n    const locationMap: Record<\r\n        string,\r\n        { totalTonnage: number; totalSalesValue: number; saleCount: number }\r\n    > = {};\r\n\r\n    recentSales.forEach(sale => {\r\n        const loc = sale.location?.name || \"Unknown\";\r\n\r\n        const productWeight = sale.product?.weightValue || 0;\r\n        const packSize = sale.product?.packSize || 1;\r\n        const tonnage = (productWeight * sale.quantity * packSize) / 1000;\r\n\r\n        const salesValue = sale.totalAmount || sale.salePrice * sale.quantity;\r\n\r\n        if (!locationMap[loc]) {\r\n            locationMap[loc] = {\r\n                totalTonnage: 0,\r\n                totalSalesValue: 0,\r\n                saleCount: 0,\r\n            };\r\n        }\r\n\r\n        locationMap[loc].totalTonnage += tonnage;\r\n        locationMap[loc].totalSalesValue += salesValue;\r\n        locationMap[loc].saleCount += 1;\r\n    });\r\n\r\n    const sortedLocations = Object.entries(locationMap)\r\n        .map(([name, data]) => ({ name, ...data }))\r\n        .sort((a, b) => b.totalTonnage - a.totalTonnage)\r\n        .slice(0, limit);\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <MapPin className={`h-5 w-5 ${iconColor}`} />\r\n                {title}\r\n            </h3>\r\n\r\n            {sortedLocations.length === 0 ? (\r\n                <p className=\"text-sm text-gray-500\">No sales yet.</p>\r\n            ) : (\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-sm border border-gray-200 border-collapse\">\r\n                        <thead>\r\n                            <tr className=\"bg-gray-100 text-gray-600\">\r\n                                <th className=\"py-2 px-3 text-left border-r\">#</th>\r\n                                <th className=\"py-2 px-3 text-left border-r\">Location</th>\r\n                                <th className=\"py-2 px-3 text-right border-r\"># Transactions</th>\r\n                                <th className=\"py-2 px-3 text-right border-r\">Tonnage</th>\r\n                                <th className=\"py-2 px-3 text-right\">Revenue (K)</th>\r\n                            </tr>\r\n                        </thead>\r\n\r\n                        <tbody>\r\n                            {sortedLocations.map((loc, index) => (\r\n                                <tr\r\n                                    key={loc.name}\r\n                                    className={`${index % 2 === 0 ? \"bg-white\" : \"bg-gray-50\"\r\n                                        } hover:bg-blue-50 transition-colors`}\r\n                                >\r\n                                    <td className=\"py-2 px-3 border-r\">\r\n                                        {index + 1}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r font-medium truncate\">\r\n                                        {loc.name}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-right text-purple-600 font-semibold\">\r\n                                        {loc.saleCount}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-right text-green-600 font-semibold\">\r\n                                        {loc.totalTonnage.toFixed(2)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 text-right text-blue-600 font-semibold\">\r\n                                        K{loc.totalSalesValue.toFixed(0)}\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n\r\n            {Object.keys(locationMap).length > limit && (\r\n                <p className=\"text-sm text-gray-500 mt-2\">\r\n                    Showing top {limit} locations.\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAUe,SAAS,gBAAgB,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,CAAC,EAAS;IACjF,MAAM,gBAAgB,IAAI;IAC1B,cAAc,OAAO,CAAC,cAAc,OAAO,KAAK;IAEhD,+BAA+B;IAC/B,MAAM,cAAc,MAAM,MAAM,CAC5B,CAAA,OAAQ,IAAI,KAAK,KAAK,QAAQ,KAAK;IAGvC,yBAAyB;IACzB,MAAM,cAGF,CAAC;IAEL,YAAY,OAAO,CAAC,CAAA;QAChB,MAAM,MAAM,KAAK,QAAQ,EAAE,QAAQ;QAEnC,MAAM,gBAAgB,KAAK,OAAO,EAAE,eAAe;QACnD,MAAM,WAAW,KAAK,OAAO,EAAE,YAAY;QAC3C,MAAM,UAAU,AAAC,gBAAgB,KAAK,QAAQ,GAAG,WAAY;QAE7D,MAAM,aAAa,KAAK,WAAW,IAAI,KAAK,SAAS,GAAG,KAAK,QAAQ;QAErE,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE;YACnB,WAAW,CAAC,IAAI,GAAG;gBACf,cAAc;gBACd,iBAAiB;gBACjB,WAAW;YACf;QACJ;QAEA,WAAW,CAAC,IAAI,CAAC,YAAY,IAAI;QACjC,WAAW,CAAC,IAAI,CAAC,eAAe,IAAI;QACpC,WAAW,CAAC,IAAI,CAAC,SAAS,IAAI;IAClC;IAEA,MAAM,kBAAkB,OAAO,OAAO,CAAC,aAClC,GAAG,CAAC,CAAC,CAAC,MAAM,KAAK,GAAK,CAAC;YAAE;YAAM,GAAG,IAAI;QAAC,CAAC,GACxC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,YAAY,GAAG,EAAE,YAAY,EAC9C,KAAK,CAAC,GAAG;IAEd,qBACI,mRAAC;QAAI,WAAU;;0BACX,mRAAC;gBAAG,WAAU;;kCACV,mRAAC,yPAAM;wBAAC,WAAW,CAAC,QAAQ,EAAE,WAAW;;;;;;oBACxC;;;;;;;YAGJ,gBAAgB,MAAM,KAAK,kBACxB,mRAAC;gBAAE,WAAU;0BAAwB;;;;;qCAErC,mRAAC;gBAAI,WAAU;0BACX,cAAA,mRAAC;oBAAM,WAAU;;sCACb,mRAAC;sCACG,cAAA,mRAAC;gCAAG,WAAU;;kDACV,mRAAC;wCAAG,WAAU;kDAA+B;;;;;;kDAC7C,mRAAC;wCAAG,WAAU;kDAA+B;;;;;;kDAC7C,mRAAC;wCAAG,WAAU;kDAAgC;;;;;;kDAC9C,mRAAC;wCAAG,WAAU;kDAAgC;;;;;;kDAC9C,mRAAC;wCAAG,WAAU;kDAAuB;;;;;;;;;;;;;;;;;sCAI7C,mRAAC;sCACI,gBAAgB,GAAG,CAAC,CAAC,KAAK,sBACvB,mRAAC;oCAEG,WAAW,GAAG,QAAQ,MAAM,IAAI,aAAa,aACxC,mCAAmC,CAAC;;sDAEzC,mRAAC;4CAAG,WAAU;sDACT,QAAQ;;;;;;sDAEb,mRAAC;4CAAG,WAAU;sDACT,IAAI,IAAI;;;;;;sDAEb,mRAAC;4CAAG,WAAU;sDACT,IAAI,SAAS;;;;;;sDAElB,mRAAC;4CAAG,WAAU;sDACT,IAAI,YAAY,CAAC,OAAO,CAAC;;;;;;sDAE9B,mRAAC;4CAAG,WAAU;;gDAAmD;gDAC3D,IAAI,eAAe,CAAC,OAAO,CAAC;;;;;;;;mCAjB7B,IAAI,IAAI;;;;;;;;;;;;;;;;;;;;;YA0BpC,OAAO,IAAI,CAAC,aAAa,MAAM,GAAG,uBAC/B,mRAAC;gBAAE,WAAU;;oBAA6B;oBACzB;oBAAM;;;;;;;;;;;;;AAKvC"}},
    {"offset": {"line": 1523, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/stack/server.tsx"],"sourcesContent":["import \"server-only\";\n\nimport { StackServerApp } from \"@stackframe/stack\";\nimport { stackClientApp } from \"./client\";\n\nexport const stackServerApp = new StackServerApp({\n  inheritsFrom: stackClientApp,\n});\n"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;;;;AAEO,MAAM,iBAAiB,IAAI,yQAAc,CAAC;IAC/C,cAAc,8KAAc;AAC9B"}},
    {"offset": {"line": 1540, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/auth.ts"],"sourcesContent":["import { stackServerApp } from \"@/stack/server\";\nimport { redirect } from \"next/navigation\";\n\n\nexport async function getCurrentUser() {\n    const user = await stackServerApp.getUser()\n    if (!user) {\n        redirect(\"/sign-in\");\n    }\n\n    return user;\n}"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAGO,eAAe;IAClB,MAAM,OAAO,MAAM,8KAAc,CAAC,OAAO;IACzC,IAAI,CAAC,MAAM;QACP,IAAA,sOAAQ,EAAC;IACb;IAEA,OAAO;AACX"}},
    {"offset": {"line": 1562, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/prisma.ts"],"sourcesContent":["import \"dotenv/config\";\nimport { PrismaPg } from '@prisma/adapter-pg'\nimport { PrismaClient } from '../generated/prisma/client'\n\nconst connectionString = `${process.env.DATABASE_URL}`\n\nconst adapter = new PrismaPg({ connectionString })\nconst prisma = new PrismaClient({ adapter })\n\nexport { prisma };"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;AAEA,MAAM,mBAAmB,GAAG,QAAQ,GAAG,CAAC,YAAY,EAAE;AAEtD,MAAM,UAAU,IAAI,4MAAQ,CAAC;IAAE;AAAiB;AAChD,MAAM,SAAS,IAAI,yLAAY,CAAC;IAAE;AAAQ"}}]
}