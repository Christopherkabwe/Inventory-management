{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx"],"sourcesContent":["\"use client\";\r\nimport { UserButton } from \"@stackframe/stack\";\r\nimport { BarChart3, Package, Plus, Settings, Info, ShoppingCart, ChevronDown, Menu, X, User, User2Icon, MapPin } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\ninterface Props {\r\n    sidebarOpen: boolean;\r\n    toggleSidebar: () => void;\r\n}\r\n\r\nexport default function Sidebar({ sidebarOpen, toggleSidebar }: Props) {\r\n    const [openItems, setOpenItems] = useState<string[]>([]);\r\n    const currentPath = usePathname();\r\n\r\n    const NAV_ITEMS = [\r\n        {\r\n            name: \"Dashboard\",\r\n            icon: BarChart3,\r\n            subItems: [\r\n                { name: \"Inventory Dashboard\", href: \"/dashboard/inventory\" },\r\n                { name: \"Sales Dashboard\", href: \"/dashboard/sales\" },\r\n            ],\r\n        },\r\n        {\r\n            name: \"Inventory\",\r\n            icon: Package,\r\n            subItems: [\r\n                { name: \"Inventory Summary\", href: \"/inventory/inventory\" },\r\n                { name: \"Add Product\", href: \"/inventory/add-product\" },\r\n                { name: \"Production\", href: \"/inventory/production\" },\r\n                { name: \"Stock Transfers\", href: \"/inventory/stock-transfers\" },\r\n                { name: \"Stock adjustments\", href: \"/inventory/stock-adjustments\" },\r\n                { name: \"Stock Reports\", href: \"/inventory/stock-report\" },\r\n                { name: \"Inventory Data\", href: \"/inventory/inventory-data\" },\r\n            ],\r\n        },\r\n        {\r\n            name: \"Sales\",\r\n            icon: ShoppingCart,\r\n            subItems: [\r\n                { name: \"Sales Summary\", href: \"/sales/sales-summary\" },\r\n                { name: \"Create Sale\", href: \"/sales/create-sale\" },\r\n                { name: \"Credit Notes\", href: \"/sales/credit-notes\" },\r\n                { name: \"Sales Returns\", href: \"/sales/sales-return\" },\r\n                { name: \"Sales Data\", href: \"/sales/sales-data\" },\r\n            ],\r\n        },\r\n        {\r\n            name: \"Users\",\r\n            icon: User,\r\n            subItems: [\r\n                { name: \"Create New Account\", href: \"/users/create-user\" },\r\n                { name: \"Delete Account\", href: \"/users/delete-user\" },\r\n                { name: \"Edit Account\", href: \"/users/edit-user\" },\r\n            ],\r\n        },\r\n        {\r\n            name: \"Customers\",\r\n            icon: User,\r\n            subItems: [\r\n                { name: \"Create New Customer\", href: \"/customers/create-customer\" },\r\n                { name: \"Delete Customer\", href: \"/customers/delete-customer\" },\r\n                { name: \"Edit Customer\", href: \"/customers/edit-customer\" },\r\n            ],\r\n        },\r\n        {\r\n            name: \"Locations\",\r\n            icon: MapPin,\r\n            subItems: [\r\n                { name: \"Create New Location\", href: \"/location/create-location\" },\r\n                { name: \"Delete Location\", href: \"/location/delete-location\" },\r\n                { name: \"Edit Location\", href: \"/location/edit-location\" },\r\n            ],\r\n        },\r\n        {\r\n            name: \"Products\",\r\n            icon: Package,\r\n            subItems: [\r\n                { name: \"Create New Product\", href: \"/product/create-product\" },\r\n                { name: \"Delete Product\", href: \"/product/delete-product\" },\r\n                { name: \"Edit Product\", href: \"/product/edit-product\" },\r\n            ],\r\n        },\r\n        { name: \"Settings\", href: \"/settings\", icon: Settings },\r\n        { name: \"About\", href: \"/about\", icon: Info },\r\n    ];\r\n\r\n\r\n    useEffect(() => {\r\n        const activeItem = NAV_ITEMS.find((item) => item.subItems && item.subItems.some((sub) => currentPath === sub.href));\r\n        if (activeItem) {\r\n            setOpenItems([activeItem.name]);\r\n        }\r\n    }, [currentPath]);\r\n\r\n    const toggleItem = (name: string) => {\r\n        if (openItems.includes(name)) {\r\n            setOpenItems(openItems.filter((item) => item !== name));\r\n        } else {\r\n            setOpenItems([...openItems, name]);\r\n        }\r\n    };\r\n\r\n    const isActive = (href: string) => currentPath.startsWith(href);\r\n    const isParentActive = (subItems?: { href: string }[]) =>\r\n        subItems?.some((sub) => currentPath.startsWith(sub.href));\r\n    const isOpen = (name: string) => openItems.includes(name);\r\n\r\n    return (\r\n        <>\r\n            {/* Hamburger button for small screens */}\r\n            <div className=\"md:hidden fixed top-4 left-4 z-20 mb-2\">\r\n                <button\r\n                    aria-label=\"Toggle sidebar\"\r\n                    onClick={toggleSidebar}\r\n                    className=\"p-2 rounded-md text-white hover:bg-gray-200\"\r\n                >\r\n                    {sidebarOpen ? <X className=\"w-6 h-6\" /> : <Menu className=\"w-6 h-6\" />}\r\n                </button>\r\n            </div>\r\n            {/* Sidebar */}\r\n            <div\r\n                className={`fixed top-0 left-0 h-full w-64 bg-gray-900 text-white p-6 z-10 transform transition-transform duration-300 ease-in-out ${sidebarOpen ? \"translate-x-0\" : \"-translate-x-full\"\r\n                    } md:translate-x-0`}\r\n            >\r\n                <div className=\"mb-5 mt-5\">\r\n                    <div className=\"flex items-center space-x-2 mb-4\">\r\n                        <BarChart3 className=\"w-10 h-10\" />\r\n                        <span className=\"text-md font-semibold\">Inventory Management App</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <nav className=\"space-y-1\">\r\n                    <div className=\"text-sm font-semibold text-gray-400 uppercase\">Inventory</div>\r\n                    {NAV_ITEMS.map((item, key) => {\r\n                        const IconComponent = item.icon;\r\n                        const parentActive = isParentActive(item.subItems);\r\n                        const itemActive = isActive(item.href);\r\n\r\n                        if (item.subItems) {\r\n                            return (\r\n                                <div key={key}>\r\n                                    <button\r\n                                        onClick={() => toggleItem(item.name)}\r\n                                        className={`flex items-center justify-between w-full py-1 px-2 rounded-lg ${parentActive ? \"bg-gray-700 text-white\" : \"hover:bg-gray-500 text-gray-300\"\r\n                                            }`}\r\n                                    >\r\n                                        <div className=\"flex items-center space-x-3\">\r\n                                            <IconComponent className=\"w-5 h-5\" />\r\n                                            <span className=\"text-sm\">{item.name}</span>\r\n                                        </div>\r\n                                        <ChevronDown className={`w-4 h-4 transition-transform ${isOpen(item.name) ? \"rotate-180\" : \"\"}`} />\r\n                                    </button>\r\n                                    {isOpen(item.name) && (\r\n                                        <ul className=\"ml-3\">\r\n                                            {item.subItems.map((subItem, subKey) => (\r\n                                                <li key={subKey}>\r\n                                                    <Link\r\n                                                        href={subItem.href}\r\n                                                        className={`flex items-center py-1 px-2 rounded-lg text-sm ${isActive(subItem.href) ? \"text-white\" : \"hover:underline text-gray-300\"\r\n                                                            }`}\r\n                                                    >\r\n                                                        {subItem.name}\r\n                                                    </Link>\r\n                                                </li>\r\n                                            ))}\r\n                                        </ul>\r\n                                    )}\r\n                                </div>\r\n                            );\r\n                        }\r\n\r\n                        return (\r\n                            <Link\r\n                                href={item.href}\r\n                                key={key}\r\n                                className={`flex items-center space-x-3 py-2 px-3 rounded-lg ${itemActive ? \"bg-gray-700 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                    }`}\r\n                            >\r\n                                <IconComponent className=\"w-5 h-5\" />\r\n                                <span className=\"text-sm\">{item.name}</span>\r\n                            </Link>\r\n                        );\r\n                    })}\r\n                </nav>\r\n\r\n                <div className=\"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-700\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <UserButton showUserInfo />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Overlay for small screens when sidebar is open */}\r\n            {sidebarOpen && (\r\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 z-5 md:hidden\" onClick={toggleSidebar} />\r\n            )}\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 441, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/DashboardLayout.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport Sidebar from \"@/components/sidebar2\";\r\nimport { Menu } from \"lucide-react\";\r\n\r\nexport default function DashboardLayout({ children }: { children: React.ReactNode }) {\r\n    const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex bg-gray-100\">\r\n\r\n            {/* Sidebar (desktop) */}\r\n            <aside className=\"hidden md:block w-64 bg-gray-900 text-white\">\r\n                <Sidebar sidebarOpen toggleSidebar={() => { }} />\r\n            </aside>\r\n\r\n            {/* Sidebar (mobile overlay) */}\r\n            {sidebarOpen && (\r\n                <>\r\n                    <div className=\"fixed inset-0 bg-black/40 z-40 md:hidden\"\r\n                        onClick={() => setSidebarOpen(false)}\r\n                    />\r\n                    <aside className=\"fixed top-0 left-0 h-full w-64 bg-gray-900 text-white z-50 md:hidden\">\r\n                        <Sidebar sidebarOpen toggleSidebar={() => setSidebarOpen(false)} />\r\n                    </aside>\r\n                </>\r\n            )}\r\n\r\n            {/* Main content */}\r\n            <main className=\"flex-1 p-8 overflow-x-hidden\">\r\n\r\n                {/* Mobile menu */}\r\n                <button\r\n                    className=\"md:hidden mb-4 p-2 rounded bg-gray-200\"\r\n                    onClick={() => setSidebarOpen(true)}\r\n                >\r\n                    <Menu className=\"w-6 h-6\" />\r\n                </button>\r\n\r\n                {/* CONTENT CONTAINER */}\r\n                <div className=\"max-w-7xl mx-auto\">\r\n                    {children}\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS,gBAAgB,EAAE,QAAQ,EAAiC;IAC/E,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,qBACI,8OAAC;QAAI,WAAU;;0BAGX,8OAAC;gBAAM,WAAU;0BACb,cAAA,8OAAC,yIAAO;oBAAC,WAAW;oBAAC,eAAe,KAAQ;;;;;;;;;;;YAI/C,6BACG;;kCACI,8OAAC;wBAAI,WAAU;wBACX,SAAS,IAAM,eAAe;;;;;;kCAElC,8OAAC;wBAAM,WAAU;kCACb,cAAA,8OAAC,yIAAO;4BAAC,WAAW;4BAAC,eAAe,IAAM,eAAe;;;;;;;;;;;;;0BAMrE,8OAAC;gBAAK,WAAU;;kCAGZ,8OAAC;wBACG,WAAU;wBACV,SAAS,IAAM,eAAe;kCAE9B,cAAA,8OAAC,0MAAI;4BAAC,WAAU;;;;;;;;;;;kCAIpB,8OAAC;wBAAI,WAAU;kCACV;;;;;;;;;;;;;;;;;;AAKrB"}},
    {"offset": {"line": 544, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/app/inventory/adjustments/page.tsx"],"sourcesContent":["\"use client\";\r\nimport Sidebar from \"@/components/sidebar2\";\r\nimport { useEffect, useState, useCallback } from \"react\";\r\nimport { Clock, X } from \"lucide-react\";\r\nimport DashboardLayout from \"@/components/DashboardLayout\";\r\n\r\ntype Product = {\r\n    id: string;\r\n    name: string;\r\n    sku: string;\r\n    packSize: string;\r\n    weightValue: string;\r\n    weightUnit: string;\r\n};\r\n\r\ntype Location = { id: string; name: string };\r\n\r\ntype Adjustment = {\r\n    id: string;\r\n    product: Product;\r\n    location: Location;\r\n    type: string;\r\n    quantity: number;\r\n    reason?: string;\r\n    createdAt: string;\r\n};\r\n\r\nexport default function AdjustmentsPage() {\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [locations, setLocations] = useState<Location[]>([]);\r\n    const [adjustments, setAdjustments] = useState<Adjustment[]>([]);\r\n    const [loadingAdjustments, setLoadingAdjustments] = useState(true);\r\n    const [editingAdjustment, setEditingAdjustment] = useState<Adjustment | null>(null);\r\n\r\n    const [form, setForm] = useState({\r\n        productId: \"\",\r\n        locationId: \"\",\r\n        type: \"\",\r\n        quantity: 0,\r\n        reason: \"\",\r\n    });\r\n\r\n    useEffect(() => {\r\n        async function loadData() {\r\n            try {\r\n                const [productsRes, locationsRes, adjustmentsRes] = await Promise.all([\r\n                    fetch(\"/api/products\").then(r => r.json()),\r\n                    fetch(\"/api/locations\").then(r => r.json()),\r\n                    fetch(\"/api/adjustments?limit=10\").then(r => r.json()),\r\n                ]);\r\n                setProducts(Array.isArray(productsRes) ? productsRes : productsRes.products || []);\r\n                setLocations(Array.isArray(locationsRes) ? locationsRes : locationsRes.locations || []);\r\n                setAdjustments(Array.isArray(adjustmentsRes) ? adjustmentsRes : adjustmentsRes.adjustments || []);\r\n            } catch (err) {\r\n                console.error(\"Failed to load data\", err);\r\n            } finally {\r\n                setLoadingAdjustments(false);\r\n            }\r\n        }\r\n        loadData();\r\n    }, []);\r\n\r\n    const selectedProduct = products.find(p => p.id === form.productId);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!form.productId || !form.locationId || !form.type || form.quantity <= 0) {\r\n            alert(\"Please fill all required fields with valid values\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            let res;\r\n            if (editingAdjustment) {\r\n                // Update existing adjustment\r\n                res = await fetch(`/api/adjustments/${editingAdjustment.id}`, {\r\n                    method: \"PUT\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify(form),\r\n                });\r\n            } else {\r\n                // Create new adjustment\r\n                res = await fetch(\"/api/adjustments\", {\r\n                    method: \"POST\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify(form),\r\n                });\r\n            }\r\n\r\n            if (!res.ok) throw new Error(\"Failed to save adjustment\");\r\n\r\n            const data = await res.json();\r\n            alert(editingAdjustment ? \"Adjustment updated!\" : \"Adjustment created!\");\r\n\r\n            if (editingAdjustment) {\r\n                setAdjustments(prev => prev.map(a => a.id === editingAdjustment.id ? data.adjustment : a));\r\n                setEditingAdjustment(null);\r\n            } else {\r\n                setAdjustments(prev => [data.adjustment, ...prev.slice(0, 9)]);\r\n            }\r\n\r\n            setForm({ productId: \"\", locationId: \"\", type: \"\", quantity: 0, reason: \"\" });\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert(\"Failed to save adjustment\");\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (!confirm(\"Are you sure you want to delete this adjustment?\")) return;\r\n        try {\r\n            const res = await fetch(`/api/adjustments/${id}`, { method: \"DELETE\" });\r\n            if (!res.ok) throw new Error(\"Failed to delete adjustment\");\r\n            setAdjustments(prev => prev.filter(a => a.id !== id));\r\n            alert(\"Adjustment deleted!\");\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert(\"Failed to delete adjustment\");\r\n        }\r\n    };\r\n\r\n    const openEditModal = (adjustment: Adjustment) => {\r\n        setEditingAdjustment(adjustment);\r\n        setForm({\r\n            productId: adjustment.product.id,\r\n            locationId: adjustment.location.id,\r\n            type: adjustment.type,\r\n            quantity: adjustment.quantity,\r\n            reason: adjustment.reason || \"\",\r\n        });\r\n    };\r\n\r\n    const closeEditModal = () => {\r\n        setEditingAdjustment(null);\r\n        setForm({ productId: \"\", locationId: \"\", type: \"\", quantity: 0, reason: \"\" });\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-100 overflow-x-auto\">\r\n            <DashboardLayout>\r\n                <div className=\"mb-5\">\r\n                    <h1 className=\"text-2xl font-semibold mb-1\">Create Inventory Adjustment</h1>\r\n                    <p className=\"text-gray-500\">Adjust stock for inventory discrepancies, damage, or gains</p>\r\n                </div>\r\n\r\n                {/* Adjustment Form */}\r\n                <div className=\"bg-white p-6 rounded-lg hover:shadow-lg transition-shadow\">\r\n                    <form onSubmit={handleSubmit} className=\"grid grid-cols-1 xl:grid-cols-2 gap-4\">\r\n                        {/* Product */}\r\n                        <div>\r\n                            <label className=\"block text-sm text-gray-700 mb-2\">Select Product</label>\r\n                            <select\r\n                                required\r\n                                value={form.productId}\r\n                                onChange={e => setForm({ ...form, productId: e.target.value })}\r\n                                className=\"border p-2 w-60 xl:w-full rounded-md\"\r\n                            >\r\n                                <option value=\"\">Select Product</option>\r\n                                {products.map(p => <option key={p.id} value={p.id}>{p.name}</option>)}\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Location */}\r\n                        <div>\r\n                            <label className=\"block text-sm text-gray-700 mb-2\">Select Location</label>\r\n                            <select\r\n                                required\r\n                                value={form.locationId}\r\n                                onChange={e => setForm({ ...form, locationId: e.target.value })}\r\n                                className=\"border p-2 w-60 xl:w-full rounded-md\"\r\n                            >\r\n                                <option value=\"\">Select Location</option>\r\n                                {locations.map(l => <option key={l.id} value={l.id}>{l.name}</option>)}\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Type */}\r\n                        <div>\r\n                            <label className=\"block text-sm text-gray-700 mb-2\">Adjustment Type</label>\r\n                            <select\r\n                                required\r\n                                value={form.type}\r\n                                onChange={e => setForm({ ...form, type: e.target.value })}\r\n                                className=\"border p-2 w-60 xl:w-full rounded-md\"\r\n                            >\r\n                                <option value=\"\">Select Type</option>\r\n                                <option value=\"REBAG_GAIN\">Rebag Gain</option>\r\n                                <option value=\"REBAG_LOSS\">Rebag Loss</option>\r\n                                <option value=\"DAMAGED\">Damaged</option>\r\n                                <option value=\"EXPIRED\">Expired</option>\r\n                                <option value=\"OTHER\">Other</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Quantity */}\r\n                        <div>\r\n                            <label className=\"block text-sm text-gray-700 mb-2\">Quantity</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                min={1}\r\n                                required\r\n                                value={form.quantity}\r\n                                onChange={e => setForm({ ...form, quantity: Number(e.target.value) })}\r\n                                className=\"border p-2 w-60 xl:w-full rounded-md\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Reason */}\r\n                        <div className=\"xl:col-span-2\">\r\n                            <label className=\"block text-sm text-gray-700 mb-2\">Reason (optional)</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={form.reason}\r\n                                onChange={e => setForm({ ...form, reason: e.target.value })}\r\n                                className=\"border p-2 w-full rounded-md\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Actions */}\r\n                        <div className=\"xl:col-span-2 flex flex-col xl:flex-row gap-4 mt-4\">\r\n                            <button\r\n                                type=\"submit\"\r\n                                className=\"w-full xl:w-auto px-6 py-2 rounded-md bg-purple-500 text-white hover:bg-purple-600\"\r\n                            >\r\n                                {editingAdjustment ? \"Update Adjustment\" : \"Create Adjustment\"}\r\n                            </button>\r\n                            {editingAdjustment && (\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={closeEditModal}\r\n                                    className=\"w-full xl:w-auto px-6 py-2 rounded-md border bg-red-400 text-white hover:bg-red-500\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n\r\n                {/* Recent Adjustments */}\r\n                <div className=\"bg-white p-6 mt-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"flex items-center font-semibold mb-4\">\r\n                        <Clock className=\"h-5 w-5 mr-2 text-blue-500\" /> Recent Adjustments\r\n                    </h3>\r\n                    <div className=\"max-h-[420px] overflow-y-auto\">\r\n                        <table className=\"min-w-full\">\r\n                            <thead className=\"sticky top-0 bg-gray-200\">\r\n                                <tr>\r\n                                    <th className=\"p-3 text-left\">#</th>\r\n                                    <th className=\"p-3 text-left\">Product</th>\r\n                                    <th className=\"p-3 text-left\">Location</th>\r\n                                    <th className=\"p-3 text-left\">Type</th>\r\n                                    <th className=\"p-3 text-left\">Quantity</th>\r\n                                    <th className=\"p-3 text-left\">Reason</th>\r\n                                    <th className=\"p-3 text-left\">Date</th>\r\n                                    <th className=\"p-3 text-left\">Actions</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {loadingAdjustments ? (\r\n                                    <tr>\r\n                                        <td colSpan={8} className=\"p-3 text-center text-gray-500\">\r\n                                            Loading adjustment data...\r\n                                        </td>\r\n                                    </tr>\r\n                                ) : adjustments.length === 0 ? (\r\n                                    <tr>\r\n                                        <td colSpan={8} className=\"p-3 text-center\">No recent adjustments.</td>\r\n                                    </tr>\r\n                                ) : (\r\n                                    adjustments.map((a, i) => (\r\n                                        <tr key={a.id} className={i % 2 === 0 ? \"bg-white\" : \"bg-gray-50 hover:bg-yellow-50\"}>\r\n                                            <td className=\"p-3\">{i + 1}</td>\r\n                                            <td className=\"p-3\">{a.product?.name || \"-\"}</td>\r\n                                            <td className=\"p-3\">{a.location?.name || \"-\"}</td>\r\n                                            <td className=\"p-3\">{a.type}</td>\r\n                                            <td className=\"p-3\">{a.quantity}</td>\r\n                                            <td className=\"p-3\">{a.reason || \"-\"}</td>\r\n                                            <td className=\"p-3\">{new Date(a.createdAt).toLocaleString()}</td>\r\n                                            <td className=\"p-3 flex flex-col xl:flex-row gap-2\">\r\n                                                <button\r\n                                                    onClick={() => openEditModal(a)}\r\n                                                    className=\"text-blue-500 hover:underline\"\r\n                                                >\r\n                                                    Edit\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={() => handleDelete(a.id)}\r\n                                                    className=\"text-red-500 hover:underline\"\r\n                                                >\r\n                                                    Delete\r\n                                                </button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </DashboardLayout>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}