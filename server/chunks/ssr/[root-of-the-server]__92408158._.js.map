{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx"],"sourcesContent":["\"use client\";\r\nimport { UserButton } from \"@stackframe/stack\";\r\nimport { BarChart3, Package, Plus, Settings, Info, ShoppingCart, ChevronDown } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport default function Sidebar() {\r\n    const [openItems, setOpenItems] = useState<string[]>([]);\r\n    const currentPath = usePathname();\r\n\r\n    useEffect(() => {\r\n        const activeItem = NAV_ITEMS.find((item) => item.subItems && item.subItems.some((sub) => currentPath === sub.href));\r\n        if (activeItem) {\r\n            setOpenItems([activeItem.name]);\r\n        }\r\n    }, [currentPath]);\r\n\r\n    const NAV_ITEMS = [\r\n        {\r\n            name: \"Dashboard\",\r\n            icon: BarChart3,\r\n            subItems: [\r\n                { name: \"Inventory Dashboard\", href: \"/dashboard/inventory\" },\r\n                { name: \"Sales Dashboard\", href: \"/dashboard/sales\" },\r\n            ],\r\n        },\r\n        {\r\n            name: \"Inventory\",\r\n            icon: Package,\r\n            subItems: [\r\n                { name: \"Inventory Summary\", href: \"/inventory/inventory\" },\r\n                { name: \"Add Product\", href: \"/inventory/add-product\" },\r\n            ],\r\n        },\r\n        { name: \"Sales\", href: \"/sales\", icon: ShoppingCart },\r\n        { name: \"Settings\", href: \"/settings\", icon: Settings },\r\n        { name: \"About\", href: \"/about\", icon: Info },\r\n    ];\r\n\r\n    const toggleItem = (name: string) => {\r\n        if (openItems.includes(name)) {\r\n            setOpenItems(openItems.filter((item) => item !== name));\r\n        } else {\r\n            setOpenItems([...openItems, name]);\r\n        }\r\n    };\r\n\r\n    const isActive = (href: string) => currentPath.startsWith(href);\r\n\r\n    const isParentActive = (subItems?: { href: string }[]) =>\r\n        subItems?.some((sub) => currentPath.startsWith(sub.href));\r\n\r\n    const isOpen = (name: string) => openItems.includes(name);\r\n\r\n    return (\r\n        <div className=\"fixed left-0 top-0 bg-gray-900 text-white w-64 min-h-screen p-6 z-10\">\r\n            <div className=\"mb-8\">\r\n                <div className=\"flex items-center space-x-2 mb-4\">\r\n                    <BarChart3 className=\"w-10 h-10\" />\r\n                    <span className=\"text-md font-semibold\">Inventory Management App</span>\r\n                </div>\r\n            </div>\r\n            <nav className=\"space-y-1\">\r\n                <div className=\"text-sm font-semibold text-gray-400 uppercase\">Inventory</div>\r\n                {NAV_ITEMS.map((item, key) => {\r\n                    const IconComponent = item.icon;\r\n                    const parentActive = isParentActive(item.subItems);\r\n                    const itemActive = isActive(item.href);\r\n\r\n                    if (item.subItems) {\r\n                        return (\r\n                            <div key={key}>\r\n                                <button\r\n                                    onClick={() => toggleItem(item.name)}\r\n                                    className={`flex items-center justify-between w-full py-2 px-3 rounded-lg ${parentActive ? \"bg-purple-50 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                        }`}\r\n                                >\r\n                                    <div className=\"flex items-center space-x-3\">\r\n                                        <IconComponent className=\"w-5 h-5\" />\r\n                                        <span className=\"text-sm\">{item.name}</span>\r\n                                    </div>\r\n                                    <ChevronDown className={`w-4 h-4 transition-transform ${isOpen(item.name) ? \"rotate-180\" : \"\"}`} />\r\n                                </button>\r\n                                {isOpen(item.name) && (\r\n                                    <ul className=\"ml-6 mt-2 space-y-2\">\r\n                                        {item.subItems.map((subItem, subKey) => (\r\n                                            <li key={subKey}>\r\n                                                <Link\r\n                                                    href={subItem.href}\r\n                                                    className={`flex items-center space-x-3 py-2 px-3 rounded-lg text-md ${isActive(subItem.href) ? \"text-white-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                                        }`}\r\n                                                >\r\n                                                    {subItem.name}\r\n                                                </Link>\r\n                                            </li>\r\n                                        ))}\r\n                                    </ul>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    }\r\n\r\n                    return (\r\n                        <Link\r\n                            href={item.href}\r\n                            key={key}\r\n                            className={`flex items-center space-x-3 py-2 px-3 rounded-lg ${itemActive ? \"bg-purple-100 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                }`}\r\n                        >\r\n                            <IconComponent className=\"w-5 h-5\" />\r\n                            <span className=\"text-sm\">{item.name}</span>\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </nav>\r\n            <div className=\"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-700\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <UserButton showUserInfo />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/actions/products.ts"],"sourcesContent":["\"use server\"\n\nimport { getCurrentUser } from \"../auth\";\nimport { prisma } from \"../prisma\";\nimport { z } from \"zod\";\nimport { revalidatePath } from \"next/cache\";\n\nconst ProductSchema = z.object({\n    name: z.string().min(3, \"Name is required\"),\n    sku: z.string().min(1, \"SKU is required\"),\n    price: z.coerce.number().positive(\"Enter a valid price\"),\n    packSize: z.coerce.number().int().positive(\"Enter a valid pack size\"),\n    weightValue: z.coerce.number().positive(\"Enter a valid weight\"),\n    weightUnit: z.string().min(1, \"Weight unit is required (e.g., kg, lbs)\"),\n    location: z.string().min(1, \"Location is required\"),\n    quantity: z.coerce.number().int().min(0, \"Quantity is required\"),\n    lowStockAt: z.coerce.number().int().min(0).optional(),\n});\n\n\nexport async function deleteFromInventory(\n    _prevState: { success: boolean; message: string | null } | null,\n    formData: FormData\n) {\n    const user = await getCurrentUser();\n    if (!user) return { success: false, message: \"Unauthorized\" };\n\n    const id = String(formData.get(\"id\") || \"\");\n    if (!id) return { success: false, message: \"Inventory ID is required\" };\n\n    try {\n        const inventory = await prisma.inventory.findUnique({\n            where: { id, createdBy: user.id },\n            include: { product: true },\n        });\n\n        if (!inventory) {\n            return { success: false, message: \"Inventory not found or unauthorized.\" };\n        }\n\n        await prisma.$transaction([\n            prisma.inventory.delete({ where: { id, createdBy: user.id } }),\n            // Optional: Delete the product if you want to remove it entirely\n            // prisma.productList.delete({\n            //   where: { id: inventory.productId, createdBy: user.id },\n            // }),\n        ]);\n\n        revalidatePath(\"/inventory\");\n        return { success: true, message: `Inventory for \"${inventory.product.name}\" has been deleted!` };\n    } catch (error) {\n        console.error(\"Failed to delete inventory:\", error);\n        return { success: false, message: \"Failed to delete inventory. Try again later.\" };\n    }\n}\n\nexport async function editInventory(prevState: any, formData: FormData) {\n    const id = formData.get(\"id\") as string;\n    const price = Number(formData.get(\"price\"));\n    const quantity = Number(formData.get(\"quantity\"));\n    const lowStockAt = Number(formData.get(\"lowStockAt\"));\n    const locationId = formData.get(\"locationId\") as string;\n\n    try {\n        const inventory = await prisma.inventory.findUnique({\n            where: { id },\n            include: { product: true },\n        });\n        if (!inventory) {\n            return { message: \"Inventory not found.\", success: false };\n        }\n\n        await prisma.$transaction([\n            prisma.productList.update({\n                where: { id: inventory.productId },\n                data: { price },\n            }),\n            prisma.inventory.update({\n                where: { id },\n                data: { quantity, lowStockAt, locationId },\n            }),\n        ]);\n\n        revalidatePath(\"/inventory\");\n        return { message: `Inventory updated for ${inventory.product.name}!`, success: true };\n    } catch (e) {\n        console.error(e);\n        return { message: \"Failed to update inventory.\", success: false };\n    }\n}\n\n//export async function CreateProduct(formData: FormData) {\n\nexport async function CreateProduct(\n    _prevState: { success: boolean; message: string | null; errors?: Record<string, string[]> } | null,\n    formData: FormData\n) {\n    const user = await getCurrentUser();\n    const parsed = ProductSchema.safeParse({\n        name: formData.get(\"name\"),\n        sku: formData.get(\"sku\"),\n        price: formData.get(\"price\"),\n        packSize: formData.get(\"packSize\"),\n        weightValue: formData.get(\"weightValue\"),\n        weightUnit: formData.get(\"weightUnit\"),\n        location: formData.get(\"location\"), // Update this line\n        quantity: formData.get(\"quantity\"),\n        lowStockAt: formData.get(\"lowStockAt\") || undefined,\n    });\n\n    if (!parsed.success) {\n        return { success: false, message: \"Validation failed\", errors: parsed.error.flatten().fieldErrors };\n    }\n\n    try {\n        // Check if product with same SKU exists\n        const existingProduct = await prisma.productList.findUnique({\n            where: { sku: parsed.data.sku },\n        });\n\n        let product;\n        if (existingProduct) {\n            product = existingProduct;\n        } else {\n            // Create product if it doesn't exist\n            product = await prisma.productList.create({\n                data: {\n                    name: parsed.data.name,\n                    sku: parsed.data.sku,\n                    price: parsed.data.price,\n                    packSize: parsed.data.packSize,\n                    weightValue: parsed.data.weightValue,\n                    weightUnit: parsed.data.weightUnit,\n                    createdBy: user.id,\n                },\n            });\n        }\n\n        const location = await prisma.location.findUnique({\n            where: { name: parsed.data.location },\n        });\n\n        if (!location) {\n            return { success: false, message: \"Location not found.\" };\n        }\n\n        // Add to inventory\n        await prisma.inventory.create({\n            data: {\n                product: {\n                    connect: {\n                        id: product.id,\n                    },\n                },\n                location: {\n                    connect: {\n                        id: location.id,\n                    },\n                },\n                quantity: parsed.data.quantity,\n                lowStockAt: parsed.data.lowStockAt || 5,\n                createdBy: user.id,\n            },\n        });\n\n        return { success: true, message: \"Product added to inventory!\" };\n    } catch (error) {\n        console.error(\"Failed to create product:\", error);\n        return { success: false, message: \"Failed to add product.\" };\n    }\n}\n\nexport async function getProducts() {\n    const user = await getCurrentUser();\n    if (!user) return [];\n\n    const products = await prisma.inventory.findMany({\n        where: {\n            createdBy: user.id,\n        },\n        include: {\n            product: true,\n            location: true,\n        },\n        orderBy: {\n            createdAt: \"desc\",\n        },\n        take: 50, // limit list (important for performance)\n    });\n\n    return products;\n}\n"],"names":[],"mappings":";;;;;;;IAwDsB,gBAAA,WAAA,GAAA,IAAA,oRAAA,EAAA,8CAAA,yQAAA,EAAA,KAAA,GAAA,+QAAA,EAAA"}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/EditInventoryButton.tsx"],"sourcesContent":["\"use client\";\r\nimport { useActionState, useEffect, useState } from 'react';\r\nimport { toast } from 'react-hot-toast';\r\nimport { editInventory } from \"@/lib/actions/products\";\r\n\r\ninterface Product {\r\n    name: string;\r\n    price: number;\r\n}\r\n\r\ninterface Location {\r\n    id: string;\r\n    name: string;\r\n}\r\n\r\ninterface InventoryData {\r\n    id: string;\r\n    quantity: number;\r\n    lowStockAt: number;\r\n    location: Location;\r\n    product: Product;\r\n}\r\n\r\ninterface Props {\r\n    inventory: InventoryData;\r\n    locations: Location[];\r\n}\r\n\r\nexport default function EditInventoryButton({ inventory, locations }: Props) {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [state, dispatch, isPending] = useActionState(editInventory, { message: null, success: false });\r\n    const [locationId, setLocationId] = useState(inventory.location.id);\r\n\r\n    useEffect(() => {\r\n        if (state.message) {\r\n            if (state.success) {\r\n                toast.success(state.message);\r\n            } else {\r\n                toast.error(state.message);\r\n            }\r\n            setIsOpen(false);\r\n        }\r\n    }, [state]);\r\n\r\n    return (\r\n        <>\r\n            <button\r\n                className=\"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n                onClick={() => setIsOpen(true)}\r\n                type=\"button\"\r\n            >\r\n                Edit\r\n            </button>\r\n            {isOpen && (\r\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n                    <div className=\"bg-white p-6 rounded-lg w-96\">\r\n                        <h2 className=\"text-lg font-semibold mb-4\">Edit Inventory: {inventory.product.name}</h2>\r\n                        <form action={dispatch} className=\"space-y-4\">\r\n                            <input type=\"hidden\" name=\"id\" value={inventory.id} />\r\n                            <input type=\"hidden\" name=\"locationId\" value={locationId} />\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Product</label>\r\n                                <input type=\"text\" value={inventory.product.name} disabled className=\"w-full px-3 py-2 border rounded bg-gray-100\" />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Price (K)</label>\r\n                                <input type=\"number\" name=\"price\" defaultValue={inventory.product.price} className=\"w-full px-3 py-2 border rounded\" required step=\"0.01\" />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Quantity</label>\r\n                                <input type=\"number\" name=\"quantity\" defaultValue={inventory.quantity} className=\"w-full px-3 py-2 border rounded\" required />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Low Stock At</label>\r\n                                <input type=\"number\" name=\"lowStockAt\" defaultValue={inventory.lowStockAt} className=\"w-full px-3 py-2 border rounded\" required />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Location</label>\r\n                                <select\r\n                                    value={locationId}\r\n                                    onChange={(e) => setLocationId(e.target.value)}\r\n                                    className=\"w-full px-3 py-2 border rounded\"\r\n                                    required\r\n                                >\r\n                                    {locations.map(loc => (\r\n                                        <option key={loc.id} value={loc.id}>\r\n                                            {loc.name}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"flex justify-end gap-2 mt-4\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setIsOpen(false)}\r\n                                    className=\"px-4 py-2 border rounded text-gray-700 hover:bg-gray-100\"\r\n                                    disabled={isPending}\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n                                    disabled={isPending}\r\n                                >\r\n                                    {isPending ? \"Updating inventory...\" : \"Save Changes\"}\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AA4Be,SAAS,oBAAoB,EAAE,SAAS,EAAE,SAAS,EAAS;IACvE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,sPAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,UAAU,UAAU,GAAG,IAAA,4PAAc,EAAC,mNAAa,EAAE;QAAE,SAAS;QAAM,SAAS;IAAM;IACnG,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,sPAAQ,EAAC,UAAU,QAAQ,CAAC,EAAE;IAElE,IAAA,uPAAS,EAAC;QACN,IAAI,MAAM,OAAO,EAAE;YACf,IAAI,MAAM,OAAO,EAAE;gBACf,qMAAK,CAAC,OAAO,CAAC,MAAM,OAAO;YAC/B,OAAO;gBACH,qMAAK,CAAC,KAAK,CAAC,MAAM,OAAO;YAC7B;YACA,UAAU;QACd;IACJ,GAAG;QAAC;KAAM;IAEV,qBACI;;0BACI,mRAAC;gBACG,WAAU;gBACV,SAAS,IAAM,UAAU;gBACzB,MAAK;0BACR;;;;;;YAGA,wBACG,mRAAC;gBAAI,WAAU;0BACX,cAAA,mRAAC;oBAAI,WAAU;;sCACX,mRAAC;4BAAG,WAAU;;gCAA6B;gCAAiB,UAAU,OAAO,CAAC,IAAI;;;;;;;sCAClF,mRAAC;4BAAK,QAAQ;4BAAU,WAAU;;8CAC9B,mRAAC;oCAAM,MAAK;oCAAS,MAAK;oCAAK,OAAO,UAAU,EAAE;;;;;;8CAClD,mRAAC;oCAAM,MAAK;oCAAS,MAAK;oCAAa,OAAO;;;;;;8CAC9C,mRAAC;;sDACG,mRAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAChE,mRAAC;4CAAM,MAAK;4CAAO,OAAO,UAAU,OAAO,CAAC,IAAI;4CAAE,QAAQ;4CAAC,WAAU;;;;;;;;;;;;8CAEzE,mRAAC;;sDACG,mRAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAChE,mRAAC;4CAAM,MAAK;4CAAS,MAAK;4CAAQ,cAAc,UAAU,OAAO,CAAC,KAAK;4CAAE,WAAU;4CAAkC,QAAQ;4CAAC,MAAK;;;;;;;;;;;;8CAEvI,mRAAC;;sDACG,mRAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAChE,mRAAC;4CAAM,MAAK;4CAAS,MAAK;4CAAW,cAAc,UAAU,QAAQ;4CAAE,WAAU;4CAAkC,QAAQ;;;;;;;;;;;;8CAE/H,mRAAC;;sDACG,mRAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAChE,mRAAC;4CAAM,MAAK;4CAAS,MAAK;4CAAa,cAAc,UAAU,UAAU;4CAAE,WAAU;4CAAkC,QAAQ;;;;;;;;;;;;8CAEnI,mRAAC;;sDACG,mRAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAChE,mRAAC;4CACG,OAAO;4CACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;4CAC7C,WAAU;4CACV,QAAQ;sDAEP,UAAU,GAAG,CAAC,CAAA,oBACX,mRAAC;oDAAoB,OAAO,IAAI,EAAE;8DAC7B,IAAI,IAAI;mDADA,IAAI,EAAE;;;;;;;;;;;;;;;;8CAM/B,mRAAC;oCAAI,WAAU;;sDACX,mRAAC;4CACG,MAAK;4CACL,SAAS,IAAM,UAAU;4CACzB,WAAU;4CACV,UAAU;sDACb;;;;;;sDAGD,mRAAC;4CACG,MAAK;4CACL,WAAU;4CACV,UAAU;sDAET,YAAY,0BAA0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS3E"}},
    {"offset": {"line": 573, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/actions/products.ts"],"sourcesContent":["\"use server\"\n\nimport { getCurrentUser } from \"../auth\";\nimport { prisma } from \"../prisma\";\nimport { z } from \"zod\";\nimport { revalidatePath } from \"next/cache\";\n\nconst ProductSchema = z.object({\n    name: z.string().min(3, \"Name is required\"),\n    sku: z.string().min(1, \"SKU is required\"),\n    price: z.coerce.number().positive(\"Enter a valid price\"),\n    packSize: z.coerce.number().int().positive(\"Enter a valid pack size\"),\n    weightValue: z.coerce.number().positive(\"Enter a valid weight\"),\n    weightUnit: z.string().min(1, \"Weight unit is required (e.g., kg, lbs)\"),\n    location: z.string().min(1, \"Location is required\"),\n    quantity: z.coerce.number().int().min(0, \"Quantity is required\"),\n    lowStockAt: z.coerce.number().int().min(0).optional(),\n});\n\n\nexport async function deleteFromInventory(\n    _prevState: { success: boolean; message: string | null } | null,\n    formData: FormData\n) {\n    const user = await getCurrentUser();\n    if (!user) return { success: false, message: \"Unauthorized\" };\n\n    const id = String(formData.get(\"id\") || \"\");\n    if (!id) return { success: false, message: \"Inventory ID is required\" };\n\n    try {\n        const inventory = await prisma.inventory.findUnique({\n            where: { id, createdBy: user.id },\n            include: { product: true },\n        });\n\n        if (!inventory) {\n            return { success: false, message: \"Inventory not found or unauthorized.\" };\n        }\n\n        await prisma.$transaction([\n            prisma.inventory.delete({ where: { id, createdBy: user.id } }),\n            // Optional: Delete the product if you want to remove it entirely\n            // prisma.productList.delete({\n            //   where: { id: inventory.productId, createdBy: user.id },\n            // }),\n        ]);\n\n        revalidatePath(\"/inventory\");\n        return { success: true, message: `Inventory for \"${inventory.product.name}\" has been deleted!` };\n    } catch (error) {\n        console.error(\"Failed to delete inventory:\", error);\n        return { success: false, message: \"Failed to delete inventory. Try again later.\" };\n    }\n}\n\nexport async function editInventory(prevState: any, formData: FormData) {\n    const id = formData.get(\"id\") as string;\n    const price = Number(formData.get(\"price\"));\n    const quantity = Number(formData.get(\"quantity\"));\n    const lowStockAt = Number(formData.get(\"lowStockAt\"));\n    const locationId = formData.get(\"locationId\") as string;\n\n    try {\n        const inventory = await prisma.inventory.findUnique({\n            where: { id },\n            include: { product: true },\n        });\n        if (!inventory) {\n            return { message: \"Inventory not found.\", success: false };\n        }\n\n        await prisma.$transaction([\n            prisma.productList.update({\n                where: { id: inventory.productId },\n                data: { price },\n            }),\n            prisma.inventory.update({\n                where: { id },\n                data: { quantity, lowStockAt, locationId },\n            }),\n        ]);\n\n        revalidatePath(\"/inventory\");\n        return { message: `Inventory updated for ${inventory.product.name}!`, success: true };\n    } catch (e) {\n        console.error(e);\n        return { message: \"Failed to update inventory.\", success: false };\n    }\n}\n\n//export async function CreateProduct(formData: FormData) {\n\nexport async function CreateProduct(\n    _prevState: { success: boolean; message: string | null; errors?: Record<string, string[]> } | null,\n    formData: FormData\n) {\n    const user = await getCurrentUser();\n    const parsed = ProductSchema.safeParse({\n        name: formData.get(\"name\"),\n        sku: formData.get(\"sku\"),\n        price: formData.get(\"price\"),\n        packSize: formData.get(\"packSize\"),\n        weightValue: formData.get(\"weightValue\"),\n        weightUnit: formData.get(\"weightUnit\"),\n        location: formData.get(\"location\"), // Update this line\n        quantity: formData.get(\"quantity\"),\n        lowStockAt: formData.get(\"lowStockAt\") || undefined,\n    });\n\n    if (!parsed.success) {\n        return { success: false, message: \"Validation failed\", errors: parsed.error.flatten().fieldErrors };\n    }\n\n    try {\n        // Check if product with same SKU exists\n        const existingProduct = await prisma.productList.findUnique({\n            where: { sku: parsed.data.sku },\n        });\n\n        let product;\n        if (existingProduct) {\n            product = existingProduct;\n        } else {\n            // Create product if it doesn't exist\n            product = await prisma.productList.create({\n                data: {\n                    name: parsed.data.name,\n                    sku: parsed.data.sku,\n                    price: parsed.data.price,\n                    packSize: parsed.data.packSize,\n                    weightValue: parsed.data.weightValue,\n                    weightUnit: parsed.data.weightUnit,\n                    createdBy: user.id,\n                },\n            });\n        }\n\n        const location = await prisma.location.findUnique({\n            where: { name: parsed.data.location },\n        });\n\n        if (!location) {\n            return { success: false, message: \"Location not found.\" };\n        }\n\n        // Add to inventory\n        await prisma.inventory.create({\n            data: {\n                product: {\n                    connect: {\n                        id: product.id,\n                    },\n                },\n                location: {\n                    connect: {\n                        id: location.id,\n                    },\n                },\n                quantity: parsed.data.quantity,\n                lowStockAt: parsed.data.lowStockAt || 5,\n                createdBy: user.id,\n            },\n        });\n\n        return { success: true, message: \"Product added to inventory!\" };\n    } catch (error) {\n        console.error(\"Failed to create product:\", error);\n        return { success: false, message: \"Failed to add product.\" };\n    }\n}\n\nexport async function getProducts() {\n    const user = await getCurrentUser();\n    if (!user) return [];\n\n    const products = await prisma.inventory.findMany({\n        where: {\n            createdBy: user.id,\n        },\n        include: {\n            product: true,\n            location: true,\n        },\n        orderBy: {\n            createdAt: \"desc\",\n        },\n        take: 50, // limit list (important for performance)\n    });\n\n    return products;\n}\n"],"names":[],"mappings":";;;;;;;IAoBsB,sBAAA,WAAA,GAAA,IAAA,oRAAA,EAAA,8CAAA,yQAAA,EAAA,KAAA,GAAA,+QAAA,EAAA"}},
    {"offset": {"line": 585, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/DeleteInventoryButton.tsx"],"sourcesContent":["\"use client\";\r\nimport { useActionState, useEffect, useState } from 'react';\r\nimport { toast } from 'react-hot-toast';\r\nimport { deleteFromInventory } from \"@/lib/actions/products\";\r\n\r\ninterface Product {\r\n    name: string;\r\n    price: number;\r\n}\r\n\r\ninterface Location {\r\n    id: string;\r\n    name: string;\r\n}\r\n\r\ninterface InventoryData {\r\n    id: string;\r\n    quantity: number;\r\n    lowStockAt: number;\r\n    location: Location;\r\n    product: Product;\r\n}\r\n\r\nexport default function DeleteFromInventoryButton({ inventory }: { inventory: InventoryData }) {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [state, dispatch, isPending] = useActionState(deleteFromInventory, { message: null, success: false });\r\n\r\n    useEffect(() => {\r\n        if (state.message) {\r\n            if (state.success) {\r\n                toast.success(state.message);\r\n            } else {\r\n                toast.error(state.message);\r\n            }\r\n            setIsOpen(false);\r\n        }\r\n    }, [state]);\r\n\r\n    return (\r\n        <>\r\n            <button\r\n                className=\"px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600\"\r\n                onClick={() => setIsOpen(true)}\r\n                type=\"button\"\r\n            >\r\n                Delete\r\n            </button>\r\n            {isOpen && (\r\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n                    <div className=\"bg-white p-6 rounded-lg w-96\">\r\n                        <h2 className=\"text-lg font-semibold mb-4\">Delete Inventory: {inventory.product.name}</h2>\r\n                        <p className=\"mb-4 text-gray-600\">\r\n                            Location: <span className=\"font-medium\">{inventory.location.name}</span><br />\r\n                            Are you sure you want to delete this inventory item? This action cannot be undone.\r\n                        </p>\r\n                        <form action={dispatch} className=\"space-y-4\">\r\n                            <input type=\"hidden\" name=\"id\" value={inventory.id} />\r\n                            <div className=\"flex justify-end gap-2 mt-4\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setIsOpen(false)}\r\n                                    className=\"px-4 py-2 border rounded text-gray-700 hover:bg-gray-100\"\r\n                                    disabled={isPending}\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600\"\r\n                                    disabled={isPending}\r\n                                >\r\n                                    {isPending ? \"Deleting...\" : \"Delete\"}\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAuBe,SAAS,0BAA0B,EAAE,SAAS,EAAgC;IACzF,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,sPAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,UAAU,UAAU,GAAG,IAAA,4PAAc,EAAC,yNAAmB,EAAE;QAAE,SAAS;QAAM,SAAS;IAAM;IAEzG,IAAA,uPAAS,EAAC;QACN,IAAI,MAAM,OAAO,EAAE;YACf,IAAI,MAAM,OAAO,EAAE;gBACf,qMAAK,CAAC,OAAO,CAAC,MAAM,OAAO;YAC/B,OAAO;gBACH,qMAAK,CAAC,KAAK,CAAC,MAAM,OAAO;YAC7B;YACA,UAAU;QACd;IACJ,GAAG;QAAC;KAAM;IAEV,qBACI;;0BACI,mRAAC;gBACG,WAAU;gBACV,SAAS,IAAM,UAAU;gBACzB,MAAK;0BACR;;;;;;YAGA,wBACG,mRAAC;gBAAI,WAAU;0BACX,cAAA,mRAAC;oBAAI,WAAU;;sCACX,mRAAC;4BAAG,WAAU;;gCAA6B;gCAAmB,UAAU,OAAO,CAAC,IAAI;;;;;;;sCACpF,mRAAC;4BAAE,WAAU;;gCAAqB;8CACpB,mRAAC;oCAAK,WAAU;8CAAe,UAAU,QAAQ,CAAC,IAAI;;;;;;8CAAQ,mRAAC;;;;;gCAAK;;;;;;;sCAGlF,mRAAC;4BAAK,QAAQ;4BAAU,WAAU;;8CAC9B,mRAAC;oCAAM,MAAK;oCAAS,MAAK;oCAAK,OAAO,UAAU,EAAE;;;;;;8CAClD,mRAAC;oCAAI,WAAU;;sDACX,mRAAC;4CACG,MAAK;4CACL,SAAS,IAAM,UAAU;4CACzB,WAAU;4CACV,UAAU;sDACb;;;;;;sDAGD,mRAAC;4CACG,MAAK;4CACL,WAAU;4CACV,UAAU;sDAET,YAAY,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASjE"}},
    {"offset": {"line": 735, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/LocationDropdown.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\n\r\ninterface Location {\r\n    id: string;\r\n    name: string;\r\n}\r\ninterface Props {\r\n    uniqueLocations: Location[];\r\n    selectedLocations: string[];\r\n    onLocationsChange: (locations: string[]) => void;\r\n}\r\n\r\nexport default function LocationDropdown({\r\n    uniqueLocations,\r\n    selectedLocations,\r\n    onLocationsChange,\r\n}: Props) {\r\n    const [locations, setLocations] = useState<string[]>(selectedLocations);\r\n    const [open, setOpen] = useState(false);\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        setLocations(selectedLocations);\r\n    }, [selectedLocations]);\r\n\r\n    const toggleLocation = (name: string) => {\r\n        const newLocations = locations.includes(name)\r\n            ? locations.filter((l) => l !== name)\r\n            : [...locations, name];\r\n        setLocations(newLocations);\r\n        onLocationsChange(newLocations);\r\n    };\r\n\r\n    const clearAll = () => {\r\n        setLocations([]);\r\n        onLocationsChange([]);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                setOpen(false);\r\n            }\r\n        };\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"relative\" ref={dropdownRef}>\r\n            <div>\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={() => setOpen((prev) => !prev)}\r\n                    aria-expanded={open}\r\n                    className=\"flex items-center justify-between w-full h-8 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500\"\r\n                >\r\n                    <span>\r\n                        {locations.length === 0 ? \"Select location\" : `${locations.length} selected`}\r\n                    </span>\r\n                    <svg className=\"h-4 w-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n                    </svg>\r\n                </button>\r\n                {open && (\r\n                    <div className=\"absolute z-20 mt-2 w-64 bg-white border border-purple-300 rounded-lg hover:shadow-lg p-3\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={clearAll}\r\n                            className=\"text-purple-600 text-sm font-medium mb-2 hover:underline text-left cursor-pointer\"\r\n                        >\r\n                            Clear Selection\r\n                        </button>\r\n                        <div className=\"flex flex-col gap-2 max-h-48 overflow-y-auto\">\r\n                            {uniqueLocations.length === 0 ? (\r\n                                <p className=\"text-sm text-gray-500\">No locations available.</p>\r\n                            ) : (\r\n                                uniqueLocations.map((loc) => (\r\n                                    <label key={loc.id} className=\"flex items-center gap-2 text-sm text-gray-700 cursor-pointer hover:bg-gray-100 p-1 rounded\">\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            checked={locations.includes(loc.name)}\r\n                                            onChange={() => toggleLocation(loc.name)}\r\n                                            className=\"h-4 w-4 text-purple-600 border-gray-300 rounded cursor-pointer focus:ring-0\"\r\n                                        />\r\n                                        {loc.name}\r\n                                    </label>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            {locations.map((name) => (\r\n                <input key={name} type=\"hidden\" name=\"locationName\" value={name} />\r\n            ))}\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;AADA;;;AAae,SAAS,iBAAiB,EACrC,eAAe,EACf,iBAAiB,EACjB,iBAAiB,EACb;IACJ,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sPAAQ,EAAW;IACrD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,sPAAQ,EAAC;IACjC,MAAM,cAAc,IAAA,oPAAM,EAAiB;IAE3C,IAAA,uPAAS,EAAC;QACN,aAAa;IACjB,GAAG;QAAC;KAAkB;IAEtB,MAAM,iBAAiB,CAAC;QACpB,MAAM,eAAe,UAAU,QAAQ,CAAC,QAClC,UAAU,MAAM,CAAC,CAAC,IAAM,MAAM,QAC9B;eAAI;YAAW;SAAK;QAC1B,aAAa;QACb,kBAAkB;IACtB;IAEA,MAAM,WAAW;QACb,aAAa,EAAE;QACf,kBAAkB,EAAE;IACxB;IAEA,IAAA,uPAAS,EAAC;QACN,MAAM,qBAAqB,CAAC;YACxB,IAAI,YAAY,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBAC5E,QAAQ;YACZ;QACJ;QACA,SAAS,gBAAgB,CAAC,aAAa;QACvC,OAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;IAC3D,GAAG,EAAE;IAEL,qBACI,mRAAC;QAAI,WAAU;QAAW,KAAK;;0BAC3B,mRAAC;;kCACG,mRAAC;wBACG,MAAK;wBACL,SAAS,IAAM,QAAQ,CAAC,OAAS,CAAC;wBAClC,iBAAe;wBACf,WAAU;;0CAEV,mRAAC;0CACI,UAAU,MAAM,KAAK,IAAI,oBAAoB,GAAG,UAAU,MAAM,CAAC,SAAS,CAAC;;;;;;0CAEhF,mRAAC;gCAAI,WAAU;gCAAwB,MAAK;gCAAO,QAAO;gCAAe,SAAQ;0CAC7E,cAAA,mRAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAG,GAAE;;;;;;;;;;;;;;;;;oBAG5E,sBACG,mRAAC;wBAAI,WAAU;;0CACX,mRAAC;gCACG,MAAK;gCACL,SAAS;gCACT,WAAU;0CACb;;;;;;0CAGD,mRAAC;gCAAI,WAAU;0CACV,gBAAgB,MAAM,KAAK,kBACxB,mRAAC;oCAAE,WAAU;8CAAwB;;;;;2CAErC,gBAAgB,GAAG,CAAC,CAAC,oBACjB,mRAAC;wCAAmB,WAAU;;0DAC1B,mRAAC;gDACG,MAAK;gDACL,SAAS,UAAU,QAAQ,CAAC,IAAI,IAAI;gDACpC,UAAU,IAAM,eAAe,IAAI,IAAI;gDACvC,WAAU;;;;;;4CAEb,IAAI,IAAI;;uCAPD,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;YAezC,UAAU,GAAG,CAAC,CAAC,qBACZ,mRAAC;oBAAiB,MAAK;oBAAS,MAAK;oBAAe,OAAO;mBAA/C;;;;;;;;;;;AAI5B"}},
    {"offset": {"line": 898, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/ClearFiltersButton.tsx"],"sourcesContent":["\"use client\";\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface Props {\r\n    onClear?: () => void;\r\n}\r\n\r\nexport default function ClearFiltersButton({ onClear }: Props) {\r\n    const router = useRouter();\r\n\r\n    const handleClearFilters = () => {\r\n        if (onClear) onClear();\r\n        router.push('/inventory/inventory', { shallow: true });\r\n    };\r\n\r\n    return (\r\n        <button\r\n            type=\"button\"\r\n            onClick={handleClearFilters}\r\n            className=\"w-35 h-8 px-2 py-1 bg-red-500 text-white rounded-sm hover:bg-red-600 cursor-pointer\"\r\n        >\r\n            Clear Filters\r\n        </button>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;AADA;;;AAOe,SAAS,mBAAmB,EAAE,OAAO,EAAS;IACzD,MAAM,SAAS,IAAA,oLAAS;IAExB,MAAM,qBAAqB;QACvB,IAAI,SAAS;QACb,OAAO,IAAI,CAAC,wBAAwB;YAAE,SAAS;QAAK;IACxD;IAEA,qBACI,mRAAC;QACG,MAAK;QACL,SAAS;QACT,WAAU;kBACb;;;;;;AAIT"}},
    {"offset": {"line": 930, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,2MAAO,EAAC,IAAA,kLAAI,EAAC;AACtB"}},
    {"offset": {"line": 945, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,wPAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,mRAAC;QACC,MAAM;QACN,WAAW,IAAA,8JAAE,EACX,2WACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 973, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/InventoryFilters.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport LocationDropdown from \"@/components/LocationDropdown\";\r\nimport ClearFiltersButton from \"@/components/ClearFiltersButton\";\r\nimport { Input } from \"@/components/ui/input\";\r\n\r\ninterface Props {\r\n    uniqueLocations: { id: string; name: string }[];\r\n    initialQ: string;\r\n    initialLocations: string[];\r\n}\r\n\r\nexport default function InventoryFilters({ uniqueLocations, initialQ, initialLocations }: Props) {\r\n    const router = useRouter();\r\n    const [q, setQ] = useState(initialQ);\r\n    const [locations, setLocations] = useState<string[]>(initialLocations);\r\n\r\n    const handleLocationsChange = (newLocations: string[]) => {\r\n        setLocations(newLocations);\r\n    };\r\n\r\n    const handleClearFilters = () => {\r\n        setQ(\"\");\r\n        setLocations([]);\r\n        router.push(\"/inventory\", { shallow: true });\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white border border-gray-200 rounded-lg p-2\">\r\n            <form action=\"/inventory/inventory\" method=\"GET\" className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                    <div>\r\n                        <Input\r\n                            name=\"q\"\r\n                            placeholder=\"Search Products...\"\r\n                            value={q}\r\n                            onChange={(e) => setQ(e.target.value)}\r\n                            className=\"w-full h-8 px-2 py-1 border border-gray-300 rounded-lg focus:outline focus:ring-2 focus:ring-gray-500\"\r\n                        />\r\n                    </div>\r\n                    <LocationDropdown\r\n                        uniqueLocations={uniqueLocations}\r\n                        selectedLocations={locations}\r\n                        onLocationsChange={handleLocationsChange}\r\n                    />\r\n                    <div className=\"\">\r\n                        <button type=\"submit\" className=\"w-35 h-8 px-2 py-1 mr-4 bg-purple-600 text-white rounded-sm hover:bg-purple-700 cursor-pointer\">\r\n                            Apply Filters\r\n                        </button>\r\n                        <ClearFiltersButton onClear={handleClearFilters} />\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;AAae,SAAS,iBAAiB,EAAE,eAAe,EAAE,QAAQ,EAAE,gBAAgB,EAAS;IAC3F,MAAM,SAAS,IAAA,oLAAS;IACxB,MAAM,CAAC,GAAG,KAAK,GAAG,IAAA,sPAAQ,EAAC;IAC3B,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sPAAQ,EAAW;IAErD,MAAM,wBAAwB,CAAC;QAC3B,aAAa;IACjB;IAEA,MAAM,qBAAqB;QACvB,KAAK;QACL,aAAa,EAAE;QACf,OAAO,IAAI,CAAC,cAAc;YAAE,SAAS;QAAK;IAC9C;IAEA,qBACI,mRAAC;QAAI,WAAU;kBACX,cAAA,mRAAC;YAAK,QAAO;YAAuB,QAAO;YAAM,WAAU;sBACvD,cAAA,mRAAC;gBAAI,WAAU;;kCACX,mRAAC;kCACG,cAAA,mRAAC,+KAAK;4BACF,MAAK;4BACL,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,KAAK,EAAE,MAAM,CAAC,KAAK;4BACpC,WAAU;;;;;;;;;;;kCAGlB,mRAAC,sLAAgB;wBACb,iBAAiB;wBACjB,mBAAmB;wBACnB,mBAAmB;;;;;;kCAEvB,mRAAC;wBAAI,WAAU;;0CACX,mRAAC;gCAAO,MAAK;gCAAS,WAAU;0CAAiG;;;;;;0CAGjI,mRAAC,wLAAkB;gCAAC,SAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMrD"}},
    {"offset": {"line": 1103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/UnitToKg.ts"],"sourcesContent":["export const unitToKg = (weight: number, unit?: string | null) => {\r\n    const map: Record<string, number> = {\r\n        kg: 1,\r\n        g: 0.001,\r\n        mg: 0.000001,\r\n        lb: 0.453592,\r\n        oz: 0.0283495,\r\n        ton: 1000,\r\n        // add more if needed\r\n    };\r\n\r\n    const u = typeof unit === \"string\" ? unit.toLowerCase() : \"\";\r\n    const factor = map[u] ?? 1; // fallback to 1 if unknown\r\n\r\n    return weight * factor;\r\n};\r\n\r\n\r\n// HOW TO USE //\r\n\r\n//import { unitToKg } from \"@/lib/unitToKg\";\r\n\r\n// Inside your aggregate calculation:\r\n//map[p.id].tonnage +=\r\n//    (item.quantity * p.packSize * unitToKg(item.product.weightValue, item.product.weightUnit)) / 1000;\r\n\r\n"],"names":[],"mappings":";;;;AAAO,MAAM,WAAW,CAAC,QAAgB;IACrC,MAAM,MAA8B;QAChC,IAAI;QACJ,GAAG;QACH,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,KAAK;IAET;IAEA,MAAM,IAAI,OAAO,SAAS,WAAW,KAAK,WAAW,KAAK;IAC1D,MAAM,SAAS,GAAG,CAAC,EAAE,IAAI,GAAG,2BAA2B;IAEvD,OAAO,SAAS;AACpB,GAGA,gBAAgB;CAEhB,4CAA4C;CAE5C,qCAAqC;CACrC,sBAAsB;CACtB,wGAAwG"}},
    {"offset": {"line": 1128, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/InventorySummary.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMemo, useState, useRef, useEffect } from \"react\";\r\nimport { Package, ArrowUpDown } from \"lucide-react\";\r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\nimport { unitToKg } from \"@/lib/UnitToKg\";\r\nimport Link from 'next/link';\r\n\r\ntype SortKey =\r\n    | \"name\"\r\n    | \"quantity\"\r\n    | \"stockValue\"\r\n    | \"tonnage\"\r\n    | \"price\"\r\n    | \"lowStockAt\";\r\n\r\ninterface InventoryItem {\r\n    id: string;\r\n    quantity: number;\r\n    lowStockAt: number;\r\n    expiryDate?: Date | null;\r\n    updatedAt: Date;\r\n    product: {\r\n        id: string;\r\n        name: string;\r\n        sku: string;\r\n        price: number;\r\n        packSize: number;\r\n        weightValue: number;\r\n        weightUnit: string;\r\n        category?: { name: string } | null;\r\n    };\r\n    location: { name: string };\r\n}\r\n\r\ninterface Sale {\r\n    productId: string;\r\n    quantity: number;\r\n    saleDate: Date;\r\n}\r\n\r\ninterface Props {\r\n    inventory: InventoryItem[];\r\n    sales: Sale[];\r\n    title: string;\r\n    iconColor: string;\r\n}\r\n\r\nexport default function InventorySummary({\r\n    inventory,\r\n    sales = [],\r\n    title,\r\n    iconColor,\r\n}: Props) {\r\n    const [sortKey, setSortKey] = useState<SortKey>(\"quantity\");\r\n    const [sortDir, setSortDir] = useState<\"asc\" | \"desc\">(\"desc\");\r\n\r\n    const [startDate, setStartDate] = useState<Date | null>(null);\r\n    const [endDate, setEndDate] = useState<Date | null>(null);\r\n    const [selectedLocation, setSelectedLocation] = useState(\"all\");\r\n    const [selectedCategory, setSelectedCategory] = useState(\"all\");\r\n\r\n    const [showProducts, setShowProducts] = useState(false);\r\n    const [selectedProducts, setSelectedProducts] = useState<string[]>([]);\r\n    const productRef = useRef<HTMLDivElement>(null);\r\n\r\n\r\n    /* ---------------- FILTER OPTIONS ---------------- */\r\n    const locations = useMemo(\r\n        () => Array.from(new Set(inventory.map((i) => i.location.name))),\r\n        [inventory]\r\n    );\r\n\r\n    const categories = useMemo(\r\n        () =>\r\n            Array.from(\r\n                new Set(\r\n                    inventory.map((i) => i.product.category)\r\n                )\r\n            ),\r\n        [inventory]\r\n    );\r\n    const products = useMemo(\r\n        () =>\r\n            Array.from(\r\n                new Set(\r\n                    inventory.map((i) => i.product.name)\r\n                )\r\n            ),\r\n        [inventory]\r\n    );\r\n\r\n    // Close product dropdown\r\n\r\n    useEffect(() => {\r\n        const handler = (e: MouseEvent) => {\r\n            if (productRef.current && !productRef.current.contains(e.target as Node)) {\r\n                setShowProducts(false);\r\n            }\r\n        };\r\n        document.addEventListener(\"mousedown\", handler);\r\n        return () => document.removeEventListener(\"mousedown\", handler);\r\n    }, []);\r\n\r\n\r\n    /* ---------------- FILTER INVENTORY ---------------- */\r\n    const filteredInventory = useMemo(() => {\r\n        return inventory.filter((i) => {\r\n            if (startDate && i.updatedAt < startDate) return false;\r\n            if (endDate && i.updatedAt > endDate) return false;\r\n            if (selectedLocation !== \"all\" && i.location.name !== selectedLocation)\r\n                return false;\r\n            if (\r\n                selectedCategory !== \"all\" &&\r\n                (i.product.category ?? \"Uncategorized\") !== selectedCategory\r\n            )\r\n                return false;\r\n            if (\r\n                selectedProducts.length > 0 &&\r\n                !selectedProducts.includes(i.product.name)\r\n            )\r\n                return false;\r\n            return true;\r\n        });\r\n    }, [inventory, startDate, endDate, selectedLocation, selectedCategory, selectedProducts]);\r\n\r\n    /* ---------------- SALES MAP ---------------- */\r\n    const salesMap = useMemo(() => {\r\n        const map: Record<string, number> = {};\r\n        sales.forEach((s) => {\r\n            map[s.productId] = (map[s.productId] || 0) + s.quantity;\r\n        });\r\n        return map;\r\n    }, [sales]);\r\n\r\n    /* ---------------- AGGREGATE ---------------- */\r\n    const data = useMemo(() => {\r\n        const map: Record<string, any> = {};\r\n\r\n        filteredInventory.forEach((item) => {\r\n            const p = item.product;\r\n            if (!map[p.id]) {\r\n                map[p.id] = {\r\n                    id: p.id,\r\n                    name: p.name,\r\n                    sku: p.sku,\r\n                    packSize: p.packSize,\r\n                    weightValue: p.weightValue,\r\n                    weightUnit: p.weightUnit,\r\n                    quantity: 0,\r\n                    price: p.price,\r\n                    value: 0,\r\n                    tonnage: 0,\r\n                    lowStockAt: item.lowStockAt,\r\n                };\r\n            }\r\n\r\n            map[p.id].quantity += item.quantity;\r\n            map[p.id].value += item.quantity * p.price;\r\n            map[p.id].tonnage += (item.quantity * p.packSize * unitToKg(item.product.weightValue, item.product.weightUnit)) / 1000;\r\n        });\r\n\r\n        return Object.values(map);\r\n    }, [filteredInventory]);\r\n\r\n    /* ---------------- SORT ---------------- */\r\n    const sortedData = useMemo(() => {\r\n        return [...data].sort((a, b) => {\r\n            const aVal = a[sortKey];\r\n            const bVal = b[sortKey];\r\n            return sortDir === \"asc\" ? aVal - bVal : bVal - aVal;\r\n        });\r\n    }, [data, sortKey, sortDir]);\r\n\r\n    const toggleSort = (key: SortKey) => {\r\n        if (key === sortKey) {\r\n            setSortDir(sortDir === \"asc\" ? \"desc\" : \"asc\");\r\n        } else {\r\n            setSortKey(key);\r\n            setSortDir(\"desc\");\r\n        }\r\n    };\r\n\r\n    /* ---------------- HEADER CELL ---------------- */\r\n    const Header = ({ label, column }: { label: string; column: SortKey }) => (\r\n        <th\r\n            onClick={() => toggleSort(column)}\r\n            className=\"py-2 px-3 cursor-pointer border-r hover:text-blue-600\"\r\n        >\r\n            <span className=\"inline-flex items-center gap-1\">\r\n                {label}\r\n                <ArrowUpDown className=\"w-3 h-3 opacity-60\" />\r\n            </span>\r\n        </th>\r\n    );\r\n\r\n    /* ---------------- EXPORT CSV ---------------- */\r\n    const exportCSV = () => {\r\n        const headers = [\r\n            \"Product\",\r\n            \"Product ID\",\r\n            \"SKU\",\r\n            \"Pack Size\",\r\n            \"Weight Value\",\r\n            \"Weight Unit\",\r\n            \"Quantity\",\r\n            \"Tonnage\",\r\n            \"Price\",\r\n            \"Value\",\r\n            \"Low Stock At\",\r\n            \"Status\",\r\n        ];\r\n\r\n        const rows = sortedData.map((p) => {\r\n            const status =\r\n                p.quantity === 0\r\n                    ? \"Out of Stock\"\r\n                    : p.quantity < p.lowStockAt\r\n                        ? \"Low Stock\"\r\n                        : \"Available\";\r\n\r\n            return [\r\n                p.name,\r\n                p.id,\r\n                p.sku,\r\n                p.packSize,\r\n                p.weightValue,\r\n                p.weightUnit,\r\n                p.quantity,\r\n                p.tonnage.toFixed(2),\r\n                p.price.toFixed(2),\r\n                p.value.toFixed(2),\r\n                p.lowStockAt,\r\n                status,\r\n            ];\r\n        });\r\n\r\n\r\n        const csv = [headers, ...rows].map((r) => r.join(\",\")).join(\"\\n\");\r\n        const blob = new Blob([csv], { type: \"text/csv\" });\r\n        const url = URL.createObjectURL(blob);\r\n\r\n        const a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = \"inventory_summary.csv\";\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    /* ---------------- EXPORT PDF ---------------- */\r\n    const exportPDF = () => {\r\n        const doc = new jsPDF();\r\n        const start = startDate ? startDate.toLocaleDateString() : \"N/A\";\r\n        const end = endDate ? endDate.toLocaleDateString() : \"N/A\";\r\n\r\n        doc.setFontSize(16);\r\n        doc.text(title, doc.internal.pageSize.getWidth() / 2, 15, { align: \"center\" });\r\n\r\n        doc.setFontSize(10);\r\n        doc.text(`Date Range: ${start} - ${end}`, doc.internal.pageSize.getWidth() / 2, 23, {\r\n            align: \"center\",\r\n        });\r\n\r\n        autoTable(doc, {\r\n            startY: 30,\r\n            head: [\r\n                [\r\n                    \"#\",\r\n                    \"Product\",\r\n                    \"Product ID\",\r\n                    \"SKU\",\r\n                    \"Pack Size\",\r\n                    \"Weight Value\",\r\n                    \"Weight Unit\",\r\n                    \"Quantity\",\r\n                    \"Tonnage\",\r\n                    \"Price\",\r\n                    \"Value\",\r\n                    \"Low Stock At\",\r\n                    \"Status\",\r\n                ],\r\n            ],\r\n            body: sortedData.map((p, i) => {\r\n                const status =\r\n                    p.quantity === 0\r\n                        ? \"Out of Stock\"\r\n                        : p.quantity < p.lowStockAt\r\n                            ? \"Low Stock\"\r\n                            : \"Available\";\r\n\r\n                return [\r\n                    i + 1,\r\n                    p.name,\r\n                    p.id,\r\n                    p.sku,\r\n                    p.packSize,\r\n                    p.weightValue,\r\n                    p.weightUnit,\r\n                    p.quantity,\r\n                    p.tonnage.toFixed(2),\r\n                    p.price.toFixed(2),\r\n                    p.value.toFixed(2),\r\n                    p.lowStockAt,\r\n                    status,\r\n                ];\r\n            }),\r\n            styles: { fontSize: 9, cellPadding: 4 },\r\n            headStyles: { fillColor: [100, 100, 100], textColor: 255 },\r\n            alternateRowStyles: { fillColor: [245, 245, 245] },\r\n        });\r\n\r\n        doc.save(\"inventory_summary.pdf\");\r\n    };\r\n\r\n    /* ---------------- RENDER ---------------- */\r\n    return (\r\n        <div className=\"bg-white p-4 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <Package className={`h-5 w-5 ${iconColor}`} />\r\n                {title}\r\n            </h3>\r\n\r\n            {/* FILTER BAR */}\r\n            <div className=\"flex flex-wrap justify-between items-center mb-4 gap-2\">\r\n                <div className=\"flex h-8 gap-5 px-2 py-1 flex-wrap\">\r\n                    <label className=\"flex items-center gap-2\">\r\n                        Select Location:\r\n                        <select\r\n                            value={selectedLocation}\r\n                            onChange={(e) => setSelectedLocation(e.target.value)}\r\n                            className=\"border rounded px-2 py-1 text-sm hover:bg-gray-100 cursor-pointer\"\r\n                        >\r\n                            <option value=\"all\">All</option>\r\n                            {locations.map((loc) => (\r\n                                <option key={loc} value={loc}>\r\n                                    {loc}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </label>\r\n\r\n                    <label className=\"flex items-center gap-2\">\r\n                        Select Category:\r\n                        <select\r\n                            value={selectedCategory}\r\n                            onChange={(e) => setSelectedCategory(e.target.value)}\r\n                            className=\"border rounded px-2 py-1 text-sm hover:bg-gray-100 cursor-pointer\"\r\n                        >\r\n                            <option value=\"all\">All</option>\r\n                            {categories.map((cat) => (\r\n                                <option key={cat} value={cat}>\r\n                                    {cat}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </label>\r\n                    <div ref={productRef} className=\"relative inline-block whitespace-nowrap\">\r\n                        <span className=\"mr-2 text-sm\">Select Product:</span>\r\n\r\n                        <button\r\n                            onClick={() => setShowProducts((v) => !v)}\r\n                            className=\"px-3 h-8 border rounded bg-white hover:bg-gray-100 text-sm\"\r\n                        >\r\n                            {selectedProducts.length === 0\r\n                                ? \"All Products\"\r\n                                : `${selectedProducts.length} selected`}\r\n                        </button>\r\n\r\n                        {showProducts && (\r\n                            <div className=\"absolute left-0 mt-2 bg-white border rounded shadow-lg z-50 w-64 max-h-56 overflow-y-auto p-2\">\r\n\r\n                                <button\r\n                                    onClick={() => setSelectedProducts([])}\r\n                                    className=\"text-xs text-blue-600 hover:underline mb-2 block\"\r\n                                >\r\n                                    Clear Selection\r\n                                </button>\r\n\r\n                                {products.map((p) => (\r\n                                    <label\r\n                                        key={p}\r\n                                        className=\"flex items-center gap-2 px-2 py-1 rounded hover:bg-gray-100 cursor-pointer text-sm\"\r\n                                    >\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            checked={selectedProducts.includes(p)}\r\n                                            onChange={(e) => {\r\n                                                if (e.target.checked) {\r\n                                                    setSelectedProducts([...selectedProducts, p]);\r\n                                                } else {\r\n                                                    setSelectedProducts(\r\n                                                        selectedProducts.filter((x) => x !== p)\r\n                                                    );\r\n                                                }\r\n                                            }}\r\n                                            className=\"w-4 h-4\"\r\n                                        />\r\n                                        {p}\r\n                                    </label>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex h-8 gap-2 px-2 py-1 flex-wrap\">\r\n                    <button\r\n                        onClick={exportCSV}\r\n                        className=\"text-sm px-2 py-1 rounded border hover:bg-gray-100\"\r\n                    >\r\n                        Export CSV\r\n                    </button>\r\n                    <button\r\n                        onClick={exportPDF}\r\n                        className=\"text-sm px-2 py-1 rounded border hover:bg-gray-100\"\r\n                    >\r\n                        Export PDF\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* TABLE */}\r\n            <div className=\"max-h-[420px] overflow-y-auto\">\r\n                <table className=\"w-full text-sm border border-gray-200\">\r\n                    <thead className=\"sticky top-0 bg-gray-200\">\r\n                        <tr>\r\n                            <th className=\"py-2 px-3 border-r\">#</th>\r\n                            <th className=\"py-2 px-3 border-r text-left\">Product Name</th>\r\n                            {/*<th className=\"py-2 px-3 border-r text-center\">Product Id</th>*/}\r\n                            <th className=\"py-2 px-3 border-r text-center\">SKU</th>\r\n                            <th className=\"py-2 px-3 border-r text-center\">Pack Size</th>\r\n                            <th className=\"py-2 px-3 border-r text-center\">Weight Value</th>\r\n                            <th className=\"py-2 px-3 border-r text-center\">Weight Unit</th>\r\n                            <Header label=\"Quantity\" column=\"quantity\" />\r\n                            <Header label=\"Tonnage\" column=\"tonnage\" />\r\n                            <Header label=\"Price\" column=\"price\" />\r\n                            <Header label=\"Value\" column=\"stockValue\" />\r\n                            <Header label=\"Low Stock At\" column=\"lowStockAt\" />\r\n                            <th className=\"py-2 px-3 text-center\">Status</th>\r\n                            <th className=\"py-2 px-3 text-center\">Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {sortedData.length > 0 ? (\r\n                            <>\r\n                                {sortedData.map((p, i) => {\r\n                                    const status =\r\n                                        p.quantity === 0\r\n                                            ? \"Out of Stock\"\r\n                                            : p.quantity < p.lowStockAt\r\n                                                ? \"Low Stock\"\r\n                                                : \"Available\";\r\n\r\n                                    const statusColor =\r\n                                        status === \"Out of Stock\"\r\n                                            ? \"text-red-600 font-bold\"\r\n                                            : status === \"Low Stock\"\r\n                                                ? \"text-yellow-600 font-bold\"\r\n                                                : \"text-green-600 font-bold\";\r\n\r\n                                    return (\r\n                                        <tr\r\n                                            key={p.id}\r\n                                            className={`${i % 2 ? \"bg-gray-50\" : \"\"} ${p.quantity === 0\r\n                                                ? \"bg-red-50\"\r\n                                                : p.quantity < p.lowStockAt\r\n                                                    ? \"bg-yellow-50\"\r\n                                                    : \"\"\r\n                                                }`}\r\n                                        >\r\n                                            <td className=\"py-2 px-3 border-r text-center\">{i + 1}</td>\r\n                                            <td className=\"py-2 px-3 border-r\">{p.name}</td>\r\n                                            {/*<td className=\"py-2 px-3 border-r text-center\">{p.id}</td>*/}\r\n                                            <td className=\"py-2 px-3 border-r text-center\">{p.sku || \"-\"}</td>\r\n                                            <td className=\"py-2 px-3 border-r text-center\">{p.packSize}</td>\r\n                                            <td className=\"py-2 px-3 border-r text-center\">{p.weightValue}</td>\r\n                                            <td className=\"py-2 px-3 border-r text-center\">{p.weightUnit || '-'}</td>\r\n                                            <td className=\"py-2 px-3 border-r text-center\">{p.quantity}</td>\r\n                                            <td className=\"py-2 px-3 border-r text-center\">{p.tonnage.toFixed(2)}</td>\r\n                                            <td className=\"py-2 px-3 border-r text-center\">{p.price.toFixed(2)}</td>\r\n                                            <td className=\"py-2 px-3 border-r text-center\">{p.value.toFixed(2)}</td>\r\n                                            <td className=\"py-2 px-3 border-r text-center\">{p.lowStockAt}</td>\r\n                                            <td className={`py-2 px-3 text-center ${statusColor}`}>{status}</td>\r\n                                            <td className=\"\">\r\n                                                <Link\r\n                                                    href={`/inventory/inventory?productId=${p.id}#inventory-table`}\r\n                                                    className=\"text-blue-600 hover:underline text-sm  mr-3\"\r\n                                                >\r\n                                                    View Inventory\r\n                                                </Link>\r\n                                            </td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n\r\n                                {/* Total Row */}\r\n                                <tr className=\"bg-gray-200 font-semibold\">\r\n                                    <td className=\"py-2 px-3 border-r text-center\" colSpan={6}>\r\n                                        Total\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">\r\n                                        {sortedData.reduce((acc, p) => acc + p.quantity, 0)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">\r\n                                        {sortedData.reduce((acc, p) => acc + p.tonnage, 0).toFixed(2)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">-</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">\r\n                                        {sortedData.reduce((acc, p) => acc + p.value, 0).toFixed(2)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">-</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">-</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">-</td>\r\n                                </tr>\r\n                            </>\r\n                        ) : (\r\n                            <tr>\r\n                                <td colSpan={12} className=\"py-2 px-3 text-center text-gray-500\">\r\n                                    No data available for the selected location and category\r\n                                </td>\r\n                            </tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}