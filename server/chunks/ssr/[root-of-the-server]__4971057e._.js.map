{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx"],"sourcesContent":["\"use client\";\r\nimport { UserButton } from \"@stackframe/stack\";\r\nimport { BarChart3, Package, Plus, Settings, Info, ShoppingCart, ChevronDown } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport default function Sidebar() {\r\n    const [openItems, setOpenItems] = useState<string[]>([]);\r\n    const currentPath = usePathname();\r\n\r\n    useEffect(() => {\r\n        const activeItem = NAV_ITEMS.find((item) => item.subItems && item.subItems.some((sub) => currentPath === sub.href));\r\n        if (activeItem) {\r\n            setOpenItems([activeItem.name]);\r\n        }\r\n    }, [currentPath]);\r\n\r\n    const NAV_ITEMS = [\r\n        {\r\n            name: \"Dashboard\",\r\n            icon: BarChart3,\r\n            subItems: [\r\n                { name: \"Inventory Dashboard\", href: \"/dashboard/inventory\" },\r\n                { name: \"Sales Dashboard\", href: \"/dashboard/sales\" },\r\n            ],\r\n        },\r\n        {\r\n            name: \"Inventory\",\r\n            icon: Package,\r\n            subItems: [\r\n                { name: \"Inventory Summary\", href: \"/inventory/inventory\" },\r\n                { name: \"Add Product\", href: \"/inventory/add-product\" },\r\n                { name: \"Stock Reports\", href: \"/inventory/stock-report\" },\r\n                { name: \"Production\", href: \"/inventory/production\" },\r\n                { name: \"Stock Transfers\", href: \"/inventory/transfers\" },\r\n                { name: \"Stock adjustments\", href: \"/inventory/adjustments\" },\r\n            ],\r\n        },\r\n        { name: \"Sales\", href: \"/sales\", icon: ShoppingCart },\r\n        { name: \"Settings\", href: \"/settings\", icon: Settings },\r\n        { name: \"About\", href: \"/about\", icon: Info },\r\n    ];\r\n\r\n    const toggleItem = (name: string) => {\r\n        if (openItems.includes(name)) {\r\n            setOpenItems(openItems.filter((item) => item !== name));\r\n        } else {\r\n            setOpenItems([...openItems, name]);\r\n        }\r\n    };\r\n\r\n    const isActive = (href: string) => currentPath.startsWith(href);\r\n\r\n    const isParentActive = (subItems?: { href: string }[]) =>\r\n        subItems?.some((sub) => currentPath.startsWith(sub.href));\r\n\r\n    const isOpen = (name: string) => openItems.includes(name);\r\n\r\n    return (\r\n        <div className=\"fixed left-0 top-0 bg-gray-900 text-white w-64 min-h-screen p-6 z-10\">\r\n            <div className=\"mb-8\">\r\n                <div className=\"flex items-center space-x-2 mb-4\">\r\n                    <BarChart3 className=\"w-10 h-10\" />\r\n                    <span className=\"text-md font-semibold\">Inventory Management App</span>\r\n                </div>\r\n            </div>\r\n            <nav className=\"space-y-1\">\r\n                <div className=\"text-sm font-semibold text-gray-400 uppercase\">Inventory</div>\r\n                {NAV_ITEMS.map((item, key) => {\r\n                    const IconComponent = item.icon;\r\n                    const parentActive = isParentActive(item.subItems);\r\n                    const itemActive = isActive(item.href);\r\n\r\n                    if (item.subItems) {\r\n                        return (\r\n                            <div key={key}>\r\n                                <button\r\n                                    onClick={() => toggleItem(item.name)}\r\n                                    className={`flex items-center justify-between w-full py-2 px-3 rounded-lg ${parentActive ? \"bg-purple-50 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                        }`}\r\n                                >\r\n                                    <div className=\"flex items-center space-x-3\">\r\n                                        <IconComponent className=\"w-5 h-5\" />\r\n                                        <span className=\"text-sm\">{item.name}</span>\r\n                                    </div>\r\n                                    <ChevronDown className={`w-4 h-4 transition-transform ${isOpen(item.name) ? \"rotate-180\" : \"\"}`} />\r\n                                </button>\r\n                                {isOpen(item.name) && (\r\n                                    <ul className=\"ml-6 mt-2 space-y-2\">\r\n                                        {item.subItems.map((subItem, subKey) => (\r\n                                            <li key={subKey}>\r\n                                                <Link\r\n                                                    href={subItem.href}\r\n                                                    className={`flex items-center space-x-3 py-2 px-3 rounded-lg text-md ${isActive(subItem.href) ? \"text-white-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                                        }`}\r\n                                                >\r\n                                                    {subItem.name}\r\n                                                </Link>\r\n                                            </li>\r\n                                        ))}\r\n                                    </ul>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    }\r\n\r\n                    return (\r\n                        <Link\r\n                            href={item.href}\r\n                            key={key}\r\n                            className={`flex items-center space-x-3 py-2 px-3 rounded-lg ${itemActive ? \"bg-purple-100 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                }`}\r\n                        >\r\n                            <IconComponent className=\"w-5 h-5\" />\r\n                            <span className=\"text-sm\">{item.name}</span>\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </nav>\r\n            <div className=\"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-700\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <UserButton showUserInfo />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/CustomTooltip.tsx"],"sourcesContent":["import React from 'react';\r\nimport { TooltipProps } from 'recharts';\r\n\r\ninterface CustomTooltipProps {\r\n    active?: boolean;\r\n    payload?: any[];\r\n    label?: string;\r\n    labels?: {\r\n        titleKey?: string;\r\n        metrics?: { key: string; label: string; format?: (value: number | undefined) => string }[];\r\n    };\r\n}\r\n\r\nconst CustomTooltip = ({\r\n    active,\r\n    payload,\r\n    label,\r\n    labels = {\r\n        titleKey: 'category',\r\n        metrics: [\r\n            { key: 'tonnage', label: 'Tonnage', format: (v) => `${v?.toFixed(2)} tons` },\r\n            { key: 'salesValue', label: 'Sales Value', format: (v) => `K${v?.toFixed(2)}` },\r\n            { key: 'quantity', label: 'Quantity', format: (v) => `${v} units` },\r\n        ],\r\n    },\r\n}: CustomTooltipProps) => {\r\n    if (active && payload && payload.length) {\r\n        const data = payload[0].payload as Record<string, number | undefined>;\r\n        return (\r\n            <div className=\"bg-white p-3 border rounded shadow text-sm\">\r\n                <p className=\"font-bold\">{data[labels.titleKey!] || label}</p>\r\n                {labels.metrics?.map((metric) => (\r\n                    <p key={metric.key}>\r\n                        {metric.label}: {data[metric.key] !== undefined ? (metric.format ? metric.format(data[metric.key]) : data[metric.key]) : 'N/A'}\r\n                    </p>\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default CustomTooltip;"],"names":[],"mappings":";;;;;;AAaA,MAAM,gBAAgB,CAAC,EACnB,MAAM,EACN,OAAO,EACP,KAAK,EACL,SAAS;IACL,UAAU;IACV,SAAS;QACL;YAAE,KAAK;YAAW,OAAO;YAAW,QAAQ,CAAC,IAAM,GAAG,GAAG,QAAQ,GAAG,KAAK,CAAC;QAAC;QAC3E;YAAE,KAAK;YAAc,OAAO;YAAe,QAAQ,CAAC,IAAM,CAAC,CAAC,EAAE,GAAG,QAAQ,IAAI;QAAC;QAC9E;YAAE,KAAK;YAAY,OAAO;YAAY,QAAQ,CAAC,IAAM,GAAG,EAAE,MAAM,CAAC;QAAC;KACrE;AACL,CAAC,EACgB;IACjB,IAAI,UAAU,WAAW,QAAQ,MAAM,EAAE;QACrC,MAAM,OAAO,OAAO,CAAC,EAAE,CAAC,OAAO;QAC/B,qBACI,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAE,WAAU;8BAAa,IAAI,CAAC,OAAO,QAAQ,CAAE,IAAI;;;;;;gBACnD,OAAO,OAAO,EAAE,IAAI,CAAC,uBAClB,8OAAC;;4BACI,OAAO,KAAK;4BAAC;4BAAG,IAAI,CAAC,OAAO,GAAG,CAAC,KAAK,YAAa,OAAO,MAAM,GAAG,OAAO,MAAM,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC,GAAI;;uBADrH,OAAO,GAAG;;;;;;;;;;;IAMlC;IACA,OAAO;AACX;uCAEe"}},
    {"offset": {"line": 363, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesByCategoryPie.tsx"],"sourcesContent":["\"use client\";\r\nimport { PieChart, Pie, Cell, ResponsiveContainer, Tooltip } from \"recharts\";\r\nimport { TrendingUp } from 'lucide-react';\r\nimport CustomTooltip from \"./CustomTooltip\";\r\n\r\ninterface Props {\r\n    categoryData: { category: string; tonnage: number }[];\r\n}\r\n\r\nexport default function SalesByCategoryPie({ categoryData }: Props) {\r\n    //const COLORS = ['#3b82f6', '#10b981', '#f97316', '#8b5cf6', '#ec4899'];\r\n    const COLORS = ['#2563eb', '#16a34a', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899'];\r\n\r\n    const totalTonnage = categoryData.reduce((sum, item) => sum + item.tonnage, 0);\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"flex justify-center\">\r\n                <ResponsiveContainer width=\"100%\" height={200}>\r\n                    <PieChart>\r\n                        <Pie\r\n                            data={categoryData}\r\n                            dataKey=\"tonnage\"\r\n                            nameKey=\"category\"\r\n                            innerRadius={50}\r\n                            outerRadius={80}\r\n                            paddingAngle={4}\r\n                        >\r\n                            {categoryData.map((entry, index) => (\r\n                                <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                            ))}\r\n                        </Pie>\r\n                        <Tooltip content={<CustomTooltip />} />\r\n                    </PieChart>\r\n                </ResponsiveContainer>\r\n            </div>\r\n            <div className=\"flex justify-center gap-6 mt-4 text-xs\">\r\n                {categoryData.map((entry, index) => (\r\n                    <div key={entry.category} className=\"flex items-center gap-2\">\r\n                        <span\r\n                            className=\"w-3 h-3 rounded-full\"\r\n                            style={{ backgroundColor: COLORS[index % COLORS.length] }}\r\n                        />\r\n                        <span>{`${entry.category} (${((entry.tonnage / totalTonnage) * 100).toFixed(1)}%)`}</span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAHA;;;;AASe,SAAS,mBAAmB,EAAE,YAAY,EAAS;IAC9D,yEAAyE;IACzE,MAAM,SAAS;QAAC;QAAW;QAAW;QAAW;QAAW;QAAW;KAAU;IAEjF,MAAM,eAAe,aAAa,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,OAAO,EAAE;IAE5E,qBACI,8OAAC;;0BACG,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,0LAAmB;oBAAC,OAAM;oBAAO,QAAQ;8BACtC,cAAA,8OAAC,gKAAQ;;0CACL,8OAAC,sJAAG;gCACA,MAAM;gCACN,SAAQ;gCACR,SAAQ;gCACR,aAAa;gCACb,aAAa;gCACb,cAAc;0CAEb,aAAa,GAAG,CAAC,CAAC,OAAO,sBACtB,8OAAC,4JAAI;wCAAuB,MAAM,MAAM,CAAC,QAAQ,OAAO,MAAM,CAAC;uCAApD,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;0CAGlC,8OAAC,kKAAO;gCAAC,uBAAS,8OAAC,8IAAa;;;;;;;;;;;;;;;;;;;;;;;;;;0BAI5C,8OAAC;gBAAI,WAAU;0BACV,aAAa,GAAG,CAAC,CAAC,OAAO,sBACtB,8OAAC;wBAAyB,WAAU;;0CAChC,8OAAC;gCACG,WAAU;gCACV,OAAO;oCAAE,iBAAiB,MAAM,CAAC,QAAQ,OAAO,MAAM,CAAC;gCAAC;;;;;;0CAE5D,8OAAC;0CAAM,GAAG,MAAM,QAAQ,CAAC,EAAE,EAAE,CAAC,AAAC,MAAM,OAAO,GAAG,eAAgB,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC;;;;;;;uBAL5E,MAAM,QAAQ;;;;;;;;;;;;;;;;AAW5C"}},
    {"offset": {"line": 488, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesTrendChart.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n    LineChart, Line, Pie, PieChart, BarChart, Bar,\r\n    XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Cell, ScatterChart, Scatter, Legend\r\n} from \"recharts\";\r\nimport CustomTooltip from \"./CustomTooltip\";\r\nimport SalesByCategoryPie from \"./SalesByCategoryPie\";\r\nimport { MapPin, BarChart3 } from \"lucide-react\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { TrendingUp, Package, Package2Icon } from 'lucide-react';\r\n\r\ninterface ChartDataPoint {\r\n    date: string;\r\n    value: number;\r\n    quantity: number;\r\n    tonnage: number;\r\n}\r\n\r\ninterface Props {\r\n    sales: any[];\r\n    productList: any[];\r\n}\r\n\r\ntype GrowthData = {\r\n    location: string;\r\n    current: number;\r\n    previous: number;\r\n    growthPercent: number;\r\n};\r\n\r\nexport default function SalesTrendChart({ sales, productList }: Props) {\r\n    if (!sales.length || !productList.length) {\r\n        return <p className=\"text-sm text-gray-500\">No sales data available.</p>;\r\n    }\r\n\r\n    const salesTrendData: ChartDataPoint[] = useMemo(() => {\r\n        const map = new Map<string, ChartDataPoint>();\r\n\r\n        sales.forEach(s => {\r\n            if (!s.saleDate) return;\r\n\r\n            const dateKey = new Date(s.saleDate).toISOString().split(\"T\")[0];\r\n\r\n            if (!map.has(dateKey)) {\r\n                map.set(dateKey, {\r\n                    date: dateKey,\r\n                    value: 0,\r\n                    quantity: 0,\r\n                    tonnage: 0,\r\n                });\r\n            }\r\n\r\n            const acc = map.get(dateKey)!;\r\n            const value = s.quantity * s.salePrice;\r\n\r\n            const product = productList.find(p => p.id === s.productId);\r\n            const tonnage = product\r\n                ? (product.weightValue * s.quantity * product.packSize) / 1000\r\n                : 0;\r\n\r\n            acc.value += value;\r\n            acc.quantity += s.quantity;\r\n            acc.tonnage += tonnage;\r\n        });\r\n\r\n        return Array.from(map.values()).sort(\r\n            (a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()\r\n        );\r\n    }, [sales, productList]);\r\n\r\n    // Separate date ranges for value and tonnage\r\n    const [valueStartDate, setValueStartDate] = useState<string>(\r\n        new Date(new Date().getFullYear(), 0, 1).toISOString().split(\"T\")[0]\r\n    );\r\n    const [valueEndDate, setValueEndDate] = useState<string>(\r\n        new Date().toISOString().split(\"T\")[0]\r\n    );\r\n\r\n    const [tonnageStartDate, setTonnageStartDate] = useState<string>(\r\n        new Date(new Date().getFullYear(), 0, 1).toISOString().split(\"T\")[0]\r\n    );\r\n    const [tonnageEndDate, setTonnageEndDate] = useState<string>(\r\n        new Date().toISOString().split(\"T\")[0]\r\n    );\r\n\r\n    const [categoryStartDate, setCategoryStartDate] = useState<string>(\r\n        new Date(new Date().getFullYear(), 0, 1).toISOString().split(\"T\")[0]\r\n    );\r\n    const [categoryEndDate, setCategoryEndDate] = useState<string>(\r\n        new Date().toISOString().split(\"T\")[0]\r\n    );\r\n\r\n    const [locationStartDate, setLocationStartDate] = useState<string>(\r\n        new Date(new Date().getFullYear(), 0, 1).toISOString().split(\"T\")[0]\r\n    );\r\n    const [locationEndDate, setLocationEndDate] = useState<string>(\r\n        new Date().toISOString().split(\"T\")[0]\r\n    );\r\n\r\n    type ViewMode = \"daily\" | \"monthly\" | \"yearly\";\r\n\r\n    const [valueView, setValueView] = useState<ViewMode>(\"monthly\");\r\n    const [tonnageView, setTonnageView] = useState<ViewMode>(\"monthly\");\r\n\r\n    const aggregateTrendData = (data: ChartDataPoint[], view: ViewMode) => {\r\n        const map = new Map<string, ChartDataPoint>();\r\n\r\n        data.forEach(d => {\r\n            const date = new Date(d.date);\r\n            let key = \"\";\r\n\r\n            if (view === \"daily\") {\r\n                key = date.toISOString().split(\"T\")[0];\r\n            } else if (view === \"monthly\") {\r\n                key = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, \"0\")}`;\r\n            } else {\r\n                key = `${date.getFullYear()}`;\r\n            }\r\n\r\n            if (!map.has(key)) {\r\n                map.set(key, {\r\n                    date: key,\r\n                    value: 0,\r\n                    quantity: 0,\r\n                    tonnage: 0,\r\n                });\r\n            }\r\n\r\n            const acc = map.get(key)!;\r\n            acc.value += Number(d.value) || 0;\r\n            acc.quantity += Number(d.quantity) || 0;\r\n            acc.tonnage += Number(d.tonnage) || 0;\r\n        });\r\n\r\n        return Array.from(map.values());\r\n    };\r\n\r\n    // Filtered data\r\n    const filteredValueData = useMemo(\r\n        () => salesTrendData.filter(d => {\r\n            const date = new Date(d.date);\r\n            return date >= new Date(valueStartDate) && date <= new Date(valueEndDate);\r\n        }),\r\n        [salesTrendData, valueStartDate, valueEndDate]\r\n    );\r\n\r\n    const filteredTonnageData = useMemo(\r\n        () => salesTrendData.filter(d => {\r\n            const date = new Date(d.date);\r\n            return date >= new Date(tonnageStartDate) && date <= new Date(tonnageEndDate);\r\n        }),\r\n        [salesTrendData, tonnageStartDate, tonnageEndDate]\r\n    );\r\n\r\n    const filteredCategorySales = useMemo(() =>\r\n        sales.filter(s => {\r\n            const date = new Date(s.saleDate);\r\n            return date >= new Date(categoryStartDate) && date <= new Date(categoryEndDate);\r\n        }),\r\n        [sales, categoryStartDate, categoryEndDate]\r\n    );\r\n\r\n    const filteredLocationSales = useMemo(() =>\r\n        sales.filter(s => {\r\n            const date = new Date(s.saleDate);\r\n            return date >= new Date(locationStartDate) && date <= new Date(locationEndDate);\r\n        }),\r\n        [sales, locationStartDate, locationEndDate]\r\n    );\r\n\r\n    const valueTrendData = useMemo(\r\n        () => aggregateTrendData(filteredValueData, valueView),\r\n        [filteredValueData, valueView]\r\n    );\r\n\r\n    const tonnageTrendData = useMemo(\r\n        () => aggregateTrendData(filteredTonnageData, tonnageView),\r\n        [filteredTonnageData, tonnageView]\r\n    );\r\n\r\n    /* ---------------- CATEGORY DATA ---------------- */\r\n    const categoryData = useMemo(() => {\r\n        const filtered = sales.filter(s => {\r\n            const d = new Date(s.saleDate);\r\n            return d >= new Date(categoryStartDate) && d <= new Date(categoryEndDate);\r\n        });\r\n\r\n        const categories = Array.from(new Set(filtered.map(s => s.product?.category || \"Uncategorized\")));\r\n\r\n        return categories.map(category => {\r\n            const categorySales = filtered.filter(s => s.product?.category === category);\r\n\r\n            return {\r\n                category,\r\n                quantity: categorySales.reduce((sum, s) => sum + s.quantity, 0),\r\n                salesValue: categorySales.reduce((sum, s) => sum + s.quantity * s.salePrice, 0),\r\n                tonnage: categorySales.reduce((sum, s) => {\r\n                    const p = productList.find(p => p.id === s.productId);\r\n                    return sum + (p ? (p.weightValue * s.quantity * p.packSize) / 1000 : 0);\r\n                }, 0),\r\n            };\r\n        }).sort((a, b) => b.tonnage - a.tonnage);\r\n    }, [sales, categoryStartDate, categoryEndDate, productList]);\r\n\r\n    /* ---------------- LOCATION DATA ---------------- */\r\n    const productMap = useMemo(() => {\r\n        const map = new Map();\r\n        productList.forEach(p => map.set(p.id, p));\r\n        return map;\r\n    }, [productList]);\r\n\r\n    const locationData = useMemo(() => {\r\n        const filtered = sales.filter(s => {\r\n            const d = new Date(s.saleDate);\r\n            return d >= new Date(locationStartDate) && d <= new Date(locationEndDate);\r\n        });\r\n\r\n        const locs = Array.from(new Set(filtered.map(s => s.location?.name || \"Unknown\")));\r\n\r\n        return locs.map(location => {\r\n            const locationSales = filtered.filter(s => s.location?.name === location);\r\n            return {\r\n                location,\r\n                quantity: locationSales.reduce((sum, s) => sum + s.quantity, 0),\r\n                salesValue: locationSales.reduce((sum, s) => sum + s.quantity * s.salePrice, 0),\r\n                tonnage: locationSales.reduce((sum, s) => {\r\n                    const p = productMap.get(s.productId);\r\n                    return sum + (p ? (p.weightValue * s.quantity * p.packSize) / 1000 : 0);\r\n                }, 0),\r\n            };\r\n        }).sort((a, b) => b.tonnage - a.tonnage);\r\n    }, [sales, locationStartDate, locationEndDate, productList]);\r\n\r\n    // Growth By Location Data //\r\n    const growthByLocation = useMemo(() => {\r\n        const start = new Date(locationStartDate);\r\n        const end = new Date(locationEndDate);\r\n        const diff = end.getTime() - start.getTime();\r\n\r\n        const prevStart = new Date(start.getTime() - diff);\r\n        const prevEnd = new Date(start.getTime());\r\n\r\n        const current = sales.filter(s => {\r\n            const d = new Date(s.saleDate);\r\n            return d >= start && d <= end;\r\n        });\r\n\r\n        const previous = sales.filter(s => {\r\n            const d = new Date(s.saleDate);\r\n            return d >= prevStart && d < prevEnd;\r\n        });\r\n\r\n        const locations = Array.from(\r\n            new Set([...current, ...previous].map(s => s.location?.name || \"Unknown\"))\r\n        );\r\n\r\n        return locations.map(location => {\r\n            const currValue = current\r\n                .filter(s => s.location?.name === location)\r\n                .reduce((sum, s) => sum + s.quantity * s.salePrice, 0);\r\n\r\n            const prevValue = previous\r\n                .filter(s => s.location?.name === location)\r\n                .reduce((sum, s) => sum + s.quantity * s.salePrice, 0);\r\n\r\n            const growthPercent =\r\n                prevValue === 0 ? 100 : ((currValue - prevValue) / prevValue) * 100;\r\n\r\n            return {\r\n                location,\r\n                growthPercent\r\n            };\r\n        }).sort((a, b) => b.growthPercent - a.growthPercent);\r\n    }, [sales, locationStartDate, locationEndDate]);\r\n\r\n    // Sales Contribution by Location Data //\r\n\r\n    const locationContributionData = useMemo(() => {\r\n        const filtered = sales.filter(s => {\r\n            const d = new Date(s.saleDate);\r\n            return d >= new Date(locationStartDate) && d <= new Date(locationEndDate);\r\n        });\r\n\r\n        const totals = new Map<string, number>();\r\n        let grandTotal = 0;\r\n\r\n        filtered.forEach(s => {\r\n            const location = s.location?.name || \"Unknown\";\r\n            const value = s.quantity * s.salePrice;\r\n\r\n            totals.set(location, (totals.get(location) || 0) + value);\r\n            grandTotal += value;\r\n        });\r\n\r\n        return Array.from(totals.entries()).map(([location, total]) => ({\r\n            location,\r\n            salesValue: total,\r\n            contribution: grandTotal ? (total / grandTotal) * 100 : 0,\r\n        }));\r\n    }, [sales, locationStartDate, locationEndDate]);\r\n\r\n\r\n    // Sales by Product Data //\r\n\r\n    const [productStartDate, setProductStartDate] = useState<string>(\r\n        new Date(new Date().getFullYear(), 0, 1).toISOString().split(\"T\")[0]\r\n    );\r\n    const [productEndDate, setProductEndDate] = useState<string>(\r\n        new Date().toISOString().split(\"T\")[0]\r\n    );\r\n\r\n    const productSalesData = useMemo(() => {\r\n        const filtered = sales.filter(s => {\r\n            const d = new Date(s.saleDate);\r\n            return d >= new Date(productStartDate) && d <= new Date(productEndDate);\r\n        });\r\n        const products = Array.from(new Set(filtered.map(s => s.product?.name || \"Unknown\")));\r\n        return products.map(product => {\r\n            const productSales = filtered.filter(s => s.product?.name === product);\r\n            return {\r\n                productName: product,\r\n                salesValue: productSales.reduce((sum, s) => sum + s.quantity * s.salePrice, 0),\r\n            };\r\n        }).sort((a, b) => b.salesValue - a.salesValue);\r\n    }, [sales, productStartDate, productEndDate]);\r\n\r\n    // Top Products Per Location\r\n\r\n    const topProductsByLocation = useMemo(() => {\r\n        const map = new Map<\r\n            string,\r\n            Map<string, { tonnage: number; value: number }>\r\n        >();\r\n\r\n        sales.forEach(s => {\r\n            const location = s.location?.name || \"Unknown\";\r\n            const productName = s.product?.name || \"Unknown\";\r\n            const product = productList.find(p => p.id === s.productId);\r\n\r\n            const value = s.quantity * s.salePrice;\r\n            const tonnage = product\r\n                ? (product.weightValue * s.quantity * product.packSize) / 1000\r\n                : 0;\r\n\r\n            if (!map.has(location)) {\r\n                map.set(location, new Map());\r\n            }\r\n\r\n            const prodMap = map.get(location)!;\r\n\r\n            if (!prodMap.has(productName)) {\r\n                prodMap.set(productName, { tonnage: 0, value: 0 });\r\n            }\r\n\r\n            const entry = prodMap.get(productName)!;\r\n            entry.tonnage += tonnage;\r\n            entry.value += value;\r\n        });\r\n\r\n        return Array.from(map.entries()).map(([location, prodMap]) => ({\r\n            location,\r\n            products: Array.from(prodMap.entries())\r\n                .sort((a, b) => {\r\n                    // ðŸ”¥ Primary: tonnage, Secondary: value\r\n                    if (b[1].tonnage !== a[1].tonnage) {\r\n                        return b[1].tonnage - a[1].tonnage;\r\n                    }\r\n                    return b[1].value - a[1].value;\r\n                })\r\n                .slice(0, 5)\r\n                .map(([name, data]) => ({\r\n                    name,\r\n                    tonnage: data.tonnage,\r\n                    value: data.value,\r\n                })),\r\n        }));\r\n    }, [sales, productList]);\r\n\r\n\r\n    // Date Range Selector\r\n    const DateRangeSelector = ({\r\n        start, end, setStart, setEnd, view, setView\r\n    }: {\r\n        start: string,\r\n        end: string,\r\n        setStart: (s: string) => void,\r\n        setEnd: (s: string) => void,\r\n        view: ViewMode,\r\n        setView: (v: ViewMode) => void\r\n    }) => {\r\n        // Default fallback dates\r\n        const defaultStart = new Date(new Date().getFullYear(), 0, 1).toISOString().split(\"T\")[0]; // Jan 1 YTD\r\n        const defaultEnd = new Date().toISOString().split(\"T\")[0]; // today\r\n\r\n        return (\r\n            <div className=\"flex items-center justify-end w-full gap-2 mb-5\">\r\n                <span className=\"text-xs text-center\">Date Range:</span>\r\n                <input\r\n                    type=\"date\"\r\n                    value={start}\r\n                    onChange={e => setStart(e.target.value || defaultStart)}\r\n                    className=\"border rounded px-2 py-1 text-xs hover:bg-gray-100\"\r\n                />\r\n                <span>-</span>\r\n                <input\r\n                    type=\"date\"\r\n                    value={end}\r\n                    onChange={e => setEnd(e.target.value || defaultEnd)}\r\n                    className=\"border rounded px-2 py-1 text-xs hover:bg-gray-100\"\r\n                />\r\n                <select value={view} onChange={e => setView(e.target.value as ViewMode)}\r\n                    className=\"border rounded px-2 py-1 text-xs hover:bg-gray-100\">\r\n                    <option value=\"daily\">Daily</option>\r\n                    <option value=\"monthly\">Monthly</option>\r\n                    <option value=\"yearly\">Yearly</option>\r\n                </select>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const SimpleDateRangeSelector = ({\r\n        start,\r\n        end,\r\n        setStart,\r\n        setEnd\r\n    }: {\r\n        start: string;\r\n        end: string;\r\n        setStart: (s: string) => void;\r\n        setEnd: (s: string) => void;\r\n    }) => {\r\n        const defaultStart = new Date(new Date().getFullYear(), 0, 1).toISOString().split(\"T\")[0];\r\n        const defaultEnd = new Date().toISOString().split(\"T\")[0];\r\n\r\n        return (\r\n            <div className=\"flex items-center justify-end w-full gap-2 mb-5\">\r\n                <span className=\"text-xs\">Date Range:</span>\r\n                <input\r\n                    type=\"date\"\r\n                    value={start}\r\n                    onChange={e => setStart(e.target.value || defaultStart)}\r\n                    className=\"border rounded px-2 py-1 text-xs hover:bg-gray-100\"\r\n                />\r\n                <span>-</span>\r\n                <input\r\n                    type=\"date\"\r\n                    value={end}\r\n                    onChange={e => setEnd(e.target.value || defaultEnd)}\r\n                    className=\"border rounded px-2 py-1 text-xs hover:bg-gray-100\"\r\n                />\r\n            </div>\r\n        );\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* ================= LINE CHARTS ================= */}\r\n            <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-4\">\r\n                {/* Sales Value Trend */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                        <h3 className=\"font-semibold flex items-center gap-2\">\r\n                            <BarChart3 className=\"h-5 w-5 text-blue-600\" />\r\n                            Sales Value Trend\r\n                        </h3>\r\n                    </div>\r\n                    <div>\r\n                        <DateRangeSelector\r\n                            start={valueStartDate} end={valueEndDate} setStart={setValueStartDate} setEnd={setValueEndDate}\r\n                            view={valueView} setView={setValueView}\r\n                        />\r\n                    </div>\r\n\r\n                    <ResponsiveContainer width=\"100%\" height={250}>\r\n                        <LineChart data={valueTrendData}>\r\n                            <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\r\n                            <XAxis dataKey=\"date\" tick={{ fontSize: 11 }} />\r\n                            <YAxis tick={{ fontSize: 11 }} />\r\n                            <Tooltip content={<CustomTooltip labels={{\r\n                                titleKey: \"date\",\r\n                                metrics: [\r\n                                    { key: \"value\", label: \"Sales Value\", format: v => `K${v.toFixed(2)}` },\r\n                                    { key: \"tonnage\", label: \"Tonnage\", format: v => `${v.toFixed(2)} tons` },\r\n                                    { key: \"quantity\", label: \"Quantity\", format: v => `${v} units` },\r\n                                ],\r\n                            }} />} />\r\n                            <Line\r\n                                type=\"monotone\"\r\n                                dataKey=\"value\"\r\n                                stroke=\"#2563eb\"\r\n                                strokeWidth={2.5}\r\n                                dot={false}\r\n                                activeDot={{ r: 4 }}\r\n                            />\r\n                        </LineChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n\r\n                {/* Sales Tonnage Trend */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                        <h3 className=\"font-semibold flex items-center gap-2\">\r\n                            <BarChart3 className=\"h-5 w-5 text-blue-600\" />\r\n                            Sales Tonnage Trend\r\n                        </h3>\r\n                    </div>\r\n                    <div>\r\n                        <DateRangeSelector\r\n                            start={tonnageStartDate} end={tonnageEndDate} setStart={setTonnageStartDate} setEnd={setTonnageEndDate}\r\n                            view={tonnageView} setView={setTonnageView}\r\n                        />\r\n                    </div>\r\n\r\n                    <ResponsiveContainer width=\"100%\" height={250}>\r\n                        <LineChart data={tonnageTrendData}>\r\n                            <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\r\n                            <XAxis dataKey=\"date\" tick={{ fontSize: 11 }} />\r\n                            <YAxis tick={{ fontSize: 11 }} />\r\n                            <Tooltip content={<CustomTooltip labels={{\r\n                                titleKey: \"date\",\r\n                                metrics: [\r\n                                    { key: \"tonnage\", label: \"Tonnage\", format: v => `${v.toFixed(2)} tons` },\r\n                                    { key: \"value\", label: \"Sales Value\", format: v => `K${v.toFixed(2)}` },\r\n                                ],\r\n                            }} />} />\r\n                            <Line\r\n                                type=\"monotone\"\r\n                                dataKey=\"tonnage\"\r\n                                stroke=\"#16a34a\"\r\n                                strokeWidth={2.5}\r\n                                dot={false}\r\n                                activeDot={{ r: 4 }}\r\n                            />\r\n                        </LineChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n            </div>\r\n\r\n            {/* ================= BARS & PIE ================= */}\r\n            <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6\">\r\n                {/* Category Pie */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-2 flex items-center gap-2\">\r\n                        <Package className=\"h-5 w-5 text-green-600\" />\r\n                        Sales by Category</h3>\r\n                    <SimpleDateRangeSelector\r\n                        start={categoryStartDate}\r\n                        end={categoryEndDate}\r\n                        setStart={setCategoryStartDate}\r\n                        setEnd={setCategoryEndDate}\r\n                    />\r\n                    <SalesByCategoryPie categoryData={categoryData} />\r\n                </div>\r\n                {/* Sales Tonnage by Location */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-2 flex items-center gap-2\">\r\n                        <MapPin className=\"h-5 w-5 text-green-600\" />\r\n                        Sales by Location (Tonnage)\r\n                    </h3>\r\n                    <SimpleDateRangeSelector\r\n                        start={locationStartDate}\r\n                        end={locationEndDate}\r\n                        setStart={setLocationStartDate}\r\n                        setEnd={setLocationEndDate}\r\n                    />\r\n                    <ResponsiveContainer width=\"100%\" height={260}>\r\n                        <BarChart data={locationData} barCategoryGap={18}>\r\n                            <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\r\n                            <XAxis dataKey=\"location\" tick={{ fontSize: 11 }} />\r\n                            <YAxis tick={{ fontSize: 11 }} />\r\n                            <Tooltip content={<CustomTooltip />} />\r\n                            <Bar dataKey=\"tonnage\" radius={[6, 6, 0, 0]} fill=\"#16a34a\" />\r\n                        </BarChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n                {/* Sales Growth by Location */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-2 flex items-center gap-2\">\r\n                        <TrendingUp className=\"h-5 w-5 text-emerald-600\" />\r\n                        Sales Growth by Location (%)\r\n                    </h3>\r\n\r\n                    <SimpleDateRangeSelector\r\n                        start={locationStartDate}\r\n                        end={locationEndDate}\r\n                        setStart={setLocationStartDate}\r\n                        setEnd={setLocationEndDate}\r\n                    />\r\n\r\n                    <ResponsiveContainer width=\"100%\" height={260}>\r\n                        <BarChart data={growthByLocation} barCategoryGap={18}>\r\n                            <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\r\n                            <XAxis dataKey=\"location\" tick={{ fontSize: 11 }} />\r\n                            <YAxis tickFormatter={v => `${v}%`} />\r\n\r\n                            {/* Use CustomTooltip */}\r\n                            <Tooltip\r\n                                content={\r\n                                    <CustomTooltip\r\n                                        labels={{\r\n                                            titleKey: \"location\",\r\n                                            metrics: [\r\n                                                {\r\n                                                    key: \"growthPercent\",\r\n                                                    label: \"Growth\",\r\n                                                    format: v => `${v && v >= 0 ? \"+\" : \"\"}${v?.toFixed(1)}%`,\r\n                                                    color: v => (v !== undefined && v < 0 ? \"#ef4444\" : \"#16a34a\"),\r\n                                                },\r\n                                            ],\r\n                                        }}\r\n                                    />\r\n                                }\r\n                            />\r\n\r\n                            <Bar dataKey=\"growthPercent\" radius={[6, 6, 0, 0]}>\r\n                                {growthByLocation.map((entry, index) => (\r\n                                    <Cell\r\n                                        key={`cell-${index}`}\r\n                                        fill={entry.growthPercent < 0 ? \"#ef4444\" : \"#16a34a\"}\r\n                                    />\r\n                                ))}\r\n                            </Bar>\r\n                        </BarChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6\">\r\n                {/* Top Products per Location */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                        <BarChart3 className=\"h-5 w-5 text-blue-600\" />\r\n                        Top Products by Location\r\n                    </h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-4\">\r\n                        {topProductsByLocation.map(loc => (\r\n                            <div key={loc.location} className=\"border rounded-lg p-3\">\r\n                                <h4 className=\"font-semibold text-sm mb-2\">{loc.location}</h4>\r\n                                {loc.products.map(p => (\r\n                                    <div key={p.name} className=\"flex justify-between text-sm\">\r\n                                        <span>{p.name}</span>\r\n                                        <span className=\"\">{p.tonnage.toFixed(2)} Tons</span>\r\n                                        <span className=\"\">K{p.value.toFixed(2)}</span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n                {/* Sales Value by Location */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                        <MapPin className=\"h-5 w-5 text-blue-600\" />\r\n                        Sales Value by Location\r\n                    </h3>\r\n                    <SimpleDateRangeSelector\r\n                        start={locationStartDate}\r\n                        end={locationEndDate}\r\n                        setStart={setLocationStartDate}\r\n                        setEnd={setLocationEndDate}\r\n                    />\r\n\r\n                    <ResponsiveContainer width=\"100%\" height={260}>\r\n                        <BarChart data={locationData} barCategoryGap={18}>\r\n                            <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\r\n                            <XAxis dataKey=\"location\" tick={{ fontSize: 11 }} />\r\n                            <YAxis tick={{ fontSize: 11 }} />\r\n                            <Tooltip content={<CustomTooltip />} />\r\n                            <Bar dataKey=\"salesValue\" radius={[6, 6, 0, 0]} fill=\"#3b82f6\" />\r\n                        </BarChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n                {/* Contribution to Total Sales (Donut) */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                        <MapPin className=\"h-5 w-5 text-indigo-600\" />\r\n                        Contribution to Total Sales (%)\r\n                    </h3>\r\n\r\n                    <SimpleDateRangeSelector\r\n                        start={locationStartDate}\r\n                        end={locationEndDate}\r\n                        setStart={setLocationStartDate}\r\n                        setEnd={setLocationEndDate}\r\n                    />\r\n\r\n                    <ResponsiveContainer width=\"100%\" height={260}>\r\n                        <PieChart>\r\n                            <Pie\r\n                                data={locationContributionData}\r\n                                dataKey=\"contribution\"\r\n                                nameKey=\"location\"\r\n                                innerRadius={60}\r\n                                outerRadius={90}\r\n                                paddingAngle={3}\r\n                                label={false} // hide labels on slices\r\n                            >\r\n                                {locationContributionData.map((_, index) => (\r\n                                    <Cell\r\n                                        key={`cell-${index}`}\r\n                                        fill={[\r\n                                            \"#6366f1\",\r\n                                            \"#22c55e\",\r\n                                            \"#f59e0b\",\r\n                                            \"#ef4444\",\r\n                                            \"#06b6d4\",\r\n                                            \"#8b5cf6\",\r\n                                        ][index % 6]}\r\n                                    />\r\n                                ))}\r\n                            </Pie>\r\n\r\n                            <Tooltip\r\n                                content={\r\n                                    <CustomTooltip\r\n                                        labels={{\r\n                                            titleKey: \"location\",\r\n                                            metrics: [\r\n                                                {\r\n                                                    key: \"contribution\",\r\n                                                    label: \"Contribution\",\r\n                                                    format: v => `${v?.toFixed(1)}%`,\r\n                                                },\r\n                                                {\r\n                                                    key: \"salesValue\",\r\n                                                    label: \"Sales Value\",\r\n                                                    format: v => `K${v?.toFixed(2)}`,\r\n                                                },\r\n                                            ],\r\n                                        }}\r\n                                    />\r\n                                }\r\n                            />\r\n                        </PieChart>\r\n                    </ResponsiveContainer>\r\n\r\n                    {/* Custom Legend Below Donut */}\r\n                    <div className=\"flex justify-center gap-4 text-xs\">\r\n                        {locationContributionData.map((entry, index) => (\r\n                            <div key={entry.location} className=\"flex items-center gap-2\">\r\n                                <span\r\n                                    className=\"w-3 h-3 rounded-full\"\r\n                                    style={{\r\n                                        backgroundColor: [\r\n                                            \"#6366f1\",\r\n                                            \"#22c55e\",\r\n                                            \"#f59e0b\",\r\n                                            \"#ef4444\",\r\n                                            \"#06b6d4\",\r\n                                            \"#8b5cf6\",\r\n                                        ][index % 6],\r\n                                    }}\r\n                                />\r\n                                <span>{`${entry.location} (${entry.contribution.toFixed(1)}%)`}</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1872, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/RecentSales.tsx"],"sourcesContent":["\"use client\";\r\nimport { getCurrentUser } from \"@/lib/auth\";\r\nimport { Clock } from \"lucide-react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Sale } from \"./Sale\";\r\n\r\ninterface Props {\r\n    userId: string;\r\n}\r\n\r\nexport default function RecentSales({ userId }: Props) {\r\n    const [sales, setSales] = useState<Sale[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchSales = async () => {\r\n            try {\r\n                const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || \"http://localhost:3000\";\r\n                const res = await fetch(`${baseUrl}/api/sales?userId=${userId}`);\r\n                const data = await res.json();\r\n                console.log(data);\r\n                if (data.success) {\r\n                    setSales(data.data);\r\n                } else {\r\n                    console.error(\"Failed to fetch sales:\", data);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error fetching sales:\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchSales();\r\n    }, [userId]);\r\n\r\n    if (loading) {\r\n        return <p>Loading recent sales...</p>;\r\n    }\r\n\r\n\r\n    const latestSales = sales.slice(0, 10); // show only latest 10\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <Clock className=\"h-5 w-5 text-blue-500\" /> Recent Sales\r\n            </h3>\r\n\r\n            {latestSales.length === 0 ? (\r\n                <p className=\"text-sm text-gray-500\">No recent sales.</p>\r\n            ) : (\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"min-w-full text-sm\">\r\n                        <thead className=\"bg-gray-200 border-b\">\r\n                            <tr>\r\n                                <th className=\"px-4 py-2 border-r text-left\">Customer</th>\r\n                                <th className=\"px-4 py-2 border-r text-left\">Product</th>\r\n                                <th className=\"px-4 py-2 border-r text-left\">Location</th>\r\n                                <th className=\"px-4 py-2 border-r text-center\">Quantity</th>\r\n                                <th className=\"px-4 py-2 border-r text-center\">Price</th>\r\n                                <th className=\"px-4 py-2 border-r text-center\">Revenue</th>\r\n                                <th className=\"px-4 py-2 border-r text-center\">Date</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {latestSales.map((sale) => (\r\n                                <tr key={sale.id} className=\"border-b last:border-0 hover:bg-gray-50\">\r\n                                    <td className=\"px-4 py-3 truncate\">{sale.customerName || \"N/A\"}</td>\r\n                                    <td className=\"px-4 py-3 truncate\">{sale.product?.name || \"N/A\"}</td>\r\n                                    <td className=\"px-4 py-3 truncate\">{sale.location?.name || \"N/A\"}</td>\r\n                                    <td className=\"px-4 py-3 text-center\">{sale.quantity}</td>\r\n                                    <td className=\"px-4 py-3 text-center\">K{sale.salePrice.toFixed(2)}</td>\r\n                                    <td className=\"px-4 py-3 text-center\">K{(sale.salePrice * sale.quantity).toFixed(2)}</td>\r\n                                    <td className=\"px-4 py-3 text-center\">{new Date(sale.saleDate).toLocaleDateString()}</td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAUe,SAAS,YAAY,EAAE,MAAM,EAAS;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACN,MAAM,aAAa;YACf,IAAI;gBACA,MAAM,UAAU,QAAQ,GAAG,CAAC,oBAAoB,IAAI;gBACpD,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,kBAAkB,EAAE,QAAQ;gBAC/D,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,QAAQ,GAAG,CAAC;gBACZ,IAAI,KAAK,OAAO,EAAE;oBACd,SAAS,KAAK,IAAI;gBACtB,OAAO;oBACH,QAAQ,KAAK,CAAC,0BAA0B;gBAC5C;YACJ,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,yBAAyB;YAC3C,SAAU;gBACN,WAAW;YACf;QACJ;QAEA;IACJ,GAAG;QAAC;KAAO;IAEX,IAAI,SAAS;QACT,qBAAO,8OAAC;sBAAE;;;;;;IACd;IAGA,MAAM,cAAc,MAAM,KAAK,CAAC,GAAG,KAAK,sBAAsB;IAE9D,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;;kCACV,8OAAC,6MAAK;wBAAC,WAAU;;;;;;oBAA0B;;;;;;;YAG9C,YAAY,MAAM,KAAK,kBACpB,8OAAC;gBAAE,WAAU;0BAAwB;;;;;qCAErC,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAM,WAAU;;sCACb,8OAAC;4BAAM,WAAU;sCACb,cAAA,8OAAC;;kDACG,8OAAC;wCAAG,WAAU;kDAA+B;;;;;;kDAC7C,8OAAC;wCAAG,WAAU;kDAA+B;;;;;;kDAC7C,8OAAC;wCAAG,WAAU;kDAA+B;;;;;;kDAC7C,8OAAC;wCAAG,WAAU;kDAAiC;;;;;;kDAC/C,8OAAC;wCAAG,WAAU;kDAAiC;;;;;;kDAC/C,8OAAC;wCAAG,WAAU;kDAAiC;;;;;;kDAC/C,8OAAC;wCAAG,WAAU;kDAAiC;;;;;;;;;;;;;;;;;sCAGvD,8OAAC;sCACI,YAAY,GAAG,CAAC,CAAC,qBACd,8OAAC;oCAAiB,WAAU;;sDACxB,8OAAC;4CAAG,WAAU;sDAAsB,KAAK,YAAY,IAAI;;;;;;sDACzD,8OAAC;4CAAG,WAAU;sDAAsB,KAAK,OAAO,EAAE,QAAQ;;;;;;sDAC1D,8OAAC;4CAAG,WAAU;sDAAsB,KAAK,QAAQ,EAAE,QAAQ;;;;;;sDAC3D,8OAAC;4CAAG,WAAU;sDAAyB,KAAK,QAAQ;;;;;;sDACpD,8OAAC;4CAAG,WAAU;;gDAAwB;gDAAE,KAAK,SAAS,CAAC,OAAO,CAAC;;;;;;;sDAC/D,8OAAC;4CAAG,WAAU;;gDAAwB;gDAAE,CAAC,KAAK,SAAS,GAAG,KAAK,QAAQ,EAAE,OAAO,CAAC;;;;;;;sDACjF,8OAAC;4CAAG,WAAU;sDAAyB,IAAI,KAAK,KAAK,QAAQ,EAAE,kBAAkB;;;;;;;mCAP5E,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBhD"}},
    {"offset": {"line": 2138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/UnitToKg.ts"],"sourcesContent":["export const unitToKg = (weight: number, unit?: string | null) => {\r\n    const map: Record<string, number> = {\r\n        kg: 1,\r\n        g: 0.001,\r\n        mg: 0.000001,\r\n        lb: 0.453592,\r\n        oz: 0.0283495,\r\n        ton: 1000,\r\n        // add more if needed\r\n    };\r\n\r\n    const u = typeof unit === \"string\" ? unit.toLowerCase() : \"\";\r\n    const factor = map[u] ?? 1; // fallback to 1 if unknown\r\n\r\n    return weight * factor;\r\n};\r\n\r\n\r\n// HOW TO USE //\r\n\r\n//import { unitToKg } from \"@/lib/unitToKg\";\r\n\r\n// Inside your aggregate calculation:\r\n//map[p.id].tonnage +=\r\n//    (item.quantity * p.packSize * unitToKg(item.product.weightValue, item.product.weightUnit)) / 1000;\r\n\r\n"],"names":[],"mappings":";;;;AAAO,MAAM,WAAW,CAAC,QAAgB;IACrC,MAAM,MAA8B;QAChC,IAAI;QACJ,GAAG;QACH,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,KAAK;IAET;IAEA,MAAM,IAAI,OAAO,SAAS,WAAW,KAAK,WAAW,KAAK;IAC1D,MAAM,SAAS,GAAG,CAAC,EAAE,IAAI,GAAG,2BAA2B;IAEvD,OAAO,SAAS;AACpB,GAGA,gBAAgB;CAEhB,4CAA4C;CAE5C,qCAAqC;CACrC,sBAAsB;CACtB,wGAAwG"}},
    {"offset": {"line": 2163, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/ViewSelector.tsx"],"sourcesContent":["\"use client\";\r\nimport { MapPin, User, Package } from \"lucide-react\";\r\n\r\ninterface Props {\r\n    view: string;\r\n    setView: (view: string) => void;\r\n}\r\n\r\nconst ViewSelector = ({ view, setView }: Props) => {\r\n    return (\r\n\r\n        <div className=\"flex gap-4 flex-wrap mb-4\">\r\n            <h2 className=\"px-3 py-1 text-center font-semibold \">View Sales By :</h2>\r\n            <button\r\n                className={`h-8 px-3 py-1 rounded border cursor-pointer ${view === \"location\" ? \"bg-gray-100\" : \"\"\r\n                    }`}\r\n                onClick={() => setView(\"location\")}\r\n            >\r\n                <MapPin className=\"inline w-4 h-4 mr-1\" /> Location\r\n            </button>\r\n            <button\r\n                className={`h-8 px-3 py-1 rounded border cursor-pointer ${view === \"customer\" ? \"bg-gray-100\" : \"\"\r\n                    }`}\r\n                onClick={() => setView(\"customer\")}\r\n            >\r\n                <User className=\"inline w-4 h-4 mr-1\" /> Customer\r\n            </button>\r\n            <button\r\n                className={`h-8 px-3 py-1 rounded border cursor-pointer ${view === \"product\" ? \"bg-gray-100\" : \"\"\r\n                    }`}\r\n                onClick={() => setView(\"product\")}\r\n            >\r\n                <Package className=\"inline w-4 h-4 mr-1\" /> Product\r\n            </button>\r\n            <div className=\"border-b border-gray-300\"></div>\r\n        </div>\r\n\r\n\r\n    );\r\n};\r\n\r\nexport default ViewSelector;"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AADA;;;AAQA,MAAM,eAAe,CAAC,EAAE,IAAI,EAAE,OAAO,EAAS;IAC1C,qBAEI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;0BAAuC;;;;;;0BACrD,8OAAC;gBACG,WAAW,CAAC,4CAA4C,EAAE,SAAS,aAAa,gBAAgB,IAC1F;gBACN,SAAS,IAAM,QAAQ;;kCAEvB,8OAAC,oNAAM;wBAAC,WAAU;;;;;;oBAAwB;;;;;;;0BAE9C,8OAAC;gBACG,WAAW,CAAC,4CAA4C,EAAE,SAAS,aAAa,gBAAgB,IAC1F;gBACN,SAAS,IAAM,QAAQ;;kCAEvB,8OAAC,0MAAI;wBAAC,WAAU;;;;;;oBAAwB;;;;;;;0BAE5C,8OAAC;gBACG,WAAW,CAAC,4CAA4C,EAAE,SAAS,YAAY,gBAAgB,IACzF;gBACN,SAAS,IAAM,QAAQ;;kCAEvB,8OAAC,mNAAO;wBAAC,WAAU;;;;;;oBAAwB;;;;;;;0BAE/C,8OAAC;gBAAI,WAAU;;;;;;;;;;;;AAK3B;uCAEe"}},
    {"offset": {"line": 2259, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/DateFiltersExports.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useRef, useEffect, useMemo } from \"react\";\r\nimport { Sale } from \"@/components/Sale\";\r\n\r\ninterface Props {\r\n    startDate: Date | null;\r\n    endDate: Date | null;\r\n    setStartDate: (date: Date | null) => void;\r\n    setEndDate: (date: Date | null) => void;\r\n    selectedLocations: string[];\r\n    setSelectedLocations: (locations: string[]) => void;\r\n    selectedCategories: string[];\r\n    setSelectedCategories: (categories: string[]) => void;\r\n    selectedProducts: string[];\r\n    setSelectedProducts: (products: string[]) => void;\r\n    locationOptions: { value: string; label: string }[];\r\n    categoryOptions: { value: string; label: string }[];\r\n    sales: Sale[];\r\n    exportCSV: () => void;\r\n    exportPDF: () => void;\r\n}\r\n\r\nconst DateFiltersExports = ({\r\n    startDate,\r\n    endDate,\r\n    setStartDate,\r\n    setEndDate,\r\n    selectedLocations,\r\n    setSelectedLocations,\r\n    selectedCategories,\r\n    setSelectedCategories,\r\n    selectedProducts,\r\n    setSelectedProducts,\r\n    locationOptions,\r\n    categoryOptions,\r\n    sales,\r\n    exportCSV,\r\n    exportPDF,\r\n}: Props) => {\r\n    const [showLocations, setShowLocations] = useState(false);\r\n    const [showCategories, setShowCategories] = useState(false);\r\n    const [showProducts, setShowProducts] = useState(false);\r\n\r\n    const locationRef = useRef<HTMLDivElement>(null);\r\n    const categoryRef = useRef<HTMLDivElement>(null);\r\n    const productRef = useRef<HTMLDivElement>(null);\r\n\r\n\r\n    // ---------------- PRODUCT OPTIONS ----------------\r\n    const products = useMemo(() => {\r\n        if (!sales || sales.length === 0) return [];\r\n        const productMap = new Map<string, { id: string; name: string; category: string | null }>();\r\n        sales.forEach((sale) => {\r\n            if (sale.product && !productMap.has(sale.productId)) {\r\n                productMap.set(sale.productId, {\r\n                    id: sale.productId,\r\n                    name: sale.product.name,\r\n                    category: sale.product.category ?? null,\r\n                });\r\n            }\r\n        });\r\n        return Array.from(productMap.values());\r\n    }, [sales]);\r\n\r\n\r\n    // Filter products based on selected categories\r\n    useEffect(() => {\r\n        if (selectedCategories.length > 0) {\r\n            setFilteredProducts(\r\n                products.filter((p) =>\r\n                    selectedCategories.includes(p.category ?? \"\")\r\n                )\r\n            );\r\n        } else {\r\n            setFilteredProducts(products);\r\n        }\r\n    }, [products, selectedCategories]);\r\n\r\n\r\n    // ---------------- FILTERED STATE ----------------\r\n    const [filteredCategories, setFilteredCategories] = useState(categoryOptions);\r\n    const [filteredProducts, setFilteredProducts] = useState(products);\r\n\r\n    // Filter products based on selected categories\r\n    useEffect(() => {\r\n        setFilteredProducts(products);\r\n    }, [products]);\r\n\r\n    // Filter categories based on selected products\r\n    useEffect(() => {\r\n        if (selectedProducts.length > 0) {\r\n            const categories = Array.from(\r\n                new Set(\r\n                    selectedProducts\r\n                        .map((id) => products.find((p) => p.id === id)?.category)\r\n                        .filter(Boolean)\r\n                )\r\n            ) as string[];\r\n            setFilteredCategories(categoryOptions.filter((c) => categories.includes(c.value)));\r\n        } else {\r\n            setFilteredCategories(categoryOptions);\r\n        }\r\n    }, [selectedProducts, products, categoryOptions]);\r\n\r\n    // ---------------- CLOSE DROPDOWNS ON OUTSIDE CLICK ----------------\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (locationRef.current && !locationRef.current.contains(event.target as Node)) {\r\n                setShowLocations(false);\r\n            }\r\n            if (categoryRef.current && !categoryRef.current.contains(event.target as Node)) {\r\n                setShowCategories(false);\r\n            }\r\n            if (productRef.current && !productRef.current.contains(event.target as Node)) {\r\n                setShowProducts(false);\r\n            }\r\n        };\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }, [locationRef, categoryRef, productRef]);\r\n\r\n    // ---------------- DATE HANDLERS ----------------\r\n    const formatDateForInput = (date: Date | null) => {\r\n        if (!date) return \"\";\r\n        const year = date.getFullYear();\r\n        const month = String(date.getMonth() + 1).padStart(2, \"0\");\r\n        const day = String(date.getDate()).padStart(2, \"0\");\r\n        return `${year}-${month}-${day}`;\r\n    };\r\n\r\n    const handleStartDateChange = (value: string) => {\r\n        setStartDate(value ? new Date(`${value}T00:00:00`) : null);\r\n    };\r\n    const handleEndDateChange = (value: string) => {\r\n        setEndDate(value ? new Date(`${value}T23:59:59`) : null);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-2 gap-2\">\r\n            {/* Date Pickers */}\r\n            <div className=\"flex flex-wrap gap-2 items-center px-2 py-1 w-full xl:w-auto\">\r\n                <label className=\"flex h-8 items-center gap-2\">\r\n                    Start Date:\r\n                    <input type=\"date\" value={formatDateForInput(startDate)} onChange={(e) => handleStartDateChange(e.target.value)} className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200\" />\r\n                </label>\r\n                <label className=\"flex h-8 items-center gap-2\">\r\n                    End Date:\r\n                    <input type=\"date\" value={formatDateForInput(endDate)} onChange={(e) => handleEndDateChange(e.target.value)} className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200\" />\r\n                </label>\r\n            </div>\r\n            {/* Dropdown Filters */}\r\n            <div className=\"flex flex-wrap gap-2 w-full xl:w-auto\">\r\n                {/* Locations */}\r\n                <div ref={locationRef} className=\"relative\">\r\n                    <button onClick={() => setShowLocations(!showLocations)} className=\"px-3 py-1 h-8 border rounded hover:bg-gray-200 cursor-pointer\" >\r\n                        Select Locations\r\n                    </button>\r\n                    {showLocations && (\r\n                        <div className=\"p-2 border rounded mt-1 absolute bg-white z-10 w-36 max-h-48 overflow-y-auto\">\r\n                            <button onClick={() => setSelectedLocations([])} className=\"text-sm text-blue-500 hover:underline cursor-pointer mb-2\" >\r\n                                Clear Selection\r\n                            </button>\r\n                            {locationOptions.map((option) => (\r\n                                <div key={option.value} className=\"flex items-center gap-2\">\r\n                                    <input type=\"checkbox\" id={option.value} checked={selectedLocations.includes(option.value)} onChange={(e) => e.target.checked ? setSelectedLocations([...selectedLocations, option.value]) : setSelectedLocations(selectedLocations.filter((l) => l !== option.value))} className=\"w-4 h-4 cursor-pointer\" />\r\n                                    <label htmlFor={option.value} className=\"px-2 py-1 text-sm hover:bg-gray-200 cursor-pointer\" >\r\n                                        {option.label}\r\n                                    </label>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {/* Categories */}\r\n                <div ref={categoryRef} className=\"relative\">\r\n                    <button onClick={() => setShowCategories(!showCategories)} className=\"px-3 py-1 h-8 border rounded hover:bg-gray-200 cursor-pointer\" >\r\n                        Select Categories\r\n                    </button>\r\n                    {showCategories && (\r\n                        <div className=\"p-2 border rounded mt-1 absolute bg-white z-10 w-36 max-h-48 overflow-y-auto\">\r\n                            <button onClick={() => setSelectedCategories([])} className=\"text-sm text-blue-500 hover:underline cursor-pointer mb-2\" >\r\n                                Clear Selection\r\n                            </button>\r\n                            {filteredCategories.map((option) => (\r\n                                <div key={option.value} className=\"flex items-center gap-2\">\r\n                                    <input type=\"checkbox\" id={option.value} checked={selectedCategories.includes(option.value)} onChange={(e) => e.target.checked ? setSelectedCategories([...selectedCategories, option.value]) : setSelectedCategories(selectedCategories.filter((c) => c !== option.value))} className=\"w-4 h-4 cursor-pointer\" />\r\n                                    <label htmlFor={option.value} className=\"text-sm hover:bg-gray-200 cursor-pointer\" >\r\n                                        {option.label}\r\n                                    </label>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {/* Products */}\r\n                <div ref={productRef} className=\"relative\">\r\n                    <button onClick={() => setShowProducts(!showProducts)} className=\"px-3 py-1 h-8 border rounded hover:bg-gray-200 cursor-pointer\" >\r\n                        Select Products\r\n                    </button>\r\n                    {showProducts && (\r\n                        <div className=\"p-2 border rounded mt-1 absolute bg-white z-10 w-36 max-h-48 overflow-y-auto\">\r\n                            <button onClick={() => setSelectedProducts([])} className=\"text-sm text-blue-500 hover:underline cursor-pointer mb-2\" >\r\n                                Clear Selection\r\n                            </button>\r\n                            {filteredProducts.map((option) => (\r\n                                <div key={option.id} className=\"flex items-center gap-2\">\r\n                                    <input type=\"checkbox\" id={option.id} checked={selectedProducts.includes(option.id)} onChange={(e) => e.target.checked ? setSelectedProducts([...selectedProducts, option.id]) : setSelectedProducts(selectedProducts.filter((p) => p !== option.id))} className=\"w-4 h-4 cursor-pointer\" />\r\n                                    <label htmlFor={option.id} className=\"text-sm hover:bg-gray-200 cursor-pointer\" >\r\n                                        {option.name}\r\n                                    </label>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            {/* Export Buttons */}\r\n            <div className=\"flex gap-2 flex-wrap w-full xl:w-auto\">\r\n                <button onClick={exportCSV} className=\"px-2 py-1 h-8 border rounded hover:bg-gray-200 cursor-pointer\" >\r\n                    Export CSV\r\n                </button>\r\n                <button onClick={exportPDF} className=\"px-2 py-1 h-8 border rounded hover:bg-gray-200 cursor-pointer\" >\r\n                    Export PDF\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DateFiltersExports;\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAsBA,MAAM,qBAAqB,CAAC,EACxB,SAAS,EACT,OAAO,EACP,YAAY,EACZ,UAAU,EACV,iBAAiB,EACjB,oBAAoB,EACpB,kBAAkB,EAClB,qBAAqB,EACrB,gBAAgB,EAChB,mBAAmB,EACnB,eAAe,EACf,eAAe,EACf,KAAK,EACL,SAAS,EACT,SAAS,EACL;IACJ,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACnD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,MAAM,cAAc,IAAA,+MAAM,EAAiB;IAC3C,MAAM,cAAc,IAAA,+MAAM,EAAiB;IAC3C,MAAM,aAAa,IAAA,+MAAM,EAAiB;IAG1C,oDAAoD;IACpD,MAAM,WAAW,IAAA,gNAAO,EAAC;QACrB,IAAI,CAAC,SAAS,MAAM,MAAM,KAAK,GAAG,OAAO,EAAE;QAC3C,MAAM,aAAa,IAAI;QACvB,MAAM,OAAO,CAAC,CAAC;YACX,IAAI,KAAK,OAAO,IAAI,CAAC,WAAW,GAAG,CAAC,KAAK,SAAS,GAAG;gBACjD,WAAW,GAAG,CAAC,KAAK,SAAS,EAAE;oBAC3B,IAAI,KAAK,SAAS;oBAClB,MAAM,KAAK,OAAO,CAAC,IAAI;oBACvB,UAAU,KAAK,OAAO,CAAC,QAAQ,IAAI;gBACvC;YACJ;QACJ;QACA,OAAO,MAAM,IAAI,CAAC,WAAW,MAAM;IACvC,GAAG;QAAC;KAAM;IAGV,+CAA+C;IAC/C,IAAA,kNAAS,EAAC;QACN,IAAI,mBAAmB,MAAM,GAAG,GAAG;YAC/B,oBACI,SAAS,MAAM,CAAC,CAAC,IACb,mBAAmB,QAAQ,CAAC,EAAE,QAAQ,IAAI;QAGtD,OAAO;YACH,oBAAoB;QACxB;IACJ,GAAG;QAAC;QAAU;KAAmB;IAGjC,mDAAmD;IACnD,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAC;IAC7D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IAEzD,+CAA+C;IAC/C,IAAA,kNAAS,EAAC;QACN,oBAAoB;IACxB,GAAG;QAAC;KAAS;IAEb,+CAA+C;IAC/C,IAAA,kNAAS,EAAC;QACN,IAAI,iBAAiB,MAAM,GAAG,GAAG;YAC7B,MAAM,aAAa,MAAM,IAAI,CACzB,IAAI,IACA,iBACK,GAAG,CAAC,CAAC,KAAO,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,UAC/C,MAAM,CAAC;YAGpB,sBAAsB,gBAAgB,MAAM,CAAC,CAAC,IAAM,WAAW,QAAQ,CAAC,EAAE,KAAK;QACnF,OAAO;YACH,sBAAsB;QAC1B;IACJ,GAAG;QAAC;QAAkB;QAAU;KAAgB;IAEhD,qEAAqE;IACrE,IAAA,kNAAS,EAAC;QACN,MAAM,qBAAqB,CAAC;YACxB,IAAI,YAAY,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBAC5E,iBAAiB;YACrB;YACA,IAAI,YAAY,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBAC5E,kBAAkB;YACtB;YACA,IAAI,WAAW,OAAO,IAAI,CAAC,WAAW,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBAC1E,gBAAgB;YACpB;QACJ;QACA,SAAS,gBAAgB,CAAC,aAAa;QACvC,OAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;IAC3D,GAAG;QAAC;QAAa;QAAa;KAAW;IAEzC,kDAAkD;IAClD,MAAM,qBAAqB,CAAC;QACxB,IAAI,CAAC,MAAM,OAAO;QAClB,MAAM,OAAO,KAAK,WAAW;QAC7B,MAAM,QAAQ,OAAO,KAAK,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;QACtD,MAAM,MAAM,OAAO,KAAK,OAAO,IAAI,QAAQ,CAAC,GAAG;QAC/C,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;IACpC;IAEA,MAAM,wBAAwB,CAAC;QAC3B,aAAa,QAAQ,IAAI,KAAK,GAAG,MAAM,SAAS,CAAC,IAAI;IACzD;IACA,MAAM,sBAAsB,CAAC;QACzB,WAAW,QAAQ,IAAI,KAAK,GAAG,MAAM,SAAS,CAAC,IAAI;IACvD;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAM,WAAU;;4BAA8B;0CAE3C,8OAAC;gCAAM,MAAK;gCAAO,OAAO,mBAAmB;gCAAY,UAAU,CAAC,IAAM,sBAAsB,EAAE,MAAM,CAAC,KAAK;gCAAG,WAAU;;;;;;;;;;;;kCAE/H,8OAAC;wBAAM,WAAU;;4BAA8B;0CAE3C,8OAAC;gCAAM,MAAK;gCAAO,OAAO,mBAAmB;gCAAU,UAAU,CAAC,IAAM,oBAAoB,EAAE,MAAM,CAAC,KAAK;gCAAG,WAAU;;;;;;;;;;;;;;;;;;0BAI/H,8OAAC;gBAAI,WAAU;;kCAEX,8OAAC;wBAAI,KAAK;wBAAa,WAAU;;0CAC7B,8OAAC;gCAAO,SAAS,IAAM,iBAAiB,CAAC;gCAAgB,WAAU;0CAAiE;;;;;;4BAGnI,+BACG,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAO,SAAS,IAAM,qBAAqB,EAAE;wCAAG,WAAU;kDAA6D;;;;;;oCAGvH,gBAAgB,GAAG,CAAC,CAAC,uBAClB,8OAAC;4CAAuB,WAAU;;8DAC9B,8OAAC;oDAAM,MAAK;oDAAW,IAAI,OAAO,KAAK;oDAAE,SAAS,kBAAkB,QAAQ,CAAC,OAAO,KAAK;oDAAG,UAAU,CAAC,IAAM,EAAE,MAAM,CAAC,OAAO,GAAG,qBAAqB;+DAAI;4DAAmB,OAAO,KAAK;yDAAC,IAAI,qBAAqB,kBAAkB,MAAM,CAAC,CAAC,IAAM,MAAM,OAAO,KAAK;oDAAI,WAAU;;;;;;8DAClR,8OAAC;oDAAM,SAAS,OAAO,KAAK;oDAAE,WAAU;8DACnC,OAAO,KAAK;;;;;;;2CAHX,OAAO,KAAK;;;;;;;;;;;;;;;;;kCAWtC,8OAAC;wBAAI,KAAK;wBAAa,WAAU;;0CAC7B,8OAAC;gCAAO,SAAS,IAAM,kBAAkB,CAAC;gCAAiB,WAAU;0CAAiE;;;;;;4BAGrI,gCACG,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAO,SAAS,IAAM,sBAAsB,EAAE;wCAAG,WAAU;kDAA6D;;;;;;oCAGxH,mBAAmB,GAAG,CAAC,CAAC,uBACrB,8OAAC;4CAAuB,WAAU;;8DAC9B,8OAAC;oDAAM,MAAK;oDAAW,IAAI,OAAO,KAAK;oDAAE,SAAS,mBAAmB,QAAQ,CAAC,OAAO,KAAK;oDAAG,UAAU,CAAC,IAAM,EAAE,MAAM,CAAC,OAAO,GAAG,sBAAsB;+DAAI;4DAAoB,OAAO,KAAK;yDAAC,IAAI,sBAAsB,mBAAmB,MAAM,CAAC,CAAC,IAAM,MAAM,OAAO,KAAK;oDAAI,WAAU;;;;;;8DACvR,8OAAC;oDAAM,SAAS,OAAO,KAAK;oDAAE,WAAU;8DACnC,OAAO,KAAK;;;;;;;2CAHX,OAAO,KAAK;;;;;;;;;;;;;;;;;kCAWtC,8OAAC;wBAAI,KAAK;wBAAY,WAAU;;0CAC5B,8OAAC;gCAAO,SAAS,IAAM,gBAAgB,CAAC;gCAAe,WAAU;0CAAiE;;;;;;4BAGjI,8BACG,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAO,SAAS,IAAM,oBAAoB,EAAE;wCAAG,WAAU;kDAA6D;;;;;;oCAGtH,iBAAiB,GAAG,CAAC,CAAC,uBACnB,8OAAC;4CAAoB,WAAU;;8DAC3B,8OAAC;oDAAM,MAAK;oDAAW,IAAI,OAAO,EAAE;oDAAE,SAAS,iBAAiB,QAAQ,CAAC,OAAO,EAAE;oDAAG,UAAU,CAAC,IAAM,EAAE,MAAM,CAAC,OAAO,GAAG,oBAAoB;+DAAI;4DAAkB,OAAO,EAAE;yDAAC,IAAI,oBAAoB,iBAAiB,MAAM,CAAC,CAAC,IAAM,MAAM,OAAO,EAAE;oDAAI,WAAU;;;;;;8DACjQ,8OAAC;oDAAM,SAAS,OAAO,EAAE;oDAAE,WAAU;8DAChC,OAAO,IAAI;;;;;;;2CAHV,OAAO,EAAE;;;;;;;;;;;;;;;;;;;;;;;0BAYvC,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAO,SAAS;wBAAW,WAAU;kCAAiE;;;;;;kCAGvG,8OAAC;wBAAO,SAAS;wBAAW,WAAU;kCAAiE;;;;;;;;;;;;;;;;;;AAMvH;uCAEe"}},
    {"offset": {"line": 2666, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesTable.tsx"],"sourcesContent":["\"use client\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { ArrowUpDown } from \"lucide-react\";\r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\nimport { unitToKg } from \"@/lib/UnitToKg\";\r\nimport { Sale } from \"./Sale\";\r\nimport ViewSelector from \"./ViewSelector\";\r\nimport DateFiltersExports from \"./DateFiltersExports\";\r\n\r\ninterface Props {\r\n    sales: Sale[];\r\n    locations: Location[];\r\n}\r\n\r\ntype View = \"location\" | \"customer\" | \"product\";\r\ntype SortKey =\r\n    | \"name\"\r\n    | \"saleCount\"\r\n    | \"quantity\"\r\n    | \"totalTonnage\"\r\n    | \"totalSalesValue\"\r\n    | \"avgOrderValue\"\r\n    | \"contribution\";\r\n\r\nexport default function SalesTable({ sales }: Props) {\r\n    const [view, setView] = useState<View>(\"location\");\r\n    const [sortKey, setSortKey] = useState<SortKey>(\"totalSalesValue\");\r\n    const [sortDir, setSortDir] = useState<\"asc\" | \"desc\">(\"desc\");\r\n    const [startDate, setStartDate] = useState<Date | null>(null);\r\n    const [endDate, setEndDate] = useState<Date | null>(null);\r\n    const [selectedLocations, setSelectedLocations] = useState<string[]>([]);\r\n    const [selectedCategories, setSelectedCategories] = useState<string[]>([]);\r\n    const [selectedProducts, setSelectedProducts] = useState<string[]>([]);\r\n\r\n    /** ----------------- Sorting ----------------- */\r\n    const toggleSort = (key: SortKey) => {\r\n        if (key === sortKey) {\r\n            setSortDir(sortDir === \"asc\" ? \"desc\" : \"asc\");\r\n        } else {\r\n            setSortKey(key);\r\n            setSortDir(\"desc\");\r\n        }\r\n    };\r\n\r\n    const Header = ({ label, column, align = \"left\" }: any) => (\r\n        <th\r\n            onClick={() => toggleSort(column)}\r\n            className={`py-2 px-3 cursor-pointer border-r select-none hover:text-blue-600 ${align === \"right\" ? \"text-right\" : \"text-left\"\r\n                }`}\r\n        >\r\n            <span className=\"inline-flex items-center gap-1\">\r\n                {label}\r\n                {sortKey === column && <span className=\"text-xs\">{sortDir === \"asc\" ? \"â–²\" : \"â–¼\"}</span>}\r\n                <ArrowUpDown className=\"w-3 h-3 opacity-40\" />\r\n            </span>\r\n        </th>\r\n    );\r\n\r\n    /** ----------------- Options ----------------- */\r\n    const locations = useMemo(() => {\r\n        if (!sales || sales.length === 0) return [];\r\n\r\n        // Use Map to deduplicate by location id\r\n        const map = new Map<string, { id: string; name: string; address?: string }>();\r\n        sales.forEach(sale => {\r\n            if (sale.location && !map.has(sale.locationId)) {\r\n                map.set(sale.locationId, {\r\n                    id: sale.locationId,\r\n                    name: sale.location.name,\r\n                    address: sale.location?.address,\r\n                });\r\n            }\r\n        });\r\n\r\n        // Convert to array of objects suitable for dropdowns\r\n        return Array.from(map.values());\r\n    }, [sales]);\r\n\r\n    const categories = useMemo(() => Array.from(new Set(sales.map(s => s.product?.category).filter(Boolean))).sort(), [sales]);\r\n\r\n    const products = useMemo(() => {\r\n        const map = new Map<string, { id: string; name: string; category: string | null }>();\r\n        sales.forEach(s => {\r\n            if (s.product && !map.has(s.productId)) {\r\n                map.set(s.productId, {\r\n                    id: s.productId,\r\n                    name: s.product.name,\r\n                    category: s.product.category,\r\n                });\r\n            }\r\n        });\r\n        return Array.from(map.values());\r\n    }, [sales]);\r\n\r\n    const locationOptions = locations.map(l => ({ value: l.id, label: l.name }));\r\n    const categoryOptions = categories.map(c => ({ value: c, label: c }));\r\n    const productOptions = products.map(p => ({ value: p.id, label: p.name }));\r\n\r\n\r\n    /** ----------------- Filtered Sales ----------------- */\r\n    const filteredSales = useMemo(() => {\r\n        return sales.filter(sale => {\r\n            const date = new Date(sale.saleDate);\r\n            if (startDate && date < startDate) return false;\r\n            if (endDate && date > endDate) return false;\r\n            if (selectedLocations.length && !selectedLocations.includes(sale.locationId)) return false;\r\n            if (selectedCategories.length && !selectedCategories.includes(sale.product?.category)) return false;\r\n            if (selectedProducts.length && !selectedProducts.includes(sale.productId)) return false;\r\n            return true;\r\n        });\r\n    }, [sales, startDate, endDate, selectedLocations, selectedCategories, selectedProducts]);\r\n\r\n    /** ----------------- Aggregation ----------------- */\r\n    const aggregatedData = useMemo(() => {\r\n        const map: Record<string, any> = {};\r\n        filteredSales.forEach(sale => {\r\n            let id: string, name: string;\r\n            if (view === \"location\") {\r\n                id = sale.locationId; name = sale.location?.name || \"Unknown Location\";\r\n            } else if (view === \"customer\") {\r\n                id = sale.customerId; name = sale.customerName || \"Unknown Customer\";\r\n            } else {\r\n                id = sale.productId; name = sale.product?.name || \"Unknown Product\";\r\n            }\r\n            if (!map[id]) map[id] = { id, name, saleCount: 0, quantity: 0, totalTonnage: 0, totalSalesValue: 0, avgOrderValue: 0, contribution: 0 };\r\n            const salesValue = sale.totalAmount ?? sale.salePrice * sale.quantity;\r\n            const weightKg = unitToKg(sale.product?.weightValue || 0, sale.product?.weightUnit);\r\n            const tonnage = (weightKg * sale.quantity * (sale.product?.packSize || 1)) / 1000;\r\n            map[id].saleCount += 1;\r\n            map[id].quantity += sale.quantity;\r\n            map[id].totalSalesValue += salesValue;\r\n            map[id].totalTonnage += tonnage;\r\n        });\r\n        const totalRevenue = Object.values(map).reduce((sum, d) => sum + d.totalSalesValue, 0);\r\n        return Object.values(map).map(d => ({\r\n            ...d,\r\n            avgOrderValue: d.saleCount ? d.totalSalesValue / d.saleCount : 0,\r\n            contribution: totalRevenue ? (d.totalSalesValue / totalRevenue) * 100 : 0\r\n        }));\r\n    }, [filteredSales, view]);\r\n\r\n    /** ----------------- Sorting ----------------- */\r\n    const sortedData = useMemo(() => {\r\n        return [...aggregatedData].sort((a, b) => {\r\n            const aVal = a[sortKey], bVal = b[sortKey];\r\n            if (typeof aVal === \"string\") return sortDir === \"asc\" ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\r\n            return sortDir === \"asc\" ? aVal - bVal : bVal - aVal;\r\n        });\r\n    }, [aggregatedData, sortKey, sortDir]);\r\n\r\n    /** ----------------- Export Functions ----------------- */\r\n    const exportCSV = () => {\r\n        const headers = [view === \"location\" ? \"Location\" : view === \"customer\" ? \"Customer\" : \"Product\", \"Orders\", \"Quantity\", \"Tonnage\", \"Avg Order Value\", \"Revenue\", \"% Share\"];\r\n        const rows = sortedData.map(d => [d.name, d.saleCount, d.quantity, d.totalTonnage.toFixed(2), d.avgOrderValue.toFixed(2), d.totalSalesValue.toFixed(2), d.contribution.toFixed(2)]);\r\n        const totalRow = [\"Total\", sortedData.reduce((sum, d) => sum + d.saleCount, 0), sortedData.reduce((sum, d) => sum + d.quantity, 0), sortedData.reduce((sum, d) => sum + d.totalTonnage, 0).toFixed(2), (sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0) / sortedData.reduce((sum, d) => sum + d.saleCount, 0)).toFixed(2), sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0).toFixed(2), \"100%\"];\r\n        const csv = [headers, ...rows, totalRow].map(r => r.join(\",\")).join(\"\\n\");\r\n        const blob = new Blob([csv], { type: \"text/csv\" });\r\n        const url = URL.createObjectURL(blob); const a = document.createElement(\"a\");\r\n        a.href = url; a.download = `sales_by_${view}.csv`; a.click(); URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const exportPDF = () => {\r\n        const doc = new jsPDF();\r\n        const start = startDate ? startDate.toLocaleDateString() : \"N/A\";\r\n        const end = endDate ? endDate.toLocaleDateString() : \"N/A\";\r\n        doc.setFontSize(16); doc.setFont(\"helvetica\", \"bold\");\r\n        doc.text(`Sales by ${view}`, doc.internal.pageSize.getWidth() / 2, 15, { align: \"center\" });\r\n        doc.setFontSize(10); doc.setFont(\"helvetica\", \"normal\");\r\n        doc.text(`Date Range: ${start} - ${end}`, doc.internal.pageSize.getWidth() / 2, 23, { align: \"center\" });\r\n        const body = sortedData.map((d, i) => [i + 1, d.name, d.saleCount, d.quantity, d.totalTonnage.toFixed(2), `K${d.avgOrderValue.toFixed(0)}`, `K${d.totalSalesValue.toFixed(0)}`, `${d.contribution.toFixed(1)}%`]);\r\n        const totalRow = [\"\", \"Total\", sortedData.reduce((sum, d) => sum + d.saleCount, 0), sortedData.reduce((sum, d) => sum + d.quantity, 0), sortedData.reduce((sum, d) => sum + d.totalTonnage, 0).toFixed(2), `K${(sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0) / sortedData.reduce((sum, d) => sum + d.saleCount, 0)).toFixed(0)}`, `K${sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0).toFixed(0)}`, \"100%\"];\r\n        autoTable(doc, { head: [[\"#\", \"Name\", \"Orders\", \"Quantity\", \"Tonnage\", \"Avg Order Value\", \"Revenue\", \"% Share\"]], body: [...body, totalRow], startY: 30, styles: { fontSize: 10 }, headStyles: { fillColor: [87, 100, 85], fontStyle: \"bold\", halign: \"center\" } });\r\n        doc.save(`sales_by_${view}.pdf`);\r\n    };\r\n\r\n    /** ------------------ Render ------------------ */\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md\">\r\n            <ViewSelector view={view} setView={setView} />\r\n            <DateFiltersExports\r\n                startDate={startDate}\r\n                endDate={endDate}\r\n                setStartDate={setStartDate}\r\n                setEndDate={setEndDate}\r\n                selectedLocations={selectedLocations}\r\n                setSelectedLocations={setSelectedLocations}\r\n                selectedCategories={selectedCategories}\r\n                setSelectedCategories={setSelectedCategories}\r\n                selectedProducts={selectedProducts}\r\n                setSelectedProducts={setSelectedProducts}\r\n                locationOptions={locationOptions}\r\n                categoryOptions={categoryOptions}\r\n                sales={sales}\r\n                exportCSV={exportCSV}\r\n                exportPDF={exportPDF}\r\n            />\r\n            <div className=\"max-h-[420px] overflow-y-auto overflow-x-auto\">\r\n                <table className=\"w-full text-sm border border-gray-200\">\r\n                    <thead className=\"sticky top-0 bg-gray-200\">\r\n                        <tr>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">#</th>\r\n                            <Header label={view === \"location\" ? \"Location\" : view === \"customer\" ? \"Customer\" : \"Product\"} column=\"name\" />\r\n                            <Header label=\"Orders\" column=\"saleCount\" align=\"center\" />\r\n                            <Header label=\"Quantity\" column=\"quantity\" align=\"center\" />\r\n                            <Header label=\"Tonnage\" column=\"totalTonnage\" align=\"center\" />\r\n                            <Header label=\"Avg Order Value\" column=\"avgOrderValue\" align=\"center\" />\r\n                            <Header label=\"Revenue\" column=\"totalSalesValue\" align=\"center\" />\r\n                            <Header label=\"Contribution\" column=\"contribution\" align=\"center\" />\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {sortedData.length === 0 ? (\r\n                            <tr><td colSpan={8} className=\"py-6 text-center text-gray-500 italic\">No data available</td></tr>\r\n                        ) : (\r\n                            <>\r\n                                {sortedData.map((d, i) => (\r\n                                    <tr key={d.id} className={i % 2 ? \"bg-gray-50\" : \"\"}>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">{i + 1}</td>\r\n                                        <td className=\"py-2 px-3 border-r\">{d.name}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">{d.saleCount}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">{d.quantity}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">{d.totalTonnage.toFixed(2)}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">K{d.avgOrderValue.toFixed(0)}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">K{d.totalSalesValue.toFixed(0)}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">{d.contribution.toFixed(1)}%</td>\r\n                                    </tr>\r\n                                ))}\r\n                                <tr className=\"bg-gray-200 font-bold\">\r\n                                    <td colSpan={2} className=\"py-2 px-3 border-r text-center font-small\">Total</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">{sortedData.reduce((sum, d) => sum + d.saleCount, 0)}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">{sortedData.reduce((sum, d) => sum + d.quantity, 0)}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">{sortedData.reduce((sum, d) => sum + d.totalTonnage, 0).toFixed(2)}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">K{(sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0) / sortedData.reduce((sum, d) => sum + d.saleCount, 0)).toFixed(0)}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">K{sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0).toFixed(0)}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">100%</td>\r\n                                </tr>\r\n                            </>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}