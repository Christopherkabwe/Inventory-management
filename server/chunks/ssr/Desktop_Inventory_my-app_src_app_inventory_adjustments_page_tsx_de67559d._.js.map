{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/app/inventory/adjustments/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\ntype Product = { id: string; name: string };\r\ntype Location = { id: string; name: string };\r\n\r\nexport default function AdjustmentsPage() {\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [locations, setLocations] = useState<Location[]>([]);\r\n    const [form, setForm] = useState({\r\n        productId: \"\",\r\n        locationId: \"\",\r\n        type: \"\",\r\n        quantity: 0,\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        async function loadData() {\r\n            try {\r\n                const [prodRes, locRes] = await Promise.all([\r\n                    fetch(\"/api/products\"),\r\n                    fetch(\"/api/locations\"),\r\n                ]);\r\n\r\n                const prodData = await prodRes.json();\r\n                const locData = await locRes.json();\r\n\r\n                // Safely handle API responses\r\n                const productsList: Product[] =\r\n                    Array.isArray(prodData) ? prodData : prodData.products ?? [];\r\n                const locationsList: Location[] =\r\n                    Array.isArray(locData) ? locData : locData.locations ?? [];\r\n\r\n                setProducts(productsList);\r\n                setLocations(locationsList);\r\n            } catch (err) {\r\n                console.error(\"Failed to load products or locations:\", err);\r\n                setProducts([]);\r\n                setLocations([]);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        loadData();\r\n    }, []);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (!form.productId || !form.locationId || !form.type || form.quantity <= 0) {\r\n            alert(\"Please fill all fields correctly.\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await fetch(\"/api/adjustments\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(form),\r\n            });\r\n            alert(\"Adjustment added successfully!\");\r\n            setForm({ productId: \"\", locationId: \"\", type: \"\", quantity: 0 });\r\n        } catch (err) {\r\n            console.error(\"Failed to add adjustment:\", err);\r\n            alert(\"Failed to add adjustment.\");\r\n        }\r\n    };\r\n\r\n    if (loading) return <p>Loading products and locations...</p>;\r\n\r\n    return (\r\n        <div className=\"p-6\">\r\n            <h1 className=\"text-2xl font-bold mb-4\">Add Adjustment</h1>\r\n            <form onSubmit={handleSubmit} className=\"space-y-4 max-w-md\">\r\n                <select\r\n                    required\r\n                    value={form.productId}\r\n                    onChange={(e) => setForm({ ...form, productId: e.target.value })}\r\n                    className=\"border p-2 w-full\"\r\n                >\r\n                    <option value=\"\">Select Product</option>\r\n                    {products.map((p) => (\r\n                        <option key={p.id} value={p.id}>\r\n                            {p.name}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n\r\n                <select\r\n                    required\r\n                    value={form.locationId}\r\n                    onChange={(e) => setForm({ ...form, locationId: e.target.value })}\r\n                    className=\"border p-2 w-full\"\r\n                >\r\n                    <option value=\"\">Select Location</option>\r\n                    {locations.map((l) => (\r\n                        <option key={l.id} value={l.id}>\r\n                            {l.name}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n\r\n                <select\r\n                    required\r\n                    value={form.type}\r\n                    onChange={(e) => setForm({ ...form, type: e.target.value })}\r\n                    className=\"border p-2 w-full\"\r\n                >\r\n                    <option value=\"\">Select Adjustment Type</option>\r\n                    <option value=\"REBAG_GAIN\">Rebag Gain</option>\r\n                    <option value=\"REBAG_LOSS\">Rebag Loss</option>\r\n                    <option value=\"DAMAGED\">Damaged</option>\r\n                    <option value=\"EXPIRED\">Expired</option>\r\n                </select>\r\n\r\n                <input\r\n                    type=\"number\"\r\n                    min={1}\r\n                    required\r\n                    value={form.quantity}\r\n                    onChange={(e) => setForm({ ...form, quantity: Number(e.target.value) })}\r\n                    placeholder=\"Quantity\"\r\n                    className=\"border p-2 w-full\"\r\n                />\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"bg-blue-500 text-white px-4 py-2 rounded\"\r\n                >\r\n                    Add Adjustment\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}