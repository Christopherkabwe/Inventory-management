{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/stack/client.tsx"],"sourcesContent":["import { StackClientApp } from \"@stackframe/stack\";\n\nexport const stackClientApp = new StackClientApp({\n  tokenStore: \"nextjs-cookie\",\n});\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,iBAAiB,IAAI,yQAAc,CAAC;IAC/C,YAAY;AACd"}},
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/stack/server.tsx"],"sourcesContent":["import \"server-only\";\n\nimport { StackServerApp } from \"@stackframe/stack\";\nimport { stackClientApp } from \"./client\";\n\nexport const stackServerApp = new StackServerApp({\n  inheritsFrom: stackClientApp,\n});\n"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;;;;AAEO,MAAM,iBAAiB,IAAI,yQAAc,CAAC;IAC/C,cAAc,8KAAc;AAC9B"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/auth.ts"],"sourcesContent":["import { stackServerApp } from \"@/stack/server\";\nimport { redirect } from \"next/navigation\";\n\n\nexport async function getCurrentUser() {\n    const user = await stackServerApp.getUser()\n    if (!user) {\n        redirect(\"/sign-in\");\n    }\n\n    return user;\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe;IAClB,MAAM,OAAO,MAAM,8KAAc,CAAC,OAAO;IACzC,IAAI,CAAC,MAAM;QACP,IAAA,mLAAQ,EAAC;IACb;IAEA,OAAO;AACX"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/app/inventory/stock-transfer/page.tsx"],"sourcesContent":["\"use client\";\r\nimport Sidebar from \"@/components/sidebar2\";\r\nimport { getCurrentUser } from \"@/lib/auth\";\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { useEffect, useState } from \"react\";\r\nimport toast from \"react-hot-toast\";\r\n\r\ninterface Product {\r\n    id: string;\r\n    name: string;\r\n}\r\n\r\ninterface Location {\r\n    id: string;\r\n    name: string;\r\n}\r\n\r\nexport default async function StockTransferPage() {\r\n    const user = await getCurrentUser();\r\n    const userId = user.id;\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [locations, setLocations] = useState<Location[]>([]);\r\n\r\n    const [productId, setProductId] = useState(\"\");\r\n    const [fromLocationId, setFromLocationId] = useState(\"\");\r\n    const [toLocationId, setToLocationId] = useState(\"\");\r\n    const [quantity, setQuantity] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const [productsRes, locationsRes] = await Promise.all([\r\n                    fetch(\"/api/products\"),\r\n                    fetch(\"/api/locations\"),\r\n                ]);\r\n\r\n                const productsData = await productsRes.json();\r\n                const locationsData = await locationsRes.json();\r\n\r\n                // âœ… NORMALIZE RESPONSES\r\n                const productsArray: Product[] = Array.isArray(productsData)\r\n                    ? productsData\r\n                    : Array.isArray(productsData.products)\r\n                        ? productsData.products\r\n                        : [];\r\n\r\n                const locationsArray: Location[] = Array.isArray(locationsData)\r\n                    ? locationsData\r\n                    : Array.isArray(locationsData.locations)\r\n                        ? locationsData.locations\r\n                        : [];\r\n\r\n                setProducts(productsArray);\r\n                setLocations(locationsArray);\r\n\r\n            } catch (err) {\r\n                console.error(err);\r\n                toast.error(\"Failed to load products or locations\");\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    async function submitTransfer() {\r\n        if (!productId || !fromLocationId || !toLocationId || quantity <= 0) {\r\n            toast.error(\"Fill all fields correctly\");\r\n            return;\r\n        }\r\n\r\n        if (fromLocationId === toLocationId) {\r\n            toast.error(\"From and To locations cannot be the same\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const res = await fetch(\"/api/stock-transfer\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                    productId,\r\n                    fromLocationId,\r\n                    toLocationId,\r\n                    quantity,\r\n                }),\r\n            });\r\n\r\n            const data = await res.json();\r\n\r\n            if (!res.ok) {\r\n                toast.error(data.error || \"Transfer failed\");\r\n                return;\r\n            }\r\n\r\n            toast.success(\"Stock transferred successfully\");\r\n            setQuantity(0);\r\n\r\n        } catch (err) {\r\n            console.error(err);\r\n            toast.error(\"Something went wrong\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"max-w-xl mx-auto p-6 space-y-4\">\r\n                <h1 className=\"text-xl font-semibold\">Stock Transfer</h1>\r\n\r\n                {/* Product */}\r\n                <select\r\n                    className=\"border p-2 w-full\"\r\n                    value={productId}\r\n                    onChange={e => setProductId(e.target.value)}\r\n                >\r\n                    <option value=\"\">Select Product</option>\r\n                    {products.map(p => (\r\n                        <option key={p.id} value={p.id}>\r\n                            {p.name}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n\r\n                {/* From Location */}\r\n                <select\r\n                    className=\"border p-2 w-full\"\r\n                    value={fromLocationId}\r\n                    onChange={e => setFromLocationId(e.target.value)}\r\n                >\r\n                    <option value=\"\">From Location</option>\r\n                    {locations.map(l => (\r\n                        <option key={l.id} value={l.id}>\r\n                            {l.name}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n\r\n                {/* To Location */}\r\n                <select\r\n                    className=\"border p-2 w-full\"\r\n                    value={toLocationId}\r\n                    onChange={e => setToLocationId(e.target.value)}\r\n                >\r\n                    <option value=\"\">To Location</option>\r\n                    {locations.map(l => (\r\n                        <option key={l.id} value={l.id}>\r\n                            {l.name}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n\r\n                {/* Quantity */}\r\n                <input\r\n                    type=\"number\"\r\n                    className=\"border p-2 w-full\"\r\n                    placeholder=\"Quantity\"\r\n                    min={1}\r\n                    value={quantity}\r\n                    onChange={e => setQuantity(Number(e.target.value))}\r\n                />\r\n\r\n                <button\r\n                    onClick={submitTransfer}\r\n                    className=\"bg-black text-white px-4 py-2 rounded w-full\"\r\n                >\r\n                    Transfer Stock\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/next/dist/compiled/server-only/index.js"],"sourcesContent":["throw new Error(\n  \"This module cannot be imported from a Client Component module. \" +\n    \"It should only be used from a Server Component.\"\n);\n"],"names":[],"mappings":"AAAA,MAAM,IAAI,MACR,oEACE","ignoreList":[0]}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/lib/stack-app/apps/interfaces/server-app.ts"],"sourcesContent":["\n//===========================================\n// THIS FILE IS AUTO-GENERATED FROM TEMPLATE. DO NOT EDIT IT DIRECTLY\n//===========================================\nimport { KnownErrors } from \"@stackframe/stack-shared\";\nimport { Result } from \"@stackframe/stack-shared/dist/utils/results\";\nimport type { GenericQueryCtx } from \"convex/server\";\nimport { AsyncStoreProperty, GetCurrentPartialUserOptions, GetCurrentUserOptions } from \"../../common\";\nimport { CustomerProductsList, CustomerProductsRequestOptions, InlineProduct, ServerItem } from \"../../customers\";\nimport { DataVaultStore } from \"../../data-vault\";\nimport { SendEmailOptions } from \"../../email\";\nimport { ServerListUsersOptions, ServerTeam, ServerTeamCreateOptions } from \"../../teams\";\nimport { ProjectCurrentServerUser, ServerOAuthProvider, ServerUser, ServerUserCreateOptions, SyncedPartialServerUser, TokenPartialUser } from \"../../users\";\nimport { _StackServerAppImpl } from \"../implementations\";\nimport { StackClientApp, StackClientAppConstructorOptions } from \"./client-app\";\n\n\nexport type StackServerAppConstructorOptions<HasTokenStore extends boolean, ProjectId extends string> = StackClientAppConstructorOptions<HasTokenStore, ProjectId> & {\n  secretServerKey?: string,\n};\n\nexport type StackServerApp<HasTokenStore extends boolean = boolean, ProjectId extends string = string> = (\n  & {\n    createTeam(data: ServerTeamCreateOptions): Promise<ServerTeam>,\n    /**\n     * @deprecated use `getUser()` instead\n     */\n    getServerUser(): Promise<ProjectCurrentServerUser<ProjectId> | null>,\n\n    createUser(options: ServerUserCreateOptions): Promise<ServerUser>,\n    grantProduct(options: (\n      ({ userId: string } | { teamId: string } | { customCustomerId: string }) &\n      ({ productId: string } | { product: InlineProduct }) &\n      { quantity?: number }\n    )): Promise<void>,\n\n    useUser(options: GetCurrentUserOptions<HasTokenStore> & { or: 'redirect' }): ProjectCurrentServerUser<ProjectId>,\n    useUser(options: GetCurrentUserOptions<HasTokenStore> & { or: 'throw' }): ProjectCurrentServerUser<ProjectId>,\n    useUser(options: GetCurrentUserOptions<HasTokenStore> & { or: 'anonymous' }): ProjectCurrentServerUser<ProjectId>,\n    useUser(options?: GetCurrentUserOptions<HasTokenStore>): ProjectCurrentServerUser<ProjectId> | null,\n    useUser(id: string): ServerUser | null,\n    useUser(options: { apiKey: string, or?: \"return-null\" | \"anonymous\" }): ServerUser | null,\n    useUser(options: { from: \"convex\", ctx: GenericQueryCtx<any>, or?: \"return-null\" | \"anonymous\" }): ServerUser | null,\n\n    getUser(options: GetCurrentUserOptions<HasTokenStore> & { or: 'redirect' }): Promise<ProjectCurrentServerUser<ProjectId>>,\n    getUser(options: GetCurrentUserOptions<HasTokenStore> & { or: 'throw' }): Promise<ProjectCurrentServerUser<ProjectId>>,\n    getUser(options: GetCurrentUserOptions<HasTokenStore> & { or: 'anonymous' }): Promise<ProjectCurrentServerUser<ProjectId>>,\n    getUser(options?: GetCurrentUserOptions<HasTokenStore>): Promise<ProjectCurrentServerUser<ProjectId> | null>,\n    getUser(id: string): Promise<ServerUser | null>,\n    getUser(options: { apiKey: string, or?: \"return-null\" | \"anonymous\" }): Promise<ServerUser | null>,\n    getUser(options: { from: \"convex\", ctx: GenericQueryCtx<any>, or?: \"return-null\" | \"anonymous\" }): Promise<ServerUser | null>,\n\n    // note: we don't special-case 'anonymous' here to return non-null, see GetPartialUserOptions for more details\n    getPartialUser(options: GetCurrentPartialUserOptions<HasTokenStore> & { from: 'token' }): Promise<TokenPartialUser | null>,\n    getPartialUser(options: GetCurrentPartialUserOptions<HasTokenStore> & { from: 'convex' }): Promise<TokenPartialUser | null>,\n    getPartialUser(options: GetCurrentPartialUserOptions<HasTokenStore>): Promise<SyncedPartialServerUser | TokenPartialUser | null>,\n    usePartialUser(options: GetCurrentPartialUserOptions<HasTokenStore> & { from: 'token' }): TokenPartialUser | null,\n    usePartialUser(options: GetCurrentPartialUserOptions<HasTokenStore> & { from: 'convex' }): TokenPartialUser | null,\n    usePartialUser(options: GetCurrentPartialUserOptions<HasTokenStore>): SyncedPartialServerUser | TokenPartialUser | null,\n    useTeam(id: string): ServerTeam | null,\n    useTeam(options: { apiKey: string }): ServerTeam | null,\n    getTeam(id: string): Promise<ServerTeam | null>,\n    getTeam(options: { apiKey: string }): Promise<ServerTeam | null>,\n\n\n    useUsers(options?: ServerListUsersOptions): ServerUser[] & { nextCursor: string | null }, // THIS_LINE_PLATFORM react-like\n    listUsers(options?: ServerListUsersOptions): Promise<ServerUser[] & { nextCursor: string | null }>,\n\n    createOAuthProvider(options: {\n      userId: string,\n      accountId: string,\n      providerConfigId: string,\n      email: string,\n      allowSignIn: boolean,\n      allowConnectedAccounts: boolean,\n    }): Promise<Result<ServerOAuthProvider, InstanceType<typeof KnownErrors.OAuthProviderAccountIdAlreadyUsedForSignIn>>>,\n\n    sendEmail(options: SendEmailOptions): Promise<void>,\n  }\n  & AsyncStoreProperty<\"user\", [id: string], ServerUser | null, false>\n  & Omit<AsyncStoreProperty<\"users\", [], ServerUser[], true>, \"listUsers\" | \"useUsers\">\n  & AsyncStoreProperty<\"teams\", [], ServerTeam[], true>\n  & AsyncStoreProperty<\"dataVaultStore\", [id: string], DataVaultStore, false>\n  & AsyncStoreProperty<\n    \"item\",\n    [{ itemId: string, userId: string } | { itemId: string, teamId: string } | { itemId: string, customCustomerId: string }],\n    ServerItem,\n    false\n  >\n  & AsyncStoreProperty<\n    \"products\",\n    [options: CustomerProductsRequestOptions],\n    CustomerProductsList,\n    true\n  >\n  & StackClientApp<HasTokenStore, ProjectId>\n);\nexport type StackServerAppConstructor = {\n  new <\n    TokenStoreType extends string,\n    HasTokenStore extends (TokenStoreType extends {} ? true : boolean),\n    ProjectId extends string\n  >(options: StackServerAppConstructorOptions<HasTokenStore, ProjectId>): StackServerApp<HasTokenStore, ProjectId>,\n  new (options: StackServerAppConstructorOptions<boolean, string>): StackServerApp<boolean, string>,\n};\nexport const StackServerApp: StackServerAppConstructor = _StackServerAppImpl;\n"],"names":[],"mappings":";;;;;AAaA,SAAS,2BAA2B;;AA4F7B,IAAM,iBAA4C,2QAAA"}}]
}