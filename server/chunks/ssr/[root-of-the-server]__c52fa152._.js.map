{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx"],"sourcesContent":["\"use client\";\r\nimport { UserButton } from \"@stackframe/stack\";\r\nimport { BarChart3, Package, Plus, Settings, Info, ShoppingCart, ChevronDown } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport default function Sidebar() {\r\n    const [openItems, setOpenItems] = useState<string[]>([]);\r\n    const currentPath = usePathname();\r\n\r\n    useEffect(() => {\r\n        const activeItem = NAV_ITEMS.find((item) => item.subItems && item.subItems.some((sub) => currentPath === sub.href));\r\n        if (activeItem) {\r\n            setOpenItems([activeItem.name]);\r\n        }\r\n    }, [currentPath]);\r\n\r\n    const NAV_ITEMS = [\r\n        {\r\n            name: \"Dashboard\",\r\n            icon: BarChart3,\r\n            subItems: [\r\n                { name: \"Inventory Dashboard\", href: \"/dashboard/inventory\" },\r\n                { name: \"Sales Dashboard\", href: \"/dashboard/sales\" },\r\n            ],\r\n        },\r\n        {\r\n            name: \"Inventory\",\r\n            icon: Package,\r\n            subItems: [\r\n                { name: \"Inventory Summary\", href: \"/inventory/inventory\" },\r\n                { name: \"Add Product\", href: \"/inventory/add-product\" },\r\n                { name: \"Stock Reports\", href: \"/inventory/stock-report\" },\r\n            ],\r\n        },\r\n        { name: \"Sales\", href: \"/sales\", icon: ShoppingCart },\r\n        { name: \"Settings\", href: \"/settings\", icon: Settings },\r\n        { name: \"About\", href: \"/about\", icon: Info },\r\n    ];\r\n\r\n    const toggleItem = (name: string) => {\r\n        if (openItems.includes(name)) {\r\n            setOpenItems(openItems.filter((item) => item !== name));\r\n        } else {\r\n            setOpenItems([...openItems, name]);\r\n        }\r\n    };\r\n\r\n    const isActive = (href: string) => currentPath.startsWith(href);\r\n\r\n    const isParentActive = (subItems?: { href: string }[]) =>\r\n        subItems?.some((sub) => currentPath.startsWith(sub.href));\r\n\r\n    const isOpen = (name: string) => openItems.includes(name);\r\n\r\n    return (\r\n        <div className=\"fixed left-0 top-0 bg-gray-900 text-white w-64 min-h-screen p-6 z-10\">\r\n            <div className=\"mb-8\">\r\n                <div className=\"flex items-center space-x-2 mb-4\">\r\n                    <BarChart3 className=\"w-10 h-10\" />\r\n                    <span className=\"text-md font-semibold\">Inventory Management App</span>\r\n                </div>\r\n            </div>\r\n            <nav className=\"space-y-1\">\r\n                <div className=\"text-sm font-semibold text-gray-400 uppercase\">Inventory</div>\r\n                {NAV_ITEMS.map((item, key) => {\r\n                    const IconComponent = item.icon;\r\n                    const parentActive = isParentActive(item.subItems);\r\n                    const itemActive = isActive(item.href);\r\n\r\n                    if (item.subItems) {\r\n                        return (\r\n                            <div key={key}>\r\n                                <button\r\n                                    onClick={() => toggleItem(item.name)}\r\n                                    className={`flex items-center justify-between w-full py-2 px-3 rounded-lg ${parentActive ? \"bg-purple-50 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                        }`}\r\n                                >\r\n                                    <div className=\"flex items-center space-x-3\">\r\n                                        <IconComponent className=\"w-5 h-5\" />\r\n                                        <span className=\"text-sm\">{item.name}</span>\r\n                                    </div>\r\n                                    <ChevronDown className={`w-4 h-4 transition-transform ${isOpen(item.name) ? \"rotate-180\" : \"\"}`} />\r\n                                </button>\r\n                                {isOpen(item.name) && (\r\n                                    <ul className=\"ml-6 mt-2 space-y-2\">\r\n                                        {item.subItems.map((subItem, subKey) => (\r\n                                            <li key={subKey}>\r\n                                                <Link\r\n                                                    href={subItem.href}\r\n                                                    className={`flex items-center space-x-3 py-2 px-3 rounded-lg text-md ${isActive(subItem.href) ? \"text-white-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                                        }`}\r\n                                                >\r\n                                                    {subItem.name}\r\n                                                </Link>\r\n                                            </li>\r\n                                        ))}\r\n                                    </ul>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    }\r\n\r\n                    return (\r\n                        <Link\r\n                            href={item.href}\r\n                            key={key}\r\n                            className={`flex items-center space-x-3 py-2 px-3 rounded-lg ${itemActive ? \"bg-purple-100 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                }`}\r\n                        >\r\n                            <IconComponent className=\"w-5 h-5\" />\r\n                            <span className=\"text-sm\">{item.name}</span>\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </nav>\r\n            <div className=\"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-700\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <UserButton showUserInfo />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/DateFiltersExports.tsx"],"sourcesContent":["\r\n\"use client\";\r\nimport { useState, useRef, useEffect, useMemo } from \"react\";\r\nimport { Package } from \"lucide-react\";\r\nimport { Sale } from \"@/components/Sale\";\r\n\r\ninterface Props {\r\n    view: string;\r\n    startDate: Date | null;\r\n    endDate: Date | null;\r\n    setStartDate: (date: Date | null) => void;\r\n    setEndDate: (date: Date | null) => void;\r\n    selectedLocations: string[];\r\n    setSelectedLocations: (locations: string[]) => void;\r\n    selectedCategories: string[];\r\n    setSelectedCategories: (categories: string[]) => void;\r\n    selectedProducts: string[];\r\n    setSelectedProducts: (products: string[]) => void;\r\n    locationOptions: { value: string; label: string }[];\r\n    categoryOptions: { value: string; label: string }[];\r\n    sales: Sale[] | null;\r\n    exportCSV: () => void;\r\n    exportPDF: () => void;\r\n    setView: (view: string) => void;\r\n}\r\n\r\nconst DateFiltersExports = ({\r\n    startDate,\r\n    endDate,\r\n    setStartDate,\r\n    setEndDate,\r\n    selectedLocations,\r\n    setSelectedLocations,\r\n    selectedCategories,\r\n    setSelectedCategories,\r\n    selectedProducts,\r\n    setSelectedProducts,\r\n    locationOptions,\r\n    categoryOptions,\r\n    sales,\r\n    exportCSV,\r\n    exportPDF,\r\n}: Props) => {\r\n    const [showLocations, setShowLocations] = useState(false);\r\n    const [showCategories, setShowCategories] = useState(false);\r\n    const [showProducts, setShowProducts] = useState(false);\r\n    const locationRef = useRef<HTMLDivElement>(null);\r\n    const categoryRef = useRef<HTMLDivElement>(null);\r\n    const productRef = useRef<HTMLDivElement>(null);\r\n\r\n    const productOptions = useMemo(() => {\r\n        if (!sales) return [];\r\n        const productMap = new Map();\r\n        sales.forEach((sale) => {\r\n            if (sale.product && !productMap.has(sale.product.id)) {\r\n                productMap.set(sale.product.id, {\r\n                    value: sale.product.id,\r\n                    label: sale.product.name,\r\n                    category: sale.product.category,\r\n                });\r\n            }\r\n        });\r\n        return Array.from(productMap.values());\r\n    }, [sales]);\r\n\r\n    console.log(\"Unique products:\", productOptions);\r\n\r\n\r\n    const [filteredProducts, setFilteredProducts] = useState(productOptions);\r\n    const [filteredCategories, setFilteredCategories] = useState(categoryOptions);\r\n\r\n    // Filter products when categories are selected\r\n    useEffect(() => {\r\n        if (selectedCategories.length > 0) {\r\n            setFilteredProducts(\r\n                productOptions.filter((p) => selectedCategories.includes(p.category))\r\n            );\r\n        } else {\r\n            setFilteredProducts(productOptions);\r\n        }\r\n    }, [selectedCategories, productOptions]);\r\n\r\n    // Filter categories when products are selected\r\n    useEffect(() => {\r\n        if (selectedProducts.length > 0) {\r\n            const categories = Array.from(\r\n                new Set(\r\n                    selectedProducts\r\n                        .map((id) => productOptions.find((p) => p.value === id)?.category)\r\n                        .filter(Boolean)\r\n                )\r\n            ) as string[];\r\n            setFilteredCategories(categoryOptions.filter((c) => categories.includes(c.value)));\r\n        } else {\r\n            setFilteredCategories(categoryOptions);\r\n        }\r\n    }, [selectedProducts, productOptions, categoryOptions]);\r\n\r\n    // Close dropdowns when clicking outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (locationRef.current && !locationRef.current.contains(event.target as Node)) {\r\n                setShowLocations(false);\r\n            }\r\n            if (categoryRef.current && !categoryRef.current.contains(event.target as Node)) {\r\n                setShowCategories(false);\r\n            }\r\n            if (productRef.current && !productRef.current.contains(event.target as Node)) {\r\n                setShowProducts(false);\r\n            }\r\n        };\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }, []);\r\n\r\n    // Helper to format date for input\r\n    const formatDateForInput = (date: Date | null) => {\r\n        if (!date) return \"\";\r\n        const year = date.getFullYear();\r\n        const month = String(date.getMonth() + 1).padStart(2, \"0\");\r\n        const day = String(date.getDate()).padStart(2, \"0\");\r\n        return `${year}-${month}-${day}`;\r\n    };\r\n\r\n    // Handle date changes and enforce local start/end of day\r\n    const handleStartDateChange = (value: string) => {\r\n        setStartDate(value ? new Date(`${value}T00:00:00`) : null);\r\n    };\r\n    const handleEndDateChange = (value: string) => {\r\n        setEndDate(value ? new Date(`${value}T23:59:59`) : null);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-wrap items-center justify-between mb-2 gap-2\">\r\n            {/* Date Pickers */}\r\n            <div className=\"flex gap-2 items-center px-2 py-1 flex-wrap\">\r\n                <label className=\"flex h-8 items-center gap-2\">\r\n                    Start Date:\r\n                    <input\r\n                        type=\"date\"\r\n                        value={formatDateForInput(startDate)}\r\n                        onChange={(e) => handleStartDateChange(e.target.value)}\r\n                        className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200\"\r\n                    />\r\n                </label>\r\n                <label className=\"flex h-8 items-center gap-2\">\r\n                    End Date:\r\n                    <input\r\n                        type=\"date\"\r\n                        value={formatDateForInput(endDate)}\r\n                        onChange={(e) => handleEndDateChange(e.target.value)}\r\n                        className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200\"\r\n                    />\r\n                </label>\r\n            </div>\r\n\r\n            {/* Dropdowns */}\r\n            <div className=\"flex gap-2 flex-wrap\">\r\n                {/* Locations */}\r\n                <div ref={locationRef}>\r\n                    <button\r\n                        onClick={() => setShowLocations(!showLocations)}\r\n                        className=\"px-3 py-1 h-8 border rounded hover:bg-gray-200 cursor-pointer\"\r\n                    >\r\n                        Select Locations\r\n                    </button>\r\n                    {showLocations && (\r\n                        <div className=\"p-2 border rounded mt-1 absolute bg-white z-10 w-35\">\r\n                            <button\r\n                                onClick={() => setSelectedLocations([])}\r\n                                className=\"text-sm text-blue-500 hover:underline cursor-pointer mb-2\"\r\n                            >\r\n                                Clear Selection\r\n                            </button>\r\n                            {locationOptions.map((option) => (\r\n                                <div key={option.value} className=\"flex items-center gap-2\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        id={option.value}\r\n                                        checked={selectedLocations.includes(option.value)}\r\n                                        onChange={(e) => {\r\n                                            if (e.target.checked) {\r\n                                                setSelectedLocations([...selectedLocations, option.value]);\r\n                                            } else {\r\n                                                setSelectedLocations(\r\n                                                    selectedLocations.filter((l) => l !== option.value)\r\n                                                );\r\n                                            }\r\n                                        }}\r\n                                        className=\"w-4 h-4 cursor-pointer\"\r\n                                    />\r\n                                    <label\r\n                                        htmlFor={option.value}\r\n                                        className=\"px-2 py-1 w-50 text-sm hover:bg-gray-200 cursor-pointer\"\r\n                                    >\r\n                                        {option.label}\r\n                                    </label>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Categories */}\r\n                <div ref={categoryRef}>\r\n                    <button\r\n                        onClick={() => setShowCategories(!showCategories)}\r\n                        className=\"px-3 py-1 h-8 border rounded hover:bg-gray-200 cursor-pointer\"\r\n                    >\r\n                        Select Categories\r\n                    </button>\r\n                    {showCategories && (\r\n                        <div className=\"p-2 border rounded mt-1 absolute bg-white z-10 w-37\">\r\n                            <button\r\n                                onClick={() => setSelectedCategories([])}\r\n                                className=\"text-sm text-blue-500 hover:underline cursor-pointer mb-2\"\r\n                            >\r\n                                Clear Selection\r\n                            </button>\r\n                            {filteredCategories.map((option) => (\r\n                                <div key={option.value} className=\"flex items-center gap-2\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        id={option.value}\r\n                                        checked={selectedCategories.includes(option.value)}\r\n                                        onChange={(e) => {\r\n                                            if (e.target.checked) {\r\n                                                setSelectedCategories([...selectedCategories, option.value]);\r\n                                            } else {\r\n                                                setSelectedCategories(\r\n                                                    selectedCategories.filter((c) => c !== option.value)\r\n                                                );\r\n                                            }\r\n                                        }}\r\n                                        className=\"w-4 h-4 cursor-pointer\"\r\n                                    />\r\n                                    <label\r\n                                        htmlFor={option.value}\r\n                                        className=\"text-sm hover:bg-gray-200 cursor-pointer\"\r\n                                    >\r\n                                        {option.label}\r\n                                    </label>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Products */}\r\n                <div ref={productRef}>\r\n                    <button\r\n                        onClick={() => setShowProducts(!showProducts)}\r\n                        className=\"px-3 py-1 h-8 border rounded hover:bg-gray-200 cursor-pointer\"\r\n                    >\r\n                        Select Products\r\n                    </button>\r\n                    {showProducts && (\r\n                        <div className=\"p-2 border rounded mt-2 absolute bg-white z-10 w-35 h-48 overflow-y-auto\">\r\n                            <button\r\n                                onClick={() => setSelectedProducts([])}\r\n                                className=\"text-sm text-blue-500 hover:underline cursor-pointer mb-2\"\r\n                            >\r\n                                Clear Selection\r\n                            </button>\r\n                            {filteredProducts.map((option) => (\r\n                                <div key={option.value} className=\"flex items-center gap-3 mr-2\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        id={option.value}\r\n                                        checked={selectedProducts.includes(option.value)}\r\n                                        onChange={(e) => {\r\n                                            if (e.target.checked) {\r\n                                                setSelectedProducts([...selectedProducts, option.value]);\r\n                                            } else {\r\n                                                setSelectedProducts(\r\n                                                    selectedProducts.filter((p) => p !== option.value)\r\n                                                );\r\n                                            }\r\n                                        }}\r\n                                        className=\"w-4 h-4 cursor-pointer\"\r\n                                    />\r\n                                    <label\r\n                                        htmlFor={option.value}\r\n                                        className=\"text-sm hover:bg-gray-200 cursor-pointer\"\r\n                                    >\r\n                                        {option.label}\r\n                                    </label>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Export Buttons */}\r\n            <div className=\"flex gap-2 flex-wrap\">\r\n                <button\r\n                    onClick={exportCSV}\r\n                    className=\"px-2 py-1 h-8 border rounded hover:bg-gray-200 cursor-pointer\"\r\n                >\r\n                    Export CSV\r\n                </button>\r\n                <button\r\n                    onClick={exportPDF}\r\n                    className=\"px-2 py-1 h-8 border rounded hover:bg-gray-200 cursor-pointer\"\r\n                >\r\n                    Export PDF\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DateFiltersExports;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 717, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/app/inventory/stock-report/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useMemo } from \"react\";\r\nimport Sidebar from \"@/components/sidebar2\";\r\nimport { Package, ChevronLeft, ChevronRight } from \"lucide-react\";\r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\nimport DateFiltersExports from \"@/components/DateFiltersExports\";\r\n\r\ninterface Product {\r\n    id: string;\r\n    name: string;\r\n    category: string;\r\n    sku: string;\r\n    price: number;\r\n    quantity: number;\r\n}\r\n\r\ninterface ReportData {\r\n    productName: string;\r\n    locationName: string;\r\n    date: string; // ISO string\r\n    openingStock: number;\r\n    receipts: number;\r\n    sales: number;\r\n    transfersIn: number;\r\n    transfersOut: number;\r\n    returns: number;\r\n    damaged: number;\r\n    expired: number;\r\n    rebagGain: number;\r\n    rebagLoss: number;\r\n    closingStock: number;\r\n}\r\n\r\ninterface ProductOption {\r\n    value: string;\r\n    label: string;\r\n    category: string;\r\n}\r\n\r\nconst ITEMS_PER_PAGE = 20;\r\n\r\nexport default function StockReportDashboard() {\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [report, setReport] = useState<ReportData[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n\r\n    const [selectedLocations, setSelectedLocations] = useState<string[]>([]);\r\n    const [selectedCategories, setSelectedCategories] = useState<string[]>([]);\r\n    const [selectedProducts, setSelectedProducts] = useState<string[]>([]);\r\n    const [splitByLocation, setSplitByLocation] = useState(false);\r\n\r\n    const [startDate, setStartDate] = useState<Date | null>(null);\r\n    const [endDate, setEndDate] = useState<Date | null>(null);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const prodRes = await fetch(\"/api/products\");\r\n                const productsDataRaw = await prodRes.json();\r\n                const productsData = Array.isArray(productsDataRaw.products) ? productsDataRaw.products : [];\r\n                setProducts(productsData);\r\n\r\n                // Build query params for date filtering\r\n                const params = new URLSearchParams();\r\n                if (startDate) params.append(\"startDate\", startDate.toISOString());\r\n                if (endDate) params.append(\"endDate\", endDate.toISOString());\r\n\r\n                const repRes = await fetch(`/api/stock-report?${params.toString()}`);\r\n                const reportData = await repRes.json();\r\n                setReport(reportData);\r\n\r\n            } catch (err) {\r\n                console.error(err);\r\n                setError(\"Failed to fetch data\");\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, [startDate, endDate]); // refetch whenever dates change\r\n\r\n    const productCategoryMap = useMemo(() => {\r\n        const map: Record<string, string> = {};\r\n        products.forEach((p) => (map[p.name] = p.category));\r\n        return map;\r\n    }, [products]);\r\n\r\n    const productOptions: ProductOption[] = useMemo(\r\n        () =>\r\n            products.map((p) => ({\r\n                value: p.name,\r\n                label: p.name,\r\n                category: p.category,\r\n            })),\r\n        [products]\r\n    );\r\n\r\n    const locationOptions = useMemo(() => {\r\n        const locations = Array.from(new Set(report.map((r) => r.locationName)));\r\n        return locations.map((l) => ({ value: l, label: l }));\r\n    }, [report]);\r\n\r\n    const categoryOptions = useMemo(() => {\r\n        const categories = Array.from(new Set(products.map((p) => p.category)));\r\n        return categories.map((c) => ({ value: c, label: c }));\r\n    }, [products]);\r\n\r\n    const filteredReport = useMemo(() => {\r\n        let filtered = report.filter((r) => {\r\n            if (selectedLocations.length && !selectedLocations.includes(r.locationName)) return false;\r\n            const category = productCategoryMap[r.productName] || \"Uncategorized\";\r\n            if (selectedCategories.length && !selectedCategories.includes(category)) return false;\r\n            if (selectedProducts.length && !selectedProducts.includes(r.productName)) return false;\r\n            return true;\r\n        });\r\n\r\n        if (!splitByLocation) {\r\n            const aggMap: Record<string, ReportData> = {};\r\n            filtered.forEach((r) => {\r\n                if (!aggMap[r.productName]) {\r\n                    aggMap[r.productName] = { ...r };\r\n                } else {\r\n                    const agg = aggMap[r.productName];\r\n                    agg.openingStock += r.openingStock;\r\n                    agg.receipts += r.receipts;\r\n                    agg.sales += r.sales;\r\n                    agg.transfersIn += r.transfersIn;\r\n                    agg.transfersOut += r.transfersOut;\r\n                    agg.returns += r.returns;\r\n                    agg.damaged += r.damaged;\r\n                    agg.expired += r.expired;\r\n                    agg.rebagGain += r.rebagGain;\r\n                    agg.rebagLoss += r.rebagLoss;\r\n                    agg.closingStock += r.closingStock;\r\n                }\r\n            });\r\n            filtered = Object.values(aggMap).map((r) => ({\r\n                ...r,\r\n                locationName: \"All Locations\",\r\n            }));\r\n        }\r\n\r\n        return filtered;\r\n    }, [\r\n        report,\r\n        selectedLocations,\r\n        selectedCategories,\r\n        selectedProducts,\r\n        splitByLocation,\r\n        productCategoryMap,\r\n    ]);\r\n\r\n    const totalPages = Math.ceil(filteredReport.length / ITEMS_PER_PAGE);\r\n    const paginatedReport = filteredReport.slice(\r\n        (currentPage - 1) * ITEMS_PER_PAGE,\r\n        currentPage * ITEMS_PER_PAGE\r\n    );\r\n\r\n    if (loading) return <div>Loading...</div>;\r\n    if (error) return <div>{error}</div>;\r\n\r\n    const exportCSVWrapper = () => exportCSV(filteredReport, splitByLocation);\r\n    const exportPDFWrapper = () => exportPDF(filteredReport, splitByLocation);\r\n\r\n    return (\r\n        <main>\r\n            <Sidebar />\r\n            <div className=\"ml-64 p-4\">\r\n                <h2 className=\"text-2xl font-bold mb-4 flex items-center gap-2\">\r\n                    <Package className=\"h-5 w-5\" /> Stock Report\r\n                </h2>\r\n\r\n                {/* Filters & Toggle Row */}\r\n                <div className=\"flex items-center justify-between gap-4 flex-wrap\">\r\n                    <div className=\"flex h-8 w-50 items-center mb-2 gap-2 px-2 py-1 h-8 border rounded hover:bg-gray-200 cursor-pointer\">\r\n\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            id=\"splitByLocation\"\r\n                            checked={splitByLocation}\r\n                            onChange={() => setSplitByLocation(!splitByLocation)}\r\n                            className=\"w-4 h-4\"\r\n                        />\r\n                        <label htmlFor=\"splitByLocation\" className=\"text-sm select-none\">\r\n                            Split by Location\r\n                        </label>\r\n                    </div>\r\n                    {/* Date & Filters Component */}\r\n                    <div className=\"flex-1 min-w-[300px]\">\r\n                        <DateFiltersExports\r\n                            view=\"stock\"\r\n                            startDate={startDate}\r\n                            endDate={endDate}\r\n                            setStartDate={setStartDate}\r\n                            setEndDate={setEndDate}\r\n                            selectedLocations={selectedLocations}\r\n                            setSelectedLocations={setSelectedLocations}\r\n                            selectedCategories={selectedCategories}\r\n                            setSelectedCategories={setSelectedCategories}\r\n                            selectedProducts={selectedProducts}\r\n                            setSelectedProducts={setSelectedProducts}\r\n                            locationOptions={locationOptions}\r\n                            categoryOptions={categoryOptions}\r\n                            productOptions={productOptions}\r\n                            exportCSV={exportCSVWrapper}\r\n                            exportPDF={exportPDFWrapper}\r\n                            setView={() => { }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                {/* Table */}\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full border-collapse border\">\r\n                        <thead className=\"bg-gray-200\">\r\n                            <tr>\r\n                                <th className=\"border p-2\">Product</th>\r\n                                {splitByLocation && <th className=\"border p-2\">Location</th>}\r\n                                <th className=\"border p-2\">Opening</th>\r\n                                <th className=\"border p-2\">Receipts</th>\r\n                                <th className=\"border p-2\">Sales</th>\r\n                                <th className=\"border p-2\">Transfers In</th>\r\n                                <th className=\"border p-2\">Transfers Out</th>\r\n                                <th className=\"border p-2\">Returns</th>\r\n                                <th className=\"border p-2\">Rebag Gain</th>\r\n                                <th className=\"border p-2\">Rebag Loss</th>\r\n                                <th className=\"border p-2\">Damaged</th>\r\n                                <th className=\"border p-2\">Expired</th>\r\n                                <th className=\"border p-2\">Closing</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {paginatedReport.map((r, idx) => (\r\n                                <tr key={r.productName + idx} className=\"hover:bg-gray-100\">\r\n                                    <td className=\"border p-2\">{r.productName}</td>\r\n                                    {splitByLocation && <td className=\"border p-2\">{r.locationName}</td>}\r\n                                    <td className=\"border p-2\">{r.openingStock}</td>\r\n                                    <td className=\"border p-2\">{r.receipts}</td>\r\n                                    <td className=\"border p-2\">{r.sales}</td>\r\n                                    <td className=\"border p-2\">{r.transfersIn}</td>\r\n                                    <td className=\"border p-2\">{r.transfersOut}</td>\r\n                                    <td className=\"border p-2\">{r.returns}</td>\r\n                                    <td className=\"border p-2\">{r.rebagGain}</td>\r\n                                    <td className=\"border p-2\">{r.rebagLoss}</td>\r\n                                    <td className=\"border p-2\">{r.damaged}</td>\r\n                                    <td className=\"border p-2\">{r.expired}</td>\r\n                                    <td className=\"border p-2\">{r.closingStock}</td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                {/* Pagination */}\r\n                <div className=\"flex justify-center gap-2 mt-4\">\r\n                    <button\r\n                        disabled={currentPage === 1}\r\n                        onClick={() => setCurrentPage(currentPage - 1)}\r\n                        className=\"px-3 py-1 border rounded bg-black text-white hover:bg-purple-600 disabled:opacity-50\"\r\n                    >\r\n                        <ChevronLeft />\r\n                    </button>\r\n                    <span className=\"px-3 py-1\">\r\n                        Page {currentPage} of {totalPages}\r\n                    </span>\r\n                    <button\r\n                        disabled={currentPage === totalPages}\r\n                        onClick={() => setCurrentPage(currentPage + 1)}\r\n                        className=\"px-3 py-1 border rounded bg-black text-white hover:bg-purple-600 disabled:opacity-50\"\r\n                    >\r\n                        <ChevronRight />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </main >\r\n    );\r\n}\r\n\r\n// ---------- Export Helpers ----------\r\n\r\nfunction exportCSV(filteredReport: ReportData[], splitByLocation: boolean) {\r\n    const headers = [\"Product\"];\r\n    if (splitByLocation) headers.push(\"Location\");\r\n    headers.push(\r\n        \"Opening Stock\",\r\n        \"Receipts\",\r\n        \"Sales\",\r\n        \"Transfers In\",\r\n        \"Transfers Out\",\r\n        \"Returns\",\r\n        \"Damaged\",\r\n        \"Expired\",\r\n        \"Rebag Gain\",\r\n        \"Rebag Loss\",\r\n        \"Closing Stock\"\r\n    );\r\n\r\n    const rows = filteredReport.map((r) => {\r\n        const row: any[] = [r.productName];\r\n        if (splitByLocation) row.push(r.locationName);\r\n        row.push(\r\n            r.openingStock,\r\n            r.receipts,\r\n            r.sales,\r\n            r.transfersIn,\r\n            r.transfersOut,\r\n            r.returns,\r\n            r.damaged,\r\n            r.expired,\r\n            r.rebagGain,\r\n            r.rebagLoss,\r\n            r.closingStock\r\n        );\r\n        return row;\r\n    });\r\n\r\n    const csv = [headers, ...rows].map((r) => r.join(\",\")).join(\"\\n\");\r\n    const blob = new Blob([csv], { type: \"text/csv\" });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = \"stock_report.csv\";\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n}\r\n\r\nfunction exportPDF(filteredReport: ReportData[], splitByLocation: boolean) {\r\n    const doc = new jsPDF({ orientation: \"landscape\", unit: \"pt\", format: \"a4\" });\r\n    doc.setFontSize(16);\r\n    doc.text(\"Stock Report\", doc.internal.pageSize.getWidth() / 2, 40, { align: \"center\" });\r\n\r\n    const head = [\"Product\"];\r\n    if (splitByLocation) head.push(\"Location\");\r\n    head.push(\r\n        \"Opening\",\r\n        \"Receipts\",\r\n        \"Sales\",\r\n        \"Transfers In\",\r\n        \"Transfers Out\",\r\n        \"Returns\",\r\n        \"Damaged\",\r\n        \"Expired\",\r\n        \"Rebag Gain\",\r\n        \"Rebag Loss\",\r\n        \"Closing\"\r\n    );\r\n\r\n    autoTable(doc, {\r\n        startY: 60,\r\n        head: [head],\r\n        body: filteredReport.map((r) => {\r\n            const row: any[] = [r.productName];\r\n            if (splitByLocation) row.push(r.locationName);\r\n            row.push(\r\n                r.openingStock,\r\n                r.receipts,\r\n                r.sales,\r\n                r.transfersIn,\r\n                r.transfersOut,\r\n                r.returns,\r\n                r.damaged,\r\n                r.expired,\r\n                r.rebagGain,\r\n                r.rebagLoss,\r\n                r.closingStock\r\n            );\r\n            return row;\r\n        }),\r\n        styles: { fontSize: 8, cellPadding: 3 },\r\n        headStyles: { fillColor: [100, 100, 100], textColor: 255 },\r\n        alternateRowStyles: { fillColor: [245, 245, 245] },\r\n    });\r\n\r\n    doc.save(\"stock_report.pdf\");\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAPA;;;;;;;;AAyCA,MAAM,iBAAiB;AAER,SAAS;IACpB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sPAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,sPAAQ,EAAe,EAAE;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sPAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sPAAQ,EAAgB;IAClD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,sPAAQ,EAAC;IAE/C,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,sPAAQ,EAAW,EAAE;IACvE,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,sPAAQ,EAAW,EAAE;IACzE,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,sPAAQ,EAAW,EAAE;IACrE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,sPAAQ,EAAC;IAEvD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sPAAQ,EAAc;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sPAAQ,EAAc;IAEpD,IAAA,uPAAS,EAAC;QACN,MAAM,YAAY;YACd,WAAW;YACX,IAAI;gBACA,MAAM,UAAU,MAAM,MAAM;gBAC5B,MAAM,kBAAkB,MAAM,QAAQ,IAAI;gBAC1C,MAAM,eAAe,MAAM,OAAO,CAAC,gBAAgB,QAAQ,IAAI,gBAAgB,QAAQ,GAAG,EAAE;gBAC5F,YAAY;gBAEZ,wCAAwC;gBACxC,MAAM,SAAS,IAAI;gBACnB,IAAI,WAAW,OAAO,MAAM,CAAC,aAAa,UAAU,WAAW;gBAC/D,IAAI,SAAS,OAAO,MAAM,CAAC,WAAW,QAAQ,WAAW;gBAEzD,MAAM,SAAS,MAAM,MAAM,CAAC,kBAAkB,EAAE,OAAO,QAAQ,IAAI;gBACnE,MAAM,aAAa,MAAM,OAAO,IAAI;gBACpC,UAAU;YAEd,EAAE,OAAO,KAAK;gBACV,QAAQ,KAAK,CAAC;gBACd,SAAS;YACb,SAAU;gBACN,WAAW;YACf;QACJ;QAEA;IACJ,GAAG;QAAC;QAAW;KAAQ,GAAG,gCAAgC;IAE1D,MAAM,qBAAqB,IAAA,qPAAO,EAAC;QAC/B,MAAM,MAA8B,CAAC;QACrC,SAAS,OAAO,CAAC,CAAC,IAAO,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,QAAQ;QACjD,OAAO;IACX,GAAG;QAAC;KAAS;IAEb,MAAM,iBAAkC,IAAA,qPAAO,EAC3C,IACI,SAAS,GAAG,CAAC,CAAC,IAAM,CAAC;gBACjB,OAAO,EAAE,IAAI;gBACb,OAAO,EAAE,IAAI;gBACb,UAAU,EAAE,QAAQ;YACxB,CAAC,IACL;QAAC;KAAS;IAGd,MAAM,kBAAkB,IAAA,qPAAO,EAAC;QAC5B,MAAM,YAAY,MAAM,IAAI,CAAC,IAAI,IAAI,OAAO,GAAG,CAAC,CAAC,IAAM,EAAE,YAAY;QACrE,OAAO,UAAU,GAAG,CAAC,CAAC,IAAM,CAAC;gBAAE,OAAO;gBAAG,OAAO;YAAE,CAAC;IACvD,GAAG;QAAC;KAAO;IAEX,MAAM,kBAAkB,IAAA,qPAAO,EAAC;QAC5B,MAAM,aAAa,MAAM,IAAI,CAAC,IAAI,IAAI,SAAS,GAAG,CAAC,CAAC,IAAM,EAAE,QAAQ;QACpE,OAAO,WAAW,GAAG,CAAC,CAAC,IAAM,CAAC;gBAAE,OAAO;gBAAG,OAAO;YAAE,CAAC;IACxD,GAAG;QAAC;KAAS;IAEb,MAAM,iBAAiB,IAAA,qPAAO,EAAC;QAC3B,IAAI,WAAW,OAAO,MAAM,CAAC,CAAC;YAC1B,IAAI,kBAAkB,MAAM,IAAI,CAAC,kBAAkB,QAAQ,CAAC,EAAE,YAAY,GAAG,OAAO;YACpF,MAAM,WAAW,kBAAkB,CAAC,EAAE,WAAW,CAAC,IAAI;YACtD,IAAI,mBAAmB,MAAM,IAAI,CAAC,mBAAmB,QAAQ,CAAC,WAAW,OAAO;YAChF,IAAI,iBAAiB,MAAM,IAAI,CAAC,iBAAiB,QAAQ,CAAC,EAAE,WAAW,GAAG,OAAO;YACjF,OAAO;QACX;QAEA,IAAI,CAAC,iBAAiB;YAClB,MAAM,SAAqC,CAAC;YAC5C,SAAS,OAAO,CAAC,CAAC;gBACd,IAAI,CAAC,MAAM,CAAC,EAAE,WAAW,CAAC,EAAE;oBACxB,MAAM,CAAC,EAAE,WAAW,CAAC,GAAG;wBAAE,GAAG,CAAC;oBAAC;gBACnC,OAAO;oBACH,MAAM,MAAM,MAAM,CAAC,EAAE,WAAW,CAAC;oBACjC,IAAI,YAAY,IAAI,EAAE,YAAY;oBAClC,IAAI,QAAQ,IAAI,EAAE,QAAQ;oBAC1B,IAAI,KAAK,IAAI,EAAE,KAAK;oBACpB,IAAI,WAAW,IAAI,EAAE,WAAW;oBAChC,IAAI,YAAY,IAAI,EAAE,YAAY;oBAClC,IAAI,OAAO,IAAI,EAAE,OAAO;oBACxB,IAAI,OAAO,IAAI,EAAE,OAAO;oBACxB,IAAI,OAAO,IAAI,EAAE,OAAO;oBACxB,IAAI,SAAS,IAAI,EAAE,SAAS;oBAC5B,IAAI,SAAS,IAAI,EAAE,SAAS;oBAC5B,IAAI,YAAY,IAAI,EAAE,YAAY;gBACtC;YACJ;YACA,WAAW,OAAO,MAAM,CAAC,QAAQ,GAAG,CAAC,CAAC,IAAM,CAAC;oBACzC,GAAG,CAAC;oBACJ,cAAc;gBAClB,CAAC;QACL;QAEA,OAAO;IACX,GAAG;QACC;QACA;QACA;QACA;QACA;QACA;KACH;IAED,MAAM,aAAa,KAAK,IAAI,CAAC,eAAe,MAAM,GAAG;IACrD,MAAM,kBAAkB,eAAe,KAAK,CACxC,CAAC,cAAc,CAAC,IAAI,gBACpB,cAAc;IAGlB,IAAI,SAAS,qBAAO,mRAAC;kBAAI;;;;;;IACzB,IAAI,OAAO,qBAAO,mRAAC;kBAAK;;;;;;IAExB,MAAM,mBAAmB,IAAM,UAAU,gBAAgB;IACzD,MAAM,mBAAmB,IAAM,UAAU,gBAAgB;IAEzD,qBACI,mRAAC;;0BACG,mRAAC,8KAAO;;;;;0BACR,mRAAC;gBAAI,WAAU;;kCACX,mRAAC;wBAAG,WAAU;;0CACV,mRAAC,wPAAO;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAInC,mRAAC;wBAAI,WAAU;;0CACX,mRAAC;gCAAI,WAAU;;kDAEX,mRAAC;wCACG,MAAK;wCACL,IAAG;wCACH,SAAS;wCACT,UAAU,IAAM,mBAAmB,CAAC;wCACpC,WAAU;;;;;;kDAEd,mRAAC;wCAAM,SAAQ;wCAAkB,WAAU;kDAAsB;;;;;;;;;;;;0CAKrE,mRAAC;gCAAI,WAAU;0CACX,cAAA,mRAAC,wLAAkB;oCACf,MAAK;oCACL,WAAW;oCACX,SAAS;oCACT,cAAc;oCACd,YAAY;oCACZ,mBAAmB;oCACnB,sBAAsB;oCACtB,oBAAoB;oCACpB,uBAAuB;oCACvB,kBAAkB;oCAClB,qBAAqB;oCACrB,iBAAiB;oCACjB,iBAAiB;oCACjB,gBAAgB;oCAChB,WAAW;oCACX,WAAW;oCACX,SAAS,KAAQ;;;;;;;;;;;;;;;;;kCAK7B,mRAAC;wBAAI,WAAU;kCACX,cAAA,mRAAC;4BAAM,WAAU;;8CACb,mRAAC;oCAAM,WAAU;8CACb,cAAA,mRAAC;;0DACG,mRAAC;gDAAG,WAAU;0DAAa;;;;;;4CAC1B,iCAAmB,mRAAC;gDAAG,WAAU;0DAAa;;;;;;0DAC/C,mRAAC;gDAAG,WAAU;0DAAa;;;;;;0DAC3B,mRAAC;gDAAG,WAAU;0DAAa;;;;;;0DAC3B,mRAAC;gDAAG,WAAU;0DAAa;;;;;;0DAC3B,mRAAC;gDAAG,WAAU;0DAAa;;;;;;0DAC3B,mRAAC;gDAAG,WAAU;0DAAa;;;;;;0DAC3B,mRAAC;gDAAG,WAAU;0DAAa;;;;;;0DAC3B,mRAAC;gDAAG,WAAU;0DAAa;;;;;;0DAC3B,mRAAC;gDAAG,WAAU;0DAAa;;;;;;0DAC3B,mRAAC;gDAAG,WAAU;0DAAa;;;;;;0DAC3B,mRAAC;gDAAG,WAAU;0DAAa;;;;;;0DAC3B,mRAAC;gDAAG,WAAU;0DAAa;;;;;;;;;;;;;;;;;8CAGnC,mRAAC;8CACI,gBAAgB,GAAG,CAAC,CAAC,GAAG,oBACrB,mRAAC;4CAA6B,WAAU;;8DACpC,mRAAC;oDAAG,WAAU;8DAAc,EAAE,WAAW;;;;;;gDACxC,iCAAmB,mRAAC;oDAAG,WAAU;8DAAc,EAAE,YAAY;;;;;;8DAC9D,mRAAC;oDAAG,WAAU;8DAAc,EAAE,YAAY;;;;;;8DAC1C,mRAAC;oDAAG,WAAU;8DAAc,EAAE,QAAQ;;;;;;8DACtC,mRAAC;oDAAG,WAAU;8DAAc,EAAE,KAAK;;;;;;8DACnC,mRAAC;oDAAG,WAAU;8DAAc,EAAE,WAAW;;;;;;8DACzC,mRAAC;oDAAG,WAAU;8DAAc,EAAE,YAAY;;;;;;8DAC1C,mRAAC;oDAAG,WAAU;8DAAc,EAAE,OAAO;;;;;;8DACrC,mRAAC;oDAAG,WAAU;8DAAc,EAAE,SAAS;;;;;;8DACvC,mRAAC;oDAAG,WAAU;8DAAc,EAAE,SAAS;;;;;;8DACvC,mRAAC;oDAAG,WAAU;8DAAc,EAAE,OAAO;;;;;;8DACrC,mRAAC;oDAAG,WAAU;8DAAc,EAAE,OAAO;;;;;;8DACrC,mRAAC;oDAAG,WAAU;8DAAc,EAAE,YAAY;;;;;;;2CAbrC,EAAE,WAAW,GAAG;;;;;;;;;;;;;;;;;;;;;kCAqBzC,mRAAC;wBAAI,WAAU;;0CACX,mRAAC;gCACG,UAAU,gBAAgB;gCAC1B,SAAS,IAAM,eAAe,cAAc;gCAC5C,WAAU;0CAEV,cAAA,mRAAC,wQAAW;;;;;;;;;;0CAEhB,mRAAC;gCAAK,WAAU;;oCAAY;oCAClB;oCAAY;oCAAK;;;;;;;0CAE3B,mRAAC;gCACG,UAAU,gBAAgB;gCAC1B,SAAS,IAAM,eAAe,cAAc;gCAC5C,WAAU;0CAEV,cAAA,mRAAC,2QAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMrC;AAEA,uCAAuC;AAEvC,SAAS,UAAU,cAA4B,EAAE,eAAwB;IACrE,MAAM,UAAU;QAAC;KAAU;IAC3B,IAAI,iBAAiB,QAAQ,IAAI,CAAC;IAClC,QAAQ,IAAI,CACR,iBACA,YACA,SACA,gBACA,iBACA,WACA,WACA,WACA,cACA,cACA;IAGJ,MAAM,OAAO,eAAe,GAAG,CAAC,CAAC;QAC7B,MAAM,MAAa;YAAC,EAAE,WAAW;SAAC;QAClC,IAAI,iBAAiB,IAAI,IAAI,CAAC,EAAE,YAAY;QAC5C,IAAI,IAAI,CACJ,EAAE,YAAY,EACd,EAAE,QAAQ,EACV,EAAE,KAAK,EACP,EAAE,WAAW,EACb,EAAE,YAAY,EACd,EAAE,OAAO,EACT,EAAE,OAAO,EACT,EAAE,OAAO,EACT,EAAE,SAAS,EACX,EAAE,SAAS,EACX,EAAE,YAAY;QAElB,OAAO;IACX;IAEA,MAAM,MAAM;QAAC;WAAY;KAAK,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,CAAC,MAAM,IAAI,CAAC;IAC5D,MAAM,OAAO,IAAI,KAAK;QAAC;KAAI,EAAE;QAAE,MAAM;IAAW;IAChD,MAAM,MAAM,IAAI,eAAe,CAAC;IAChC,MAAM,IAAI,SAAS,aAAa,CAAC;IACjC,EAAE,IAAI,GAAG;IACT,EAAE,QAAQ,GAAG;IACb,EAAE,KAAK;IACP,IAAI,eAAe,CAAC;AACxB;AAEA,SAAS,UAAU,cAA4B,EAAE,eAAwB;IACrE,MAAM,MAAM,IAAI,qMAAK,CAAC;QAAE,aAAa;QAAa,MAAM;QAAM,QAAQ;IAAK;IAC3E,IAAI,WAAW,CAAC;IAChB,IAAI,IAAI,CAAC,gBAAgB,IAAI,QAAQ,CAAC,QAAQ,CAAC,QAAQ,KAAK,GAAG,IAAI;QAAE,OAAO;IAAS;IAErF,MAAM,OAAO;QAAC;KAAU;IACxB,IAAI,iBAAiB,KAAK,IAAI,CAAC;IAC/B,KAAK,IAAI,CACL,WACA,YACA,SACA,gBACA,iBACA,WACA,WACA,WACA,cACA,cACA;IAGJ,IAAA,2NAAS,EAAC,KAAK;QACX,QAAQ;QACR,MAAM;YAAC;SAAK;QACZ,MAAM,eAAe,GAAG,CAAC,CAAC;YACtB,MAAM,MAAa;gBAAC,EAAE,WAAW;aAAC;YAClC,IAAI,iBAAiB,IAAI,IAAI,CAAC,EAAE,YAAY;YAC5C,IAAI,IAAI,CACJ,EAAE,YAAY,EACd,EAAE,QAAQ,EACV,EAAE,KAAK,EACP,EAAE,WAAW,EACb,EAAE,YAAY,EACd,EAAE,OAAO,EACT,EAAE,OAAO,EACT,EAAE,OAAO,EACT,EAAE,SAAS,EACX,EAAE,SAAS,EACX,EAAE,YAAY;YAElB,OAAO;QACX;QACA,QAAQ;YAAE,UAAU;YAAG,aAAa;QAAE;QACtC,YAAY;YAAE,WAAW;gBAAC;gBAAK;gBAAK;aAAI;YAAE,WAAW;QAAI;QACzD,oBAAoB;YAAE,WAAW;gBAAC;gBAAK;gBAAK;aAAI;QAAC;IACrD;IAEA,IAAI,IAAI,CAAC;AACb"}}]
}