{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx"],"sourcesContent":["\"use client\";\r\nimport { UserButton } from \"@stackframe/stack\";\r\nimport { BarChart3, Package, Plus, Settings, Info, ShoppingCart, ChevronDown } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport default function Sidebar() {\r\n    const [openItems, setOpenItems] = useState<string[]>([]);\r\n    const currentPath = usePathname();\r\n\r\n    useEffect(() => {\r\n        const activeItem = NAV_ITEMS.find((item) => item.subItems && item.subItems.some((sub) => currentPath === sub.href));\r\n        if (activeItem) {\r\n            setOpenItems([activeItem.name]);\r\n        }\r\n    }, [currentPath]);\r\n\r\n    const NAV_ITEMS = [\r\n        {\r\n            name: \"Dashboard\",\r\n            icon: BarChart3,\r\n            subItems: [\r\n                { name: \"Inventory Dashboard\", href: \"/dashboard/inventory\" },\r\n                { name: \"Sales Dashboard\", href: \"/dashboard/sales\" },\r\n            ],\r\n        },\r\n        { name: \"Inventory\", href: \"/inventory\", icon: Package },\r\n        { name: \"Add Product\", href: \"/add-product\", icon: Plus },\r\n        { name: \"Sales\", href: \"/sales\", icon: ShoppingCart },\r\n        { name: \"Settings\", href: \"/settings\", icon: Settings },\r\n        { name: \"About\", href: \"/about\", icon: Info },\r\n    ];\r\n\r\n    const toggleItem = (name: string) => {\r\n        if (openItems.includes(name)) {\r\n            setOpenItems(openItems.filter((item) => item !== name));\r\n        } else {\r\n            setOpenItems([...openItems, name]);\r\n        }\r\n    };\r\n\r\n    const isActive = (href: string) => currentPath === href;\r\n    const isParentActive = (subItems?: { href: string }[]) => subItems?.some((sub) => currentPath === sub.href);\r\n    const isOpen = (name: string) => openItems.includes(name);\r\n\r\n    return (\r\n        <div className=\"fixed left-0 top-0 bg-gray-900 text-white w-64 min-h-screen p-6 z-10\">\r\n            <div className=\"mb-8\">\r\n                <div className=\"flex items-center space-x-2 mb-4\">\r\n                    <BarChart3 className=\"w-10 h-10\" />\r\n                    <span className=\"text-md font-semibold\">Inventory Management App</span>\r\n                </div>\r\n            </div>\r\n            <nav className=\"space-y-1\">\r\n                <div className=\"text-sm font-semibold text-gray-400 uppercase\">Inventory</div>\r\n                {NAV_ITEMS.map((item, key) => {\r\n                    const IconComponent = item.icon;\r\n                    const parentActive = isParentActive(item.subItems);\r\n                    const itemActive = isActive(item.href);\r\n\r\n                    if (item.subItems) {\r\n                        return (\r\n                            <div key={key}>\r\n                                <button\r\n                                    onClick={() => toggleItem(item.name)}\r\n                                    className={`flex items-center justify-between w-full py-2 px-3 rounded-lg ${parentActive ? \"bg-purple-50 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                        }`}\r\n                                >\r\n                                    <div className=\"flex items-center space-x-3\">\r\n                                        <IconComponent className=\"w-5 h-5\" />\r\n                                        <span className=\"text-sm\">{item.name}</span>\r\n                                    </div>\r\n                                    <ChevronDown className={`w-4 h-4 transition-transform ${isOpen(item.name) ? \"rotate-180\" : \"\"}`} />\r\n                                </button>\r\n                                {isOpen(item.name) && (\r\n                                    <ul className=\"ml-6 mt-2 space-y-2\">\r\n                                        {item.subItems.map((subItem, subKey) => (\r\n                                            <li key={subKey}>\r\n                                                <Link\r\n                                                    href={subItem.href}\r\n                                                    className={`flex items-center space-x-3 py-2 px-3 rounded-lg text-md ${isActive(subItem.href) ? \"text-white-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                                        }`}\r\n                                                >\r\n                                                    {subItem.name}\r\n                                                </Link>\r\n                                            </li>\r\n                                        ))}\r\n                                    </ul>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    }\r\n\r\n                    return (\r\n                        <Link\r\n                            href={item.href}\r\n                            key={key}\r\n                            className={`flex items-center space-x-3 py-2 px-3 rounded-lg ${itemActive ? \"bg-purple-100 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                }`}\r\n                        >\r\n                            <IconComponent className=\"w-5 h-5\" />\r\n                            <span className=\"text-sm\">{item.name}</span>\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </nav>\r\n            <div className=\"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-700\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <UserButton showUserInfo />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/CustomTooltip.tsx"],"sourcesContent":["import React from 'react';\r\nimport { TooltipProps } from 'recharts';\r\n\r\ninterface CustomTooltipProps {\r\n    active?: boolean;\r\n    payload?: any[];\r\n    label?: string;\r\n    labels?: {\r\n        titleKey?: string;\r\n        metrics?: { key: string; label: string; format?: (value: number | undefined) => string }[];\r\n    };\r\n}\r\n\r\nconst CustomTooltip = ({\r\n    active,\r\n    payload,\r\n    label,\r\n    labels = {\r\n        titleKey: 'category',\r\n        metrics: [\r\n            { key: 'tonnage', label: 'Tonnage', format: (v) => `${v?.toFixed(2)} tons` },\r\n            { key: 'salesValue', label: 'Sales Value', format: (v) => `K${v?.toFixed(2)}` },\r\n            { key: 'quantity', label: 'Quantity', format: (v) => `${v} units` },\r\n        ],\r\n    },\r\n}: CustomTooltipProps) => {\r\n    if (active && payload && payload.length) {\r\n        const data = payload[0].payload as Record<string, number | undefined>;\r\n        return (\r\n            <div className=\"bg-white p-3 border rounded shadow text-sm\">\r\n                <p className=\"font-bold\">{data[labels.titleKey!] || label}</p>\r\n                {labels.metrics?.map((metric) => (\r\n                    <p key={metric.key}>\r\n                        {metric.label}: {data[metric.key] !== undefined ? (metric.format ? metric.format(data[metric.key]) : data[metric.key]) : 'N/A'}\r\n                    </p>\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default CustomTooltip;"],"names":[],"mappings":";;;;;;AAaA,MAAM,gBAAgB,CAAC,EACnB,MAAM,EACN,OAAO,EACP,KAAK,EACL,SAAS;IACL,UAAU;IACV,SAAS;QACL;YAAE,KAAK;YAAW,OAAO;YAAW,QAAQ,CAAC,IAAM,GAAG,GAAG,QAAQ,GAAG,KAAK,CAAC;QAAC;QAC3E;YAAE,KAAK;YAAc,OAAO;YAAe,QAAQ,CAAC,IAAM,CAAC,CAAC,EAAE,GAAG,QAAQ,IAAI;QAAC;QAC9E;YAAE,KAAK;YAAY,OAAO;YAAY,QAAQ,CAAC,IAAM,GAAG,EAAE,MAAM,CAAC;QAAC;KACrE;AACL,CAAC,EACgB;IACjB,IAAI,UAAU,WAAW,QAAQ,MAAM,EAAE;QACrC,MAAM,OAAO,OAAO,CAAC,EAAE,CAAC,OAAO;QAC/B,qBACI,mRAAC;YAAI,WAAU;;8BACX,mRAAC;oBAAE,WAAU;8BAAa,IAAI,CAAC,OAAO,QAAQ,CAAE,IAAI;;;;;;gBACnD,OAAO,OAAO,EAAE,IAAI,CAAC,uBAClB,mRAAC;;4BACI,OAAO,KAAK;4BAAC;4BAAG,IAAI,CAAC,OAAO,GAAG,CAAC,KAAK,YAAa,OAAO,MAAM,GAAG,OAAO,MAAM,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC,GAAI;;uBADrH,OAAO,GAAG;;;;;;;;;;;IAMlC;IACA,OAAO;AACX;uCAEe"}},
    {"offset": {"line": 344, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesByCategoryPie.tsx"],"sourcesContent":["\"use client\";\r\nimport { PieChart, Pie, Cell, ResponsiveContainer, Tooltip } from \"recharts\";\r\nimport { TrendingUp } from 'lucide-react';\r\nimport CustomTooltip from \"./CustomTooltip\";\r\n\r\ninterface Props {\r\n    categoryData: { category: string; tonnage: number }[];\r\n}\r\n\r\nexport default function SalesByCategoryPie({ categoryData }: Props) {\r\n    //const COLORS = ['#3b82f6', '#10b981', '#f97316', '#8b5cf6', '#ec4899'];\r\n    const COLORS = ['#2563eb', '#16a34a', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899'];\r\n\r\n    const totalTonnage = categoryData.reduce((sum, item) => sum + item.tonnage, 0);\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <TrendingUp className=\"h-5 w-5 text-green-500\" />\r\n                Sales By Category (Year-to-Date)\r\n            </h3>\r\n            <div className=\"flex justify-center\">\r\n                <ResponsiveContainer width=\"100%\" height={200}>\r\n                    <PieChart>\r\n                        <Pie\r\n                            data={categoryData}\r\n                            dataKey=\"tonnage\"\r\n                            nameKey=\"category\"\r\n                            innerRadius={50}\r\n                            outerRadius={80}\r\n                            paddingAngle={4}\r\n                        >\r\n                            {categoryData.map((entry, index) => (\r\n                                <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                            ))}\r\n                        </Pie>\r\n                        <Tooltip content={<CustomTooltip />} />\r\n                    </PieChart>\r\n                </ResponsiveContainer>\r\n            </div>\r\n            <div className=\"flex justify-center gap-6 mt-4 text-xs\">\r\n                {categoryData.map((entry, index) => (\r\n                    <div key={entry.category} className=\"flex items-center gap-2\">\r\n                        <span\r\n                            className=\"w-3 h-3 rounded-full\"\r\n                            style={{ backgroundColor: COLORS[index % COLORS.length] }}\r\n                        />\r\n                        <span>{`${entry.category} (${((entry.tonnage / totalTonnage) * 100).toFixed(1)}%)`}</span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAHA;;;;;AASe,SAAS,mBAAmB,EAAE,YAAY,EAAS;IAC9D,yEAAyE;IACzE,MAAM,SAAS;QAAC;QAAW;QAAW;QAAW;QAAW;QAAW;KAAU;IAEjF,MAAM,eAAe,aAAa,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,OAAO,EAAE;IAE5E,qBACI,mRAAC;QAAI,WAAU;;0BACX,mRAAC;gBAAG,WAAU;;kCACV,mRAAC,qQAAU;wBAAC,WAAU;;;;;;oBAA2B;;;;;;;0BAGrD,mRAAC;gBAAI,WAAU;0BACX,cAAA,mRAAC,+NAAmB;oBAAC,OAAM;oBAAO,QAAQ;8BACtC,cAAA,mRAAC,qMAAQ;;0CACL,mRAAC,2LAAG;gCACA,MAAM;gCACN,SAAQ;gCACR,SAAQ;gCACR,aAAa;gCACb,aAAa;gCACb,cAAc;0CAEb,aAAa,GAAG,CAAC,CAAC,OAAO,sBACtB,mRAAC,iMAAI;wCAAuB,MAAM,MAAM,CAAC,QAAQ,OAAO,MAAM,CAAC;uCAApD,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;0CAGlC,mRAAC,uMAAO;gCAAC,uBAAS,mRAAC,mLAAa;;;;;;;;;;;;;;;;;;;;;;;;;;0BAI5C,mRAAC;gBAAI,WAAU;0BACV,aAAa,GAAG,CAAC,CAAC,OAAO,sBACtB,mRAAC;wBAAyB,WAAU;;0CAChC,mRAAC;gCACG,WAAU;gCACV,OAAO;oCAAE,iBAAiB,MAAM,CAAC,QAAQ,OAAO,MAAM,CAAC;gCAAC;;;;;;0CAE5D,mRAAC;0CAAM,GAAG,MAAM,QAAQ,CAAC,EAAE,EAAE,CAAC,AAAC,MAAM,OAAO,GAAG,eAAgB,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC;;;;;;;uBAL5E,MAAM,QAAQ;;;;;;;;;;;;;;;;AAW5C"}},
    {"offset": {"line": 489, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesTrendChart.tsx"],"sourcesContent":["\"use client\";\r\nimport { LineChart, Line, Pie, PieChart, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend, Cell } from 'recharts';\r\nimport CustomTooltip from './CustomTooltip';\r\nimport SalesByCategoryPie from './SalesByCategoryPie';\r\nimport { DollarSign, TrendingUp, Users, ShoppingBag, Calendar, MapPin, BarChart3 } from \"lucide-react\";\r\n\r\ninterface ChartDataPoint {\r\n    date: string;\r\n    value: number;\r\n    quantity: number;\r\n    tonnage: number;\r\n}\r\ninterface CategoryDataPoint {\r\n    category: string;\r\n    quantity: number;\r\n    tonnage: number;\r\n    salesValue: number;\r\n}\r\ninterface Props {\r\n    salesTrendData: ChartDataPoint[];\r\n    sales: any[];\r\n    productList: any[]; // Add productList prop\r\n}\r\n\r\ninterface LocationDataPoint {\r\n    location: string;\r\n    quantity: number;\r\n    salesValue: number;\r\n}\r\n\r\nexport default function SalesTrendChart({ salesTrendData, sales, productList }: Props) {\r\n    if (!salesTrendData.length || !sales.length || !productList.length) {\r\n        return <p>No sales data available.</p>;\r\n    }\r\n\r\n    // Transform data for category bar chart (year-to-date)\r\n    const categories = Array.from(\r\n        new Set(\r\n            sales\r\n                .filter(sale => new Date(sale.saleDate).getFullYear() === new Date().getFullYear())\r\n                .map(sale => sale.product?.category || 'Uncategorized')\r\n        )\r\n    ).sort();\r\n\r\n    const categoryData = categories.map(category => {\r\n        const categorySales = sales\r\n            .filter(sale =>\r\n                new Date(sale.saleDate).getFullYear() === new Date().getFullYear() &&\r\n                sale.product?.category === category\r\n            );\r\n        return {\r\n            category,\r\n            tonnage: categorySales.reduce((sum, sale) => {\r\n                const product = productList.find(p => p.id === sale.productId);\r\n                const weightInTons = product ? (product.weightValue * sale.quantity * product.packSize) / 1000 : 0;\r\n                return sum + weightInTons;\r\n            }, 0),\r\n            quantity: categorySales.reduce((sum, sale) => sum + sale.quantity, 0),\r\n            salesValue: categorySales.reduce((sum, sale) => sum + sale.quantity * sale.salePrice, 0),\r\n        };\r\n    }).sort((a, b) => b.tonnage - a.tonnage);\r\n\r\n    // Transform data for location bar chart (year-to-date)\r\n    const locations = Array.from(\r\n        new Set(\r\n            sales\r\n                .filter(sale => new Date(sale.saleDate).getFullYear() === new Date().getFullYear())\r\n                .map(sale => sale.location?.name || 'Unknown')\r\n        )\r\n    );\r\n\r\n    const locationData = locations.map(location => {\r\n        const locationSales = sales\r\n            .filter(sale => new Date(sale.saleDate).getFullYear() === new Date().getFullYear() && sale.location?.name === location);\r\n        return {\r\n            location,\r\n            quantity: locationSales.reduce((sum, sale) => sum + sale.quantity, 0),\r\n            salesValue: locationSales.reduce((sum, sale) => sum + sale.quantity * sale.salePrice, 0),\r\n            tonnage: locationSales.reduce((sum, sale) => {\r\n                const product = productList.find(p => p.id === sale.productId);\r\n                const weightInTons = product ? (product.weightValue * sale.quantity * product.packSize) / 1000 : 0;\r\n                return sum + weightInTons;\r\n            }, 0),\r\n        };\r\n    }).sort((a, b) => b.tonnage - a.tonnage);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                {/* Sales Value Trend */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                        <BarChart3 className=\"h-5 w-5 text-green-500\" color='blue' />\r\n                        Sales Value Trend\r\n                    </h3>\r\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-2\">Sales Value (K)</h4>\r\n                    <ResponsiveContainer width=\"100%\" height={200}>\r\n                        <LineChart data={salesTrendData}>\r\n                            <XAxis dataKey=\"date\" />\r\n                            <YAxis />\r\n                            <Tooltip content={<CustomTooltip labels={{\r\n                                titleKey: 'date',\r\n                                metrics: [\r\n                                    { key: 'tonnage', label: 'Tonnage', format: (v) => `${(v ?? 0).toFixed(2)} tons` },\r\n                                    { key: 'value', label: 'Sales Value', format: (v) => `K${(v ?? 0).toFixed(2)}` },\r\n                                    { key: 'quantity', label: 'Quantity', format: (v) => `${v} units` },\r\n\r\n                                ],\r\n                            }} />} />\r\n                            <Line type=\"monotone\" dataKey=\"value\" stroke=\"#2563eb\" strokeWidth={2} />\r\n                        </LineChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n                {/* Sales Tonnage Trend */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                        <BarChart3 className=\"h-5 w-5 text-green-500\" color='green' /> Sales Tonnage Trend\r\n                    </h3>\r\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-2\">Tonnage</h4>\r\n                    <ResponsiveContainer width=\"100%\" height={200}>\r\n                        <LineChart data={salesTrendData}>\r\n                            <XAxis dataKey=\"date\" />\r\n                            <YAxis />\r\n                            <Tooltip content={<CustomTooltip labels={{\r\n                                titleKey: 'date',\r\n                                metrics: [\r\n                                    { key: 'tonnage', label: 'Tonnage', format: (v) => `${(v ?? 0).toFixed(2)} tons` },\r\n                                    { key: 'value', label: 'Sales Value', format: (v) => `K${(v ?? 0).toFixed(2)}` },\r\n                                    { key: 'quantity', label: 'Quantity', format: (v) => `${v} units` },\r\n                                ],\r\n                            }} />} />\r\n                            <Line type=\"monotone\" dataKey=\"tonnage\" stroke=\"#16a34a\" strokeWidth={2} />\r\n                        </LineChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* Sales Value by Location Pie Chart*/}\r\n                <SalesByCategoryPie categoryData={categoryData} />\r\n\r\n                {/* Sales Value by Location */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                        <MapPin className=\"h-5 w-5 text-blue-500\" /> Sales Value by Location (Year-to-Date)\r\n                    </h3>\r\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-2\">Sales Value</h4>\r\n                    <ResponsiveContainer width=\"100%\" height={250}>\r\n                        <BarChart data={locationData} >\r\n\r\n                            <XAxis dataKey=\"location\" />\r\n                            <YAxis\r\n                                tickCount={10}\r\n                                domain={[0, 'dataMax + 1000']}\r\n                                tickFormatter={(value) => value.toFixed(0)} />\r\n                            // For Sales by Location\r\n                            <Tooltip content={<CustomTooltip labels={{\r\n                                titleKey: 'location',\r\n                                metrics: [\r\n                                    { key: 'tonnage', label: 'Tonnage', format: (v) => `${(v ?? 0).toFixed(2)} tons` },\r\n                                    { key: 'salesValue', label: 'Sales Value', format: (v) => `K${(v ?? 0).toFixed(2)}` },\r\n                                    { key: 'quantity', label: 'Quantity', format: (v) => `${v} units` },\r\n\r\n                                ],\r\n                            }} />} />\r\n                            <Bar\r\n                                dataKey=\"salesValue\"\r\n                                name=\"salesValue\"\r\n                                label={(props) => {\r\n                                    const { x, y, width, height, value } = props;\r\n                                    return (\r\n                                        <text\r\n                                            x={x + width / 2}\r\n                                            y={y - 5}\r\n                                            fill=\"#666\"\r\n                                            textAnchor=\"middle\"\r\n                                            dominantBaseline=\"middle\"\r\n                                        >\r\n                                            {`K${value.toFixed(2)}`}\r\n                                        </text>\r\n                                    );\r\n                                }}\r\n                            >\r\n                                {locationData.map((entry, index) => (\r\n                                    <Cell key={`cell-${index}`} fill=\"#3b82f6\" />\r\n                                ))}\r\n                            </Bar>\r\n                        </BarChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n\r\n                {/* Sales by Location */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                        <MapPin className=\"h-5 w-5 text-blue-500\" /> Sales by Location (Year-to-Date)\r\n                    </h3>\r\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-2\">Tonnage</h4>\r\n                    <ResponsiveContainer width=\"100%\" height={250}>\r\n                        <BarChart data={locationData} >\r\n\r\n                            <XAxis dataKey=\"location\" />\r\n                            <YAxis\r\n                                tickCount={10}\r\n                                domain={[0, 'dataMax + 0.3']}\r\n                                tickFormatter={(value) => value.toFixed(2)} />\r\n                            // For Sales by Location\r\n                            <Tooltip content={<CustomTooltip labels={{\r\n                                titleKey: 'location',\r\n                                metrics: [\r\n                                    { key: 'tonnage', label: 'Tonnage', format: (v) => `${(v ?? 0).toFixed(2)} tons` },\r\n                                    { key: 'salesValue', label: 'Sales Value', format: (v) => `K${(v ?? 0).toFixed(2)}` },\r\n                                    { key: 'quantity', label: 'Quantity', format: (v) => `${v} units` },\r\n\r\n                                ],\r\n                            }} />} />\r\n                            <Bar\r\n                                dataKey=\"tonnage\"\r\n                                name=\"Tonnage\"\r\n                                label={(props) => {\r\n                                    const { x, y, width, height, value } = props;\r\n                                    return (\r\n                                        <text\r\n                                            x={x + width / 2}\r\n                                            y={y - 5}\r\n                                            fill=\"#666\"\r\n                                            textAnchor=\"middle\"\r\n                                            dominantBaseline=\"middle\"\r\n                                        >\r\n                                            {`${value.toFixed(2)} tons`}\r\n                                        </text>\r\n                                    );\r\n                                }}\r\n                            >\r\n                                {locationData.map((entry, index) => (\r\n                                    <Cell key={`cell-${index}`} fill=\"#16a34a\" />\r\n                                ))}\r\n                            </Bar>\r\n                        </BarChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1088, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,2MAAO,EAAC,IAAA,kLAAI,EAAC;AACtB"}},
    {"offset": {"line": 1103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,+MAAoB;AAEnC,MAAM,cAAc,gNAAqB;AAEzC,MAAM,cAAc,gNAAqB;AAEzC,MAAM,8BAAgB,wPAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,mRAAC,kNAAuB;QACtB,KAAK;QACL,WAAW,IAAA,8JAAE,EACX,kUACA;QAED,GAAG,KAAK;;YAER;0BACD,mRAAC,+MAAoB;gBAAC,OAAO;0BAC3B,cAAA,mRAAC,wQAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,kNAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,wPAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mRAAC,yNAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,8JAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,mRAAC,kQAAS;YAAC,WAAU;;;;;;;;;;;AAGzB,qBAAqB,WAAW,GAAG,yNAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,wPAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mRAAC,2NAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,8JAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,mRAAC,wQAAW;YAAC,WAAU;;;;;;;;;;;AAG3B,uBAAuB,WAAW,GAChC,2NAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,wPAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,mRAAC,iNAAsB;kBACrB,cAAA,mRAAC,kNAAuB;YACtB,KAAK;YACL,WAAW,IAAA,8JAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,mRAAC;;;;;8BACD,mRAAC,mNAAwB;oBACvB,WAAW,IAAA,8JAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,mRAAC;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,kNAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,wPAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mRAAC,gNAAqB;QACpB,KAAK;QACL,WAAW,IAAA,8JAAE,EAAC,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,gNAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,wPAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,mRAAC,+MAAoB;QACnB,KAAK;QACL,WAAW,IAAA,8JAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,mRAAC;gBAAK,WAAU;0BACd,cAAA,mRAAC,wNAA6B;8BAC5B,cAAA,mRAAC,kPAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGrB,mRAAC,mNAAwB;0BAAE;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,+MAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,wPAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mRAAC,oNAAyB;QACxB,KAAK;QACL,WAAW,IAAA,8JAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG,oNAAyB,CAAC,WAAW"}},
    {"offset": {"line": 1303, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesByLocation.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMemo, useState } from \"react\";\r\nimport { MapPin, ArrowUpDown } from \"lucide-react\";\r\nimport { Sale } from \"./Sale\";\r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\nimport {\r\n    Select,\r\n    SelectTrigger,\r\n    SelectValue,\r\n    SelectContent,\r\n    SelectItem,\r\n} from \"@/components/ui/select\";\r\n\r\ntype SortKey =\r\n    | \"name\"\r\n    | \"saleCount\"\r\n    | \"quantity\"\r\n    | \"totalTonnage\"\r\n    | \"totalSalesValue\"\r\n    | \"avgOrderValue\"\r\n    | \"contribution\";\r\n\r\ninterface Props {\r\n    sales: Sale[];\r\n    title: string;\r\n    iconColor: string;\r\n    limit?: number;\r\n}\r\n\r\nexport default function SalesByLocation({ sales, title, iconColor, limit = 10 }: Props) {\r\n    const [sortKey, setSortKey] = useState<SortKey>(\"totalSalesValue\");\r\n    const [sortDir, setSortDir] = useState<\"asc\" | \"desc\">(\"desc\");\r\n\r\n    const [startDate, setStartDate] = useState<Date | null>(null);\r\n    const [endDate, setEndDate] = useState<Date | null>(null);\r\n\r\n    const [selectedCategory, setSelectedCategory] = useState(\"all\");\r\n    const [selectedProduct, setSelectedProduct] = useState(\"all\");\r\n\r\n    // ------------------ Filter Options ------------------\r\n    const categories = useMemo(() => {\r\n        const set = new Set<string>();\r\n        sales.forEach(s => s.product?.category && set.add(s.product.category));\r\n        return Array.from(set).sort();\r\n    }, [sales]);\r\n\r\n    const products = useMemo(() => {\r\n        const set = new Set<string>();\r\n        sales.forEach(s => s.product?.name && set.add(s.product.name));\r\n        return Array.from(set).sort();\r\n    }, [sales]);\r\n\r\n    // ------------------ Filter Sales ------------------\r\n    const filteredSales = useMemo(() => {\r\n        return sales.filter(sale => {\r\n            const saleDate = new Date(sale.saleDate);\r\n            if (startDate && saleDate < startDate) return false;\r\n            if (endDate && saleDate > endDate) return false;\r\n\r\n            if (selectedCategory !== \"all\" && sale.product?.category !== selectedCategory)\r\n                return false;\r\n\r\n            if (selectedProduct !== \"all\" && sale.product?.name !== selectedProduct)\r\n                return false;\r\n\r\n            return true;\r\n        });\r\n    }, [sales, startDate, endDate, selectedCategory, selectedProduct]);\r\n\r\n    // ------------------ Aggregate By Location ------------------\r\n    const data = useMemo(() => {\r\n        const map: Record<string, any> = {};\r\n\r\n        filteredSales.forEach(sale => {\r\n            const id = sale.locationId;\r\n            const name = sale.location?.name || \"Unknown\";\r\n\r\n            if (!map[id]) {\r\n                map[id] = {\r\n                    id,\r\n                    name,\r\n                    saleCount: 0,\r\n                    quantity: 0,\r\n                    totalTonnage: 0,\r\n                    totalSalesValue: 0,\r\n                    avgOrderValue: 0,\r\n                    contribution: 0,\r\n                };\r\n            }\r\n\r\n            const salesValue = sale.totalAmount ?? sale.salePrice * sale.quantity;\r\n            const weight = sale.product?.weightValue || 0;\r\n            const packSize = sale.product?.packSize || 1;\r\n            const tonnage = (weight * sale.quantity * packSize) / 1000;\r\n\r\n            map[id].saleCount += 1;\r\n            map[id].quantity += sale.quantity;\r\n            map[id].totalSalesValue += salesValue;\r\n            map[id].totalTonnage += tonnage;\r\n        });\r\n\r\n        const totalRevenue = Object.values(map).reduce((sum, loc) => sum + loc.totalSalesValue, 0);\r\n\r\n        return Object.values(map).map(loc => ({\r\n            ...loc,\r\n            avgOrderValue: loc.saleCount > 0 ? loc.totalSalesValue / loc.saleCount : 0,\r\n            contribution: totalRevenue > 0 ? (loc.totalSalesValue / totalRevenue) * 100 : 0,\r\n        }));\r\n    }, [filteredSales]);\r\n\r\n    // ------------------ Sort ------------------\r\n    const sortedData = useMemo(() => {\r\n        return [...data]\r\n            .sort((a, b) => {\r\n                const aVal = a[sortKey];\r\n                const bVal = b[sortKey];\r\n\r\n                if (typeof aVal === \"string\") {\r\n                    return sortDir === \"asc\" ? aVal.localeCompare(bVal) : (bVal as string).localeCompare(aVal);\r\n                }\r\n\r\n                return sortDir === \"asc\" ? (aVal as number) - (bVal as number) : (bVal as number) - (aVal as number);\r\n            })\r\n            .slice(0, limit);\r\n    }, [data, sortKey, sortDir, limit]);\r\n\r\n    const toggleSort = (key: SortKey) => {\r\n        if (key === sortKey) {\r\n            setSortDir(sortDir === \"asc\" ? \"desc\" : \"asc\");\r\n        } else {\r\n            setSortKey(key);\r\n            setSortDir(\"desc\");\r\n        }\r\n    };\r\n\r\n    const Header = ({ label, column, align = \"left\" }: any) => (\r\n        <th\r\n            onClick={() => toggleSort(column)}\r\n            className={`py-2 px-3 cursor-pointer border-r hover:text-blue-600 ${align === \"right\" ? \"text-right\" : \"text-left\"\r\n                }`}\r\n        >\r\n            <span className=\"inline-flex items-center gap-1\">\r\n                {label}\r\n                <ArrowUpDown className=\"w-3 h-3 opacity-60\" />\r\n            </span>\r\n        </th>\r\n    );\r\n\r\n    // ------------------ Export CSV ------------------\r\n    const exportCSV = () => {\r\n        const headers = [\"Location\", \"Orders\", \"Quantity\", \"Tonnage\", \"Avg Order Value\", \"Revenue\", \"Contribution %\"];\r\n        const rows = sortedData.map(d => [\r\n            d.name,\r\n            d.saleCount,\r\n            d.quantity,\r\n            d.totalTonnage.toFixed(2),\r\n            d.avgOrderValue.toFixed(2),\r\n            d.totalSalesValue.toFixed(2),\r\n            d.contribution.toFixed(2),\r\n        ]);\r\n\r\n        const csv = [headers, ...rows].map(r => r.join(\",\")).join(\"\\n\");\r\n        const blob = new Blob([csv], { type: \"text/csv\" });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = \"sales_by_location.csv\";\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    // ------------------ Export PDF ------------------\r\n    const exportPDF = () => {\r\n        const doc = new jsPDF();\r\n        const start = startDate ? startDate.toLocaleDateString() : \"N/A\";\r\n        const end = endDate ? endDate.toLocaleDateString() : \"N/A\";\r\n\r\n        doc.setFontSize(16);\r\n        doc.setFont(\"helvetica\", \"bold\");\r\n        doc.text(title, doc.internal.pageSize.getWidth() / 2, 15, { align: \"center\" });\r\n\r\n        doc.setFontSize(10);\r\n        doc.setFont(\"helvetica\", \"normal\");\r\n        doc.text(`Date Range: ${start} - ${end}`, doc.internal.pageSize.getWidth() / 2, 23, { align: \"center\" });\r\n\r\n        const totals = {\r\n            saleCount: sortedData.reduce((sum, d) => sum + d.saleCount, 0),\r\n            quantity: sortedData.reduce((sum, d) => sum + d.quantity, 0),\r\n            totalTonnage: sortedData.reduce((sum, d) => sum + d.totalTonnage, 0),\r\n            totalSalesValue: sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0),\r\n        };\r\n        totals.avgOrderValue = totals.saleCount > 0 ? totals.totalSalesValue / totals.saleCount : 0;\r\n\r\n        autoTable(doc, {\r\n            startY: 30,\r\n            head: [[\"#\", \"Location\", \"Orders\", \"Quantity\", \"Tonnage\", \"Avg Order Value\", \"Revenue\", \"% Share\"]],\r\n            body: sortedData.map((d, i) => [\r\n                i + 1,\r\n                d.name,\r\n                d.saleCount,\r\n                d.quantity,\r\n                d.totalTonnage.toFixed(2),\r\n                `K${d.avgOrderValue.toFixed(0)}`,\r\n                `K${d.totalSalesValue.toFixed(0)}`,\r\n                `${d.contribution.toFixed(1)}%`\r\n            ]),\r\n            foot: [[\"Total\", \"-\", totals.saleCount, totals.quantity, totals.totalTonnage.toFixed(2), `K${totals.avgOrderValue.toFixed(0)}`, `K${totals.totalSalesValue.toFixed(0)}`, \"100%\"]],\r\n            styles: { fontSize: 9, cellPadding: 4 },\r\n            headStyles: { fillColor: [100, 100, 100], fontStyle: \"bold\", textColor: 255 },\r\n            footStyles: { fillColor: [100, 100, 100], fontStyle: \"bold\", textColor: 255 },\r\n            alternateRowStyles: { fillColor: [245, 245, 245] },\r\n        });\r\n\r\n        doc.save(\"sales_by_location.pdf\");\r\n    };\r\n\r\n    // ------------------ Render ------------------\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <MapPin className={`h-5 w-5 ${iconColor}`} />\r\n                {title}\r\n            </h3>\r\n\r\n            {/* Filter Bar */}\r\n            <div className=\"flex flex-wrap justify-between items-center mb-4 gap-3\">\r\n                <div className=\"flex gap-2 items-center rounded border bg-gray-50 px-2 py-1 flex-wrap\">\r\n                    <label className=\"flex items-center gap-2 font-medium\">\r\n                        Start Date:\r\n                        <input\r\n                            type=\"date\"\r\n                            value={startDate?.toISOString().substring(0, 10) || \"\"}\r\n                            onChange={e => setStartDate(e.target.value ? new Date(e.target.value) : null)}\r\n                            className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200\"\r\n                        />\r\n                    </label>\r\n\r\n                    <label className=\"flex items-center gap-2 font-medium\">\r\n                        End Date:\r\n                        <input\r\n                            type=\"date\"\r\n                            value={endDate?.toISOString().substring(0, 10) || \"\"}\r\n                            onChange={e => setEndDate(e.target.value ? new Date(e.target.value) : null)}\r\n                            className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200\"\r\n                        />\r\n                    </label>\r\n                </div>\r\n\r\n                <div className=\"flex gap-4 rounded border bg-gray-50 px-2 py-1 flex-wrap\">\r\n                    <label className=\"flex items-center gap-2 font-medium\">\r\n                        Category:\r\n                        <Select\r\n                            value={selectedCategory}\r\n                            onValueChange={(value) => {\r\n                                setSelectedCategory(value);\r\n                                setSelectedProduct(\"all\");\r\n                            }}\r\n                        >\r\n                            <SelectTrigger className=\"w-36 h-7 text-xs text-black\">\r\n                                <SelectValue placeholder=\"All\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent className=\"max-h-60 text-xs text-black w-[inherit] overflow-auto\">\r\n                                <SelectItem value=\"all\" className=\"text-black hover:bg-blue-500 hover:text-white\">All Categories</SelectItem>\r\n                                {categories.map(cat => (\r\n                                    <SelectItem key={cat} value={cat} className=\"text-black hover:bg-blue-500 hover:text-white\">{cat}</SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </label>\r\n\r\n                    <label className=\"flex items-center gap-2 font-medium\">\r\n                        Product:\r\n                        <Select\r\n                            value={selectedProduct}\r\n                            onValueChange={(value) => setSelectedProduct(value)}\r\n                        >\r\n                            <SelectTrigger className=\"w-36 h-7 text-xs text-black\">\r\n                                <SelectValue placeholder=\"All\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent className=\"max-h-60 text-xs text-black w-[inherit] overflow-auto\">\r\n                                <SelectItem value=\"all\" className=\"text-black hover:bg-blue-500 hover:text-white\">All Products</SelectItem>\r\n                                {products\r\n                                    .filter(p => selectedCategory === \"all\" ? true : sales.some(s => s.product?.name === p && s.product?.category === selectedCategory))\r\n                                    .map(product => (\r\n                                        <SelectItem key={product} value={product} className=\"text-black hover:bg-blue-500 hover:text-white\">{product}</SelectItem>\r\n                                    ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </label>\r\n                </div>\r\n\r\n                <div className=\"flex gap-2 items-center\">\r\n                    <button onClick={exportCSV} className=\"text-sm px-3 py-1 rounded border font-medium hover:bg-gray-100\">Export CSV</button>\r\n                    <button onClick={exportPDF} className=\"text-sm px-3 py-1 rounded border font-medium hover:bg-gray-100\">Export PDF</button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Table */}\r\n            <div className=\"max-h-[420px] overflow-y-auto\">\r\n                <table className=\"w-full text-sm border border-gray-200 border-collapse\">\r\n                    <thead className=\"sticky top-0 bg-gray-200 z-10 whitespace-nowrap\">\r\n                        <tr className=\"text-gray-600\">\r\n                            <th className=\"py-2 px-3 border-r \">#</th>\r\n                            <Header label=\"Location\" column=\"name\" />\r\n                            <Header label=\"Orders\" column=\"saleCount\" align=\"right\" />\r\n                            <Header label=\"Quantity\" column=\"quantity\" align=\"right\" />\r\n                            <Header label=\"Tonnage\" column=\"totalTonnage\" align=\"right\" />\r\n                            <Header label=\"Avg Order Value\" column=\"avgOrderValue\" align=\"right\" />\r\n                            <Header label=\"Revenue\" column=\"totalSalesValue\" align=\"right\" />\r\n                            <Header label=\"% Share\" column=\"contribution\" align=\"right\" />\r\n                        </tr>\r\n                    </thead>\r\n\r\n                    <tbody>\r\n                        {sortedData.length === 0 ? (\r\n                            <tr>\r\n                                <td colSpan={8} className=\"py-2 px-3 text-center text-gray-500\">\r\n                                    No data available for selected filters\r\n                                </td>\r\n                            </tr>\r\n                        ) : (\r\n                            sortedData.map((loc, index) => (\r\n                                <tr key={loc.id} className={`${index % 2 === 0 ? \"bg-white\" : \"bg-gray-50\"} hover:bg-blue-50`}>\r\n                                    <td className=\"py-2 px-3 border-r text-center font-small\">{index + 1}</td>\r\n                                    <td className=\"py-2 px-3 border-r font-small truncate\">{loc.name}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center font-small\">{loc.saleCount}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center font-small\">{loc.quantity}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center font-small\">{loc.totalTonnage.toFixed(2)}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center font-small\">K{loc.avgOrderValue.toFixed(0)}</td>\r\n                                    <td className=\"py-2 px-3 text-center font-small\">K{loc.totalSalesValue.toFixed(0)}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center font-small\">{loc.contribution.toFixed(1)}%</td>\r\n                                </tr>\r\n                            ))\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2028, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/UnitToKg.ts"],"sourcesContent":["export const unitToKg = (weight: number, unit?: string | null) => {\r\n    const map: Record<string, number> = {\r\n        kg: 1,\r\n        g: 0.001,\r\n        mg: 0.000001,\r\n        lb: 0.453592,\r\n        oz: 0.0283495,\r\n        ton: 1000,\r\n        // add more if needed\r\n    };\r\n\r\n    const u = typeof unit === \"string\" ? unit.toLowerCase() : \"\";\r\n    const factor = map[u] ?? 1; // fallback to 1 if unknown\r\n\r\n    return weight * factor;\r\n};\r\n\r\n\r\n// HOW TO USE //\r\n\r\n//import { unitToKg } from \"@/lib/unitToKg\";\r\n\r\n// Inside your aggregate calculation:\r\n//map[p.id].tonnage +=\r\n//    (item.quantity * p.packSize * unitToKg(item.product.weightValue, item.product.weightUnit)) / 1000;\r\n\r\n"],"names":[],"mappings":";;;;AAAO,MAAM,WAAW,CAAC,QAAgB;IACrC,MAAM,MAA8B;QAChC,IAAI;QACJ,GAAG;QACH,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,KAAK;IAET;IAEA,MAAM,IAAI,OAAO,SAAS,WAAW,KAAK,WAAW,KAAK;IAC1D,MAAM,SAAS,GAAG,CAAC,EAAE,IAAI,GAAG,2BAA2B;IAEvD,OAAO,SAAS;AACpB,GAGA,gBAAgB;CAEhB,4CAA4C;CAE5C,qCAAqC;CACrC,sBAAsB;CACtB,wGAAwG"}},
    {"offset": {"line": 2053, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesByCustomer.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMemo, useState } from \"react\";\r\nimport { User, ArrowUpDown } from \"lucide-react\";\r\nimport { Sale } from \"./Sale\";\r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\nimport { unitToKg } from \"@/lib/UnitToKg\";\r\nimport {\r\n    Select,\r\n    SelectTrigger,\r\n    SelectValue,\r\n    SelectContent,\r\n    SelectItem,\r\n} from \"@/components/ui/select\";\r\n\r\ntype SortKey =\r\n    | \"name\"\r\n    | \"saleCount\"\r\n    | \"quantity\"\r\n    | \"totalTonnage\"\r\n    | \"totalSalesValue\"\r\n    | \"avgOrderValue\"\r\n    | \"contribution\";\r\n\r\ninterface Props {\r\n    sales: Sale[];\r\n    title: string;\r\n    iconColor: string;\r\n    limit?: number;\r\n}\r\n\r\nexport default function SalesByCustomer({\r\n    sales,\r\n    title,\r\n    iconColor,\r\n    limit = 10,\r\n}: Props) {\r\n    const [sortKey, setSortKey] = useState<SortKey>(\"totalSalesValue\");\r\n    const [sortDir, setSortDir] = useState<\"asc\" | \"desc\">(\"desc\");\r\n\r\n    const [startDate, setStartDate] = useState<Date | null>(null);\r\n    const [endDate, setEndDate] = useState<Date | null>(null);\r\n\r\n    const [selectedCategory, setSelectedCategory] = useState(\"all\");\r\n    const [selectedProduct, setSelectedProduct] = useState(\"all\");\r\n\r\n    /* ------------------ FILTER OPTIONS ------------------ */\r\n    const categories = useMemo(() => {\r\n        const set = new Set<string>();\r\n        sales.forEach(s => s.product?.category && set.add(s.product.category));\r\n        return Array.from(set).sort();\r\n    }, [sales]);\r\n\r\n    const products = useMemo(() => {\r\n        const set = new Set<string>();\r\n        sales.forEach(s => s.product?.name && set.add(s.product.name));\r\n        return Array.from(set).sort();\r\n    }, [sales]);\r\n\r\n    /* ------------------ FILTER SALES ------------------ */\r\n    const filteredSales = useMemo(() => {\r\n        return sales.filter(sale => {\r\n            const saleDate = new Date(sale.saleDate);\r\n\r\n            if (startDate && saleDate < startDate) return false;\r\n            if (endDate && saleDate > endDate) return false;\r\n\r\n            if (\r\n                selectedCategory !== \"all\" &&\r\n                sale.product?.category !== selectedCategory\r\n            ) {\r\n                return false;\r\n            }\r\n\r\n            if (\r\n                selectedProduct !== \"all\" &&\r\n                sale.product?.name !== selectedProduct\r\n            ) {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        });\r\n    }, [sales, startDate, endDate, selectedCategory, selectedProduct]);\r\n\r\n    /* ------------------ AGGREGATE BY CUSTOMER ------------------ */\r\n    const data = useMemo(() => {\r\n        const map: Record<string, any> = {};\r\n\r\n        filteredSales.forEach(sale => {\r\n            const id = sale.customerId;\r\n            const name = sale.customerName || \"Unknown\";\r\n\r\n            if (!map[id]) {\r\n                map[id] = {\r\n                    id,\r\n                    name,\r\n                    saleCount: 0,\r\n                    quantity: 0,\r\n                    totalTonnage: 0,\r\n                    totalSalesValue: 0,\r\n                    avgOrderValue: 0,\r\n                    contribution: 0,\r\n                };\r\n            }\r\n\r\n            const salesValue =\r\n                sale.totalAmount ?? sale.salePrice * sale.quantity;\r\n\r\n            const weightKg = unitToKg(\r\n                sale.product?.weightValue || 0,\r\n                sale.product?.weightUnit\r\n            );\r\n\r\n            const packSize = sale.product?.packSize || 1;\r\n            const tonnage = (weightKg * sale.quantity * packSize) / 1000;\r\n\r\n            map[id].saleCount += 1;\r\n            map[id].quantity += sale.quantity;\r\n            map[id].totalSalesValue += salesValue;\r\n            map[id].totalTonnage += tonnage;\r\n        });\r\n\r\n        const totalRevenue = Object.values(map).reduce(\r\n            (sum: number, c: any) => sum + c.totalSalesValue,\r\n            0\r\n        );\r\n\r\n        return Object.values(map).map((c: any) => ({\r\n            ...c,\r\n            avgOrderValue:\r\n                c.saleCount > 0 ? c.totalSalesValue / c.saleCount : 0,\r\n            contribution:\r\n                totalRevenue > 0\r\n                    ? (c.totalSalesValue / totalRevenue) * 100\r\n                    : 0,\r\n        }));\r\n    }, [filteredSales]);\r\n\r\n    /* ------------------ SORT ------------------ */\r\n    const sortedData = useMemo(() => {\r\n        return [...data]\r\n            .sort((a, b) => {\r\n                const aVal = a[sortKey];\r\n                const bVal = b[sortKey];\r\n\r\n                if (typeof aVal === \"string\") {\r\n                    return sortDir === \"asc\"\r\n                        ? aVal.localeCompare(bVal)\r\n                        : bVal.localeCompare(aVal);\r\n                }\r\n\r\n                return sortDir === \"asc\" ? aVal - bVal : bVal - aVal;\r\n            })\r\n            .slice(0, limit);\r\n    }, [data, sortKey, sortDir, limit]);\r\n\r\n    const toggleSort = (key: SortKey) => {\r\n        if (key === sortKey) {\r\n            setSortDir(sortDir === \"asc\" ? \"desc\" : \"asc\");\r\n        } else {\r\n            setSortKey(key);\r\n            setSortDir(\"desc\");\r\n        }\r\n    };\r\n\r\n    const Header = ({ label, column, align = \"left\" }: any) => (\r\n        <th\r\n            onClick={() => toggleSort(column)}\r\n            className={`py-2 px-3 cursor-pointer border-r hover:text-blue-600 ${align === \"right\" ? \"text-right\" : \"text-left\"\r\n                }`}\r\n        >\r\n            <span className=\"inline-flex items-center gap-1\">\r\n                {label}\r\n                <ArrowUpDown className=\"w-3 h-3 opacity-60\" />\r\n            </span>\r\n        </th>\r\n    );\r\n\r\n    /* ------------------ EXPORT CSV ------------------ */\r\n    const exportCSV = () => {\r\n        const headers = [\"Customer\", \"Orders\", \"Quantity\", \"Tonnage\", \"Avg Order Value\", \"Revenue\", \"Contribution %\"];\r\n        const rows = sortedData.map(d => [\r\n            d.name,\r\n            d.saleCount,\r\n            d.quantity,\r\n            d.totalTonnage.toFixed(2),\r\n            d.avgOrderValue.toFixed(2),\r\n            d.totalSalesValue.toFixed(2),\r\n            d.contribution.toFixed(2),\r\n        ]);\r\n\r\n        const csv = [headers, ...rows].map(r => r.join(\",\")).join(\"\\n\");\r\n        const blob = new Blob([csv], { type: \"text/csv\" });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = \"sales_by_customer.csv\";\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    /* ------------------ EXPORT PDF ------------------ */\r\n    const exportPDF = () => {\r\n        const doc = new jsPDF();\r\n        const start = startDate ? startDate.toLocaleDateString() : \"N/A\";\r\n        const end = endDate ? endDate.toLocaleDateString() : \"N/A\";\r\n\r\n        doc.setFontSize(16);\r\n        doc.setFont(\"helvetica\", \"bold\");\r\n        doc.text(title, doc.internal.pageSize.getWidth() / 2, 15, { align: \"center\" });\r\n\r\n        doc.setFontSize(10);\r\n        doc.setFont(\"helvetica\", \"normal\");\r\n        doc.text(`Date Range: ${start} - ${end}`, doc.internal.pageSize.getWidth() / 2, 23, { align: \"center\" });\r\n\r\n        const totals = {\r\n            saleCount: sortedData.reduce((sum, d) => sum + d.saleCount, 0),\r\n            quantity: sortedData.reduce((sum, d) => sum + d.quantity, 0),\r\n            totalTonnage: sortedData.reduce((sum, d) => sum + d.totalTonnage, 0),\r\n            totalSalesValue: sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0),\r\n        };\r\n        totals.avgOrderValue = totals.saleCount > 0 ? totals.totalSalesValue / totals.saleCount : 0;\r\n\r\n        autoTable(doc, {\r\n            startY: 30,\r\n            head: [[\"#\", \"Customer\", \"Orders\", \"Quantity\", \"Tonnage\", \"Avg Order Value\", \"Revenue\", \"% Share\"]],\r\n            body: sortedData.map((d, i) => [\r\n                i + 1,\r\n                d.name,\r\n                d.saleCount,\r\n                d.quantity,\r\n                d.totalTonnage.toFixed(2),\r\n                `K${d.avgOrderValue.toFixed(0)}`,\r\n                `K${d.totalSalesValue.toFixed(0)}`,\r\n                `${d.contribution.toFixed(1)}%`\r\n            ]),\r\n            foot: [[\"Total\", \"-\", totals.saleCount, totals.quantity, totals.totalTonnage.toFixed(2), `K${totals.avgOrderValue.toFixed(0)}`, `K${totals.totalSalesValue.toFixed(0)}`, \"100%\"]],\r\n            styles: { fontSize: 9, cellPadding: 4 },\r\n            headStyles: { fillColor: [100, 100, 100], fontStyle: \"bold\", textColor: 255 },\r\n            footStyles: { fillColor: [100, 100, 100], fontStyle: \"bold\", textColor: 255 },\r\n            alternateRowStyles: { fillColor: [245, 245, 245] },\r\n        });\r\n\r\n        doc.save(\"sales_by_customer.pdf\");\r\n    };\r\n\r\n    /* ------------------ RENDER ------------------ */\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <User className={`h-5 w-5 ${iconColor}`} />\r\n                {title}\r\n            </h3>\r\n\r\n            {/* FILTER BAR + EXPORT */}\r\n            <div className=\"flex flex-wrap justify-between items-center mb-4 gap-3\">\r\n                <div className=\"flex gap-2 items-center rounded border bg-gray-30 px-2 py-1 flex-wrap\">\r\n                    <label className=\"flex items-center gap-2 font-medium\">\r\n                        Start Date:\r\n                        <input\r\n                            type=\"date\"\r\n                            value={startDate?.toISOString().substring(0, 10) || \"\"}\r\n                            onChange={e =>\r\n                                setStartDate(e.target.value ? new Date(e.target.value) : null)\r\n                            }\r\n                            className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200\"\r\n                        />\r\n                    </label>\r\n\r\n                    <label className=\"flex items-center gap-2 font-medium\">\r\n                        End Date:\r\n                        <input\r\n                            type=\"date\"\r\n                            value={endDate?.toISOString().substring(0, 10) || \"\"}\r\n                            onChange={e =>\r\n                                setEndDate(e.target.value ? new Date(e.target.value) : null)\r\n                            }\r\n                            className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200\"\r\n                        />\r\n                    </label>\r\n                </div>\r\n\r\n                <div className=\"flex gap-4 rounded border bg-gray-30 px-2 py-1 flex-wrap\">\r\n                    <label className=\"flex items-center gap-2 font-medium\">\r\n                        Category:\r\n                        <select\r\n                            value={selectedCategory}\r\n                            onChange={e => {\r\n                                setSelectedCategory(e.target.value);\r\n                                setSelectedProduct(\"all\");\r\n                            }}\r\n                            className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200\"\r\n                        >\r\n                            <option value=\"all\">All</option>\r\n                            {categories.map(cat => (\r\n                                <option key={cat} value={cat}>{cat}</option>\r\n                            ))}\r\n                        </select>\r\n                    </label>\r\n\r\n                    <label className=\"flex items-center gap-2 font-medium\">\r\n                        Product:\r\n                        <Select\r\n                            value={selectedProduct}\r\n                            onValueChange={setSelectedProduct}\r\n                        >\r\n                            <SelectTrigger className=\"w-30 h-7 text-xs text-black\">\r\n                                <SelectValue placeholder=\"All\" />\r\n                            </SelectTrigger>\r\n\r\n                            <SelectContent className=\"max-h-60 text-xs text-black w-[inherit] overflow-auto\">\r\n                                <SelectItem value=\"all\" className=\"text-black hover:bg-blue-500 hover:text-white\">\r\n                                    All Products\r\n                                </SelectItem>\r\n                                {products\r\n                                    .filter(p =>\r\n                                        selectedCategory === \"all\"\r\n                                            ? true\r\n                                            : sales.some(\r\n                                                s =>\r\n                                                    s.product?.name === p &&\r\n                                                    s.product?.category === selectedCategory\r\n                                            )\r\n                                    )\r\n                                    .map(product => (\r\n                                        <SelectItem\r\n                                            key={product}\r\n                                            value={product}\r\n                                            className=\"text-black hover:bg-blue-500 hover:text-white\"\r\n                                        >\r\n                                            {product}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </label>\r\n                </div>\r\n\r\n                <div className=\"flex gap-2 items-center\">\r\n                    <button onClick={exportCSV} className=\"text-sm px-3 py-1 rounded border font-medium hover:bg-gray-100\">Export CSV</button>\r\n                    <button onClick={exportPDF} className=\"text-sm px-3 py-1 rounded border font-medium hover:bg-gray-100\">Export PDF</button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* TABLE */}\r\n            <div className=\"max-h-[420px] overflow-y-auto\">\r\n                <table className=\"w-full text-sm border\">\r\n                    <thead className=\"sticky top-0 bg-gray-200\">\r\n                        <tr>\r\n                            <th className=\"py-2 px-3 border-r text-center\">#</th>\r\n                            <Header label=\"Customer\" column=\"name\" />\r\n                            <Header label=\"Orders\" column=\"saleCount\" align=\"right\" />\r\n                            <Header label=\"Quantity\" column=\"quantity\" align=\"right\" />\r\n                            <Header label=\"Tonnage\" column=\"totalTonnage\" align=\"right\" />\r\n                            <Header label=\"Avg Order Value\" column=\"avgOrderValue\" align=\"right\" />\r\n                            <Header label=\"Revenue\" column=\"totalSalesValue\" align=\"right\" />\r\n                            <Header label=\"% Share\" column=\"contribution\" align=\"right\" />\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {sortedData.length === 0 ? (\r\n                            <tr>\r\n                                <td colSpan={8} className=\"py-2 px-3 text-center text-gray-500\">\r\n                                    No data available for selected filters\r\n                                </td>\r\n                            </tr>\r\n                        ) : (\r\n                            sortedData.map((c, i) => (\r\n                                <tr key={c.id} className={i % 2 ? \"bg-gray-50\" : \"\"}>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">{i + 1}</td>\r\n                                    <td className=\"py-2 px-3 border-r\">{c.name}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">{c.saleCount}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">{c.quantity}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">{c.totalTonnage.toFixed(2)}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">K{c.avgOrderValue.toFixed(0)}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">K{c.totalSalesValue.toFixed(0)}</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">{c.contribution.toFixed(1)}%</td>\r\n                                </tr>\r\n                            ))\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2752, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesByProduct.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMemo, useState } from \"react\";\r\nimport { Package, ArrowUpDown } from \"lucide-react\";\r\nimport { Sale } from \"./Sale\";\r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\n\r\ntype SortKey =\r\n    | \"name\"\r\n    | \"saleCount\"\r\n    | \"quantity\"\r\n    | \"totalTonnage\"\r\n    | \"totalSalesValue\"\r\n    | \"avgOrderValue\"\r\n    | \"contribution\";\r\n\r\ninterface Props {\r\n    sales: Sale[];\r\n    title: string;\r\n    iconColor: string;\r\n}\r\n\r\nexport default function SalesByProduct({\r\n    sales,\r\n    title,\r\n    iconColor,\r\n}: Props) {\r\n    const [sortKey, setSortKey] = useState<SortKey>(\"totalSalesValue\");\r\n    const [sortDir, setSortDir] = useState<\"asc\" | \"desc\">(\"desc\");\r\n\r\n    const [startDate, setStartDate] = useState<Date | null>(null);\r\n    const [endDate, setEndDate] = useState<Date | null>(null);\r\n\r\n    /** ------------------ FILTER SALES ------------------ */\r\n    // Filters\r\n    const [selectedLocation, setSelectedLocation] = useState<string>(\"all\");\r\n    const [selectedCategory, setSelectedCategory] = useState<string>(\"all\");\r\n\r\n    const locations = useMemo(() => {\r\n        const set = new Set<string>();\r\n        sales.forEach(sale => {\r\n            if (sale.location?.name) {\r\n                set.add(sale.location.name);\r\n            }\r\n        });\r\n        return Array.from(set).sort();\r\n    }, [sales]);\r\n\r\n    const categories = useMemo(() => {\r\n        const set = new Set<string>();\r\n        sales.forEach(sale => {\r\n            if (sale.product?.category) {\r\n                set.add(sale.product.category);\r\n            }\r\n        });\r\n        return Array.from(set).sort();\r\n    }, [sales]);\r\n\r\n    const filteredSales = useMemo(() => {\r\n        return sales.filter(sale => {\r\n            const saleDate = new Date(sale.saleDate);\r\n\r\n            if (startDate && saleDate < startDate) return false;\r\n            if (endDate && saleDate > endDate) return false;\r\n\r\n            if (\r\n                selectedLocation !== \"all\" &&\r\n                sale.location?.name !== selectedLocation\r\n            ) {\r\n                return false;\r\n            }\r\n\r\n            if (\r\n                selectedCategory !== \"all\" &&\r\n                sale.product?.category !== selectedCategory\r\n            ) {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        });\r\n    }, [sales, startDate, endDate, selectedLocation, selectedCategory]);\r\n\r\n\r\n    /** ------------------ AGGREGATE BY PRODUCT ------------------ */\r\n    const data = useMemo(() => {\r\n        const map: Record<string, any> = {};\r\n\r\n        filteredSales.forEach(sale => {\r\n            const id = sale.productId;\r\n            const name = sale.product?.name || \"Unknown Product\";\r\n\r\n            if (!map[id]) {\r\n                map[id] = {\r\n                    id,\r\n                    name,\r\n                    saleCount: 0,\r\n                    quantity: 0,\r\n                    totalTonnage: 0,\r\n                    totalSalesValue: 0,\r\n                    avgOrderValue: 0,\r\n                    contribution: 0,\r\n                };\r\n            }\r\n\r\n            const salesValue =\r\n                sale.totalAmount ?? sale.salePrice * sale.quantity;\r\n\r\n            const weight = sale.product?.weightValue || 0;\r\n            const packSize = sale.product?.packSize || 1;\r\n            const tonnage = (weight * sale.quantity * packSize) / 1000;\r\n\r\n            map[id].saleCount += 1;\r\n            map[id].quantity += sale.quantity;\r\n            map[id].totalSalesValue += salesValue;\r\n            map[id].totalTonnage += tonnage;\r\n        });\r\n\r\n        const totalRevenue = Object.values(map).reduce(\r\n            (sum: number, p: any) => sum + p.totalSalesValue,\r\n            0\r\n        );\r\n\r\n        return Object.values(map).map((p: any) => ({\r\n            ...p,\r\n            avgOrderValue:\r\n                p.saleCount > 0 ? p.totalSalesValue / p.saleCount : 0,\r\n            contribution:\r\n                totalRevenue > 0\r\n                    ? (p.totalSalesValue / totalRevenue) * 100\r\n                    : 0,\r\n        }));\r\n    }, [filteredSales]);\r\n\r\n    /** ------------------ SORT ------------------ */\r\n    const sortedData = useMemo(() => {\r\n        return [...data].sort((a, b) => {\r\n            const aVal = a[sortKey];\r\n            const bVal = b[sortKey];\r\n\r\n            if (typeof aVal === \"string\") {\r\n                return sortDir === \"asc\"\r\n                    ? aVal.localeCompare(bVal)\r\n                    : bVal.localeCompare(aVal);\r\n            }\r\n\r\n            return sortDir === \"asc\" ? aVal - bVal : bVal - aVal;\r\n        });\r\n    }, [data, sortKey, sortDir]);\r\n\r\n    const toggleSort = (key: SortKey) => {\r\n        if (key === sortKey) {\r\n            setSortDir(sortDir === \"asc\" ? \"desc\" : \"asc\");\r\n        } else {\r\n            setSortKey(key);\r\n            setSortDir(\"desc\");\r\n        }\r\n    };\r\n\r\n    const Header = ({\r\n        label,\r\n        column,\r\n        align = \"left\",\r\n    }: {\r\n        label: string;\r\n        column: SortKey;\r\n        align?: \"left\" | \"right\";\r\n    }) => (\r\n        <th\r\n            onClick={() => toggleSort(column)}\r\n            className={`py-2 px-3 cursor-pointer border-r hover:text-blue-600 ${align === \"right\" ? \"text-right\" : \"text-left\"\r\n                }`}\r\n        >\r\n            <span className=\"inline-flex items-center gap-1\">\r\n                {label}\r\n                <ArrowUpDown className=\"w-3 h-3 opacity-60\" />\r\n            </span>\r\n        </th>\r\n    );\r\n    // Export to csv\r\n    const exportCSV = () => {\r\n        const headers = [\r\n            \"Location\",\r\n            \"Orders\",\r\n            \"Quantity\",\r\n            \"Tonnage\",\r\n            \"Avg Order Value\",\r\n            \"Revenue\",\r\n            \"Contribution %\",\r\n        ];\r\n\r\n        const rows = sortedData.map(l => [\r\n            l.name,\r\n            l.saleCount,\r\n            l.quantity,\r\n            l.totalTonnage.toFixed(2),\r\n            l.avgOrderValue.toFixed(2),\r\n            l.totalSalesValue.toFixed(2),\r\n            l.contribution.toFixed(2),\r\n        ]);\r\n\r\n        const csv = [headers, ...rows]\r\n            .map(r => r.join(\",\"))\r\n            .join(\"\\n\");\r\n\r\n        const blob = new Blob([csv], { type: \"text/csv\" });\r\n        const url = URL.createObjectURL(blob);\r\n\r\n        const a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = \"sales_by_location.csv\";\r\n        a.click();\r\n\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    // Inside your component\r\n    const exportPDF = (startDate?: Date, endDate?: Date) => {\r\n        const doc = new jsPDF(); // portrait\r\n\r\n        // Format dates\r\n        const start = startDate ? startDate.toLocaleDateString() : \"N/A\";\r\n        const end = endDate ? endDate.toLocaleDateString() : \"N/A\";\r\n\r\n        // Title at the top\r\n        doc.setFontSize(16);\r\n        doc.setFont(\"helvetica\", \"bold\");\r\n        doc.text(title, doc.internal.pageSize.getWidth() / 2, 15, { align: \"center\" });\r\n\r\n        // Date range below title\r\n        doc.setFontSize(10);\r\n        doc.setFont(\"helvetica\", \"normal\");\r\n        doc.text(`Date Range: ${start} - ${end}`, doc.internal.pageSize.getWidth() / 2, 23, { align: \"center\" });\r\n\r\n        // Totals calculation\r\n        const totals = {\r\n            saleCount: sortedData.reduce((sum, d) => sum + d.saleCount, 0),\r\n            quantity: sortedData.reduce((sum, d) => sum + d.quantity, 0),\r\n            totalTonnage: sortedData.reduce((sum, d) => sum + d.totalTonnage, 0),\r\n            totalSalesValue: sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0),\r\n        };\r\n        totals.avgOrderValue = totals.saleCount > 0 ? totals.totalSalesValue / totals.saleCount : 0;\r\n\r\n        // Table\r\n        autoTable(doc, {\r\n            startY: 30, // start a bit lower so title/date are visible\r\n            head: [[\r\n                \"#\", \"Location\", \"Orders\", \"Quantity\", \"Tonnage (t)\",\r\n                \"Avg Order Value\", \"Revenue\", \"% Share\"\r\n            ]],\r\n            body: sortedData.map((loc, index) => [\r\n                index + 1,\r\n                loc.name,\r\n                loc.saleCount,\r\n                loc.quantity,\r\n                loc.totalTonnage.toFixed(2),\r\n                `K${loc.avgOrderValue.toFixed(0)}`,\r\n                `K${loc.totalSalesValue.toFixed(0)}`,\r\n                `${loc.contribution.toFixed(1)}%`\r\n            ]),\r\n            foot: [[\r\n                \"Total\",\r\n                \"-\",\r\n                totals.saleCount,\r\n                totals.quantity,\r\n                totals.totalTonnage.toFixed(2),\r\n                `K${totals.avgOrderValue.toFixed(0)}`,\r\n                `K${totals.totalSalesValue.toFixed(0)}`,\r\n                \"100%\"\r\n            ]],\r\n            styles: { fontSize: 9, cellPadding: 4 },\r\n            headStyles: { fillColor: [100, 100, 100], fontStyle: \"bold\", textColor: 255 },\r\n            footStyles: { fillColor: [100, 100, 100], fontStyle: \"bold\", textColor: 255 },\r\n            alternateRowStyles: { fillColor: [245, 245, 245] },\r\n        });\r\n\r\n        doc.save(\"sales_by_location.pdf\");\r\n    };\r\n\r\n    /** ------------------ RENDER ------------------ */\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <Package className={`h-5 w-5 ${iconColor}`} />\r\n                {title}\r\n            </h3>\r\n\r\n            <div className=\"flex flex-wrap justify-between items-center mb-4\">\r\n                {/* Left side: Date pickers */}\r\n                <div className=\"flex gap-2 items-center rounded border bg-gray-30 px-2 py-1\">\r\n                    <label className=\"flex items-center gap-2 font-medium\">\r\n                        Start Date:\r\n                        <input\r\n                            type=\"date\"\r\n                            value={startDate ? startDate.toISOString().substring(0, 10) : \"\"}\r\n                            onChange={(e) =>\r\n                                setStartDate(e.target.value ? new Date(e.target.value) : null)\r\n                            }\r\n                            className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200 cursor-pointer\"\r\n                        />\r\n                    </label>\r\n\r\n                    <label className=\"flex items-center gap-2 font-medium\">\r\n                        End Date:\r\n                        <input\r\n                            type=\"date\"\r\n                            value={endDate ? endDate.toISOString().substring(0, 10) : \"\"}\r\n                            onChange={(e) =>\r\n                                setEndDate(e.target.value ? new Date(e.target.value) : null)\r\n                            }\r\n                            className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200 cursor-pointer \"\r\n                        />\r\n                    </label>\r\n                </div>\r\n                <div className=\"flex gap-5 rounded border px-2 py-1 flex-wrap\">\r\n                    <label className=\"flex items-center gap-2 font-medium\">\r\n                        Select Location:\r\n                        <select\r\n                            value={selectedLocation}\r\n                            onChange={(e) => setSelectedLocation(e.target.value)}\r\n                            className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200 cursor-pointer\"\r\n                        >\r\n                            <option value=\"all\">All</option>\r\n                            {locations.map((loc) => (\r\n                                <option key={loc} value={loc}>\r\n                                    {loc}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </label>\r\n\r\n                    <label className=\"flex items-center gap-2 font-medium\">\r\n                        Select Category:\r\n                        <select\r\n                            value={selectedCategory}\r\n                            onChange={(e) => setSelectedCategory(e.target.value)}\r\n                            className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200 cursor-pointer\"\r\n                        >\r\n                            <option value=\"all\">All</option>\r\n                            {categories.map((cat) => (\r\n                                <option key={cat} value={cat}>\r\n                                    {cat}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </label>\r\n                </div>\r\n\r\n                {/* Right side: Export buttons */}\r\n                <div className=\"flex gap-2 items-center\">\r\n                    <button\r\n                        onClick={exportCSV}\r\n                        className=\"text-sm px-3 py-1 rounded border font-medium hover:bg-gray-200\"\r\n                    >\r\n                        Export CSV\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={() => exportPDF(startDate ?? undefined, endDate ?? undefined)}\r\n                        className=\"text-sm px-3 py-1 rounded border font-medium hover:bg-gray-200\"\r\n                    >\r\n                        Export PDF\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"max-h-[420px] overflow-y-auto\">\r\n                <table className=\"w-full text-sm border border-gray-200\">\r\n                    <thead className=\"sticky top-0 bg-gray-200\">\r\n                        <tr>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">#</th>\r\n                            <th className=\"py-2 border-r text-left font-small\">Product Name</th>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">Orders</th>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">Quantity</th>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">Tonnage</th>\r\n                            <th className=\"py-2 border-r text-center font-small\">Avg Order Value</th>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">Revenue</th>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">% Share</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {sortedData.length === 0 ? (\r\n                            <tr>\r\n                                <td\r\n                                    colSpan={8}\r\n                                    className=\"py-6 text-center text-gray-500 italic\"\r\n                                >\r\n                                    No data available\r\n                                </td>\r\n                            </tr>\r\n                        ) : (\r\n                            <>\r\n                                {sortedData.map((p, i) => (\r\n                                    <tr key={p.id} className={i % 2 ? \"bg-gray-50\" : \"\"}>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">{i + 1}</td>\r\n                                        <td className=\"py-2 px-3 border-r truncate\">{p.name}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">{p.saleCount}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">{p.quantity}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">\r\n                                            {p.totalTonnage.toFixed(2)}\r\n                                        </td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">\r\n                                            K{p.avgOrderValue.toFixed(0)}\r\n                                        </td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">\r\n                                            K{p.totalSalesValue.toFixed(0)}\r\n                                        </td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">\r\n                                            {p.contribution.toFixed(1)}%\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n\r\n                                {/* TOTAL ROW */}\r\n                                <tr className=\"bg-gray-200 font-bold\">\r\n                                    <td className=\"py-2 px-3 border-r text-center\">Total</td>\r\n                                    <td className=\"py-2 px-3 border-r\">-</td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">\r\n                                        {sortedData.reduce((sum, d) => sum + d.saleCount, 0)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">\r\n                                        {sortedData.reduce((sum, d) => sum + d.quantity, 0)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">\r\n                                        {sortedData\r\n                                            .reduce((sum, d) => sum + d.totalTonnage, 0)\r\n                                            .toFixed(2)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">\r\n                                        K{(\r\n                                            sortedData.reduce((s, d) => s + d.totalSalesValue, 0) /\r\n                                            Math.max(\r\n                                                sortedData.reduce((s, d) => s + d.saleCount, 0),\r\n                                                1\r\n                                            )\r\n                                        ).toFixed(0)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">\r\n                                        K{sortedData\r\n                                            .reduce((sum, d) => sum + d.totalSalesValue, 0)\r\n                                            .toFixed(0)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center\">100%</td>\r\n                                </tr>\r\n                            </>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3512, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/DateFiltersExports.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\n\r\ninterface Props {\r\n    startDate: Date | null;\r\n    endDate: Date | null;\r\n    setStartDate: (date: Date | null) => void;\r\n    setEndDate: (date: Date | null) => void;\r\n    selectedLocations: string[];\r\n    setSelectedLocations: (locations: string[]) => void;\r\n    selectedCategories: string[];\r\n    setSelectedCategories: (categories: string[]) => void;\r\n    selectedProducts: string[];\r\n    setSelectedProducts: (products: string[]) => void;\r\n    locationOptions: { value: string; label: string }[];\r\n    categoryOptions: { value: string; label: string }[];\r\n    productOptions: { value: string; label: string }[];\r\n    exportCSV: () => void;\r\n    exportPDF: () => void;\r\n}\r\n\r\nconst DateFiltersExports = ({\r\n    startDate,\r\n    endDate,\r\n    setStartDate,\r\n    setEndDate,\r\n    selectedLocations,\r\n    setSelectedLocations,\r\n    selectedCategories,\r\n    setSelectedCategories,\r\n    selectedProducts,\r\n    setSelectedProducts,\r\n    locationOptions,\r\n    categoryOptions,\r\n    productOptions,\r\n    exportCSV,\r\n    exportPDF,\r\n}: Props) => {\r\n    const [showLocations, setShowLocations] = useState(false);\r\n    const [showCategories, setShowCategories] = useState(false);\r\n    const [showProducts, setShowProducts] = useState(false);\r\n    const locationRef = useRef(null);\r\n    const categoryRef = useRef(null);\r\n    const productRef = useRef(null);\r\n\r\n    const [filteredProducts, setFilteredProducts] = useState(productOptions);\r\n    const [filteredCategories, setFilteredCategories] = useState(categoryOptions);\r\n\r\n    useEffect(() => {\r\n        if (selectedCategories.length > 0) {\r\n            const filtered = productOptions.filter((product) => {\r\n                return selectedCategories.includes(product.category);\r\n            });\r\n            setFilteredProducts(filtered);\r\n        } else {\r\n            setFilteredProducts(productOptions);\r\n        }\r\n    }, [selectedCategories, productOptions]);\r\n\r\n    useEffect(() => {\r\n        if (selectedProducts.length > 0) {\r\n            const categories = [...new Set(selectedProducts.map((productId) => {\r\n                const product = productOptions.find((p) => p.value === productId);\r\n                return product?.category;\r\n            }))];\r\n            const filtered = categoryOptions.filter((category) => {\r\n                return categories.includes(category.value);\r\n            });\r\n            setFilteredCategories(filtered);\r\n        } else {\r\n            setFilteredCategories(categoryOptions);\r\n        }\r\n    }, [selectedProducts, productOptions, categoryOptions]);\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (locationRef.current && !locationRef.current.contains(event.target)) {\r\n                setShowLocations(false);\r\n            }\r\n            if (categoryRef.current && !categoryRef.current.contains(event.target)) {\r\n                setShowCategories(false);\r\n            }\r\n            if (productRef.current && !productRef.current.contains(event.target)) {\r\n                setShowProducts(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"flex flex-wrap items-center justify-between mb-4 gap-2\">\r\n            <div className=\"flex gap-2 flex-wrap\">\r\n                <button className={`px-3 py-1 rounded border ${view === \"location\" ? \"bg-blue-100\" : \"\"}`} onClick={() => setView(\"location\")}>\r\n                    <MapPin className=\"inline w-4 h-4 mr-1\" /> Location\r\n                </button>\r\n                <button className={`px-3 py-1 rounded border ${view === \"customer\" ? \"bg-blue-100\" : \"\"}`} onClick={() => setView(\"customer\")}>\r\n                    <User className=\"inline w-4 h-4 mr-1\" /> Customer\r\n                </button>\r\n                <button className={`px-3 py-1 rounded border ${view === \"product\" ? \"bg-blue-100\" : \"\"}`} onClick={() => setView(\"product\")}>\r\n                    <Package className=\"inline w-4 h-4 mr-1\" /> Product\r\n                </button>\r\n            </div>\r\n            <div className=\"flex gap-2 items-center rounded border bg-gray-30 px-2 py-1 flex-wrap\">\r\n                <label className=\"flex items-center gap-2 font-medium\">\r\n                    Start Date:\r\n                    <input type=\"date\" value={startDate?.toISOString().substring(0, 10) || \"\"} onChange={e => setStartDate(e.target.value ? new Date(e.target.value) : null)} className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200\" />\r\n                </label>\r\n                <label className=\"flex items-center gap-2 font-medium\">\r\n                    End Date:\r\n                    <input type=\"date\" value={endDate?.toISOString().substring(0, 10) || \"\"} onChange={e => setEndDate(e.target.value ? new Date(e.target.value) : null)} className=\"border rounded px-2 py-1 text-sm hover:bg-gray-200\" />\r\n                </label>\r\n            </div>\r\n            <div className=\"flex gap-2 flex-wrap\">\r\n                <div ref={locationRef}>\r\n                    <button onClick={() => setShowLocations(!showLocations)} className=\"px-3 py-1 border rounded\">Select Locations</button>\r\n                    {showLocations && (\r\n                        <div className=\"p-2 border rounded mt-1 absolute bg-white z-10 w-35\">\r\n                            <button onClick={() => setSelectedLocations([])} className=\"text-sm text-blue-500 hover:underline cursor-pointer mb-2\">Clear Selection</button>\r\n                            {locationOptions.map((option) => (\r\n                                <div key={option.value} className=\"flex items-center gap-2\">\r\n                                    <input type=\"checkbox\" id={option.value} checked={selectedLocations.includes(option.value)} onChange={(e) => {\r\n                                        if (e.target.checked) {\r\n                                            setSelectedLocations([...selectedLocations, option.value]);\r\n                                        } else {\r\n                                            setSelectedLocations(selectedLocations.filter((l) => l !== option.value));\r\n                                        }\r\n                                    }} className=\"w-4 h-4 cursor-pointer\" />\r\n                                    <label htmlFor={option.value} className=\"text-sm hover:bg-gray-200 cursor-pointer\">{option.label}</label>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                <div ref={categoryRef}>\r\n                    <button onClick={() => setShowCategories(!showCategories)} className=\"px-3 py-1 border rounded\">Select Categories</button>\r\n                    {showCategories && (\r\n                        <div className=\"p-2 border rounded mt-1 absolute bg-white z-10 w-37\">\r\n                            <button onClick={() => setSelectedCategories([])} className=\"text-sm text-blue-500 hover:underline cursor-pointer mb-2\">Clear Selection</button>\r\n                            {filteredCategories.map((option) => (\r\n                                <div key={option.value} className=\"flex items-center gap-2\">\r\n                                    <input type=\"checkbox\" id={option.value} checked={selectedCategories.includes(option.value)} onChange={(e) => {\r\n                                        if (e.target.checked) {\r\n                                            setSelectedCategories([...selectedCategories, option.value]);\r\n                                        } else {\r\n                                            setSelectedCategories(selectedCategories.filter((c) => c !== option.value));\r\n                                        }\r\n                                    }} className=\"w-4 h-4 cursor-pointer\" />\r\n                                    <label htmlFor={option.value} className=\"text-sm hover:bg-gray-200 cursor-pointer\">{option.label}</label>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                <div ref={productRef}>\r\n                    <button onClick={() => setShowProducts(!showProducts)} className=\"px-3 py-1 border rounded\">Select Products</button>\r\n                    {showProducts && (\r\n                        <div className=\"p-2 border rounded mt-2 absolute bg-white z-10 w-35 h-48 overflow-y-auto\">\r\n                            <button onClick={() => setSelectedProducts([])} className=\"text-sm text-blue-500 hover:underline cursor-pointer mb-2\">Clear Selection</button>\r\n                            {filteredProducts.map((option) => (\r\n                                <div key={option.value} className=\"flex items-center gap-3 mr-2\">\r\n                                    <input type=\"checkbox\" id={option.value} checked={selectedProducts.includes(option.value)} onChange={(e) => {\r\n                                        if (e.target.checked) {\r\n                                            setSelectedProducts([...selectedProducts, option.value]);\r\n                                        } else {\r\n                                            setSelectedProducts(selectedProducts.filter((p) => p !== option.value));\r\n                                        }\r\n                                    }} className=\"w-4 h-4 cursor-pointer\" />\r\n                                    <label htmlFor={option.value} className=\"text-sm hover:bg-gray-200 cursor-pointer\">{option.label}</label>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <div className=\"flex gap-2 flex-wrap\">\r\n                <button onClick={exportCSV} className=\"px-3 py-1 border rounded\">Export CSV</button>\r\n                <button onClick={exportPDF} className=\"px-3 py-1 border rounded\">Export PDF</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DateFiltersExports;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3965, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesTable.tsx"],"sourcesContent":["\r\n\"use client\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { MapPin, User, Package, ArrowUpDown } from \"lucide-react\";\r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\nimport { unitToKg } from \"@/lib/UnitToKg\";\r\nimport { Sale } from \"./Sale\";\r\nimport { useRef, useEffect } from 'react';\r\nimport ViewSelector from \"./ViewSelector\";\r\nimport DateFiltersExports from \"./DateFiltersExports\";\r\n\r\n\r\ninterface Props {\r\n    sales: Sale[];\r\n}\r\n\r\ntype View = \"location\" | \"customer\" | \"product\";\r\ntype SortKey =\r\n    | \"name\"\r\n    | \"saleCount\"\r\n    | \"quantity\"\r\n    | \"totalTonnage\"\r\n    | \"totalSalesValue\"\r\n    | \"avgOrderValue\"\r\n    | \"contribution\";\r\n\r\nexport default function SalesTable({ sales }: Props) {\r\n    const [view, setView] = useState<View>(\"location\");\r\n    const [sortKey, setSortKey] = useState<SortKey>(\"totalSalesValue\");\r\n    const [sortDir, setSortDir] = useState<\"asc\" | \"desc\">(\"desc\");\r\n    const [startDate, setStartDate] = useState<Date | null>(null);\r\n    const [endDate, setEndDate] = useState<Date | null>(null);\r\n    const [selectedLocations, setSelectedLocations] = useState<string[]>([]);\r\n    const [selectedCategories, setSelectedCategories] = useState<string[]>([]);\r\n    const [selectedProducts, setSelectedProducts] = useState<string[]>([]);\r\n\r\n    const [showLocations, setShowLocations] = useState(false);\r\n    const [showCategories, setShowCategories] = useState(false);\r\n    const [showProducts, setShowProducts] = useState(false);\r\n\r\n    const locationRef = useRef(null);\r\n    const categoryRef = useRef(null);\r\n    const productRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (locationRef.current && !locationRef.current.contains(event.target)) {\r\n                setShowLocations(false);\r\n            }\r\n            if (categoryRef.current && !categoryRef.current.contains(event.target)) {\r\n                setShowCategories(false);\r\n            }\r\n            if (productRef.current && !productRef.current.contains(event.target)) {\r\n                setShowProducts(false);\r\n            }\r\n        };\r\n\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, []);\r\n\r\n    const toggleSort = (key: SortKey) => {\r\n        if (key === sortKey) {\r\n            setSortDir(sortDir === \"asc\" ? \"desc\" : \"asc\");\r\n        } else {\r\n            setSortKey(key);\r\n            setSortDir(\"desc\");\r\n        }\r\n    };\r\n\r\n    const Header = ({ label, column, align = \"left\" }: any) => (\r\n        <th\r\n            onClick={() => toggleSort(column)}\r\n            className={`py-2 px-3 cursor-pointer border-r ${align === \"right\" ? \"text-right\" : \"text-left\"\r\n                }`}\r\n        >\r\n            <span className=\"inline-flex items-center gap-1\">\r\n                {label}\r\n                <ArrowUpDown className=\"w-3 h-3 opacity-60\" />\r\n            </span>\r\n        </th>\r\n    );\r\n\r\n    const locations = useMemo(\r\n        () =>\r\n            Array.from(\r\n                new Map(\r\n                    sales\r\n                        .filter((s) => s.location)\r\n                        .map((s) => [s.locationId, s.location])\r\n                ).values()\r\n            ),\r\n        [sales]\r\n    );\r\n\r\n    const categories = useMemo(() => {\r\n        const set = new Set<string>();\r\n        sales.forEach((s) => s.product?.category && set.add(s.product.category));\r\n        return Array.from(set).sort();\r\n    }, [sales]);\r\n\r\n    const products = useMemo(\r\n        () =>\r\n            Array.from(\r\n                new Map(\r\n                    sales\r\n                        .filter((s) => s.product)\r\n                        .map((s) => [s.product.id, { ...s.product, category: s.product.category }])\r\n                ).values()\r\n            ),\r\n        [sales]\r\n    );\r\n\r\n    const filteredSales = useMemo(() => {\r\n        if (!Array.isArray(sales)) return [];\r\n        return sales.filter((sale) => {\r\n            const saleDate = new Date(sale.saleDate);\r\n            if (startDate && saleDate < startDate) return false;\r\n            if (endDate && saleDate > endDate) return false;\r\n            if (\r\n                selectedLocations.length > 0 &&\r\n                !selectedLocations.includes(sale.locationId)\r\n            )\r\n                return false;\r\n            if (\r\n                selectedCategories.length > 0 &&\r\n                !selectedCategories.includes(sale.product?.category)\r\n            )\r\n                return false;\r\n            if (\r\n                selectedProducts.length > 0 &&\r\n                !selectedProducts.includes(sale.productId)\r\n            )\r\n                return false;\r\n            return true;\r\n        });\r\n    }, [\r\n        sales,\r\n        startDate,\r\n        endDate,\r\n        selectedLocations,\r\n        selectedCategories,\r\n        selectedProducts,\r\n    ]);\r\n\r\n    const locationOptions = locations.map((l) => ({ value: l.id, label: l.name }));\r\n    const categoryOptions = categories.map((c) => ({ value: c, label: c }));\r\n    const productOptions = products.map((p) => ({ value: p.id, label: p.name, category: p.category }));\r\n\r\n    const aggregatedData = useMemo(() => {\r\n        const map: Record<string, any> = {};\r\n        filteredSales.forEach((sale) => {\r\n            let id: string, name: string;\r\n            if (view === \"location\") {\r\n                id = sale.locationId;\r\n                name = sale.location?.name || \"Unknown Location\";\r\n            } else if (view === \"customer\") {\r\n                id = sale.customerId;\r\n                name = sale.customerName || \"Unknown Customer\";\r\n            } else {\r\n                id = sale.productId;\r\n                name = sale.product?.name || \"Unknown Product\";\r\n            }\r\n            if (!map[id]) {\r\n                map[id] = {\r\n                    id,\r\n                    name,\r\n                    saleCount: 0,\r\n                    quantity: 0,\r\n                    totalTonnage: 0,\r\n                    totalSalesValue: 0,\r\n                    avgOrderValue: 0,\r\n                    contribution: 0,\r\n                };\r\n            }\r\n            const salesValue = sale.totalAmount ?? sale.salePrice * sale.quantity;\r\n            const weightKg = unitToKg(\r\n                sale.product?.weightValue || 0,\r\n                sale.product?.weightUnit\r\n            );\r\n\r\n            const tonnage =\r\n                (weightKg * sale.quantity * (sale.product?.packSize || 1)) / 1000;\r\n            map[id].saleCount += 1;\r\n            map[id].quantity += sale.quantity;\r\n            map[id].totalSalesValue += salesValue;\r\n            map[id].totalTonnage += tonnage;\r\n        });\r\n\r\n        const totalRevenue = Object.values(map).reduce(\r\n            (sum: number, d: any) => sum + d.totalSalesValue,\r\n            0\r\n        );\r\n        return Object.values(map).map((d: any) => ({\r\n            ...d,\r\n            avgOrderValue: d.saleCount ? d.totalSalesValue / d.saleCount : 0,\r\n            contribution: totalRevenue ? (d.totalSalesValue / totalRevenue) * 100 : 0,\r\n        }));\r\n    }, [filteredSales, view]);\r\n\r\n    const sortedData = useMemo(() => {\r\n        return [...aggregatedData].sort((a, b) => {\r\n            const aVal = a[sortKey];\r\n            const bVal = b[sortKey];\r\n            if (typeof aVal === \"string\")\r\n                return sortDir === \"asc\" ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\r\n            return sortDir === \"asc\" ? aVal - bVal : bVal - aVal;\r\n        });\r\n    }, [aggregatedData, sortKey, sortDir]);\r\n\r\n    const exportCSV = () => {\r\n        const headers = [\"Name\", \"Orders\", \"Quantity\", \"Tonnage\", \"Avg Order Value\", \"Revenue\", \"% Share\"];\r\n        const rows = sortedData.map((d) => [\r\n            d.name,\r\n            d.saleCount,\r\n            d.quantity,\r\n            d.totalTonnage.toFixed(2),\r\n            d.avgOrderValue.toFixed(2),\r\n            d.totalSalesValue.toFixed(2),\r\n            d.contribution.toFixed(2),\r\n        ]);\r\n\r\n        // Add total row\r\n        const totalRow = [\r\n            \"Total\",\r\n            sortedData.reduce((sum, d) => sum + d.saleCount, 0),\r\n            sortedData.reduce((sum, d) => sum + d.quantity, 0),\r\n            sortedData.reduce((sum, d) => sum + d.totalTonnage, 0).toFixed(2),\r\n            (sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0) / sortedData.reduce((sum, d) => sum + d.saleCount, 0)).toFixed(2),\r\n            sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0).toFixed(2),\r\n            \"100%\",\r\n        ];\r\n\r\n        const csv = [headers, ...rows, totalRow].map((r) => r.join(\",\")).join(\"\\n\");\r\n        const blob = new Blob([csv], { type: \"text/csv\" });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = `sales_by_${view}.csv`;\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const exportPDF = () => {\r\n        const doc = new jsPDF();\r\n        const start = startDate ? startDate.toLocaleDateString() : \"N/A\";\r\n        const end = endDate ? endDate.toLocaleDateString() : \"N/A\";\r\n\r\n        doc.setFontSize(16);\r\n        doc.setFont(\"helvetica\", \"bold\");\r\n        doc.text(`Sales by ${view}`, doc.internal.pageSize.getWidth() / 2, 15, { align: \"center\" });\r\n\r\n        doc.setFontSize(10);\r\n        doc.setFont(\"helvetica\", \"normal\");\r\n        doc.text(`Date Range: ${start} - ${end}`, doc.internal.pageSize.getWidth() / 2, 23, { align: \"center\" });\r\n\r\n        const body = sortedData.map((d, i) => [\r\n            i + 1,\r\n            d.name,\r\n            d.saleCount,\r\n            d.quantity,\r\n            d.totalTonnage.toFixed(2),\r\n            `K${d.avgOrderValue.toFixed(0)}`,\r\n            `K${d.totalSalesValue.toFixed(0)}`,\r\n            `${d.contribution.toFixed(1)}%`,\r\n        ]);\r\n\r\n        // Add total row with same style as header\r\n        const totalRow = [\r\n            \"\",\r\n            \"Total\",\r\n            sortedData.reduce((sum, d) => sum + d.saleCount, 0),\r\n            sortedData.reduce((sum, d) => sum + d.quantity, 0),\r\n            sortedData.reduce((sum, d) => sum + d.totalTonnage, 0).toFixed(2),\r\n            `K${(sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0) / sortedData.reduce((sum, d) => sum + d.saleCount, 0)).toFixed(0)}`,\r\n            `K${sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0).toFixed(0)}`,\r\n            \"100%\",\r\n        ];\r\n\r\n        autoTable(doc, {\r\n            head: [\r\n                [\"#\", \"Name\", \"Orders\", \"Quantity\", \"Tonnage\", \"Avg Order Value\", \"Revenue\", \"% Share\"],\r\n            ],\r\n            body: [...body, totalRow],\r\n            startY: 30,\r\n            styles: {\r\n                fontSize: 10,\r\n            },\r\n            headStyles: {\r\n                fillColor: [87, 100, 85],\r\n                fontStyle: \"bold\",\r\n                halign: \"center\",\r\n            },\r\n            didParseCell: (data) => {\r\n                // Apply header style to total row\r\n                if (data.row.index === sortedData.length) {\r\n                    data.cell.styles.fillColor = [87, 100, 85];\r\n                    data.cell.styles.fontStyle = \"bold\";\r\n                    data.cell.styles.textColor = 250;\r\n                    data.cell.styles.halign = \"center\";\r\n                }\r\n            },\r\n        });\r\n\r\n        doc.save(`sales_by_${view}.pdf`);\r\n    };\r\n\r\n\r\n    /** ------------------ Render ------------------ */\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md\">\r\n\r\n            <DateFiltersExports\r\n                view={view}\r\n                startDate={startDate}\r\n                endDate={endDate}\r\n                setStartDate={setStartDate}\r\n                setEndDate={setEndDate}\r\n                selectedLocations={selectedLocations}\r\n                setSelectedLocations={setSelectedLocations}\r\n                selectedCategories={selectedCategories}\r\n                setSelectedCategories={setSelectedCategories}\r\n                selectedProducts={selectedProducts}\r\n                setSelectedProducts={setSelectedProducts}\r\n                locationOptions={locationOptions}\r\n                categoryOptions={categoryOptions}\r\n                productOptions={productOptions}\r\n                exportCSV={exportCSV}\r\n                exportPDF={exportPDF}\r\n                setView={setView}\r\n            />\r\n\r\n            <div className=\"max-h-[420px] overflow-y-auto\">\r\n                <table className=\"w-full text-sm border border-gray-200\">\r\n                    <thead className=\"sticky top-0 bg-gray-200\">\r\n                        <tr>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">#</th>\r\n                            <th className=\"py-2 px-3 border-r text-left font-small\">Product Name</th>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">Orders</th>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">Quantity</th>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">Tonnage</th>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">Avg Order Value</th>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">Revenue</th>\r\n                            <th className=\"py-2 px-3 border-r text-center font-small\">Contribution</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {sortedData.length === 0 ? (\r\n                            <tr>\r\n                                <td colSpan={8} className=\"py-6 text-center text-gray-500 italic\">\r\n                                    No data available\r\n                                </td>\r\n                            </tr>\r\n                        ) : (\r\n                            <>\r\n                                {sortedData.map((d, i) => (\r\n                                    <tr key={d.id} className={i % 2 ? \"bg-gray-50\" : \"\"}>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">{i + 1}</td>\r\n                                        <td className=\"py-2 px-3 border-r\">{d.name}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">{d.saleCount}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">{d.quantity}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">{d.totalTonnage.toFixed(2)}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">K{d.avgOrderValue.toFixed(0)}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">K{d.totalSalesValue.toFixed(0)}</td>\r\n                                        <td className=\"py-2 px-3 border-r text-center\">{d.contribution.toFixed(1)}%</td>\r\n                                    </tr>\r\n                                ))}\r\n                                <tr className=\"bg-gray-200 font-bold\">\r\n                                    <td className=\"py-2 px-3 border-r text-center font-small\" colSpan={2}>\r\n                                        Total\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center font-small\">\r\n                                        {sortedData.reduce((sum, d) => sum + d.saleCount, 0)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center font-small\">\r\n                                        {sortedData.reduce((sum, d) => sum + d.quantity, 0)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center font-small\">\r\n                                        {sortedData.reduce((sum, d) => sum + d.totalTonnage, 0).toFixed(2)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center font-small\">\r\n                                        K{(\r\n                                            sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0) /\r\n                                            sortedData.reduce((sum, d) => sum + d.saleCount, 0)\r\n                                        ).toFixed(0)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center font-small\">\r\n                                        K{sortedData.reduce((sum, d) => sum + d.totalSalesValue, 0).toFixed(0)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-3 border-r text-center font-small\">100%</td>\r\n                                </tr>\r\n                            </>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}