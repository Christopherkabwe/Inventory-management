{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx"],"sourcesContent":["\"use client\";\r\nimport { UserButton } from \"@stackframe/stack\";\r\nimport { BarChart3, Package, Plus, Settings, Info, ShoppingCart, ChevronDown } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport default function Sidebar() {\r\n    const [openItems, setOpenItems] = useState<string[]>([]);\r\n    const currentPath = usePathname();\r\n\r\n    useEffect(() => {\r\n        const activeItem = NAV_ITEMS.find((item) => item.subItems && item.subItems.some((sub) => currentPath === sub.href));\r\n        if (activeItem) {\r\n            setOpenItems([activeItem.name]);\r\n        }\r\n    }, [currentPath]);\r\n\r\n    const NAV_ITEMS = [\r\n        {\r\n            name: \"Dashboard\",\r\n            icon: BarChart3,\r\n            subItems: [\r\n                { name: \"Inventory Dashboard\", href: \"/dashboard/inventory\" },\r\n                { name: \"Sales Dashboard\", href: \"/dashboard/sales\" },\r\n            ],\r\n        },\r\n        {\r\n            name: \"Inventory\",\r\n            icon: Package,\r\n            subItems: [\r\n                { name: \"Inventory Summary\", href: \"/inventory/inventory\" },\r\n                { name: \"Add Product\", href: \"/inventory/add-product\" },\r\n                { name: \"Stock Reports\", href: \"/inventory/stock-report\" },\r\n            ],\r\n        },\r\n        { name: \"Sales\", href: \"/sales\", icon: ShoppingCart },\r\n        { name: \"Settings\", href: \"/settings\", icon: Settings },\r\n        { name: \"About\", href: \"/about\", icon: Info },\r\n    ];\r\n\r\n    const toggleItem = (name: string) => {\r\n        if (openItems.includes(name)) {\r\n            setOpenItems(openItems.filter((item) => item !== name));\r\n        } else {\r\n            setOpenItems([...openItems, name]);\r\n        }\r\n    };\r\n\r\n    const isActive = (href: string) => currentPath.startsWith(href);\r\n\r\n    const isParentActive = (subItems?: { href: string }[]) =>\r\n        subItems?.some((sub) => currentPath.startsWith(sub.href));\r\n\r\n    const isOpen = (name: string) => openItems.includes(name);\r\n\r\n    return (\r\n        <div className=\"fixed left-0 top-0 bg-gray-900 text-white w-64 min-h-screen p-6 z-10\">\r\n            <div className=\"mb-8\">\r\n                <div className=\"flex items-center space-x-2 mb-4\">\r\n                    <BarChart3 className=\"w-10 h-10\" />\r\n                    <span className=\"text-md font-semibold\">Inventory Management App</span>\r\n                </div>\r\n            </div>\r\n            <nav className=\"space-y-1\">\r\n                <div className=\"text-sm font-semibold text-gray-400 uppercase\">Inventory</div>\r\n                {NAV_ITEMS.map((item, key) => {\r\n                    const IconComponent = item.icon;\r\n                    const parentActive = isParentActive(item.subItems);\r\n                    const itemActive = isActive(item.href);\r\n\r\n                    if (item.subItems) {\r\n                        return (\r\n                            <div key={key}>\r\n                                <button\r\n                                    onClick={() => toggleItem(item.name)}\r\n                                    className={`flex items-center justify-between w-full py-2 px-3 rounded-lg ${parentActive ? \"bg-purple-50 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                        }`}\r\n                                >\r\n                                    <div className=\"flex items-center space-x-3\">\r\n                                        <IconComponent className=\"w-5 h-5\" />\r\n                                        <span className=\"text-sm\">{item.name}</span>\r\n                                    </div>\r\n                                    <ChevronDown className={`w-4 h-4 transition-transform ${isOpen(item.name) ? \"rotate-180\" : \"\"}`} />\r\n                                </button>\r\n                                {isOpen(item.name) && (\r\n                                    <ul className=\"ml-6 mt-2 space-y-2\">\r\n                                        {item.subItems.map((subItem, subKey) => (\r\n                                            <li key={subKey}>\r\n                                                <Link\r\n                                                    href={subItem.href}\r\n                                                    className={`flex items-center space-x-3 py-2 px-3 rounded-lg text-md ${isActive(subItem.href) ? \"text-white-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                                        }`}\r\n                                                >\r\n                                                    {subItem.name}\r\n                                                </Link>\r\n                                            </li>\r\n                                        ))}\r\n                                    </ul>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    }\r\n\r\n                    return (\r\n                        <Link\r\n                            href={item.href}\r\n                            key={key}\r\n                            className={`flex items-center space-x-3 py-2 px-3 rounded-lg ${itemActive ? \"bg-purple-100 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                }`}\r\n                        >\r\n                            <IconComponent className=\"w-5 h-5\" />\r\n                            <span className=\"text-sm\">{item.name}</span>\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </nav>\r\n            <div className=\"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-700\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <UserButton showUserInfo />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 287, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/pagination.tsx"],"sourcesContent":["import { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport Link from \"next/link\";\n\ninterface PaginationProps {\n    currentPage: number;\n    totalPages: number;\n    baseUrl: string;\n    SearchParams: Record<string, string>;\n}\nexport default function Pagination({\n    currentPage,\n    totalPages,\n    baseUrl,\n    SearchParams,\n}: PaginationProps) {\n    if (totalPages <= 1) return null;\n\n    const getPageUrl = (page: number) => {\n        const params = new URLSearchParams({ ...SearchParams, page: String(page) });\n        return `${baseUrl}?${params.toString()}`;\n    }\n    const getVisiblePages = () => {\n        const delta = 2;\n        const range = []\n        const rangeWithDots = [];\n\n        for (\n            let i = Math.max(2, currentPage - delta);\n            i <= Math.min(totalPages - 1, currentPage + delta);\n            i++\n        ) {\n            range.push(i);\n        }\n        if (currentPage - delta > 2) {\n            rangeWithDots.push(1, \"...\")\n        } else {\n            rangeWithDots.push(1);\n        }\n\n        rangeWithDots.push(...range)\n\n        if (currentPage + delta < totalPages - 1) {\n            rangeWithDots.push(\"...\", totalPages);\n        } else {\n            rangeWithDots.push(totalPages);\n        }\n\n        return rangeWithDots;\n    };\n    const VisiblePages = getVisiblePages();\n\n    return <nav className=\"flex items-center justify-center gap-1\">\n        <Link\n            href={getPageUrl(currentPage - 1)}\n            className={`flex items-center px-3 py-2 text-sm font-medium rounded-lg ${currentPage <= 1\n                ? \"text-gray-400 cursor-not-allowed bg-gray-100\"\n                : \"text-gray-700 hover:bg-gray-100 bg-white border border-gray-300\"\n                }`}\n            aria-disabled={currentPage <= 1}\n        >\n            <ChevronLeft /> Previous\n        </Link>\n\n        {VisiblePages.map((page, index) => {\n            if (page === \"...\") {\n                return (\n                    <span\n                        key={`dots-${index}`}\n                        className=\"px-3 py-2 text-sm text-gray-500\"\n                    >\n                        ...\n                    </span>\n                );\n            }\n\n            const pageNumber = page as number;\n            const isCurrentPage = pageNumber === currentPage;\n\n            return (\n                <Link\n                    key={`page-${pageNumber}-${index}`}\n                    href={getPageUrl(pageNumber)}\n                    className={`px-3 py-2 text-sm font-medium rounded-lg ${isCurrentPage\n                        ? \"bg-purple-600 text-white\"\n                        : \"text-gray-700 hover:bg-gray-100 bg-white border border-gray-300\"\n                        }`}\n                >\n                    {pageNumber}\n                </Link>\n            );\n        })}\n\n        <Link href={getPageUrl(currentPage + 1)}\n            className={`flex items-center px-3 py-2 text-sm font-medium rounded-lg ${currentPage >= totalPages\n                ? \"text-gray-400 cursor-not-allowed bg-gray-100\"\n                : \"text-gray-700 hover:bg-gray-100 bg-white border border-gray-300\"\n                }`}\n            aria-disabled={currentPage >= totalPages}\n        >\n            <ChevronRight />\n            Next\n        </Link>\n    </nav>\n}"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;;;;AAQe,SAAS,WAAW,EAC/B,WAAW,EACX,UAAU,EACV,OAAO,EACP,YAAY,EACE;IACd,IAAI,cAAc,GAAG,OAAO;IAE5B,MAAM,aAAa,CAAC;QAChB,MAAM,SAAS,IAAI,gBAAgB;YAAE,GAAG,YAAY;YAAE,MAAM,OAAO;QAAM;QACzE,OAAO,GAAG,QAAQ,CAAC,EAAE,OAAO,QAAQ,IAAI;IAC5C;IACA,MAAM,kBAAkB;QACpB,MAAM,QAAQ;QACd,MAAM,QAAQ,EAAE;QAChB,MAAM,gBAAgB,EAAE;QAExB,IACI,IAAI,IAAI,KAAK,GAAG,CAAC,GAAG,cAAc,QAClC,KAAK,KAAK,GAAG,CAAC,aAAa,GAAG,cAAc,QAC5C,IACF;YACE,MAAM,IAAI,CAAC;QACf;QACA,IAAI,cAAc,QAAQ,GAAG;YACzB,cAAc,IAAI,CAAC,GAAG;QAC1B,OAAO;YACH,cAAc,IAAI,CAAC;QACvB;QAEA,cAAc,IAAI,IAAI;QAEtB,IAAI,cAAc,QAAQ,aAAa,GAAG;YACtC,cAAc,IAAI,CAAC,OAAO;QAC9B,OAAO;YACH,cAAc,IAAI,CAAC;QACvB;QAEA,OAAO;IACX;IACA,MAAM,eAAe;IAErB,qBAAO,mRAAC;QAAI,WAAU;;0BAClB,mRAAC,4MAAI;gBACD,MAAM,WAAW,cAAc;gBAC/B,WAAW,CAAC,2DAA2D,EAAE,eAAe,IAClF,iDACA,mEACA;gBACN,iBAAe,eAAe;;kCAE9B,mRAAC,wQAAW;;;;;oBAAG;;;;;;;YAGlB,aAAa,GAAG,CAAC,CAAC,MAAM;gBACrB,IAAI,SAAS,OAAO;oBAChB,qBACI,mRAAC;wBAEG,WAAU;kCACb;uBAFQ,CAAC,KAAK,EAAE,OAAO;;;;;gBAMhC;gBAEA,MAAM,aAAa;gBACnB,MAAM,gBAAgB,eAAe;gBAErC,qBACI,mRAAC,4MAAI;oBAED,MAAM,WAAW;oBACjB,WAAW,CAAC,yCAAyC,EAAE,gBACjD,6BACA,mEACA;8BAEL;mBAPI,CAAC,KAAK,EAAE,WAAW,CAAC,EAAE,OAAO;;;;;YAU9C;0BAEA,mRAAC,4MAAI;gBAAC,MAAM,WAAW,cAAc;gBACjC,WAAW,CAAC,2DAA2D,EAAE,eAAe,aAClF,iDACA,mEACA;gBACN,iBAAe,eAAe;;kCAE9B,mRAAC,2QAAY;;;;;oBAAG;;;;;;;;;;;;;AAI5B"}},
    {"offset": {"line": 399, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/app/sales/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect, use } from \"react\";\r\nimport { useStackApp } from \"@stackframe/stack\";\r\nimport Sidebar from \"@/components/sidebar2\";\r\nimport { useToaster } from '@/components/Toaster';\r\nimport { motion } from 'framer-motion';\r\nimport Pagination from \"@/components/pagination\";\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface Sale {\r\n    id: string;\r\n    product: { id?: string; name: string };\r\n    customer: { id?: string; name: string };\r\n    quantity: number;\r\n    salePrice: number;\r\n    totalAmount: number;\r\n    createdAt: string;\r\n    location: { name: string };\r\n}\r\n\r\ninterface Product {\r\n    id: string;\r\n    name: string;\r\n    sku: string;\r\n    price: number;\r\n    quantity: number;\r\n}\r\n\r\nexport default function SalesPage({\r\n    searchParams,\r\n}: {\r\n    searchParams: Promise<{ q?: string; page?: string }>;\r\n}) {\r\n    const stackApp = useStackApp();\r\n    const user = stackApp.useUser();\r\n    const { addToast } = useToaster();\r\n    const router = useRouter();\r\n\r\n    const userId = user?.id;\r\n    const params = use(searchParams);\r\n    const q = (params.q ?? \"\").trim();\r\n    const page = Math.max(1, Number(params.page ?? 1));\r\n    const pageSize = 10;\r\n\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [sales, setSales] = useState<Sale[]>([]);\r\n    const [loadingSales, setLoadingSales] = useState(true);\r\n\r\n    const [pagination, setPagination] = useState({\r\n        totalPages: 1,\r\n        page: 1,\r\n        totalSales: 0,\r\n        limit: pageSize,\r\n    });\r\n\r\n    const [isLoadingProducts, setIsLoadingProducts] = useState(true);\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    const [selectedProductId, setSelectedProductId] = useState(\"\");\r\n    const [selectedCustomerId, setSelectedCustomerId] = useState(\"\");\r\n    const [selectedLocation, setSelectedLocation] = useState(\"\");\r\n    const [quantity, setQuantity] = useState(1);\r\n    const [salePrice, setSalePrice] = useState<number | null>(null);\r\n\r\n    /* ---------------- PRODUCTS ---------------- */\r\n\r\n    const fetchProducts = async () => {\r\n        if (!userId) return;\r\n        setIsLoadingProducts(true);\r\n\r\n        try {\r\n            const res = await fetch(`/api/products?userId=${userId}`);\r\n            const data = await res.json();\r\n            setProducts(data.products || []);\r\n        } catch {\r\n            addToast(\"Error loading products.\", \"error\");\r\n        } finally {\r\n            setIsLoadingProducts(false);\r\n        }\r\n    };\r\n\r\n    /* ---------------- SALES (CRITICAL FIX) ---------------- */\r\n\r\n    const fetchSales = async () => {\r\n        if (!userId) return;\r\n\r\n        try {\r\n            setLoadingSales(true);\r\n\r\n            const res = await fetch(\r\n                `/api/sales?userId=${userId}&page=${page}&limit=${pageSize}`\r\n            );\r\n            const data = await res.json();\r\n\r\n            setSales(data.data || []);\r\n            setPagination(\r\n                data.pagination || {\r\n                    totalPages: 1,\r\n                    page: 1,\r\n                    totalSales: 0,\r\n                    limit: pageSize,\r\n                }\r\n            );\r\n        } catch {\r\n            addToast(\"Error loading sales.\", \"error\");\r\n        } finally {\r\n            setLoadingSales(false);\r\n        }\r\n    };\r\n\r\n    /* ---------------- CUSTOMERS ---------------- */\r\n\r\n    const [customers, setCustomers] = useState<{ id: string; name: string }[]>([]);\r\n    const [isLoadingCustomers, setIsLoadingCustomers] = useState(true);\r\n\r\n    const fetchCustomers = async () => {\r\n        if (!userId) return;\r\n        setIsLoadingCustomers(true);\r\n\r\n        try {\r\n            const res = await fetch(`/api/customers?userId=${userId}`);\r\n            const data = await res.json();\r\n            setCustomers(data.customers || []);\r\n        } catch {\r\n            addToast(\"Error loading customers.\", \"error\");\r\n        } finally {\r\n            setIsLoadingCustomers(false);\r\n        }\r\n    };\r\n\r\n    /* ---------------- LOCATIONS (FIXED) ---------------- */\r\n\r\n    const [uniqueLocations, setUniqueLocations] = useState<any[]>([]);\r\n\r\n    const fetchLocations = async () => {\r\n        if (!userId) return;\r\n        try {\r\n            const res = await fetch(`/api/locations?userId=${userId}`);\r\n            const data = await res.json();\r\n            setUniqueLocations(data.locations || []);\r\n        } catch {\r\n            addToast(\"Error loading locations.\", \"error\");\r\n        }\r\n    };\r\n\r\n    /* ---------------- EFFECTS ---------------- */\r\n\r\n    useEffect(() => {\r\n        fetchProducts();\r\n        fetchCustomers();\r\n        fetchLocations();\r\n    }, [userId]);\r\n\r\n    useEffect(() => {\r\n        fetchSales();\r\n    }, [userId, page, pageSize]);\r\n\r\n    useEffect(() => {\r\n        if (pagination.page > pagination.totalPages) {\r\n            router.push(`/sales?page=${pagination.totalPages}`);\r\n        }\r\n    }, [pagination]);\r\n\r\n    useEffect(() => {\r\n        if (selectedProductId) {\r\n            const p = products.find(p => p.id === selectedProductId);\r\n            setSalePrice(p ? p.price : null);\r\n        } else {\r\n            setSalePrice(null);\r\n        }\r\n    }, [selectedProductId, products]);\r\n\r\n    /* ---------------- CREATE SALE ---------------- */\r\n\r\n    const handleCreateSale = async (formData: FormData) => {\r\n        const productId = formData.get(\"productId\") as string;\r\n        const quantity = Number(formData.get(\"quantity\"));\r\n        const salePrice = Number(formData.get(\"salePrice\"));\r\n        const totalAmount = quantity * salePrice;\r\n\r\n        if (!productId || !selectedCustomerId || !selectedLocation) {\r\n            addToast(\"Please fill all required fields.\", \"error\");\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n\r\n        try {\r\n            const res = await fetch(\"/api/sales\", {\r\n                method: \"POST\",\r\n                body: JSON.stringify({\r\n                    productId,\r\n                    quantity,\r\n                    salePrice,\r\n                    totalAmount,\r\n                    customerId: selectedCustomerId,\r\n                    locationId: selectedLocation,\r\n                    userId,\r\n                }),\r\n            });\r\n\r\n            if (res.ok) {\r\n                addToast(\"Sale created!\", \"success\");\r\n\r\n                await fetchSales();     // ðŸ”¥ FIX\r\n                await fetchProducts();  // update stock\r\n\r\n                setSelectedProductId(\"\");\r\n                setSelectedCustomerId(\"\");\r\n                setSelectedLocation(\"\");\r\n                setQuantity(1);\r\n                setSalePrice(null);\r\n            } else {\r\n                const error = await res.json();\r\n                addToast(error.error || \"Failed to create sale.\", \"error\");\r\n            }\r\n        } catch {\r\n            addToast(\"Something went wrong.\", \"error\");\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    /* ---------------- DELETE SALE ---------------- */\r\n\r\n    const handleDeleteSale = async (saleId: string) => {\r\n        if (!confirm(\"Are you sure?\")) return;\r\n\r\n        const res = await fetch(`/api/sales/${saleId}`, { method: \"DELETE\" });\r\n        if (res.ok) {\r\n            addToast(\"Sale deleted!\", \"success\");\r\n            await fetchSales(); // ðŸ”¥ FIX\r\n        } else {\r\n            addToast(\"Failed to delete sale.\", \"error\");\r\n        }\r\n    };\r\n\r\n    /* ---------------- EDIT SALE ---------------- */\r\n\r\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n    const [editingSale, setEditingSale] = useState<Sale | null>(null);\r\n\r\n    const handleEditSale = (sale: Sale) => {\r\n        setEditingSale(sale);\r\n        setIsEditModalOpen(true);\r\n    };\r\n\r\n    const handleSaveEdit = async () => {\r\n        if (!editingSale) return;\r\n\r\n        const res = await fetch(`/api/sales/${editingSale.id}`, {\r\n            method: \"PUT\",\r\n            body: JSON.stringify({ ...editingSale, userId }),\r\n        });\r\n\r\n        if (res.ok) {\r\n            addToast(\"Sale updated!\", \"success\");\r\n            await fetchSales();     // ðŸ”¥ FIX\r\n            await fetchProducts();\r\n            setIsEditModalOpen(false);\r\n        } else {\r\n            addToast(\"Failed to update sale.\", \"error\");\r\n        }\r\n    };\r\n\r\n    /* ---------------- RENDER ---------------- */\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50\">\r\n            <Sidebar currentPath=\"/sales\" />\r\n            <main className=\"ml-64 p-8\">\r\n                {/* Header */}\r\n                <div className=\"mb-8\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <h1 className=\"text-2xl font-semibold text-gray-900\">Sales</h1>\r\n                            <p className=\"text-sm text-gray-500\">Track and manage your product sales. Select a product, enter quantity, and record a sale.</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"space-y-6\">\r\n                    <form onSubmit={(e) => {\r\n                        e.preventDefault();\r\n                        handleCreateSale(new FormData(e.currentTarget));\r\n                    }} className=\"bg-white rounded-lg border-gray-200 p-6\">\r\n                        <div className=\"grid grid-cols-6 gap-4 items-end\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Customer</label>\r\n                                {isLoadingCustomers ? (\r\n                                    <div className=\"flex items-center justify-center py-2 text-sm text-gray-500\">\r\n                                        <svg className=\"animate-spin h-5 w-5 text-purple-600 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                                            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                                            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                                        </svg>\r\n                                        Loading customers...\r\n                                    </div>\r\n                                ) : (\r\n                                    <select\r\n                                        name=\"customerId\"\r\n                                        value={selectedCustomerId}\r\n                                        onChange={(e) => setSelectedCustomerId(e.target.value)}\r\n                                        className=\"w-full px-2 py-2 border border-gray-600 rounded-lg focus:border-transparent\"\r\n                                        required\r\n                                    >\r\n                                        <option value=\"\">Select Customer</option>\r\n                                        {customers.map(customer => (\r\n                                            <option key={customer.id} value={customer.id}>\r\n                                                {customer.name}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                )}\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Location</label>\r\n                                <select\r\n                                    name=\"locationId\"\r\n                                    value={selectedLocation}\r\n                                    onChange={(e) => setSelectedLocation(e.target.value)}\r\n                                    className=\"w-full px-2 py-2 border border-gray-600 rounded-lg focus:border-transparent\"\r\n                                    required\r\n                                >\r\n                                    <option value=\"\">Select Location</option>\r\n                                    {uniqueLocations.map((loc) => (\r\n                                        <option key={loc.id} value={loc.id}>\r\n                                            {loc.name}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Product Name</label>\r\n                                {isLoadingProducts ? (\r\n                                    <div className=\"flex items-center justify-center py-2 text-sm text-gray-500\">\r\n                                        <svg className=\"animate-spin h-5 w-5 text-purple-600 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                                            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                                            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                                        </svg>\r\n                                        Loading Products...\r\n                                    </div>\r\n                                ) : (<select\r\n                                    name=\"productId\"\r\n                                    value={selectedProductId}\r\n                                    onChange={(e) => {\r\n                                        const id = e.target.value;\r\n                                        setSelectedProductId(id);\r\n                                        const product = products.find(p => p.id === id);\r\n                                        setSalePrice(product ? product.price : null);\r\n                                    }}\r\n                                    className=\"w-full px-2 py-2 border border-gray-600 rounded-lg\"\r\n                                    required\r\n                                >\r\n                                    <option value=\"\">Select Product</option>\r\n                                    {products.length ? (\r\n                                        products.map(p => (\r\n                                            <option key={p.id} value={p.id} disabled={p.quantity <= 0}>\r\n                                                {p.name} | K{p.price} | ({p.quantity > 0 ? `${p.quantity} in stock` : 'Out of stock'})\r\n                                            </option>\r\n                                        ))\r\n                                    ) : (\r\n                                        <option disabled>No products available</option>\r\n                                    )}\r\n                                </select>)}\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Quantity</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    name=\"quantity\"\r\n                                    value={quantity}\r\n                                    onChange={(e) => setQuantity(e.target.value)}\r\n                                    onBlur={() => {\r\n                                        // Convert to number only on blur (or submit)\r\n                                        setQuantity(prev => Number(prev) || 0);\r\n                                    }}\r\n                                    min=\"0\"\r\n                                    step=\"0.01\"\r\n                                    required\r\n                                    className=\"w-full px-2 py-2 border border-gray-600 rounded-lg focus:border-transparent\"\r\n                                    placeholder=\"Enter quantity\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Price (K)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    name=\"salePrice\"\r\n                                    value={salePrice || ''}\r\n                                    onChange={(e) => setSalePrice(Number(e.target.value))}\r\n                                    min=\"0\"\r\n                                    step=\"0.01\"\r\n                                    required\r\n                                    className=\"w-full px-2 py-2 border border-gray-600 rounded-lg focus:border-transparent\"\r\n                                    placeholder=\"K100.00\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <SubmitButton isSubmitting={isSubmitting} />\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n\r\n                    <table className=\"min-w-full table-auto mt-4 border-collapse border border-gray-200\">\r\n                        <thead className=\"bg-gray-100\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-left text-xs font-semibold text-gray-600 uppercase\">Customer Name</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-left text-xs font-semibold text-gray-600 uppercase\">Product Name</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-left text-xs font-semibold text-gray-600 uppercase\">Location</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-xs font-semibold text-gray-600 uppercase\">Quantity</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-xs font-semibold text-gray-600 uppercase\">Price (K)</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-xs font-semibold text-gray-600 uppercase\">Revenue (K)</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-xs font-semibold text-gray-600 uppercase\">Date Created</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-xs font-semibold text-gray-600 uppercase\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                            {loadingSales ? (\r\n                                <tr>\r\n                                    <td colSpan={8} className=\"px-6 py-3 text-center text-sm text-gray-500\">\r\n                                        <div className=\"flex flex-col items-center justify-center gap-5 mt-10 mb-10\">\r\n                                            <svg className=\"animate-spin h-10 w-10 text-purple-600 items-center\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                                                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                                                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                                            </svg>\r\n                                            Loading sales...\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            ) : !Array.isArray(sales) || sales.length === 0 ? (\r\n                                <tr>\r\n                                    <td colSpan={8} className=\"px-6 py-3 text-center text-sm text-gray-500\">No sales recorded yet.</td>\r\n                                </tr>\r\n                            ) : (\r\n                                sales.map((sale, key) => (\r\n                                    <tr key={sale.id} className={`hover:bg-gray-50 ${key % 2 === 0 ? 'bg-white' : 'bg-gray-50'}`}>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-left text-sm text-gray-500\">\r\n                                            {sale.customer?.name || 'N/A'}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-left text-sm text-gray-500\">\r\n                                            {sale.product?.name || 'N/A'}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-left text-sm text-gray-500\">\r\n                                            {sale.location?.name || 'N/A'}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-sm text-gray-500\">\r\n                                            {sale.quantity}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-sm text-gray-500\">\r\n                                            K{sale.salePrice}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-sm text-gray-500\">\r\n                                            K{sale.totalAmount}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-sm text-gray-500\">\r\n                                            {new Date(sale.createdAt).toLocaleDateString()}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-gray-400 text-center text-sm text-gray-500\">\r\n                                            <button\r\n                                                onClick={() => handleEditSale(sale)}\r\n                                                className=\"text-blue-600 hover:text-blue-800 mr-3\"\r\n                                            >\r\n                                                Edit\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleDeleteSale(sale.id)}\r\n                                                className=\"text-red-600 hover:text-red-800\"\r\n                                            >\r\n                                                Delete\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n\r\n\r\n                </div>\r\n                {isEditModalOpen && editingSale && (\r\n                    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n                        <div className=\"bg-white p-6 rounded-lg w-96\">\r\n                            <h2 className=\"text-lg font-semibold mb-4\">Edit Sale</h2>\r\n                            <div className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Customer</label>\r\n                                    <select\r\n                                        name=\"customerId\"\r\n                                        value={editForm.customerId}\r\n                                        onChange={handleEditChange}\r\n                                        className=\"w-full px-2 py-2 border border-gray-600 rounded-lg\"\r\n                                        required\r\n                                    >\r\n                                        <option value=\"\">Select Customer</option>\r\n                                        {customers.map((customer) => (\r\n                                            <option key={customer.id} value={customer.id}>\r\n                                                {customer.name}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Product</label>\r\n                                    <select\r\n                                        name=\"productId\"\r\n                                        value={editForm.productId}\r\n                                        onChange={handleEditChange}\r\n                                        className=\"w-full px-2 py-2 border border-gray-600 rounded-lg\"\r\n                                        required\r\n                                    >\r\n                                        <option value=\"\">Select Product</option>\r\n                                        {products.map((p) => (\r\n                                            <option key={p.id} value={p.id} disabled={p.quantity <= 0}>\r\n                                                {p.name} | K{p.price} | ({p.quantity > 0 ? `${p.quantity} in stock` : 'Out of stock'})\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Quantity</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        name=\"quantity\"\r\n                                        value={editForm.quantity}\r\n                                        onChange={handleEditChange}\r\n                                        min=\"0\"\r\n                                        step=\"0.01\"\r\n                                        required\r\n                                        className=\"w-full px-2 py-2 border border-gray-600 rounded-lg\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Price (K)</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        name=\"salePrice\"\r\n                                        value={editForm.salePrice}\r\n                                        onChange={handleEditChange}\r\n                                        min=\"0\"\r\n                                        step=\"0.01\"\r\n                                        required\r\n                                        className=\"w-full px-2 py-2 border border-gray-600 rounded-lg\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex justify-end gap-2 mt-4\">\r\n                                <button\r\n                                    onClick={() => setIsEditModalOpen(false)}\r\n                                    className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleSaveEdit}\r\n                                    className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\"\r\n                                >\r\n                                    Save Changes\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                {/* PAGINATION */}\r\n                {sales.length > 0 && (\r\n                    <div className=\"bg-white rounded-lg border p-6 mt-6\">\r\n                        <Pagination\r\n                            currentPage={pagination.page}\r\n                            totalPages={pagination.totalPages}\r\n                            baseUrl=\"/sales\"\r\n                            SearchParams={{ q }}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </main >\r\n        </div >\r\n    );\r\n}\r\n\r\nfunction SubmitButton({ isSubmitting }: { isSubmitting: boolean }) {\r\n    return (\r\n        <button\r\n            type=\"submit\"\r\n            className=\"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\"\r\n            disabled={isSubmitting}\r\n        >\r\n            {isSubmitting ? 'Creating Sale...' : 'Create Sale'}\r\n        </button>\r\n    );\r\n}"],"names":[],"mappings":"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"}}]
}