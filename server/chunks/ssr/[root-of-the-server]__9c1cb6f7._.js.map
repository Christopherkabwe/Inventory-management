{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar.tsx"],"sourcesContent":["\"use client\";\r\nimport { UserButton } from \"@stackframe/stack\";\r\nimport { BarChart3, Package, Plus, Settings, Info, ShoppingCart } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\n\r\ninterface Props {\r\n    currentPath?: string;\r\n}\r\n\r\nexport default function Sidebar({ currentPath = \"/dashboard\" }: Props) {\r\n    const NAV_ITEMS = [\r\n        { name: \"Dashboard\", href: \"/dashboard\", icon: BarChart3 },\r\n        { name: \"Inventory\", href: \"/inventory\", icon: Package },\r\n        { name: \"Add Product\", href: \"/add-product\", icon: Plus },\r\n        { name: \"Sales\", href: \"/sales\", icon: ShoppingCart },\r\n        { name: \"Settings\", href: \"/settings\", icon: Settings },\r\n        { name: \"About\", href: \"/about\", icon: Info },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"fixed left-0 top-0 bg-gray-900 text-white w-64 min-h-screen p-6 z-10\">\r\n            <div className=\"mb-8\">\r\n                <div className=\"flex items-center space-x-2 mb-4\">\r\n                    <BarChart3 className=\"w-10 h-10\" />\r\n                    <span className=\"text-md font-semibold\">Inventory Management App</span>\r\n                </div>\r\n            </div>\r\n            <nav className=\"space-y-1\">\r\n                <div className=\"text-sm font-semibold text-gray-400 uppercase\">Inventory</div>\r\n                {NAV_ITEMS.map((item, key) => {\r\n                    const IconComponent = item.icon;\r\n                    const isActive = currentPath === item.href;\r\n                    return (\r\n                        <Link\r\n                            href={item.href}\r\n                            key={key}\r\n                            className={`flex items-center space-x-3 py-2 px-3 rounded-lg ${isActive ? \"bg-purple-100 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                }`}\r\n                        >\r\n                            <IconComponent className=\"w-5 h-5\" />\r\n                            <span className=\"text-sm\">{item.name}</span>\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </nav>\r\n            <div className=\"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-700\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <UserButton showUserInfo />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAHA;;;;;AASe,SAAS,QAAQ,EAAE,cAAc,YAAY,EAAS;IACjE,MAAM,YAAY;QACd;YAAE,MAAM;YAAa,MAAM;YAAc,MAAM,oQAAS;QAAC;QACzD;YAAE,MAAM;YAAa,MAAM;YAAc,MAAM,wPAAO;QAAC;QACvD;YAAE,MAAM;YAAe,MAAM;YAAgB,MAAM,+OAAI;QAAC;QACxD;YAAE,MAAM;YAAS,MAAM;YAAU,MAAM,2QAAY;QAAC;QACpD;YAAE,MAAM;YAAY,MAAM;YAAa,MAAM,2PAAQ;QAAC;QACtD;YAAE,MAAM;YAAS,MAAM;YAAU,MAAM,+OAAI;QAAC;KAC/C;IAED,qBACI,mRAAC;QAAI,WAAU;;0BACX,mRAAC;gBAAI,WAAU;0BACX,cAAA,mRAAC;oBAAI,WAAU;;sCACX,mRAAC,oQAAS;4BAAC,WAAU;;;;;;sCACrB,mRAAC;4BAAK,WAAU;sCAAwB;;;;;;;;;;;;;;;;;0BAGhD,mRAAC;gBAAI,WAAU;;kCACX,mRAAC;wBAAI,WAAU;kCAAgD;;;;;;oBAC9D,UAAU,GAAG,CAAC,CAAC,MAAM;wBAClB,MAAM,gBAAgB,KAAK,IAAI;wBAC/B,MAAM,WAAW,gBAAgB,KAAK,IAAI;wBAC1C,qBACI,mRAAC,4MAAI;4BACD,MAAM,KAAK,IAAI;4BAEf,WAAW,CAAC,iDAAiD,EAAE,WAAW,gCAAgC,mCACpG;;8CAEN,mRAAC;oCAAc,WAAU;;;;;;8CACzB,mRAAC;oCAAK,WAAU;8CAAW,KAAK,IAAI;;;;;;;2BAL/B;;;;;oBAQjB;;;;;;;0BAEJ,mRAAC;gBAAI,WAAU;0BACX,cAAA,mRAAC;oBAAI,WAAU;8BACX,cAAA,mRAAC,uOAAU;wBAAC,YAAY;;;;;;;;;;;;;;;;;;;;;;AAK5C"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/pagination.tsx"],"sourcesContent":["import { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport Link from \"next/link\";\n\ninterface PaginationProps {\n    currentPage: number;\n    totalPages: number;\n    baseUrl: string;\n    SearchParams: Record<string, string>;\n}\nexport default function Pagination({\n    currentPage,\n    totalPages,\n    baseUrl,\n    SearchParams,\n}: PaginationProps) {\n    if (totalPages <= 1) return null;\n\n    const getPageUrl = (page: number) => {\n        const params = new URLSearchParams({ ...SearchParams, page: String(page) });\n        return `${baseUrl}?${params.toString()}`;\n    }\n    const getVisiblePages = () => {\n        const delta = 2;\n        const range = []\n        const rangeWithDots = [];\n\n        for (\n            let i = Math.max(2, currentPage - delta);\n            i <= Math.min(totalPages - 1, currentPage + delta);\n            i++\n        ) {\n            range.push(i);\n        }\n        if (currentPage - delta > 2) {\n            rangeWithDots.push(1, \"...\")\n        } else {\n            rangeWithDots.push(1);\n        }\n\n        rangeWithDots.push(...range)\n\n        if (currentPage + delta < totalPages - 1) {\n            rangeWithDots.push(\"...\", totalPages);\n        } else {\n            rangeWithDots.push(totalPages);\n        }\n\n        return rangeWithDots;\n    };\n    const VisiblePages = getVisiblePages();\n\n    return <nav className=\"flex items-center justify-center gap-1\">\n        <Link\n            href={getPageUrl(currentPage - 1)}\n            className={`flex items-center px-3 py-2 text-sm font-medium rounded-lg ${currentPage <= 1\n                ? \"text-gray-400 cursor-not-allowed bg-gray-100\"\n                : \"text-gray-700 hover:bg-gray-100 bg-white border border-gray-300\"\n                }`}\n            aria-disabled={currentPage <= 1}\n        >\n            <ChevronLeft /> Previous\n        </Link>\n\n        {VisiblePages.map((page, index) => {\n            if (page === \"...\") {\n                return (\n                    <span\n                        key={`dots-${index}`}\n                        className=\"px-3 py-2 text-sm text-gray-500\"\n                    >\n                        ...\n                    </span>\n                );\n            }\n\n            const pageNumber = page as number;\n            const isCurrentPage = pageNumber === currentPage;\n\n            return (\n                <Link\n                    key={`page-${pageNumber}-${index}`}\n                    href={getPageUrl(pageNumber)}\n                    className={`px-3 py-2 text-sm font-medium rounded-lg ${isCurrentPage\n                        ? \"bg-purple-600 text-white\"\n                        : \"text-gray-700 hover:bg-gray-100 bg-white border border-gray-300\"\n                        }`}\n                >\n                    {pageNumber}\n                </Link>\n            );\n        })}\n\n        <Link href={getPageUrl(currentPage + 1)}\n            className={`flex items-center px-3 py-2 text-sm font-medium rounded-lg ${currentPage >= totalPages\n                ? \"text-gray-400 cursor-not-allowed bg-gray-100\"\n                : \"text-gray-700 hover:bg-gray-100 bg-white border border-gray-300\"\n                }`}\n            aria-disabled={currentPage >= totalPages}\n        >\n            <ChevronRight />\n            Next\n        </Link>\n    </nav>\n}"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;;;;AAQe,SAAS,WAAW,EAC/B,WAAW,EACX,UAAU,EACV,OAAO,EACP,YAAY,EACE;IACd,IAAI,cAAc,GAAG,OAAO;IAE5B,MAAM,aAAa,CAAC;QAChB,MAAM,SAAS,IAAI,gBAAgB;YAAE,GAAG,YAAY;YAAE,MAAM,OAAO;QAAM;QACzE,OAAO,GAAG,QAAQ,CAAC,EAAE,OAAO,QAAQ,IAAI;IAC5C;IACA,MAAM,kBAAkB;QACpB,MAAM,QAAQ;QACd,MAAM,QAAQ,EAAE;QAChB,MAAM,gBAAgB,EAAE;QAExB,IACI,IAAI,IAAI,KAAK,GAAG,CAAC,GAAG,cAAc,QAClC,KAAK,KAAK,GAAG,CAAC,aAAa,GAAG,cAAc,QAC5C,IACF;YACE,MAAM,IAAI,CAAC;QACf;QACA,IAAI,cAAc,QAAQ,GAAG;YACzB,cAAc,IAAI,CAAC,GAAG;QAC1B,OAAO;YACH,cAAc,IAAI,CAAC;QACvB;QAEA,cAAc,IAAI,IAAI;QAEtB,IAAI,cAAc,QAAQ,aAAa,GAAG;YACtC,cAAc,IAAI,CAAC,OAAO;QAC9B,OAAO;YACH,cAAc,IAAI,CAAC;QACvB;QAEA,OAAO;IACX;IACA,MAAM,eAAe;IAErB,qBAAO,mRAAC;QAAI,WAAU;;0BAClB,mRAAC,4MAAI;gBACD,MAAM,WAAW,cAAc;gBAC/B,WAAW,CAAC,2DAA2D,EAAE,eAAe,IAClF,iDACA,mEACA;gBACN,iBAAe,eAAe;;kCAE9B,mRAAC,wQAAW;;;;;oBAAG;;;;;;;YAGlB,aAAa,GAAG,CAAC,CAAC,MAAM;gBACrB,IAAI,SAAS,OAAO;oBAChB,qBACI,mRAAC;wBAEG,WAAU;kCACb;uBAFQ,CAAC,KAAK,EAAE,OAAO;;;;;gBAMhC;gBAEA,MAAM,aAAa;gBACnB,MAAM,gBAAgB,eAAe;gBAErC,qBACI,mRAAC,4MAAI;oBAED,MAAM,WAAW;oBACjB,WAAW,CAAC,yCAAyC,EAAE,gBACjD,6BACA,mEACA;8BAEL;mBAPI,CAAC,KAAK,EAAE,WAAW,CAAC,EAAE,OAAO;;;;;YAU9C;0BAEA,mRAAC,4MAAI;gBAAC,MAAM,WAAW,cAAc;gBACjC,WAAW,CAAC,2DAA2D,EAAE,eAAe,aAClF,iDACA,mEACA;gBACN,iBAAe,eAAe;;kCAE9B,mRAAC,2QAAY;;;;;oBAAG;;;;;;;;;;;;;AAI5B"}},
    {"offset": {"line": 297, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/app/sales/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect, use } from \"react\";\r\nimport { useStackApp } from \"@stackframe/stack\";\r\nimport Sidebar from \"@/components/sidebar\";\r\nimport { useToaster } from '@/components/Toaster';\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { motion } from 'framer-motion';\r\nimport Pagination from \"@/components/pagination\"\r\nimport { router } from \"next/router\";\r\n\r\ninterface Sale {\r\n    id: string;\r\n    product: { name: string };\r\n    customer: { name: string };\r\n    quantity: number;\r\n    salePrice: number;\r\n    totalAmount: number;\r\n    createdAt: string;\r\n    location: { name: string };\r\n}\r\n\r\ninterface Product {\r\n    id: string;\r\n    name: string;\r\n    sku: string;\r\n    price: number;\r\n    quantity: number;\r\n}\r\n\r\n\r\nexport default function SalesPage({ searchParams }: { searchParams: Promise<{ q?: string, page?: string }> }) {\r\n    const stackApp = useStackApp();\r\n    const user = stackApp.useUser();\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [sales, setSales] = useState<Sale[]>([]);\r\n    const [loadingSales, setLoadingSales] = useState(true);\r\n    const [selectedProductId, setSelectedProductId] = useState(\"\");\r\n    const [quantity, setQuantity] = useState(1);\r\n    const [salePrice, setSalePrice] = useState<number | null>(null);\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const { addToast } = useToaster();\r\n\r\n\r\n    const userId = user?.id;\r\n    const params = use(searchParams);\r\n    const q = (params.q ?? \"\").trim();\r\n    const page = Math.max(1, Number(params.page ?? 1));\r\n    const pageSize = 10;\r\n\r\n    const [pagination, setPagination] = useState({\r\n        totalPages: 1,\r\n        page: 1,\r\n        totalSales: 0,\r\n        limit: 10,\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (pagination.page > pagination.totalPages) {\r\n            router.push(`/sales?page=${pagination.totalPages}`);\r\n        }\r\n    }, [pagination]);\r\n\r\n    const [isLoadingProducts, setIsLoadingProducts] = useState(true);\r\n    const fetchProducts = async () => {\r\n        if (!userId) return;\r\n        setIsLoadingProducts(true);\r\n        const res = await fetch(`/api/products?userId=${userId}`);\r\n        const data = await res.json();\r\n        if (data?.products) {\r\n            setProducts(data.products);\r\n        } else {\r\n            setProducts([]); // fallback to empty array\r\n            addToast(\"No products found.\", \"info\");\r\n        }\r\n        setIsLoadingProducts(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchProducts().catch((err) => {\r\n            console.error(err);\r\n            addToast(\"Error loading products.\", \"error\");\r\n            setIsLoadingProducts(false);\r\n        });\r\n\r\n        // Fetch sales (user-specific)\r\n        if (!userId) return;\r\n        setLoadingSales(true);\r\n        fetch(`/api/sales?userId=${userId}&page=${page}&limit=${pageSize}`)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                setSales(data.data || []);\r\n                setPagination(data.pagination || { totalPages: 1, page: 1, totalSales: 0, limit: pageSize });\r\n                setLoadingSales(false);\r\n            })\r\n            .catch((err) => {\r\n                if (err.name === 'AbortError') return; // Ignore aborted fetch\r\n                setLoadingSales(false);\r\n                addToast(\"Error loading sales.\", \"error\");\r\n            });\r\n    }, [userId, page, pageSize, addToast]);\r\n\r\n    useEffect(() => {\r\n        if (selectedProductId) {\r\n            const selectedProduct = products.find(p => p.id === selectedProductId);\r\n            if (selectedProduct) {\r\n                setSalePrice(selectedProduct.price);\r\n            }\r\n        } else {\r\n            setSalePrice(null);\r\n        }\r\n    }, [selectedProductId, products]);\r\n\r\n    useEffect(() => {\r\n        products.forEach(p => {\r\n            const status = p.quantity > 0 ? `${p.quantity} in stock` : 'Out of stock';\r\n        });\r\n    }, [products]);\r\n\r\n    const [customers, setCustomers] = useState<{ id: string; name: string; }[]>([]);\r\n    const [selectedCustomerId, setSelectedCustomerId] = useState(\"\");\r\n    const [isLoadingCustomers, setIsLoadingCustomers] = useState(true);\r\n\r\n    const [customersFetched, setCustomersFetched] = useState(false);\r\n    useEffect(() => {\r\n        if (!userId) return;\r\n        setIsLoadingCustomers(true);\r\n        fetch(`/api/customers?userId=${userId}`)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                setCustomers(data.customers || []);\r\n                setCustomersFetched(true);\r\n                setIsLoadingCustomers(false);\r\n            })\r\n            .catch(() => {\r\n                setIsLoadingCustomers(false);\r\n                addToast(\"Error loading customers.\", \"error\");\r\n            });\r\n    }, [userId, addToast, customersFetched]);\r\n\r\n    const [uniqueLocations, setUniqueLocations] = useState<string[]>([]);\r\n    const [selectedLocation, setSelectedLocation] = useState(\"\");\r\n\r\n    // Fetch locations\r\n    const fetchLocations = async () => {\r\n        if (!userId) return;\r\n        const res = await fetch(`/api/locations?userId=${userId}`);\r\n        const data = await res.json();\r\n        setUniqueLocations(data.locations || []);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!userId) return;\r\n        fetch(`/api/locations?userId=${userId}&page=${page}&limit=10`)\r\n            .then(res => res.json())\r\n            .then(data => setUniqueLocations(data.locations || []))\r\n            .catch(() => addToast(\"Error loading locations.\", \"error\"));\r\n    }, [userId, addToast]);\r\n\r\n\r\n    const handleCreateSale = async (formData: FormData) => {\r\n        const productId = formData.get('productId');\r\n        const quantity = Number(formData.get('quantity'));\r\n        const salePrice = Number(formData.get('salePrice'));\r\n        const customerId = selectedCustomerId;\r\n        const totalAmount = quantity * salePrice;\r\n        const locationId = selectedLocation;\r\n\r\n        if (!productId || quantity <= 0 || !salePrice || salePrice <= 0 || !customerId) {\r\n            addToast(\"Please select a product, customer, enter valid quantity and price.\", \"error\");\r\n            return;\r\n        }\r\n\r\n        const selectedProduct = products.find(p => p.id === productId);\r\n        const selectedCustomer = customers.find(c => c.id === customerId);\r\n        if (!selectedProduct || selectedProduct.quantity < quantity) {\r\n            addToast(`Not enough stock for \"${selectedProduct?.name}\". Available: ${selectedProduct?.quantity || 0}.`, \"error\");\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n        try {\r\n            const res = await fetch(\"/api/sales\", {\r\n                method: \"POST\",\r\n                body: JSON.stringify({\r\n                    productId,\r\n                    quantity,\r\n                    salePrice,\r\n                    totalAmount,\r\n                    userId: user?.id,\r\n                    customerId,\r\n                    locationId,\r\n                }),\r\n            });\r\n\r\n            if (res.ok) {\r\n                const newSale = await res.json();\r\n                setSales([{\r\n                    ...newSale,\r\n                    product: { name: selectedProduct.name },\r\n                    customer: { name: customers.find(c => c.id === customerId)?.name || 'N/A' },\r\n                }, ...sales]);\r\n                addToast('Sale created!', 'success');\r\n                // Update product quantity in state\r\n                fetchProducts();\r\n\r\n\r\n                // Reset form\r\n                setSelectedProductId(\"\");\r\n                setSelectedCustomerId(\"\");\r\n                setSelectedLocation(\"\");\r\n                setQuantity(1);\r\n                setSalePrice(null);\r\n            } else {\r\n                const errorData = await res.json();\r\n                addToast(errorData.error || 'Failed to create sale, please check stock level', 'error');\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n            addToast(\"Something went wrong.\", \"error\");\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const handleDeleteSale = async (saleId: string) => {\r\n        if (!confirm(\"Are you sure you want to delete this sale?\")) return;\r\n\r\n        try {\r\n            const res = await fetch(`/api/sales/${saleId}`, { method: \"DELETE\" });\r\n            if (res.ok) {\r\n                setSales(sales.filter((sale) => sale.id !== saleId));\r\n                addToast(\"Sale deleted successfully!\", \"success\");\r\n            } else {\r\n                const errorData = await res.json();\r\n                addToast(errorData.error || \"Failed to delete sale.\", \"error\");\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n            addToast(\"Something went wrong.\", \"error\");\r\n        }\r\n    };\r\n\r\n\r\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n    const [editingSale, setEditingSale] = useState<Sale | null>(null);\r\n    const [editForm, setEditForm] = useState({\r\n        productId: \"\",\r\n        customerId: \"\",\r\n        quantity: 0,\r\n        salePrice: 0,\r\n    });\r\n\r\n    const handleEditSale = (sale: Sale) => {\r\n        setEditingSale(sale);\r\n        setEditForm({\r\n            productId: sale.product.id,\r\n            customerId: sale.customer.id,\r\n            quantity: sale.quantity,\r\n            salePrice: sale.salePrice,\r\n        });\r\n        setIsEditModalOpen(true);\r\n    };\r\n\r\n    const handleEditChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n        const { name, value } = e.target;\r\n        setEditForm((prev) => ({ ...prev, [name]: name === \"quantity\" || name === \"salePrice\" ? Number(value) : value }));\r\n    };\r\n\r\n    const handleSaveEdit = async () => {\r\n        if (!editingSale || !editForm.productId || !editForm.customerId || editForm.quantity <= 0 || editForm.salePrice <= 0) {\r\n            addToast(\"Please fill in all fields with valid values.\", \"error\");\r\n            return;\r\n        }\r\n\r\n        const selectedProduct = products.find((p) => p.id === editForm.productId);\r\n        if (!selectedProduct || selectedProduct.quantity < editForm.quantity) {\r\n            addToast(`Not enough stock for \"${selectedProduct?.name}\". Available: ${selectedProduct?.quantity || 0}.`, \"error\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const res = await fetch(`/api/sales/${editingSale.id}`, {\r\n                method: \"PUT\",\r\n                body: JSON.stringify({\r\n                    productId: editForm.productId,\r\n                    customerId: editForm.customerId,\r\n                    quantity: editForm.quantity,\r\n                    salePrice: editForm.salePrice,\r\n                    totalAmount: editForm.quantity * editForm.salePrice,\r\n                    userId: user?.id,\r\n                }),\r\n            });\r\n\r\n            if (res.ok) {\r\n                const updatedSale = await res.json();\r\n                setSales(sales.map((sale) => (sale.id === editingSale.id ? { ...updatedSale, product: { name: selectedProduct.name }, customer: { name: customers.find(c => c.id === editForm.customerId)?.name || 'N/A' } } : sale)));\r\n                addToast(\"Sale updated!\", \"success\");\r\n                fetchProducts(); // Refresh product stock\r\n                setIsEditModalOpen(false);\r\n            } else {\r\n                const errorData = await res.json();\r\n                addToast(errorData.error || \"Failed to update sale.\", \"error\");\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n            addToast(\"Something went wrong.\", \"error\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50\">\r\n            <Sidebar currentPath=\"/sales\" />\r\n            <main className=\"ml-64 p-8\">\r\n                {/* Header */}\r\n                <div className=\"mb-8\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <h1 className=\"text-2xl font-semibold text-gray-900\">Sales</h1>\r\n                            <p className=\"text-sm text-gray-500\">Track and manage your product sales. Select a product, enter quantity, and record a sale.</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"space-y-6\">\r\n                    <form onSubmit={(e) => {\r\n                        e.preventDefault();\r\n                        handleCreateSale(new FormData(e.currentTarget));\r\n                    }} className=\"bg-white rounded-lg border-gray-200 p-6\">\r\n                        <div className=\"grid grid-cols-6 gap-4 items-end\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Customer</label>\r\n                                {isLoadingCustomers ? (\r\n                                    <div className=\"flex items-center justify-center py-2 text-sm text-gray-500\">\r\n                                        <svg className=\"animate-spin h-5 w-5 text-purple-600 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                                            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                                            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                                        </svg>\r\n                                        Loading customers...\r\n                                    </div>\r\n                                ) : (\r\n                                    <select\r\n                                        name=\"customerId\"\r\n                                        value={selectedCustomerId}\r\n                                        onChange={(e) => setSelectedCustomerId(e.target.value)}\r\n                                        className=\"w-full px-2 py-2 border border-gray-600 rounded-lg focus:border-transparent\"\r\n                                        required\r\n                                    >\r\n                                        <option value=\"\">Select Customer</option>\r\n                                        {customers.map(customer => (\r\n                                            <option key={customer.id} value={customer.id}>\r\n                                                {customer.name}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                )}\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Location</label>\r\n                                <select\r\n                                    name=\"locationId\"\r\n                                    value={selectedLocation}\r\n                                    onChange={(e) => setSelectedLocation(e.target.value)}\r\n                                    className=\"w-full px-2 py-2 border border-gray-600 rounded-lg focus:border-transparent\"\r\n                                    required\r\n                                >\r\n                                    <option value=\"\">Select Location</option>\r\n                                    {uniqueLocations.map((loc) => (\r\n                                        <option key={loc.id} value={loc.id}>\r\n                                            {loc.name}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Product Name</label>\r\n                                {isLoadingProducts ? (\r\n                                    <div className=\"flex items-center justify-center py-2 text-sm text-gray-500\">\r\n                                        <svg className=\"animate-spin h-5 w-5 text-purple-600 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                                            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                                            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                                        </svg>\r\n                                        Loading Products...\r\n                                    </div>\r\n                                ) : (<select\r\n                                    name=\"productId\"\r\n                                    value={selectedProductId}\r\n                                    onChange={(e) => {\r\n                                        const id = e.target.value;\r\n                                        setSelectedProductId(id);\r\n                                        const product = products.find(p => p.id === id);\r\n                                        setSalePrice(product ? product.price : null);\r\n                                    }}\r\n                                    className=\"w-full px-2 py-2 border border-gray-600 rounded-lg\"\r\n                                    required\r\n                                >\r\n                                    <option value=\"\">Select Product</option>\r\n                                    {products.length ? (\r\n                                        products.map(p => (\r\n                                            <option key={p.id} value={p.id} disabled={p.quantity <= 0}>\r\n                                                {p.name} | K{p.price} | ({p.quantity > 0 ? `${p.quantity} in stock` : 'Out of stock'})\r\n                                            </option>\r\n                                        ))\r\n                                    ) : (\r\n                                        <option disabled>No products available</option>\r\n                                    )}\r\n                                </select>)}\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Quantity</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    name=\"quantity\"\r\n                                    value={quantity}\r\n                                    onChange={(e) => setQuantity(e.target.value)}\r\n                                    onBlur={() => {\r\n                                        // Convert to number only on blur (or submit)\r\n                                        setQuantity(prev => Number(prev) || 0);\r\n                                    }}\r\n                                    min=\"0\"\r\n                                    step=\"0.01\"\r\n                                    required\r\n                                    className=\"w-full px-2 py-2 border border-gray-600 rounded-lg focus:border-transparent\"\r\n                                    placeholder=\"Enter quantity\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Price (K)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    name=\"salePrice\"\r\n                                    value={salePrice || ''}\r\n                                    onChange={(e) => setSalePrice(Number(e.target.value))}\r\n                                    min=\"0\"\r\n                                    step=\"0.01\"\r\n                                    required\r\n                                    className=\"w-full px-2 py-2 border border-gray-600 rounded-lg focus:border-transparent\"\r\n                                    placeholder=\"K100.00\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <SubmitButton isSubmitting={isSubmitting} />\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n\r\n                    <table className=\"min-w-full table-auto mt-4 border-collapse border border-gray-200\">\r\n                        <thead className=\"bg-gray-100\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-left text-xs font-semibold text-gray-600 uppercase\">Customer Name</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-left text-xs font-semibold text-gray-600 uppercase\">Product Name</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-left text-xs font-semibold text-gray-600 uppercase\">Location</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-xs font-semibold text-gray-600 uppercase\">Quantity</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-xs font-semibold text-gray-600 uppercase\">Price (K)</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-xs font-semibold text-gray-600 uppercase\">Revenue (K)</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-xs font-semibold text-gray-600 uppercase\">Date Created</th>\r\n                                <th className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-xs font-semibold text-gray-600 uppercase\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                            {loadingSales ? (\r\n                                <tr>\r\n                                    <td colSpan={8} className=\"px-6 py-3 text-center text-sm text-gray-500\">\r\n                                        <div className=\"flex flex-col items-center justify-center gap-5 mt-10 mb-10\">\r\n                                            <svg className=\"animate-spin h-10 w-10 text-purple-600 items-center\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                                                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                                                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                                            </svg>\r\n                                            Loading sales...\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            ) : !Array.isArray(sales) || sales.length === 0 ? (\r\n                                <tr>\r\n                                    <td colSpan={8} className=\"px-6 py-3 text-center text-sm text-gray-500\">No sales recorded yet.</td>\r\n                                </tr>\r\n                            ) : (\r\n                                sales.map((sale, key) => (\r\n                                    <tr key={sale.id} className={`hover:bg-gray-50 ${key % 2 === 0 ? 'bg-white' : 'bg-gray-50'}`}>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-left text-sm text-gray-500\">\r\n                                            {sale.customer?.name || 'N/A'}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-left text-sm text-gray-500\">\r\n                                            {sale.product?.name || 'N/A'}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-left text-sm text-gray-500\">\r\n                                            {sale.location?.name || 'N/A'}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-sm text-gray-500\">\r\n                                            {sale.quantity}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-sm text-gray-500\">\r\n                                            K{sale.salePrice}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-sm text-gray-500\">\r\n                                            K{sale.totalAmount}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-r border-gray-400 text-center text-sm text-gray-500\">\r\n                                            {new Date(sale.createdAt).toLocaleDateString()}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 border-b border-gray-400 text-center text-sm text-gray-500\">\r\n                                            <button\r\n                                                onClick={() => handleEditSale(sale)}\r\n                                                className=\"text-blue-600 hover:text-blue-800 mr-3\"\r\n                                            >\r\n                                                Edit\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleDeleteSale(sale.id)}\r\n                                                className=\"text-red-600 hover:text-red-800\"\r\n                                            >\r\n                                                Delete\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n\r\n                    {Array.isArray(sales) && sales.length > 0 && (\r\n                        <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n                            <Pagination\r\n                                currentPage={pagination.page}\r\n                                totalPages={pagination.totalPages}\r\n                                baseUrl=\"/sales\"\r\n                                SearchParams={{ q }}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {isEditModalOpen && editingSale && (\r\n                    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n                        <div className=\"bg-white p-6 rounded-lg w-96\">\r\n                            <h2 className=\"text-lg font-semibold mb-4\">Edit Sale</h2>\r\n                            <div className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Customer</label>\r\n                                    <select\r\n                                        name=\"customerId\"\r\n                                        value={editForm.customerId}\r\n                                        onChange={handleEditChange}\r\n                                        className=\"w-full px-2 py-2 border border-gray-600 rounded-lg\"\r\n                                        required\r\n                                    >\r\n                                        <option value=\"\">Select Customer</option>\r\n                                        {customers.map((customer) => (\r\n                                            <option key={customer.id} value={customer.id}>\r\n                                                {customer.name}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Product</label>\r\n                                    <select\r\n                                        name=\"productId\"\r\n                                        value={editForm.productId}\r\n                                        onChange={handleEditChange}\r\n                                        className=\"w-full px-2 py-2 border border-gray-600 rounded-lg\"\r\n                                        required\r\n                                    >\r\n                                        <option value=\"\">Select Product</option>\r\n                                        {products.map((p) => (\r\n                                            <option key={p.id} value={p.id} disabled={p.quantity <= 0}>\r\n                                                {p.name} | K{p.price} | ({p.quantity > 0 ? `${p.quantity} in stock` : 'Out of stock'})\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Quantity</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        name=\"quantity\"\r\n                                        value={editForm.quantity}\r\n                                        onChange={handleEditChange}\r\n                                        min=\"0\"\r\n                                        step=\"0.01\"\r\n                                        required\r\n                                        className=\"w-full px-2 py-2 border border-gray-600 rounded-lg\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Price (K)</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        name=\"salePrice\"\r\n                                        value={editForm.salePrice}\r\n                                        onChange={handleEditChange}\r\n                                        min=\"0\"\r\n                                        step=\"0.01\"\r\n                                        required\r\n                                        className=\"w-full px-2 py-2 border border-gray-600 rounded-lg\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex justify-end gap-2 mt-4\">\r\n                                <button\r\n                                    onClick={() => setIsEditModalOpen(false)}\r\n                                    className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleSaveEdit}\r\n                                    className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\"\r\n                                >\r\n                                    Save Changes\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </main >\r\n        </div >\r\n    );\r\n}\r\n\r\nfunction SubmitButton({ isSubmitting }: { isSubmitting: boolean }) {\r\n    return (\r\n        <button\r\n            type=\"submit\"\r\n            className=\"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\"\r\n            disabled={isSubmitting}\r\n        >\r\n            {isSubmitting ? 'Creating Sale...' : 'Create Sale'}\r\n        </button>\r\n    );\r\n}"],"names":[],"mappings":"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"}}]
}