{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx"],"sourcesContent":["\"use client\";\r\nimport { UserButton } from \"@stackframe/stack\";\r\nimport { BarChart3, Package, Plus, Settings, Info, ShoppingCart, ChevronDown } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport default function Sidebar() {\r\n    const [openItems, setOpenItems] = useState<string[]>([]);\r\n    const currentPath = usePathname();\r\n\r\n    useEffect(() => {\r\n        const activeItem = NAV_ITEMS.find((item) => item.subItems && item.subItems.some((sub) => currentPath === sub.href));\r\n        if (activeItem) {\r\n            setOpenItems([activeItem.name]);\r\n        }\r\n    }, [currentPath]);\r\n\r\n    const NAV_ITEMS = [\r\n        {\r\n            name: \"Dashboard\",\r\n            icon: BarChart3,\r\n            subItems: [\r\n                { name: \"Inventory Dashboard\", href: \"/dashboard/inventory\" },\r\n                { name: \"Sales Dashboard\", href: \"/dashboard/sales\" },\r\n            ],\r\n        },\r\n        { name: \"Inventory\", href: \"/inventory\", icon: Package },\r\n        { name: \"Add Product\", href: \"/add-product\", icon: Plus },\r\n        { name: \"Sales\", href: \"/sales\", icon: ShoppingCart },\r\n        { name: \"Settings\", href: \"/settings\", icon: Settings },\r\n        { name: \"About\", href: \"/about\", icon: Info },\r\n    ];\r\n\r\n    const toggleItem = (name: string) => {\r\n        if (openItems.includes(name)) {\r\n            setOpenItems(openItems.filter((item) => item !== name));\r\n        } else {\r\n            setOpenItems([...openItems, name]);\r\n        }\r\n    };\r\n\r\n    const isActive = (href: string) => currentPath === href;\r\n    const isParentActive = (subItems?: { href: string }[]) => subItems?.some((sub) => currentPath === sub.href);\r\n    const isOpen = (name: string) => openItems.includes(name);\r\n\r\n    return (\r\n        <div className=\"fixed left-0 top-0 bg-gray-900 text-white w-64 min-h-screen p-6 z-10\">\r\n            <div className=\"mb-8\">\r\n                <div className=\"flex items-center space-x-2 mb-4\">\r\n                    <BarChart3 className=\"w-10 h-10\" />\r\n                    <span className=\"text-md font-semibold\">Inventory Management App</span>\r\n                </div>\r\n            </div>\r\n            <nav className=\"space-y-1\">\r\n                <div className=\"text-sm font-semibold text-gray-400 uppercase\">Inventory</div>\r\n                {NAV_ITEMS.map((item, key) => {\r\n                    const IconComponent = item.icon;\r\n                    const parentActive = isParentActive(item.subItems);\r\n                    const itemActive = isActive(item.href);\r\n\r\n                    if (item.subItems) {\r\n                        return (\r\n                            <div key={key}>\r\n                                <button\r\n                                    onClick={() => toggleItem(item.name)}\r\n                                    className={`flex items-center justify-between w-full py-2 px-3 rounded-lg ${parentActive ? \"bg-purple-50 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                        }`}\r\n                                >\r\n                                    <div className=\"flex items-center space-x-3\">\r\n                                        <IconComponent className=\"w-5 h-5\" />\r\n                                        <span className=\"text-sm\">{item.name}</span>\r\n                                    </div>\r\n                                    <ChevronDown className={`w-4 h-4 transition-transform ${isOpen(item.name) ? \"rotate-180\" : \"\"}`} />\r\n                                </button>\r\n                                {isOpen(item.name) && (\r\n                                    <ul className=\"ml-6 mt-2 space-y-2\">\r\n                                        {item.subItems.map((subItem, subKey) => (\r\n                                            <li key={subKey}>\r\n                                                <Link\r\n                                                    href={subItem.href}\r\n                                                    className={`flex items-center space-x-3 py-2 px-3 rounded-lg text-md ${isActive(subItem.href) ? \"text-white-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                                        }`}\r\n                                                >\r\n                                                    {subItem.name}\r\n                                                </Link>\r\n                                            </li>\r\n                                        ))}\r\n                                    </ul>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    }\r\n\r\n                    return (\r\n                        <Link\r\n                            href={item.href}\r\n                            key={key}\r\n                            className={`flex items-center space-x-3 py-2 px-3 rounded-lg ${itemActive ? \"bg-purple-100 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                }`}\r\n                        >\r\n                            <IconComponent className=\"w-5 h-5\" />\r\n                            <span className=\"text-sm\">{item.name}</span>\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </nav>\r\n            <div className=\"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-700\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <UserButton showUserInfo />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AALA;;;;;;;AAOe,SAAS;IACpB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sPAAQ,EAAW,EAAE;IACvD,MAAM,cAAc,IAAA,sLAAW;IAE/B,IAAA,uPAAS,EAAC;QACN,MAAM,aAAa,UAAU,IAAI,CAAC,CAAC,OAAS,KAAK,QAAQ,IAAI,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC,MAAQ,gBAAgB,IAAI,IAAI;QACjH,IAAI,YAAY;YACZ,aAAa;gBAAC,WAAW,IAAI;aAAC;QAClC;IACJ,GAAG;QAAC;KAAY;IAEhB,MAAM,YAAY;QACd;YACI,MAAM;YACN,MAAM,oQAAS;YACf,UAAU;gBACN;oBAAE,MAAM;oBAAuB,MAAM;gBAAuB;gBAC5D;oBAAE,MAAM;oBAAmB,MAAM;gBAAmB;aACvD;QACL;QACA;YAAE,MAAM;YAAa,MAAM;YAAc,MAAM,wPAAO;QAAC;QACvD;YAAE,MAAM;YAAe,MAAM;YAAgB,MAAM,+OAAI;QAAC;QACxD;YAAE,MAAM;YAAS,MAAM;YAAU,MAAM,2QAAY;QAAC;QACpD;YAAE,MAAM;YAAY,MAAM;YAAa,MAAM,2PAAQ;QAAC;QACtD;YAAE,MAAM;YAAS,MAAM;YAAU,MAAM,+OAAI;QAAC;KAC/C;IAED,MAAM,aAAa,CAAC;QAChB,IAAI,UAAU,QAAQ,CAAC,OAAO;YAC1B,aAAa,UAAU,MAAM,CAAC,CAAC,OAAS,SAAS;QACrD,OAAO;YACH,aAAa;mBAAI;gBAAW;aAAK;QACrC;IACJ;IAEA,MAAM,WAAW,CAAC,OAAiB,gBAAgB;IACnD,MAAM,iBAAiB,CAAC,WAAkC,UAAU,KAAK,CAAC,MAAQ,gBAAgB,IAAI,IAAI;IAC1G,MAAM,SAAS,CAAC,OAAiB,UAAU,QAAQ,CAAC;IAEpD,qBACI,mRAAC;QAAI,WAAU;;0BACX,mRAAC;gBAAI,WAAU;0BACX,cAAA,mRAAC;oBAAI,WAAU;;sCACX,mRAAC,oQAAS;4BAAC,WAAU;;;;;;sCACrB,mRAAC;4BAAK,WAAU;sCAAwB;;;;;;;;;;;;;;;;;0BAGhD,mRAAC;gBAAI,WAAU;;kCACX,mRAAC;wBAAI,WAAU;kCAAgD;;;;;;oBAC9D,UAAU,GAAG,CAAC,CAAC,MAAM;wBAClB,MAAM,gBAAgB,KAAK,IAAI;wBAC/B,MAAM,eAAe,eAAe,KAAK,QAAQ;wBACjD,MAAM,aAAa,SAAS,KAAK,IAAI;wBAErC,IAAI,KAAK,QAAQ,EAAE;4BACf,qBACI,mRAAC;;kDACG,mRAAC;wCACG,SAAS,IAAM,WAAW,KAAK,IAAI;wCACnC,WAAW,CAAC,8DAA8D,EAAE,eAAe,+BAA+B,mCACpH;;0DAEN,mRAAC;gDAAI,WAAU;;kEACX,mRAAC;wDAAc,WAAU;;;;;;kEACzB,mRAAC;wDAAK,WAAU;kEAAW,KAAK,IAAI;;;;;;;;;;;;0DAExC,mRAAC,wQAAW;gDAAC,WAAW,CAAC,6BAA6B,EAAE,OAAO,KAAK,IAAI,IAAI,eAAe,IAAI;;;;;;;;;;;;oCAElG,OAAO,KAAK,IAAI,mBACb,mRAAC;wCAAG,WAAU;kDACT,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAC,SAAS,uBACzB,mRAAC;0DACG,cAAA,mRAAC,4MAAI;oDACD,MAAM,QAAQ,IAAI;oDAClB,WAAW,CAAC,yDAAyD,EAAE,SAAS,QAAQ,IAAI,IAAI,mBAAmB,mCAC7G;8DAEL,QAAQ,IAAI;;;;;;+CANZ;;;;;;;;;;;+BAff;;;;;wBA6BlB;wBAEA,qBACI,mRAAC,4MAAI;4BACD,MAAM,KAAK,IAAI;4BAEf,WAAW,CAAC,iDAAiD,EAAE,aAAa,gCAAgC,mCACtG;;8CAEN,mRAAC;oCAAc,WAAU;;;;;;8CACzB,mRAAC;oCAAK,WAAU;8CAAW,KAAK,IAAI;;;;;;;2BAL/B;;;;;oBAQjB;;;;;;;0BAEJ,mRAAC;gBAAI,WAAU;0BACX,cAAA,mRAAC;oBAAI,WAAU;8BACX,cAAA,mRAAC,uOAAU;wBAAC,YAAY;;;;;;;;;;;;;;;;;;;;;;AAK5C"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/StockHealthPie.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { PieChart, Pie, Cell, ResponsiveContainer } from \"recharts\";\r\n\r\nexport default function StockHealthPie({ inStock, lowStock, outOfStock }: any) {\r\n    const total = inStock + lowStock + outOfStock;\r\n\r\n    const data = [\r\n        { name: \"In Stock\", value: inStock, color: \"#16a34a\" },\r\n        { name: \"Low Stock\", value: lowStock, color: \"#facc15\" },\r\n        { name: \"Out of Stock\", value: outOfStock, color: \"#dc2626\" },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"\">\r\n            <ResponsiveContainer width=\"100%\" height={200}>\r\n                <PieChart>\r\n                    <Pie\r\n                        data={data}\r\n                        dataKey=\"value\"\r\n                        innerRadius={50}\r\n                        outerRadius={80}\r\n                        paddingAngle={4}\r\n                    //label={({ name, value }) => `${name} (${Math.round((value / total) * 100)}%)`}\r\n                    >\r\n                        {data.map((d, i) => (\r\n                            <Cell key={i} fill={d.color} />\r\n                        ))}\r\n                    </Pie>\r\n                </PieChart>\r\n            </ResponsiveContainer>\r\n\r\n            {/* LEGEND WITH PERCENTAGES */}\r\n            <div className=\"flex justify-center gap-6 mt-4 text-sm\">\r\n                {data.map(d => (\r\n                    <div key={d.name} className=\"flex items-center gap-2\">\r\n                        <span\r\n                            className=\"w-3 h-3 rounded-full\"\r\n                            style={{ backgroundColor: d.color }}\r\n                        />\r\n                        <span>{`${d.name} (${Math.round((d.value / total) * 100)}%)`}</span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAFA;;;AAIe,SAAS,eAAe,EAAE,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAO;IACzE,MAAM,QAAQ,UAAU,WAAW;IAEnC,MAAM,OAAO;QACT;YAAE,MAAM;YAAY,OAAO;YAAS,OAAO;QAAU;QACrD;YAAE,MAAM;YAAa,OAAO;YAAU,OAAO;QAAU;QACvD;YAAE,MAAM;YAAgB,OAAO;YAAY,OAAO;QAAU;KAC/D;IAED,qBACI,mRAAC;QAAI,WAAU;;0BACX,mRAAC,+NAAmB;gBAAC,OAAM;gBAAO,QAAQ;0BACtC,cAAA,mRAAC,qMAAQ;8BACL,cAAA,mRAAC,2LAAG;wBACA,MAAM;wBACN,SAAQ;wBACR,aAAa;wBACb,aAAa;wBACb,cAAc;kCAGb,KAAK,GAAG,CAAC,CAAC,GAAG,kBACV,mRAAC,iMAAI;gCAAS,MAAM,EAAE,KAAK;+BAAhB;;;;;;;;;;;;;;;;;;;;0BAO3B,mRAAC;gBAAI,WAAU;0BACV,KAAK,GAAG,CAAC,CAAA,kBACN,mRAAC;wBAAiB,WAAU;;0CACxB,mRAAC;gCACG,WAAU;gCACV,OAAO;oCAAE,iBAAiB,EAAE,KAAK;gCAAC;;;;;;0CAEtC,mRAAC;0CAAM,GAAG,EAAE,IAAI,CAAC,EAAE,EAAE,KAAK,KAAK,CAAC,AAAC,EAAE,KAAK,GAAG,QAAS,KAAK,EAAE,CAAC;;;;;;;uBALtD,EAAE,IAAI;;;;;;;;;;;;;;;;AAWpC"}},
    {"offset": {"line": 390, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/StockValueTrendChart.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport { BarChart3 } from 'lucide-react';\r\n\r\ninterface StockValueTrendChartProps {\r\n    data: { date: string; value: number }[];\r\n}\r\nexport default function StockValueTrendChart({ data }: StockValueTrendChartProps) {\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <BarChart3 className=\"h-5 w-5 text-purple-500\" color='blue' /> Stock Value Trend\r\n            </h3>\r\n            <ResponsiveContainer width=\"100%\" height={200}>\r\n                <LineChart data={data}>\r\n                    <XAxis dataKey=\"date\" />\r\n                    <YAxis />\r\n                    <Tooltip />\r\n                    <Line type=\"monotone\" dataKey=\"value\" stroke=\"#2563eb\" strokeWidth={2} />\r\n                </LineChart>\r\n            </ResponsiveContainer>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAHA;;;;AAQe,SAAS,qBAAqB,EAAE,IAAI,EAA6B;IAC5E,qBACI,mRAAC;QAAI,WAAU;;0BACX,mRAAC;gBAAG,WAAU;;kCACV,mRAAC,oQAAS;wBAAC,WAAU;wBAA0B,OAAM;;;;;;oBAAS;;;;;;;0BAElE,mRAAC,+NAAmB;gBAAC,OAAM;gBAAO,QAAQ;0BACtC,cAAA,mRAAC,uMAAS;oBAAC,MAAM;;sCACb,mRAAC,mMAAK;4BAAC,SAAQ;;;;;;sCACf,mRAAC,mMAAK;;;;;sCACN,mRAAC,uMAAO;;;;;sCACR,mRAAC,iMAAI;4BAAC,MAAK;4BAAW,SAAQ;4BAAQ,QAAO;4BAAU,aAAa;;;;;;;;;;;;;;;;;;;;;;;AAKxF"}},
    {"offset": {"line": 483, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/StockTonnageTrendChart.tsx"],"sourcesContent":["\"use client\";\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport { BarChart3 } from 'lucide-react';\r\n\r\ninterface StockTonnageTrendChartProps {\r\n    data: { date: string; value: number }[];\r\n}\r\n\r\nexport default function StockTonnageTrendChart({ data }: StockTonnageTrendChartProps) {\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <BarChart3 className=\"h-5 w-5 text-purple-500\" color='green' />\r\n                Stock tonnage Trend\r\n            </h3>\r\n            <ResponsiveContainer width=\"100%\" height={200}>\r\n                <LineChart data={data}>\r\n                    <XAxis dataKey=\"date\" />\r\n                    <YAxis />\r\n                    <Tooltip />\r\n                    <Line type=\"monotone\" dataKey=\"value\" stroke=\"#16a34a\" strokeWidth={2} />\r\n                </LineChart>\r\n            </ResponsiveContainer>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAFA;;;;AAQe,SAAS,uBAAuB,EAAE,IAAI,EAA+B;IAChF,qBACI,mRAAC;QAAI,WAAU;;0BACX,mRAAC;gBAAG,WAAU;;kCACV,mRAAC,oQAAS;wBAAC,WAAU;wBAA0B,OAAM;;;;;;oBAAU;;;;;;;0BAGnE,mRAAC,+NAAmB;gBAAC,OAAM;gBAAO,QAAQ;0BACtC,cAAA,mRAAC,uMAAS;oBAAC,MAAM;;sCACb,mRAAC,mMAAK;4BAAC,SAAQ;;;;;;sCACf,mRAAC,mMAAK;;;;;sCACN,mRAAC,uMAAO;;;;;sCACR,mRAAC,iMAAI;4BAAC,MAAK;4BAAW,SAAQ;4BAAQ,QAAO;4BAAU,aAAa;;;;;;;;;;;;;;;;;;;;;;;AAKxF"}},
    {"offset": {"line": 600, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/InventorySummary.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMemo, useState } from \"react\";\r\nimport { Package, ArrowUpDown, AlertTriangle } from \"lucide-react\";\r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\nimport * as XLSX from \"xlsx\";\r\n\r\ntype SortKey =\r\n    | \"name\"\r\n    | \"quantity\"\r\n    | \"stockValue\"\r\n    | \"tonnage\"\r\n    | \"locations\"\r\n    | \"velocity\"\r\n    | \"daysLeft\";\r\n\r\ninterface InventoryItem {\r\n    id: string;\r\n    quantity: number;\r\n    lowStockAt: number;\r\n    expiryDate?: Date | null;\r\n    updatedAt: Date;\r\n    product: {\r\n        id: string;\r\n        name: string;\r\n        price: number;\r\n        weightValue: number;\r\n        packSize: number;\r\n    };\r\n    location: { name: string };\r\n}\r\n\r\ninterface Sale {\r\n    productId: string;\r\n    quantity: number;\r\n    saleDate: Date;\r\n}\r\n\r\ninterface Props {\r\n    inventory: InventoryItem[];\r\n    sales: Sale[];\r\n    title: string;\r\n}\r\n\r\nexport default function InventorySummary({\r\n    inventory,\r\n    sales,\r\n    title,\r\n}: Props) {\r\n    const [sortKey, setSortKey] = useState<SortKey>(\"stockValue\");\r\n    const [sortDir, setSortDir] = useState<\"asc\" | \"desc\">(\"desc\");\r\n    const [startDate, setStartDate] = useState<Date | null>(null);\r\n    const [endDate, setEndDate] = useState<Date | null>(null);\r\n\r\n    /* ---------------- DATE FILTER ---------------- */\r\n    const filteredInventory = useMemo(() => {\r\n        return inventory.filter(i => {\r\n            if (startDate && i.updatedAt < startDate) return false;\r\n            if (endDate && i.updatedAt > endDate) return false;\r\n            return true;\r\n        });\r\n    }, [inventory, startDate, endDate]);\r\n\r\n    /* ---------------- SALES MAP (30 DAYS) ---------------- */\r\n    const salesMap = useMemo(() => {\r\n        const map: Record<string, number> = {};\r\n        const since = new Date();\r\n        since.setDate(since.getDate() - 30);\r\n\r\n        sales.forEach(s => {\r\n            if (s.saleDate < since) return;\r\n            map[s.productId] = (map[s.productId] || 0) + s.quantity;\r\n        });\r\n\r\n        return map;\r\n    }, [sales]);\r\n\r\n    /* ---------------- AGGREGATE ---------------- */\r\n    const data = useMemo(() => {\r\n        const map: Record<string, any> = {};\r\n\r\n        filteredInventory.forEach(item => {\r\n            const p = item.product;\r\n\r\n            if (!map[p.id]) {\r\n                map[p.id] = {\r\n                    name: p.name,\r\n                    quantity: 0,\r\n                    stockValue: 0,\r\n                    tonnage: 0,\r\n                    locations: new Set<string>(),\r\n                    lowStock: false,\r\n                    expiry: null as Date | null,\r\n                    velocity: 0,\r\n                    daysLeft: Infinity,\r\n                };\r\n            }\r\n\r\n            map[p.id].quantity += item.quantity;\r\n            map[p.id].stockValue += item.quantity * p.price;\r\n            map[p.id].tonnage +=\r\n                (p.weightValue * p.packSize * item.quantity) / 1000;\r\n            map[p.id].locations.add(item.location.name);\r\n\r\n            if (item.quantity <= item.lowStockAt) map[p.id].lowStock = true;\r\n\r\n            if (item.expiryDate) {\r\n                if (\r\n                    !map[p.id].expiry ||\r\n                    item.expiryDate < map[p.id].expiry\r\n                ) {\r\n                    map[p.id].expiry = item.expiryDate;\r\n                }\r\n            }\r\n        });\r\n\r\n        Object.entries(map).forEach(([productId, p]: any) => {\r\n            const sold = salesMap[productId] || 0;\r\n            const dailyVelocity = sold / 30;\r\n            p.velocity = dailyVelocity;\r\n            p.daysLeft =\r\n                dailyVelocity > 0 ? p.quantity / dailyVelocity : Infinity;\r\n            p.locations = p.locations.size;\r\n        });\r\n\r\n        return Object.values(map);\r\n    }, [filteredInventory, salesMap]);\r\n\r\n    /* ---------------- SORT ---------------- */\r\n    const sortedData = useMemo(() => {\r\n        return [...data].sort((a, b) => {\r\n            const aVal = a[sortKey];\r\n            const bVal = b[sortKey];\r\n            return sortDir === \"asc\" ? aVal - bVal : bVal - aVal;\r\n        });\r\n    }, [data, sortKey, sortDir]);\r\n\r\n    const toggleSort = (key: SortKey) => {\r\n        setSortKey(key);\r\n        setSortDir(key === sortKey && sortDir === \"desc\" ? \"asc\" : \"desc\");\r\n    };\r\n\r\n    /* ---------------- EXPORT EXCEL ---------------- */\r\n    const exportExcel = () => {\r\n        const ws = XLSX.utils.json_to_sheet(\r\n            sortedData.map(p => ({\r\n                Product: p.name,\r\n                Quantity: p.quantity,\r\n                \"Stock Value\": p.stockValue,\r\n                Tonnage: p.tonnage,\r\n                Locations: p.locations,\r\n                \"Daily Velocity\": p.velocity.toFixed(2),\r\n                \"Days Left\": p.daysLeft === Infinity ? \"∞\" : Math.round(p.daysLeft),\r\n            }))\r\n        );\r\n\r\n        const wb = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(wb, ws, \"Inventory\");\r\n        XLSX.writeFile(wb, \"inventory_summary.xlsx\");\r\n    };\r\n\r\n    /* ---------------- EXPORT PDF ---------------- */\r\n    const exportPDF = () => {\r\n        const doc = new jsPDF();\r\n        doc.text(title, 105, 15, { align: \"center\" });\r\n\r\n        autoTable(doc, {\r\n            startY: 25,\r\n            head: [[\r\n                \"#\", \"Product\", \"Qty\", \"Value\", \"Velocity\", \"Days Left\", \"Expiry\"\r\n            ]],\r\n            body: sortedData.map((p, i) => [\r\n                i + 1,\r\n                p.name,\r\n                p.quantity,\r\n                `K${p.stockValue.toFixed(0)}`,\r\n                p.velocity.toFixed(2),\r\n                p.daysLeft === Infinity ? \"∞\" : Math.round(p.daysLeft),\r\n                p.expiry ? new Date(p.expiry).toLocaleDateString() : \"-\",\r\n            ]),\r\n            styles: { fontSize: 9 },\r\n        });\r\n\r\n        doc.save(\"inventory_summary.pdf\");\r\n    };\r\n\r\n    /* ---------------- RENDER ---------------- */\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <Package className=\"h-5 w-5 text-green-600\" />\r\n                {title}\r\n            </h3>\r\n\r\n            {/* FILTERS */}\r\n            <div className=\"flex justify-between mb-4\">\r\n                <div className=\"flex gap-2\">\r\n                    <input type=\"date\" onChange={e => setStartDate(e.target.value ? new Date(e.target.value) : null)} />\r\n                    <input type=\"date\" onChange={e => setEndDate(e.target.value ? new Date(e.target.value) : null)} />\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <button onClick={exportExcel} className=\"border px-3 py-1 rounded\">Excel</button>\r\n                    <button onClick={exportPDF} className=\"border px-3 py-1 rounded\">PDF</button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* TABLE */}\r\n            <div className=\"overflow-auto max-h-[450px]\">\r\n                <table className=\"w-full text-sm border\">\r\n                    <thead className=\"sticky top-0 bg-gray-200\">\r\n                        <tr>\r\n                            <th>#</th>\r\n                            <th onClick={() => toggleSort(\"name\")}>Product</th>\r\n                            <th onClick={() => toggleSort(\"quantity\")}>Qty</th>\r\n                            <th onClick={() => toggleSort(\"stockValue\")}>Value</th>\r\n                            <th onClick={() => toggleSort(\"velocity\")}>Velocity</th>\r\n                            <th onClick={() => toggleSort(\"daysLeft\")}>Days Left</th>\r\n                            <th>Expiry</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {sortedData.map((p, i) => {\r\n                            const expired = p.expiry && new Date(p.expiry) < new Date();\r\n                            const expiringSoon =\r\n                                p.expiry &&\r\n                                new Date(p.expiry).getTime() - Date.now() <\r\n                                14 * 86400000;\r\n\r\n                            return (\r\n                                <tr\r\n                                    key={p.name}\r\n                                    className={`${p.lowStock ? \"bg-red-50\" : \"\"\r\n                                        }`}\r\n                                >\r\n                                    <td>{i + 1}</td>\r\n                                    <td>{p.name}</td>\r\n                                    <td>{p.quantity}</td>\r\n                                    <td>K{p.stockValue.toFixed(0)}</td>\r\n                                    <td>{p.velocity.toFixed(2)}</td>\r\n                                    <td>{p.daysLeft === Infinity ? \"∞\" : Math.round(p.daysLeft)}</td>\r\n                                    <td className={\r\n                                        expired\r\n                                            ? \"text-red-600 font-bold\"\r\n                                            : expiringSoon\r\n                                                ? \"text-orange-500\"\r\n                                                : \"\"\r\n                                    }>\r\n                                        {p.expiry\r\n                                            ? new Date(p.expiry).toLocaleDateString()\r\n                                            : \"-\"}\r\n                                    </td>\r\n                                </tr>\r\n                            );\r\n                        })}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}