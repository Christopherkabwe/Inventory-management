{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx"],"sourcesContent":["\"use client\";\r\nimport { UserButton } from \"@stackframe/stack\";\r\nimport { BarChart3, Package, Plus, Settings, Info, ShoppingCart, ChevronDown } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport default function Sidebar() {\r\n    const [openItems, setOpenItems] = useState<string[]>([]);\r\n    const currentPath = usePathname();\r\n\r\n    useEffect(() => {\r\n        const activeItem = NAV_ITEMS.find((item) => item.subItems && item.subItems.some((sub) => currentPath === sub.href));\r\n        if (activeItem) {\r\n            setOpenItems([activeItem.name]);\r\n        }\r\n    }, [currentPath]);\r\n\r\n    const NAV_ITEMS = [\r\n        {\r\n            name: \"Dashboard\",\r\n            icon: BarChart3,\r\n            subItems: [\r\n                { name: \"Inventory Dashboard\", href: \"/dashboard/inventory\" },\r\n                { name: \"Sales Dashboard\", href: \"/dashboard/sales\" },\r\n            ],\r\n        },\r\n        { name: \"Inventory\", href: \"/inventory\", icon: Package },\r\n        { name: \"Add Product\", href: \"/add-product\", icon: Plus },\r\n        { name: \"Sales\", href: \"/sales\", icon: ShoppingCart },\r\n        { name: \"Settings\", href: \"/settings\", icon: Settings },\r\n        { name: \"About\", href: \"/about\", icon: Info },\r\n    ];\r\n\r\n    const toggleItem = (name: string) => {\r\n        if (openItems.includes(name)) {\r\n            setOpenItems(openItems.filter((item) => item !== name));\r\n        } else {\r\n            setOpenItems([...openItems, name]);\r\n        }\r\n    };\r\n\r\n    const isActive = (href: string) => currentPath === href;\r\n    const isParentActive = (subItems?: { href: string }[]) => subItems?.some((sub) => currentPath === sub.href);\r\n    const isOpen = (name: string) => openItems.includes(name);\r\n\r\n    return (\r\n        <div className=\"fixed left-0 top-0 bg-gray-900 text-white w-64 min-h-screen p-6 z-10\">\r\n            <div className=\"mb-8\">\r\n                <div className=\"flex items-center space-x-2 mb-4\">\r\n                    <BarChart3 className=\"w-10 h-10\" />\r\n                    <span className=\"text-md font-semibold\">Inventory Management App</span>\r\n                </div>\r\n            </div>\r\n            <nav className=\"space-y-1\">\r\n                <div className=\"text-sm font-semibold text-gray-400 uppercase\">Inventory</div>\r\n                {NAV_ITEMS.map((item, key) => {\r\n                    const IconComponent = item.icon;\r\n                    const parentActive = isParentActive(item.subItems);\r\n                    const itemActive = isActive(item.href);\r\n\r\n                    if (item.subItems) {\r\n                        return (\r\n                            <div key={key}>\r\n                                <button\r\n                                    onClick={() => toggleItem(item.name)}\r\n                                    className={`flex items-center justify-between w-full py-2 px-3 rounded-lg ${parentActive ? \"bg-purple-50 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                        }`}\r\n                                >\r\n                                    <div className=\"flex items-center space-x-3\">\r\n                                        <IconComponent className=\"w-5 h-5\" />\r\n                                        <span className=\"text-sm\">{item.name}</span>\r\n                                    </div>\r\n                                    <ChevronDown className={`w-4 h-4 transition-transform ${isOpen(item.name) ? \"rotate-180\" : \"\"}`} />\r\n                                </button>\r\n                                {isOpen(item.name) && (\r\n                                    <ul className=\"ml-6 mt-2 space-y-2\">\r\n                                        {item.subItems.map((subItem, subKey) => (\r\n                                            <li key={subKey}>\r\n                                                <Link\r\n                                                    href={subItem.href}\r\n                                                    className={`flex items-center space-x-3 py-2 px-3 rounded-lg text-md ${isActive(subItem.href) ? \"text-white-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                                        }`}\r\n                                                >\r\n                                                    {subItem.name}\r\n                                                </Link>\r\n                                            </li>\r\n                                        ))}\r\n                                    </ul>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    }\r\n\r\n                    return (\r\n                        <Link\r\n                            href={item.href}\r\n                            key={key}\r\n                            className={`flex items-center space-x-3 py-2 px-3 rounded-lg ${itemActive ? \"bg-purple-100 text-gray-800\" : \"hover:bg-gray-800 text-gray-300\"\r\n                                }`}\r\n                        >\r\n                            <IconComponent className=\"w-5 h-5\" />\r\n                            <span className=\"text-sm\">{item.name}</span>\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </nav>\r\n            <div className=\"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-700\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <UserButton showUserInfo />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/CustomTooltip.tsx"],"sourcesContent":["import React from 'react';\r\nimport { TooltipProps } from 'recharts';\r\n\r\ninterface CustomTooltipProps {\r\n    active?: boolean;\r\n    payload?: any[];\r\n    label?: string;\r\n    labels?: {\r\n        titleKey?: string;\r\n        metrics?: { key: string; label: string; format?: (value: number | undefined) => string }[];\r\n    };\r\n}\r\n\r\nconst CustomTooltip = ({\r\n    active,\r\n    payload,\r\n    label,\r\n    labels = {\r\n        titleKey: 'category',\r\n        metrics: [\r\n            { key: 'tonnage', label: 'Tonnage', format: (v) => `${v?.toFixed(2)} tons` },\r\n            { key: 'salesValue', label: 'Sales Value', format: (v) => `K${v?.toFixed(2)}` },\r\n            { key: 'quantity', label: 'Quantity', format: (v) => `${v} units` },\r\n        ],\r\n    },\r\n}: CustomTooltipProps) => {\r\n    if (active && payload && payload.length) {\r\n        const data = payload[0].payload as Record<string, number | undefined>;\r\n        return (\r\n            <div className=\"bg-white p-3 border rounded shadow text-sm\">\r\n                <p className=\"font-bold\">{data[labels.titleKey!] || label}</p>\r\n                {labels.metrics?.map((metric) => (\r\n                    <p key={metric.key}>\r\n                        {metric.label}: {data[metric.key] !== undefined ? (metric.format ? metric.format(data[metric.key]) : data[metric.key]) : 'N/A'}\r\n                    </p>\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default CustomTooltip;"],"names":[],"mappings":";;;;;;AAaA,MAAM,gBAAgB,CAAC,EACnB,MAAM,EACN,OAAO,EACP,KAAK,EACL,SAAS;IACL,UAAU;IACV,SAAS;QACL;YAAE,KAAK;YAAW,OAAO;YAAW,QAAQ,CAAC,IAAM,GAAG,GAAG,QAAQ,GAAG,KAAK,CAAC;QAAC;QAC3E;YAAE,KAAK;YAAc,OAAO;YAAe,QAAQ,CAAC,IAAM,CAAC,CAAC,EAAE,GAAG,QAAQ,IAAI;QAAC;QAC9E;YAAE,KAAK;YAAY,OAAO;YAAY,QAAQ,CAAC,IAAM,GAAG,EAAE,MAAM,CAAC;QAAC;KACrE;AACL,CAAC,EACgB;IACjB,IAAI,UAAU,WAAW,QAAQ,MAAM,EAAE;QACrC,MAAM,OAAO,OAAO,CAAC,EAAE,CAAC,OAAO;QAC/B,qBACI,mRAAC;YAAI,WAAU;;8BACX,mRAAC;oBAAE,WAAU;8BAAa,IAAI,CAAC,OAAO,QAAQ,CAAE,IAAI;;;;;;gBACnD,OAAO,OAAO,EAAE,IAAI,CAAC,uBAClB,mRAAC;;4BACI,OAAO,KAAK;4BAAC;4BAAG,IAAI,CAAC,OAAO,GAAG,CAAC,KAAK,YAAa,OAAO,MAAM,GAAG,OAAO,MAAM,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC,GAAI;;uBADrH,OAAO,GAAG;;;;;;;;;;;IAMlC;IACA,OAAO;AACX;uCAEe"}},
    {"offset": {"line": 344, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesByCategoryPie.tsx"],"sourcesContent":["\"use client\";\r\nimport { PieChart, Pie, Cell, ResponsiveContainer, Tooltip } from \"recharts\";\r\nimport { TrendingUp } from 'lucide-react';\r\nimport CustomTooltip from \"./CustomTooltip\";\r\n\r\ninterface Props {\r\n    categoryData: { category: string; tonnage: number }[];\r\n}\r\n\r\nexport default function SalesByCategoryPie({ categoryData }: Props) {\r\n    //const COLORS = ['#3b82f6', '#10b981', '#f97316', '#8b5cf6', '#ec4899'];\r\n    const COLORS = ['#2563eb', '#16a34a', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899'];\r\n\r\n    const totalTonnage = categoryData.reduce((sum, item) => sum + item.tonnage, 0);\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <TrendingUp className=\"h-5 w-5 text-green-500\" />\r\n                Sales By Category (Year-to-Date)\r\n            </h3>\r\n            <div className=\"flex justify-center\">\r\n                <ResponsiveContainer width=\"100%\" height={200}>\r\n                    <PieChart>\r\n                        <Pie\r\n                            data={categoryData}\r\n                            dataKey=\"tonnage\"\r\n                            nameKey=\"category\"\r\n                            innerRadius={50}\r\n                            outerRadius={80}\r\n                            paddingAngle={4}\r\n                        >\r\n                            {categoryData.map((entry, index) => (\r\n                                <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                            ))}\r\n                        </Pie>\r\n                        <Tooltip content={<CustomTooltip />} />\r\n                    </PieChart>\r\n                </ResponsiveContainer>\r\n            </div>\r\n            <div className=\"flex justify-center gap-6 mt-4 text-xs\">\r\n                {categoryData.map((entry, index) => (\r\n                    <div key={entry.category} className=\"flex items-center gap-2\">\r\n                        <span\r\n                            className=\"w-3 h-3 rounded-full\"\r\n                            style={{ backgroundColor: COLORS[index % COLORS.length] }}\r\n                        />\r\n                        <span>{`${entry.category} (${((entry.tonnage / totalTonnage) * 100).toFixed(1)}%)`}</span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAHA;;;;;AASe,SAAS,mBAAmB,EAAE,YAAY,EAAS;IAC9D,yEAAyE;IACzE,MAAM,SAAS;QAAC;QAAW;QAAW;QAAW;QAAW;QAAW;KAAU;IAEjF,MAAM,eAAe,aAAa,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,OAAO,EAAE;IAE5E,qBACI,mRAAC;QAAI,WAAU;;0BACX,mRAAC;gBAAG,WAAU;;kCACV,mRAAC,qQAAU;wBAAC,WAAU;;;;;;oBAA2B;;;;;;;0BAGrD,mRAAC;gBAAI,WAAU;0BACX,cAAA,mRAAC,+NAAmB;oBAAC,OAAM;oBAAO,QAAQ;8BACtC,cAAA,mRAAC,qMAAQ;;0CACL,mRAAC,2LAAG;gCACA,MAAM;gCACN,SAAQ;gCACR,SAAQ;gCACR,aAAa;gCACb,aAAa;gCACb,cAAc;0CAEb,aAAa,GAAG,CAAC,CAAC,OAAO,sBACtB,mRAAC,iMAAI;wCAAuB,MAAM,MAAM,CAAC,QAAQ,OAAO,MAAM,CAAC;uCAApD,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;0CAGlC,mRAAC,uMAAO;gCAAC,uBAAS,mRAAC,mLAAa;;;;;;;;;;;;;;;;;;;;;;;;;;0BAI5C,mRAAC;gBAAI,WAAU;0BACV,aAAa,GAAG,CAAC,CAAC,OAAO,sBACtB,mRAAC;wBAAyB,WAAU;;0CAChC,mRAAC;gCACG,WAAU;gCACV,OAAO;oCAAE,iBAAiB,MAAM,CAAC,QAAQ,OAAO,MAAM,CAAC;gCAAC;;;;;;0CAE5D,mRAAC;0CAAM,GAAG,MAAM,QAAQ,CAAC,EAAE,EAAE,CAAC,AAAC,MAAM,OAAO,GAAG,eAAgB,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC;;;;;;;uBAL5E,MAAM,QAAQ;;;;;;;;;;;;;;;;AAW5C"}},
    {"offset": {"line": 489, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesTrendChart.tsx"],"sourcesContent":["\"use client\";\r\nimport { LineChart, Line, Pie, PieChart, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend, Cell } from 'recharts';\r\nimport CustomTooltip from './CustomTooltip';\r\nimport SalesByCategoryPie from './SalesByCategoryPie';\r\nimport { DollarSign, TrendingUp, Users, ShoppingBag, Calendar, MapPin, BarChart3 } from \"lucide-react\";\r\n\r\ninterface ChartDataPoint {\r\n    date: string;\r\n    value: number;\r\n    quantity: number;\r\n    tonnage: number;\r\n}\r\ninterface CategoryDataPoint {\r\n    category: string;\r\n    quantity: number;\r\n    tonnage: number;\r\n    salesValue: number;\r\n}\r\ninterface Props {\r\n    salesTrendData: ChartDataPoint[];\r\n    sales: any[];\r\n    productList: any[]; // Add productList prop\r\n}\r\n\r\ninterface LocationDataPoint {\r\n    location: string;\r\n    quantity: number;\r\n    salesValue: number;\r\n}\r\n\r\nexport default function SalesTrendChart({ salesTrendData, sales, productList }: Props) {\r\n    if (!salesTrendData.length || !sales.length || !productList.length) {\r\n        return <p>No sales data available.</p>;\r\n    }\r\n\r\n    // Transform data for category bar chart (year-to-date)\r\n    const categories = Array.from(\r\n        new Set(\r\n            sales\r\n                .filter(sale => new Date(sale.saleDate).getFullYear() === new Date().getFullYear())\r\n                .map(sale => sale.product?.category || 'Uncategorized')\r\n        )\r\n    ).sort();\r\n\r\n    const categoryData = categories.map(category => {\r\n        const categorySales = sales\r\n            .filter(sale =>\r\n                new Date(sale.saleDate).getFullYear() === new Date().getFullYear() &&\r\n                sale.product?.category === category\r\n            );\r\n        return {\r\n            category,\r\n            tonnage: categorySales.reduce((sum, sale) => {\r\n                const product = productList.find(p => p.id === sale.productId);\r\n                const weightInTons = product ? (product.weightValue * sale.quantity * product.packSize) / 1000 : 0;\r\n                return sum + weightInTons;\r\n            }, 0),\r\n            quantity: categorySales.reduce((sum, sale) => sum + sale.quantity, 0),\r\n            salesValue: categorySales.reduce((sum, sale) => sum + sale.quantity * sale.salePrice, 0),\r\n        };\r\n    }).sort((a, b) => b.tonnage - a.tonnage);\r\n\r\n    // Transform data for location bar chart (year-to-date)\r\n    const locations = Array.from(\r\n        new Set(\r\n            sales\r\n                .filter(sale => new Date(sale.saleDate).getFullYear() === new Date().getFullYear())\r\n                .map(sale => sale.location?.name || 'Unknown')\r\n        )\r\n    );\r\n\r\n    const locationData = locations.map(location => {\r\n        const locationSales = sales\r\n            .filter(sale => new Date(sale.saleDate).getFullYear() === new Date().getFullYear() && sale.location?.name === location);\r\n        return {\r\n            location,\r\n            quantity: locationSales.reduce((sum, sale) => sum + sale.quantity, 0),\r\n            salesValue: locationSales.reduce((sum, sale) => sum + sale.quantity * sale.salePrice, 0),\r\n            tonnage: locationSales.reduce((sum, sale) => {\r\n                const product = productList.find(p => p.id === sale.productId);\r\n                const weightInTons = product ? (product.weightValue * sale.quantity * product.packSize) / 1000 : 0;\r\n                return sum + weightInTons;\r\n            }, 0),\r\n        };\r\n    }).sort((a, b) => b.tonnage - a.tonnage);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                {/* Sales Value Trend */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                        <BarChart3 className=\"h-5 w-5 text-green-500\" color='blue' />\r\n                        Sales Value Trend\r\n                    </h3>\r\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-2\">Sales Value (K)</h4>\r\n                    <ResponsiveContainer width=\"100%\" height={200}>\r\n                        <LineChart data={salesTrendData}>\r\n                            <XAxis dataKey=\"date\" />\r\n                            <YAxis />\r\n                            <Tooltip content={<CustomTooltip labels={{\r\n                                titleKey: 'date',\r\n                                metrics: [\r\n                                    { key: 'tonnage', label: 'Tonnage', format: (v) => `${v.toFixed(2)} tons` },\r\n                                    { key: 'value', label: 'Sales Value', format: (v) => `K${v.toFixed(2)}` },\r\n                                    { key: 'quantity', label: 'Quantity', format: (v) => `${v} units` },\r\n\r\n                                ],\r\n                            }} />} />\r\n                            <Line type=\"monotone\" dataKey=\"value\" stroke=\"#2563eb\" strokeWidth={2} />\r\n                        </LineChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n                {/* Sales Tonnage Trend */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                        <BarChart3 className=\"h-5 w-5 text-green-500\" color='green' /> Sales Tonnage Trend\r\n                    </h3>\r\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-2\">Tonnage</h4>\r\n                    <ResponsiveContainer width=\"100%\" height={200}>\r\n                        <LineChart data={salesTrendData}>\r\n                            <XAxis dataKey=\"date\" />\r\n                            <YAxis />\r\n                            <Tooltip content={<CustomTooltip labels={{\r\n                                titleKey: 'date',\r\n                                metrics: [\r\n                                    { key: 'tonnage', label: 'Tonnage', format: (v) => `${v.toFixed(2)} tons` },\r\n                                    { key: 'value', label: 'Sales Value', format: (v) => `K${v.toFixed(2)}` },\r\n                                    { key: 'quantity', label: 'Quantity', format: (v) => `${v} units` },\r\n                                ],\r\n                            }} />} />\r\n                            <Line type=\"monotone\" dataKey=\"tonnage\" stroke=\"#16a34a\" strokeWidth={2} />\r\n                        </LineChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* Sales Value by Location Pie Chart*/}\r\n                <SalesByCategoryPie categoryData={categoryData} />\r\n\r\n                {/* Sales Value by Location */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                        <MapPin className=\"h-5 w-5 text-blue-500\" /> Sales Value by Location (Year-to-Date)\r\n                    </h3>\r\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-2\">Sales Value</h4>\r\n                    <ResponsiveContainer width=\"100%\" height={250}>\r\n                        <BarChart data={locationData} >\r\n\r\n                            <XAxis dataKey=\"location\" />\r\n                            <YAxis\r\n                                tickCount={10}\r\n                                domain={[0, 'dataMax + 100']}\r\n                                tickFormatter={(value) => value.toFixed(0)} />\r\n                            // For Sales by Location\r\n                            <Tooltip content={<CustomTooltip labels={{\r\n                                titleKey: 'location',\r\n                                metrics: [\r\n                                    { key: 'tonnage', label: 'Tonnage', format: (v) => `${v.toFixed(2)} tons` },\r\n                                    { key: 'salesValue', label: 'Sales Value', format: (v) => `K${v.toFixed(2)}` },\r\n                                    { key: 'quantity', label: 'Quantity', format: (v) => `${v} units` },\r\n\r\n                                ],\r\n                            }} />} />\r\n                            <Bar\r\n                                dataKey=\"salesValue\"\r\n                                name=\"salesValue\"\r\n                                label={(props) => {\r\n                                    const { x, y, width, height, value } = props;\r\n                                    return (\r\n                                        <text\r\n                                            x={x + width / 2}\r\n                                            y={y - 5}\r\n                                            fill=\"#666\"\r\n                                            textAnchor=\"middle\"\r\n                                            dominantBaseline=\"middle\"\r\n                                        >\r\n                                            {`K${value.toFixed(2)}`}\r\n                                        </text>\r\n                                    );\r\n                                }}\r\n                            >\r\n                                {locationData.map((entry, index) => (\r\n                                    <Cell key={`cell-${index}`} fill=\"#3b82f6\" />\r\n                                ))}\r\n                            </Bar>\r\n                        </BarChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n\r\n                {/* Sales by Location */}\r\n                <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                    <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                        <MapPin className=\"h-5 w-5 text-blue-500\" /> Sales by Location (Year-to-Date)\r\n                    </h3>\r\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-2\">Tonnage</h4>\r\n                    <ResponsiveContainer width=\"100%\" height={250}>\r\n                        <BarChart data={locationData} >\r\n\r\n                            <XAxis dataKey=\"location\" />\r\n                            <YAxis\r\n                                tickCount={10}\r\n                                domain={[0, 'dataMax + 0.3']}\r\n                                tickFormatter={(value) => value.toFixed(2)} />\r\n                            // For Sales by Location\r\n                            <Tooltip content={<CustomTooltip labels={{\r\n                                titleKey: 'location',\r\n                                metrics: [\r\n                                    { key: 'tonnage', label: 'Tonnage', format: (v) => `${v.toFixed(2)} tons` },\r\n                                    { key: 'salesValue', label: 'Sales Value', format: (v) => `K${v.toFixed(2)}` },\r\n                                    { key: 'quantity', label: 'Quantity', format: (v) => `${v} units` },\r\n\r\n                                ],\r\n                            }} />} />\r\n                            <Bar\r\n                                dataKey=\"tonnage\"\r\n                                name=\"Tonnage\"\r\n                                label={(props) => {\r\n                                    const { x, y, width, height, value } = props;\r\n                                    return (\r\n                                        <text\r\n                                            x={x + width / 2}\r\n                                            y={y - 5}\r\n                                            fill=\"#666\"\r\n                                            textAnchor=\"middle\"\r\n                                            dominantBaseline=\"middle\"\r\n                                        >\r\n                                            {`${value.toFixed(2)} tons`}\r\n                                        </text>\r\n                                    );\r\n                                }}\r\n                            >\r\n                                {locationData.map((entry, index) => (\r\n                                    <Cell key={`cell-${index}`} fill=\"#16a34a\" />\r\n                                ))}\r\n                            </Bar>\r\n                        </BarChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1088, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/DataTable.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMemo, useState } from \"react\";\r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\n\r\nexport type Column<T> = {\r\n    key: keyof T;\r\n    label: string;\r\n    align?: \"left\" | \"center\" | \"right\";\r\n    isNumeric?: boolean;\r\n};\r\n\r\ninterface DataTableProps<T> {\r\n    title: string;\r\n    icon?: React.ReactNode;\r\n    data: T[];\r\n    columns: Column<T>[];\r\n    dateFilter?: boolean;\r\n    exportCSVName?: string;\r\n    exportPDFName?: string;\r\n    calculateTotals?: (data: T[]) => Partial<T>;\r\n}\r\n\r\nexport function DataTable<T extends Record<string, any>>({\r\n    title,\r\n    icon,\r\n    data,\r\n    columns,\r\n    dateFilter = false,\r\n    exportCSVName = \"data.csv\",\r\n    exportPDFName = \"data.pdf\",\r\n    calculateTotals,\r\n}: DataTableProps<T>) {\r\n    const [sortKey, setSortKey] = useState<keyof T | null>(null);\r\n    const [sortDir, setSortDir] = useState<\"asc\" | \"desc\">(\"asc\");\r\n\r\n    const [startDate, setStartDate] = useState<Date | null>(null);\r\n    const [endDate, setEndDate] = useState<Date | null>(null);\r\n\r\n    const toggleSort = (key: keyof T) => {\r\n        if (sortKey === key) {\r\n            setSortDir(sortDir === \"asc\" ? \"desc\" : \"asc\");\r\n        } else {\r\n            setSortKey(key);\r\n            setSortDir(\"asc\");\r\n        }\r\n    };\r\n\r\n    const filteredData = useMemo(() => {\r\n        return data.filter((item: any) => {\r\n            if (!dateFilter) return true;\r\n            const date = new Date(item.saleDate);\r\n            if (startDate && date < startDate) return false;\r\n            if (endDate && date > endDate) return false;\r\n            return true;\r\n        });\r\n    }, [data, startDate, endDate, dateFilter]);\r\n\r\n    const sortedData = useMemo(() => {\r\n        if (!sortKey) return filteredData;\r\n        return [...filteredData].sort((a, b) => {\r\n            const aVal = a[sortKey];\r\n            const bVal = b[sortKey];\r\n            if (typeof aVal === \"string\") return sortDir === \"asc\" ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\r\n            return sortDir === \"asc\" ? (aVal || 0) - (bVal || 0) : (bVal || 0) - (aVal || 0);\r\n        });\r\n    }, [filteredData, sortKey, sortDir]);\r\n\r\n    const exportCSV = () => {\r\n        const headers = columns.map(c => c.label);\r\n        const rows = sortedData.map(row => columns.map(c => row[c.key]));\r\n        const csv = [headers, ...rows].map(r => r.join(\",\")).join(\"\\n\");\r\n        const blob = new Blob([csv], { type: \"text/csv\" });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = exportCSVName;\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const exportPDF = () => {\r\n        const doc = new jsPDF();\r\n        doc.setFontSize(16);\r\n        doc.text(title, doc.internal.pageSize.getWidth() / 2, 15, { align: \"center\" });\r\n        if (dateFilter) {\r\n            const start = startDate ? startDate.toLocaleDateString() : \"N/A\";\r\n            const end = endDate ? endDate.toLocaleDateString() : \"N/A\";\r\n            doc.setFontSize(10);\r\n            doc.text(`Date Range: ${start} - ${end}`, doc.internal.pageSize.getWidth() / 2, 23, { align: \"center\" });\r\n        }\r\n\r\n        autoTable(doc, {\r\n            startY: 30,\r\n            head: [columns.map(c => c.label)],\r\n            body: sortedData.map((row, i) => columns.map(c => row[c.key])),\r\n            foot: calculateTotals ? [columns.map(c => calculateTotals(sortedData)[c.key] ?? (c.isNumeric ? 0 : \"-\"))] : undefined,\r\n            styles: { fontSize: 9, cellPadding: 4 },\r\n            headStyles: { fillColor: [100, 100, 100], fontStyle: \"bold\", textColor: 255 },\r\n            footStyles: { fillColor: [100, 100, 100], fontStyle: \"bold\", textColor: 255 },\r\n            alternateRowStyles: { fillColor: [245, 245, 245] },\r\n        });\r\n\r\n        doc.save(exportPDFName);\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n                <h3 className=\"font-semibold text-lg flex items-center gap-2\">{icon} {title}</h3>\r\n                <div className=\"flex gap-2 items-center\">\r\n                    {dateFilter && (\r\n                        <div className=\"flex gap-2 items-center\">\r\n                            <label className=\"flex items-center gap-2 font-medium\">\r\n                                Start Date:\r\n                                <input type=\"date\" value={startDate ? startDate.toISOString().substring(0, 10) : \"\"} onChange={e => setStartDate(e.target.value ? new Date(e.target.value) : null)} className=\"border rounded px-2 py-1 text-sm\" />\r\n                            </label>\r\n                            <label className=\"flex items-center gap-2 font-medium\">\r\n                                End Date:\r\n                                <input type=\"date\" value={endDate ? endDate.toISOString().substring(0, 10) : \"\"} onChange={e => setEndDate(e.target.value ? new Date(e.target.value) : null)} className=\"border rounded px-2 py-1 text-sm\" />\r\n                            </label>\r\n                        </div>\r\n                    )}\r\n                    <button onClick={exportCSV} className=\"px-3 py-1 border rounded hover:bg-gray-100\">CSV</button>\r\n                    <button onClick={exportPDF} className=\"px-3 py-1 border rounded hover:bg-gray-100\">PDF</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"max-h-[420px] overflow-y-auto\">\r\n                <table className=\"w-full text-sm border border-gray-200 border-collapse\">\r\n                    <thead className=\"sticky top-0 bg-gray-200 z-10\">\r\n                        <tr>\r\n                            {columns.map(c => (\r\n                                <th key={String(c.key)} className={`py-2 px-3 border-r ${c.align === \"right\" ? \"text-right\" : c.align === \"center\" ? \"text-center\" : \"text-left\"} cursor-pointer`} onClick={() => toggleSort(c.key)}>\r\n                                    {c.label}\r\n                                </th>\r\n                            ))}\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {sortedData.map((row, i) => (\r\n                            <tr key={i} className={`${i % 2 === 0 ? \"bg-white\" : \"bg-gray-50\"} hover:bg-blue-50`}>\r\n                                {columns.map(c => (\r\n                                    <td key={String(c.key)} className={`py-2 px-3 border-r ${c.align === \"right\" ? \"text-right\" : c.align === \"center\" ? \"text-center\" : \"text-left\"}`}>\r\n                                        {row[c.key]}\r\n                                    </td>\r\n                                ))}\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                    {calculateTotals && (\r\n                        <tfoot>\r\n                            <tr className=\"bg-gray-200 font-bold\">\r\n                                {columns.map(c => (\r\n                                    <td key={String(c.key)} className={`py-2 px-3 border-r ${c.align === \"right\" ? \"text-right\" : c.align === \"center\" ? \"text-center\" : \"text-left\"}`}>\r\n                                        {calculateTotals(sortedData)[c.key] ?? (c.isNumeric ? 0 : \"-\")}\r\n                                    </td>\r\n                                ))}\r\n                            </tr>\r\n                        </tfoot>\r\n                    )}\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1408, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesByLocation.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Sale } from \"./Sale\";\r\nimport { DataTable, Column } from \"./DataTable\";\r\nimport { MapPin } from \"lucide-react\";\r\n\r\ninterface Props {\r\n    sales: Sale[];\r\n    title: string;\r\n    iconColor?: string;\r\n}\r\n\r\nexport default function SalesByLocation({ sales, title, iconColor = \"text-blue-600\" }: Props) {\r\n    // Define columns\r\n    const columns: Column<Sale>[] = [\r\n        { key: \"id\", label: \"#\", align: \"center\" },\r\n        { key: \"locationName\", label: \"Location\", align: \"left\" },\r\n        { key: \"saleCount\", label: \"Orders\", align: \"center\", isNumeric: true },\r\n        { key: \"quantity\", label: \"Quantity\", align: \"center\", isNumeric: true },\r\n        { key: \"totalTonnage\", label: \"Tonnage (t)\", align: \"center\", isNumeric: true },\r\n        { key: \"avgOrderValue\", label: \"Avg Order Value\", align: \"center\", isNumeric: true },\r\n        { key: \"totalSalesValue\", label: \"Revenue\", align: \"center\", isNumeric: true },\r\n        { key: \"contribution\", label: \"% Share\", align: \"center\", isNumeric: true },\r\n    ];\r\n\r\n    // Transform data to include calculated fields\r\n    const tableData = sales.map(sale => {\r\n        const totalSalesValue = sale.totalAmount ?? sale.salePrice * sale.quantity;\r\n        const weight = sale.product?.weightValue || 0;\r\n        const packSize = sale.product?.packSize || 1;\r\n        const totalTonnage = (weight * sale.quantity * packSize) / 1000;\r\n\r\n        return {\r\n            ...sale,\r\n            locationName: sale.location?.name || \"Unknown\",\r\n            saleCount: 1,\r\n            quantity: sale.quantity,\r\n            totalTonnage,\r\n            totalSalesValue,\r\n            avgOrderValue: totalSalesValue, // will be averaged in totals\r\n            contribution: 0, // will calculate in totals\r\n        };\r\n    });\r\n\r\n    // Totals calculation\r\n    const calculateTotals = (data: typeof tableData) => {\r\n        const saleCount = data.reduce((sum, d) => sum + d.saleCount, 0);\r\n        const quantity = data.reduce((sum, d) => sum + d.quantity, 0);\r\n        const totalTonnage = data.reduce((sum, d) => sum + d.totalTonnage, 0);\r\n        const totalSalesValue = data.reduce((sum, d) => sum + d.totalSalesValue, 0);\r\n        const avgOrderValue = saleCount > 0 ? totalSalesValue / saleCount : 0;\r\n        return {\r\n            id: \"Total\",\r\n            locationName: \"-\",\r\n            saleCount,\r\n            quantity,\r\n            totalTonnage,\r\n            avgOrderValue,\r\n            totalSalesValue,\r\n            contribution: 100,\r\n        };\r\n    };\r\n\r\n    return (\r\n        <DataTable\r\n            title={title}\r\n            icon={<MapPin className={`h-5 w-5 ${iconColor}`} />}\r\n            data={tableData}\r\n            columns={columns}\r\n            dateFilter={true}\r\n            calculateTotals={calculateTotals}\r\n            exportCSVName=\"sales_by_location.csv\"\r\n            exportPDFName=\"sales_by_location.pdf\"\r\n        />\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AAYe,SAAS,gBAAgB,EAAE,KAAK,EAAE,KAAK,EAAE,YAAY,eAAe,EAAS;IACxF,iBAAiB;IACjB,MAAM,UAA0B;QAC5B;YAAE,KAAK;YAAM,OAAO;YAAK,OAAO;QAAS;QACzC;YAAE,KAAK;YAAgB,OAAO;YAAY,OAAO;QAAO;QACxD;YAAE,KAAK;YAAa,OAAO;YAAU,OAAO;YAAU,WAAW;QAAK;QACtE;YAAE,KAAK;YAAY,OAAO;YAAY,OAAO;YAAU,WAAW;QAAK;QACvE;YAAE,KAAK;YAAgB,OAAO;YAAe,OAAO;YAAU,WAAW;QAAK;QAC9E;YAAE,KAAK;YAAiB,OAAO;YAAmB,OAAO;YAAU,WAAW;QAAK;QACnF;YAAE,KAAK;YAAmB,OAAO;YAAW,OAAO;YAAU,WAAW;QAAK;QAC7E;YAAE,KAAK;YAAgB,OAAO;YAAW,OAAO;YAAU,WAAW;QAAK;KAC7E;IAED,8CAA8C;IAC9C,MAAM,YAAY,MAAM,GAAG,CAAC,CAAA;QACxB,MAAM,kBAAkB,KAAK,WAAW,IAAI,KAAK,SAAS,GAAG,KAAK,QAAQ;QAC1E,MAAM,SAAS,KAAK,OAAO,EAAE,eAAe;QAC5C,MAAM,WAAW,KAAK,OAAO,EAAE,YAAY;QAC3C,MAAM,eAAe,AAAC,SAAS,KAAK,QAAQ,GAAG,WAAY;QAE3D,OAAO;YACH,GAAG,IAAI;YACP,cAAc,KAAK,QAAQ,EAAE,QAAQ;YACrC,WAAW;YACX,UAAU,KAAK,QAAQ;YACvB;YACA;YACA,eAAe;YACf,cAAc;QAClB;IACJ;IAEA,qBAAqB;IACrB,MAAM,kBAAkB,CAAC;QACrB,MAAM,YAAY,KAAK,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,SAAS,EAAE;QAC7D,MAAM,WAAW,KAAK,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE;QAC3D,MAAM,eAAe,KAAK,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,YAAY,EAAE;QACnE,MAAM,kBAAkB,KAAK,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,eAAe,EAAE;QACzE,MAAM,gBAAgB,YAAY,IAAI,kBAAkB,YAAY;QACpE,OAAO;YACH,IAAI;YACJ,cAAc;YACd;YACA;YACA;YACA;YACA;YACA,cAAc;QAClB;IACJ;IAEA,qBACI,mRAAC,iLAAS;QACN,OAAO;QACP,oBAAM,mRAAC,yPAAM;YAAC,WAAW,CAAC,QAAQ,EAAE,WAAW;;;;;;QAC/C,MAAM;QACN,SAAS;QACT,YAAY;QACZ,iBAAiB;QACjB,eAAc;QACd,eAAc;;;;;;AAG1B"}}]
}