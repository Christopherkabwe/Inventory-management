{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/app/dashboard/sales/page.tsx"],"sourcesContent":["import Sidebar from \"@/components/sidebar2\";\r\nimport { getCurrentUser } from \"@/lib/auth\";\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { DollarSign, TrendingUp, Users, ShoppingBag, Calendar } from \"lucide-react\";\r\nimport SalesValueTrendChart from \"@/components/SalesValueTrendChart\";\r\nimport TopProducts from \"@/components/TopProducts\";\r\nimport RecentSales from \"@/components/RecentSales\";\r\n\r\nexport default async function SalesDashboardPage() {\r\n    const user = await getCurrentUser();\r\n    if (!user) return <div>Please log in.</div>;\r\n    const userId = user.id;\r\n\r\n    // Metrics\r\n    const sales = await prisma.sale.findMany({\r\n        where: { createdBy: userId },\r\n        include: { product: { select: { name: true, price: true } } },\r\n    });\r\n\r\n    const totalSales = sales.reduce((sum, sale) => sum + sale.quantity * sale.product.price, 0);\r\n    const totalOrders = sales.length;\r\n    const avgOrderValue = totalOrders > 0 ? totalSales / totalOrders : 0;\r\n\r\n    const customers = await prisma.customer.findMany({ where: { createdBy: userId } });\r\n    const totalCustomers = customers.length;\r\n\r\n    // Recent sales (last 7 days)\r\n    const sevenDaysAgo = new Date();\r\n    sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\r\n    const recentSales = sales\r\n        .filter(sale => sale.saleDate >= sevenDaysAgo)\r\n        .sort((a, b) => b.saleDate.getTime() - a.saleDate.getTime())\r\n        .slice(0, 10);\r\n\r\n    // Top products (by quantity sold)\r\n    const topProducts = sales\r\n        .reduce((acc, sale) => {\r\n            const name = sale.product.name;\r\n            acc[name] = (acc[name] || 0) + sale.quantity;\r\n            return acc;\r\n        }, {} as Record<string, number>)\r\n    const topProductsArray = Object.entries(topProducts)\r\n        .sort((a, b) => b[1] - a[1])\r\n        .slice(0, 5)\r\n        .map(([name, qty]) => ({ name, qty }));\r\n\r\n    // Sales trend data (mock, replace with real data)\r\n    const salesTrend = [\r\n        { date: '2024-10-01', value: 1200 },\r\n        { date: '2024-10-08', value: 1500 },\r\n        { date: '2024-10-15', value: 800 },\r\n        { date: '2024-10-22', value: 1800 },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50\">\r\n            <Sidebar currentPath=\"/sales\" />\r\n            <main className=\"ml-64 p-8 space-y-10\">\r\n                {/* Header */}\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold\">Sales Dashboard</h1>\r\n                    <p className=\"text-gray-500 mt-1\">Track your sales performance and trends</p>\r\n                </div>\r\n\r\n                {/* KPIs */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n                    <KPI title=\"Total Sales\" value={`K${totalSales.toFixed(0)}`} icon={<DollarSign />} color=\"green\" />\r\n                    <KPI title=\"Orders\" value={totalOrders} icon={<ShoppingBag />} color=\"blue\" />\r\n                    <KPI title=\"Avg. Order Value\" value={`K${avgOrderValue.toFixed(0)}`} icon={<TrendingUp />} color=\"purple\" />\r\n                    <KPI title=\"Customers\" value={totalCustomers} icon={<Users />} color=\"yellow\" />\r\n                </div>\r\n\r\n                {/* Main Grid */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n                    <SalesValueTrendChart data={salesTrend} />\r\n                    <TopProducts products={topProductsArray} />\r\n                </div>\r\n\r\n                <RecentSales sales={recentSales} />\r\n\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Reusable KPI component\r\nfunction KPI({ title, value, icon, color }: any) {\r\n    const iconColors = {\r\n        purple: \"text-purple-600\",\r\n        green: \"text-green-600\",\r\n        yellow: \"text-yellow-500\",\r\n        blue: \"text-blue-600\",\r\n    };\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border flex justify-between items-center\">\r\n            <div>\r\n                <p className=\"text-sm text-gray-500\">{title}</p>\r\n                <h2 className=\"text-2xl font-bold\">{value}</h2>\r\n            </div>\r\n            <div className={iconColors[color] || \"text-gray-600\"} aria-label={`${title} indicator`}>\r\n                {icon}\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 324, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/Inventory/my-app/src/components/sidebar2.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/Inventory/my-app/src/components/sidebar2.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,6SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAwT,GACrV,sFACA","ignoreList":[0]}},
    {"offset": {"line": 338, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/Inventory/my-app/src/components/sidebar2.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/Inventory/my-app/src/components/sidebar2.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,6SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoS,GACjU,kEACA","ignoreList":[0]}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesValueTrendChart.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/Inventory/my-app/src/components/SalesValueTrendChart.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/Inventory/my-app/src/components/SalesValueTrendChart.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,6SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoU,GACjW,kGACA","ignoreList":[0]}},
    {"offset": {"line": 374, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/SalesValueTrendChart.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/Inventory/my-app/src/components/SalesValueTrendChart.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/Inventory/my-app/src/components/SalesValueTrendChart.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,6SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAgT,GAC7U,8EACA","ignoreList":[0]}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/stack/server.tsx"],"sourcesContent":["import \"server-only\";\n\nimport { StackServerApp } from \"@stackframe/stack\";\nimport { stackClientApp } from \"./client\";\n\nexport const stackServerApp = new StackServerApp({\n  inheritsFrom: stackClientApp,\n});\n"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;;;;AAEO,MAAM,iBAAiB,IAAI,yQAAc,CAAC;IAC/C,cAAc,8KAAc;AAC9B"}},
    {"offset": {"line": 413, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/auth.ts"],"sourcesContent":["import { stackServerApp } from \"@/stack/server\";\nimport { redirect } from \"next/navigation\";\n\n\nexport async function getCurrentUser() {\n    const user = await stackServerApp.getUser()\n    if (!user) {\n        redirect(\"/sign-in\");\n    }\n\n    return user;\n}"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAGO,eAAe;IAClB,MAAM,OAAO,MAAM,8KAAc,CAAC,OAAO;IACzC,IAAI,CAAC,MAAM;QACP,IAAA,sOAAQ,EAAC;IACb;IAEA,OAAO;AACX"}},
    {"offset": {"line": 435, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/prisma.ts"],"sourcesContent":["import \"dotenv/config\";\nimport { PrismaPg } from '@prisma/adapter-pg'\nimport { PrismaClient } from '../generated/prisma/client'\n\nconst connectionString = `${process.env.DATABASE_URL}`\n\nconst adapter = new PrismaPg({ connectionString })\nconst prisma = new PrismaClient({ adapter })\n\nexport { prisma };"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;AAEA,MAAM,mBAAmB,GAAG,QAAQ,GAAG,CAAC,YAAY,EAAE;AAEtD,MAAM,UAAU,IAAI,4MAAQ,CAAC;IAAE;AAAiB;AAChD,MAAM,SAAS,IAAI,yLAAY,CAAC;IAAE;AAAQ"}}]
}