{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/app/dashboard/sales/page.tsx"],"sourcesContent":["import Sidebar from \"@/components/sidebar2\";\r\nimport { getCurrentUser } from \"@/lib/auth\";\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { DollarSign, TrendingUp, Users, ShoppingBag, Calendar, MapPin } from \"lucide-react\";\r\nimport SalesTrendChart from \"@/components/SalesTrendChart\";\r\nimport TopProducts from \"@/components/TopProducts\";\r\nimport RecentSales from \"@/components/RecentSales\";\r\n\r\ninterface ChartDataPoint {\r\n    date: string;\r\n    value: number;\r\n    quantity: number;\r\n    tonnage: number;\r\n}\r\n\r\ninterface CategoryTrendDataPoint {\r\n    date: string;\r\n    [category: string]: number | string;\r\n}\r\n\r\nexport default async function SalesDashboardPage() {\r\n    const user = await getCurrentUser();\r\n    if (!user) return <div>Please log in.</div>;\r\n    const userId = user.id;\r\n\r\n    // Metrics\r\n    const sales = await prisma.sale.findMany({\r\n        where: { createdBy: userId },\r\n        include: {\r\n            product: {\r\n                select: { name: true, price: true, category: true }\r\n            },\r\n            location: { select: { name: true } }\r\n        },\r\n    });\r\n\r\n    // Total Sales, Total Orders, Average Order Value\r\n    const totalSales = sales.reduce((sum, sale) => sum + sale.quantity * sale.salePrice, 0);\r\n    const totalOrders = sales.length;\r\n    const avgOrderValue = totalOrders > 0 ? totalSales / totalOrders : 0;\r\n\r\n    const customers = await prisma.customer.findMany({ where: { createdBy: userId } });\r\n    const totalCustomers = customers.length;\r\n\r\n    // 1. Total Revenue Growth (vs. Last Month)\r\n    const lastMonthStart = new Date(new Date().getFullYear(), new Date().getMonth() - 1, 1);\r\n    const lastMonthEnd = new Date(new Date().getFullYear(), new Date().getMonth(), 0);\r\n    const prevMonthSales = await prisma.sale.findMany({\r\n        where: {\r\n            createdBy: userId,\r\n            saleDate: { gte: lastMonthStart, lte: lastMonthEnd },\r\n        },\r\n    });\r\n    const prevMonthTotal = prevMonthSales.reduce((sum, sale) => sum + sale.quantity * sale.salePrice, 0);\r\n    const growth = prevMonthTotal ? ((totalSales - prevMonthTotal) / prevMonthTotal * 100).toFixed(1) : \"0\";\r\n\r\n    // 2. Conversion Rate\r\n    const conversionRate = totalCustomers > 0 ? (totalOrders / totalCustomers * 100).toFixed(1) : \"0\";\r\n\r\n    // 3. Sales per Product Category\r\n    const salesByCategory = sales.reduce((acc, sale) => {\r\n        const category = sale.product.category || 'Uncategorized';\r\n        acc[category] = (acc[category] || 0) + sale.quantity * sale.salePrice;\r\n        return acc;\r\n    }, {} as Record<string, number>);\r\n    const topCategory = Object.entries(salesByCategory).sort((a, b) => b[1] - a[1])[0]?.[0] || 'None';\r\n\r\n    // 4. Average Items per Order\r\n    const totalItemsSold = sales.reduce((sum, sale) => sum + sale.quantity, 0);\r\n    const avgItemsPerOrder = totalOrders > 0 ? (totalItemsSold / totalOrders).toFixed(1) : \"0\";\r\n\r\n    // 5. Top Selling Location\r\n    const salesByLocation = sales.reduce((acc, sale) => {\r\n        const loc = sale.location?.name || 'Unknown';\r\n        acc[loc] = (acc[loc] || 0) + sale.quantity * sale.salePrice;\r\n        return acc;\r\n    }, {} as Record<string, number>);\r\n    const topLocation = Object.entries(salesByLocation).sort((a, b) => b[1] - a[1])[0]?.[0] || 'None';\r\n\r\n    // YTD and MTD Sales\r\n    const startOfYear = new Date(new Date().getFullYear(), 0, 1);\r\n    const startOfMonth = new Date(new Date().getFullYear(), new Date().getMonth(), 1);\r\n\r\n    const salesYTD = await prisma.sale.findMany({\r\n        where: { createdBy: userId, saleDate: { gte: startOfYear } },\r\n        include: { product: { select: { price: true } } },\r\n    });\r\n    const totalSalesYTD = salesYTD.reduce((sum, sale) => sum + sale.quantity * sale.salePrice, 0);\r\n\r\n    const salesMTD = await prisma.sale.findMany({\r\n        where: { createdBy: userId, saleDate: { gte: startOfMonth } },\r\n        include: { product: { select: { price: true } } },\r\n    });\r\n    const totalSalesMTD = salesMTD.reduce((sum, sale) => sum + sale.quantity * sale.salePrice, 0);\r\n\r\n    // Recent sales (last 7 days)\r\n    const sevenDaysAgo = new Date();\r\n    sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\r\n    const recentSales = sales\r\n        .filter(sale => sale.saleDate >= sevenDaysAgo)\r\n        .sort((a, b) => b.saleDate.getTime() - a.saleDate.getTime())\r\n        .slice(0, 10);\r\n\r\n    // Top products (by quantity sold)\r\n    const topProducts = sales\r\n        .reduce((acc, sale) => {\r\n            const name = sale.product.name;\r\n            acc[name] = (acc[name] || 0) + sale.quantity;\r\n            return acc;\r\n        }, {} as Record<string, number>)\r\n    const topProductsArray = Object.entries(topProducts)\r\n        .sort((a, b) => b[1] - a[1])\r\n        .slice(0, 5)\r\n        .map(([name, qty]) => ({ name, qty }));\r\n\r\n    // Sales trend data (preparing data for charts)\r\n    const productList = await prisma.productList.findMany({\r\n        select: { id: true, weightValue: true, packSize: true },\r\n    });\r\n\r\n    if (productList.length === 0) {\r\n        console.warn(\"No products found for tonnage calculation.\");\r\n    }\r\n\r\n    const salesTrendData = sales\r\n        .reduce((acc, sale) => {\r\n            const date = new Date(sale.saleDate).toISOString().split('T')[0];\r\n            const product = productList.find(p => p.id === sale.productId);\r\n            const weightInTons = product ? (product.weightValue * sale.quantity * product.packSize) / 1000 : 0;\r\n\r\n            const existing = acc.find(d => d.date === date);\r\n            if (existing) {\r\n                existing.value += sale.salePrice * sale.quantity;\r\n                existing.quantity += sale.quantity;\r\n                existing.tonnage += weightInTons;\r\n            } else {\r\n                acc.push({\r\n                    date,\r\n                    value: sale.salePrice * sale.quantity,\r\n                    quantity: sale.quantity,\r\n                    tonnage: weightInTons,\r\n                });\r\n            }\r\n            return acc;\r\n        }, [] as ChartDataPoint[])\r\n        .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50\">\r\n            <Sidebar currentPath=\"/sales\" />\r\n            <main className=\"ml-64 p-8 space-y-10\">\r\n                {/* Header */}\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold\">Sales Dashboard</h1>\r\n                    <p className=\"text-gray-500 mt-1\">Track your sales performance and trends</p>\r\n                </div>\r\n\r\n                {/* KPIs */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-10 gap-2\">\r\n                    <KPI title=\"Total Sales\" value={`K${totalSales.toFixed(0)}`} icon={<DollarSign />} color=\"green\" />\r\n                    <KPI title=\"Sales YTD\" value={`K${totalSalesYTD.toFixed(0)}`} icon={<Calendar />} color=\"blue\" />\r\n                    <KPI title=\"Sales MTD\" value={`K${totalSalesMTD.toFixed(0)}`} icon={<Calendar />} color=\"yellow\" />\r\n                    <KPI title=\"Monthly Growth\" value={`${growth}%`} icon={<TrendingUp />} color=\"blue\" />\r\n                    <KPI title=\"Customers\" value={totalCustomers} icon={<Users />} color=\"yellow\" />\r\n                    <KPI title=\"Orders\" value={totalOrders} icon={<ShoppingBag />} color=\"blue\" />\r\n                    <KPI title=\"Avg. Order Value\" value={`K${avgOrderValue.toFixed(0)}`} icon={<TrendingUp />} color=\"purple\" />\r\n                    <KPI title=\"Items per Order\" value={avgItemsPerOrder} icon={<ShoppingBag />} color=\"green\" />\r\n                    <KPI title=\"Conversion Rate\" value={`${conversionRate}%`} icon={<Users />} color=\"purple\" />\r\n\r\n\r\n                </div>\r\n\r\n                {/* Main Grid */}\r\n                <div>\r\n                    <SalesTrendChart\r\n                        salesTrendData={salesTrendData || []}\r\n                        sales={sales || []}\r\n                    />\r\n                </div>\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n                    <TopProducts products={topProductsArray} />\r\n                    {/* Extra Section: Sales by Category */}\r\n                    <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n                        <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                            <Calendar className=\"h-5 w-5 text-blue-500\" /> Sales by Category\r\n                        </h3>\r\n                        {Object.entries(salesByCategory).length === 0 ? (\r\n                            <p className=\"text-sm text-gray-500\">No sales data.</p>\r\n                        ) : (\r\n                            <ul className=\"space-y-3 text-sm\">\r\n                                {Object.entries(salesByCategory).map(([category, value]) => (\r\n                                    <li key={category} className=\"flex justify-between\">\r\n                                        <span>{category}</span>\r\n                                        <span className=\"font-bold\">K{value.toFixed(0)}</span>\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        )}\r\n                    </div>\r\n\r\n                </div>\r\n                <RecentSales sales={recentSales} />\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n\r\ninterface KPIProps {\r\n    title: string;\r\n    value: string;\r\n    icon: React.ReactNode;\r\n    color: 'purple' | 'green' | 'yellow' | 'blue';\r\n}\r\n\r\nfunction KPI({ title, value, icon, color }: KPIProps) {\r\n    const iconColors = {\r\n        purple: \"text-purple-600\",\r\n        green: \"text-green-600\",\r\n        yellow: \"text-yellow-500\",\r\n        blue: \"text-blue-600\",\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white p-4 rounded-xl border flex justify-between items-center\">\r\n            <div>\r\n                <p className=\"text-sm text-gray-500\">{title}</p>\r\n                <h2 className=\"text-lg font-bold\">{value}</h2>\r\n            </div>\r\n            <div className={iconColors[color]} aria-label={`${title} indicator`}>\r\n                {icon}\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 546, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/Inventory/my-app/src/components/sidebar2.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/Inventory/my-app/src/components/sidebar2.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,6SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAwT,GACrV,sFACA","ignoreList":[0]}},
    {"offset": {"line": 560, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/sidebar2.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/Inventory/my-app/src/components/sidebar2.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/Inventory/my-app/src/components/sidebar2.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,6SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoS,GACjU,kEACA","ignoreList":[0]}},
    {"offset": {"line": 574, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 588, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/TopProducts.tsx"],"sourcesContent":["import { Star } from \"lucide-react\";\r\n\r\ninterface Product {\r\n    name: string;\r\n    qty: number;\r\n}\r\n\r\ninterface Props {\r\n    products: Product[];\r\n}\r\n\r\nexport default function TopProducts({ products }: Props) {\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <Star className=\"h-5 w-5 text-yellow-500\" /> Top Selling Products\r\n            </h3>\r\n            {products.length === 0 ? (\r\n                <p className=\"text-sm text-gray-500\">No products sold yet.</p>\r\n            ) : (\r\n                <ul className=\"space-y-3 text-sm\">\r\n                    {products.map((product, index) => (\r\n                        <li key={product.name} className=\"flex justify-between items-center\">\r\n                            <span className=\"truncate font-medium\">\r\n                                {index + 1}. {product.name}\r\n                            </span>\r\n                            <span className=\"font-bold text-purple-600\">{product.qty} units</span>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAAA;;;AAWe,SAAS,YAAY,EAAE,QAAQ,EAAS;IACnD,qBACI,mRAAC;QAAI,WAAU;;0BACX,mRAAC;gBAAG,WAAU;;kCACV,mRAAC,+OAAI;wBAAC,WAAU;;;;;;oBAA4B;;;;;;;YAE/C,SAAS,MAAM,KAAK,kBACjB,mRAAC;gBAAE,WAAU;0BAAwB;;;;;qCAErC,mRAAC;gBAAG,WAAU;0BACT,SAAS,GAAG,CAAC,CAAC,SAAS,sBACpB,mRAAC;wBAAsB,WAAU;;0CAC7B,mRAAC;gCAAK,WAAU;;oCACX,QAAQ;oCAAE;oCAAG,QAAQ,IAAI;;;;;;;0CAE9B,mRAAC;gCAAK,WAAU;;oCAA6B,QAAQ,GAAG;oCAAC;;;;;;;;uBAJpD,QAAQ,IAAI;;;;;;;;;;;;;;;;AAW7C"}},
    {"offset": {"line": 674, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/components/RecentSales.tsx"],"sourcesContent":["import { Clock } from \"lucide-react\";\r\n\r\ninterface Sale {\r\n    id: string;\r\n    customerName: string | null;\r\n    product: { name: string };\r\n    location: { name: string };\r\n    quantity: number;\r\n    salePrice: number;\r\n    saleDate: Date;\r\n}\r\n\r\ninterface Props {\r\n    sales: Sale[];\r\n}\r\n\r\nexport default function RecentSales({ sales }: Props) {\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-shadow\">\r\n            <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <Clock className=\"h-5 w-5 text-blue-500\" /> Recent Sales\r\n            </h3>\r\n            {sales.length === 0 ? (\r\n                <p className=\"text-sm text-gray-500\">No recent sales.</p>\r\n            ) : (\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"min-w-full text-sm\">\r\n                        <thead className=\"text-gray-500 border-b\">\r\n                            <tr>\r\n                                <th className=\"px-4 py-2 text-left\">Customer</th>\r\n                                <th className=\"px-4 py-2 text-left\">Product</th>\r\n                                <th className=\"px-4 py-2 text-left\">Location</th>\r\n                                <th className=\"px-4 py-2 text-right\">Quantity</th>\r\n                                <th className=\"px-4 py-2 text-right\">Price</th>\r\n                                <th className=\"px-4 py-2 text-right\">Revenue</th>\r\n                                <th className=\"px-4 py-2 text-right\">Date</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {sales.slice(0, 10).map((sale) => (\r\n                                <tr key={sale.id} className=\"border-b last:border-0 hover:bg-gray-50\">\r\n                                    <td className=\"px-4 py-3 truncate\">{sale.customerName}</td>\r\n                                    <td className=\"px-4 py-3 truncate\">{sale.product.name}</td>\r\n                                    <td className=\"px-4 py-3 truncate\">{sale.location?.name || 'N/A'}</td>\r\n                                    <td className=\"px-4 py-3 text-right\">{sale.quantity}</td>\r\n                                    <td className=\"px-4 py-3 text-right\">K{sale.salePrice.toFixed(2)}</td>\r\n                                    <td className=\"px-4 py-3 text-right font-medium\">K{(sale.salePrice * sale.quantity).toFixed(2)}</td>\r\n                                    <td className=\"px-4 py-3 text-right text-xs text-gray-500\">\r\n                                        {new Date(sale.saleDate).toLocaleDateString()}\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAAA;;;AAgBe,SAAS,YAAY,EAAE,KAAK,EAAS;IAChD,qBACI,mRAAC;QAAI,WAAU;;0BACX,mRAAC;gBAAG,WAAU;;kCACV,mRAAC,kPAAK;wBAAC,WAAU;;;;;;oBAA0B;;;;;;;YAE9C,MAAM,MAAM,KAAK,kBACd,mRAAC;gBAAE,WAAU;0BAAwB;;;;;qCAErC,mRAAC;gBAAI,WAAU;0BACX,cAAA,mRAAC;oBAAM,WAAU;;sCACb,mRAAC;4BAAM,WAAU;sCACb,cAAA,mRAAC;;kDACG,mRAAC;wCAAG,WAAU;kDAAsB;;;;;;kDACpC,mRAAC;wCAAG,WAAU;kDAAsB;;;;;;kDACpC,mRAAC;wCAAG,WAAU;kDAAsB;;;;;;kDACpC,mRAAC;wCAAG,WAAU;kDAAuB;;;;;;kDACrC,mRAAC;wCAAG,WAAU;kDAAuB;;;;;;kDACrC,mRAAC;wCAAG,WAAU;kDAAuB;;;;;;kDACrC,mRAAC;wCAAG,WAAU;kDAAuB;;;;;;;;;;;;;;;;;sCAG7C,mRAAC;sCACI,MAAM,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,qBACrB,mRAAC;oCAAiB,WAAU;;sDACxB,mRAAC;4CAAG,WAAU;sDAAsB,KAAK,YAAY;;;;;;sDACrD,mRAAC;4CAAG,WAAU;sDAAsB,KAAK,OAAO,CAAC,IAAI;;;;;;sDACrD,mRAAC;4CAAG,WAAU;sDAAsB,KAAK,QAAQ,EAAE,QAAQ;;;;;;sDAC3D,mRAAC;4CAAG,WAAU;sDAAwB,KAAK,QAAQ;;;;;;sDACnD,mRAAC;4CAAG,WAAU;;gDAAuB;gDAAE,KAAK,SAAS,CAAC,OAAO,CAAC;;;;;;;sDAC9D,mRAAC;4CAAG,WAAU;;gDAAmC;gDAAE,CAAC,KAAK,SAAS,GAAG,KAAK,QAAQ,EAAE,OAAO,CAAC;;;;;;;sDAC5F,mRAAC;4CAAG,WAAU;sDACT,IAAI,KAAK,KAAK,QAAQ,EAAE,kBAAkB;;;;;;;mCAR1C,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkBhD"}},
    {"offset": {"line": 885, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/stack/server.tsx"],"sourcesContent":["import \"server-only\";\n\nimport { StackServerApp } from \"@stackframe/stack\";\nimport { stackClientApp } from \"./client\";\n\nexport const stackServerApp = new StackServerApp({\n  inheritsFrom: stackClientApp,\n});\n"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;;;;AAEO,MAAM,iBAAiB,IAAI,yQAAc,CAAC;IAC/C,cAAc,8KAAc;AAC9B"}},
    {"offset": {"line": 902, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/auth.ts"],"sourcesContent":["import { stackServerApp } from \"@/stack/server\";\nimport { redirect } from \"next/navigation\";\n\n\nexport async function getCurrentUser() {\n    const user = await stackServerApp.getUser()\n    if (!user) {\n        redirect(\"/sign-in\");\n    }\n\n    return user;\n}"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAGO,eAAe;IAClB,MAAM,OAAO,MAAM,8KAAc,CAAC,OAAO;IACzC,IAAI,CAAC,MAAM;QACP,IAAA,sOAAQ,EAAC;IACb;IAEA,OAAO;AACX"}},
    {"offset": {"line": 924, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/lib/prisma.ts"],"sourcesContent":["import \"dotenv/config\";\nimport { PrismaPg } from '@prisma/adapter-pg'\nimport { PrismaClient } from '../generated/prisma/client'\n\nconst connectionString = `${process.env.DATABASE_URL}`\n\nconst adapter = new PrismaPg({ connectionString })\nconst prisma = new PrismaClient({ adapter })\n\nexport { prisma };"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;AAEA,MAAM,mBAAmB,GAAG,QAAQ,GAAG,CAAC,YAAY,EAAE;AAEtD,MAAM,UAAU,IAAI,4MAAQ,CAAC;IAAE;AAAiB;AAChD,MAAM,SAAS,IAAI,yLAAY,CAAC;IAAE;AAAQ"}}]
}