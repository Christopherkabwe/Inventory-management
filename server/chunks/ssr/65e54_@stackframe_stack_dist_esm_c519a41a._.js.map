{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/node_modules/.pnpm/oauth4webapi%402.10.3/node_modules/oauth4webapi/build/index.js","file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/lib/cookie.ts"],"sourcesContent":["let USER_AGENT;\nif (typeof navigator === 'undefined' || !navigator.userAgent?.startsWith?.('Mozilla/5.0 ')) {\n    const NAME = 'oauth4webapi';\n    const VERSION = 'v2.10.3';\n    USER_AGENT = `${NAME}/${VERSION}`;\n}\nfunction looseInstanceOf(input, expected) {\n    if (input == null) {\n        return false;\n    }\n    try {\n        return (input instanceof expected ||\n            Object.getPrototypeOf(input)[Symbol.toStringTag] === expected.prototype[Symbol.toStringTag]);\n    }\n    catch {\n        return false;\n    }\n}\nexport const clockSkew = Symbol();\nexport const clockTolerance = Symbol();\nexport const customFetch = Symbol();\nexport const useMtlsAlias = Symbol();\nconst encoder = new TextEncoder();\nconst decoder = new TextDecoder();\nfunction buf(input) {\n    if (typeof input === 'string') {\n        return encoder.encode(input);\n    }\n    return decoder.decode(input);\n}\nconst CHUNK_SIZE = 0x8000;\nfunction encodeBase64Url(input) {\n    if (input instanceof ArrayBuffer) {\n        input = new Uint8Array(input);\n    }\n    const arr = [];\n    for (let i = 0; i < input.byteLength; i += CHUNK_SIZE) {\n        arr.push(String.fromCharCode.apply(null, input.subarray(i, i + CHUNK_SIZE)));\n    }\n    return btoa(arr.join('')).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n}\nfunction decodeBase64Url(input) {\n    try {\n        const binary = atob(input.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, ''));\n        const bytes = new Uint8Array(binary.length);\n        for (let i = 0; i < binary.length; i++) {\n            bytes[i] = binary.charCodeAt(i);\n        }\n        return bytes;\n    }\n    catch (cause) {\n        throw new OPE('The input to be decoded is not correctly encoded.', { cause });\n    }\n}\nfunction b64u(input) {\n    if (typeof input === 'string') {\n        return decodeBase64Url(input);\n    }\n    return encodeBase64Url(input);\n}\nclass LRU {\n    constructor(maxSize) {\n        this.cache = new Map();\n        this._cache = new Map();\n        this.maxSize = maxSize;\n    }\n    get(key) {\n        let v = this.cache.get(key);\n        if (v) {\n            return v;\n        }\n        if ((v = this._cache.get(key))) {\n            this.update(key, v);\n            return v;\n        }\n        return undefined;\n    }\n    has(key) {\n        return this.cache.has(key) || this._cache.has(key);\n    }\n    set(key, value) {\n        if (this.cache.has(key)) {\n            this.cache.set(key, value);\n        }\n        else {\n            this.update(key, value);\n        }\n        return this;\n    }\n    delete(key) {\n        if (this.cache.has(key)) {\n            return this.cache.delete(key);\n        }\n        if (this._cache.has(key)) {\n            return this._cache.delete(key);\n        }\n        return false;\n    }\n    update(key, value) {\n        this.cache.set(key, value);\n        if (this.cache.size >= this.maxSize) {\n            this._cache = this.cache;\n            this.cache = new Map();\n        }\n    }\n}\nexport class UnsupportedOperationError extends Error {\n    constructor(message) {\n        super(message ?? 'operation not supported');\n        this.name = this.constructor.name;\n        Error.captureStackTrace?.(this, this.constructor);\n    }\n}\nexport class OperationProcessingError extends Error {\n    constructor(message, options) {\n        super(message, options);\n        this.name = this.constructor.name;\n        Error.captureStackTrace?.(this, this.constructor);\n    }\n}\nconst OPE = OperationProcessingError;\nconst dpopNonces = new LRU(100);\nfunction isCryptoKey(key) {\n    return key instanceof CryptoKey;\n}\nfunction isPrivateKey(key) {\n    return isCryptoKey(key) && key.type === 'private';\n}\nfunction isPublicKey(key) {\n    return isCryptoKey(key) && key.type === 'public';\n}\nconst SUPPORTED_JWS_ALGS = [\n    'PS256',\n    'ES256',\n    'RS256',\n    'PS384',\n    'ES384',\n    'RS384',\n    'PS512',\n    'ES512',\n    'RS512',\n    'EdDSA',\n];\nfunction processDpopNonce(response) {\n    try {\n        const nonce = response.headers.get('dpop-nonce');\n        if (nonce) {\n            dpopNonces.set(new URL(response.url).origin, nonce);\n        }\n    }\n    catch { }\n    return response;\n}\nfunction normalizeTyp(value) {\n    return value.toLowerCase().replace(/^application\\//, '');\n}\nfunction isJsonObject(input) {\n    if (input === null || typeof input !== 'object' || Array.isArray(input)) {\n        return false;\n    }\n    return true;\n}\nfunction prepareHeaders(input) {\n    if (looseInstanceOf(input, Headers)) {\n        input = Object.fromEntries(input.entries());\n    }\n    const headers = new Headers(input);\n    if (USER_AGENT && !headers.has('user-agent')) {\n        headers.set('user-agent', USER_AGENT);\n    }\n    if (headers.has('authorization')) {\n        throw new TypeError('\"options.headers\" must not include the \"authorization\" header name');\n    }\n    if (headers.has('dpop')) {\n        throw new TypeError('\"options.headers\" must not include the \"dpop\" header name');\n    }\n    return headers;\n}\nfunction signal(value) {\n    if (typeof value === 'function') {\n        value = value();\n    }\n    if (!(value instanceof AbortSignal)) {\n        throw new TypeError('\"options.signal\" must return or be an instance of AbortSignal');\n    }\n    return value;\n}\nexport async function discoveryRequest(issuerIdentifier, options) {\n    if (!(issuerIdentifier instanceof URL)) {\n        throw new TypeError('\"issuerIdentifier\" must be an instance of URL');\n    }\n    if (issuerIdentifier.protocol !== 'https:' && issuerIdentifier.protocol !== 'http:') {\n        throw new TypeError('\"issuer.protocol\" must be \"https:\" or \"http:\"');\n    }\n    const url = new URL(issuerIdentifier.href);\n    switch (options?.algorithm) {\n        case undefined:\n        case 'oidc':\n            url.pathname = `${url.pathname}/.well-known/openid-configuration`.replace('//', '/');\n            break;\n        case 'oauth2':\n            if (url.pathname === '/') {\n                url.pathname = '.well-known/oauth-authorization-server';\n            }\n            else {\n                url.pathname = `.well-known/oauth-authorization-server/${url.pathname}`.replace('//', '/');\n            }\n            break;\n        default:\n            throw new TypeError('\"options.algorithm\" must be \"oidc\" (default), or \"oauth2\"');\n    }\n    const headers = prepareHeaders(options?.headers);\n    headers.set('accept', 'application/json');\n    return (options?.[customFetch] || fetch)(url.href, {\n        headers: Object.fromEntries(headers.entries()),\n        method: 'GET',\n        redirect: 'manual',\n        signal: options?.signal ? signal(options.signal) : null,\n    }).then(processDpopNonce);\n}\nfunction validateString(input) {\n    return typeof input === 'string' && input.length !== 0;\n}\nexport async function processDiscoveryResponse(expectedIssuerIdentifier, response) {\n    if (!(expectedIssuerIdentifier instanceof URL)) {\n        throw new TypeError('\"expectedIssuer\" must be an instance of URL');\n    }\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        throw new OPE('\"response\" is not a conform Authorization Server Metadata response');\n    }\n    assertReadableResponse(response);\n    let json;\n    try {\n        json = await response.json();\n    }\n    catch (cause) {\n        throw new OPE('failed to parse \"response\" body as JSON', { cause });\n    }\n    if (!isJsonObject(json)) {\n        throw new OPE('\"response\" body must be a top level object');\n    }\n    if (!validateString(json.issuer)) {\n        throw new OPE('\"response\" body \"issuer\" property must be a non-empty string');\n    }\n    if (new URL(json.issuer).href !== expectedIssuerIdentifier.href) {\n        throw new OPE('\"response\" body \"issuer\" does not match \"expectedIssuer\"');\n    }\n    return json;\n}\nfunction randomBytes() {\n    return b64u(crypto.getRandomValues(new Uint8Array(32)));\n}\nexport function generateRandomCodeVerifier() {\n    return randomBytes();\n}\nexport function generateRandomState() {\n    return randomBytes();\n}\nexport function generateRandomNonce() {\n    return randomBytes();\n}\nexport async function calculatePKCECodeChallenge(codeVerifier) {\n    if (!validateString(codeVerifier)) {\n        throw new TypeError('\"codeVerifier\" must be a non-empty string');\n    }\n    return b64u(await crypto.subtle.digest('SHA-256', buf(codeVerifier)));\n}\nfunction getKeyAndKid(input) {\n    if (input instanceof CryptoKey) {\n        return { key: input };\n    }\n    if (!(input?.key instanceof CryptoKey)) {\n        return {};\n    }\n    if (input.kid !== undefined && !validateString(input.kid)) {\n        throw new TypeError('\"kid\" must be a non-empty string');\n    }\n    return { key: input.key, kid: input.kid };\n}\nfunction formUrlEncode(token) {\n    return encodeURIComponent(token).replace(/%20/g, '+');\n}\nfunction clientSecretBasic(clientId, clientSecret) {\n    const username = formUrlEncode(clientId);\n    const password = formUrlEncode(clientSecret);\n    const credentials = btoa(`${username}:${password}`);\n    return `Basic ${credentials}`;\n}\nfunction psAlg(key) {\n    switch (key.algorithm.hash.name) {\n        case 'SHA-256':\n            return 'PS256';\n        case 'SHA-384':\n            return 'PS384';\n        case 'SHA-512':\n            return 'PS512';\n        default:\n            throw new UnsupportedOperationError('unsupported RsaHashedKeyAlgorithm hash name');\n    }\n}\nfunction rsAlg(key) {\n    switch (key.algorithm.hash.name) {\n        case 'SHA-256':\n            return 'RS256';\n        case 'SHA-384':\n            return 'RS384';\n        case 'SHA-512':\n            return 'RS512';\n        default:\n            throw new UnsupportedOperationError('unsupported RsaHashedKeyAlgorithm hash name');\n    }\n}\nfunction esAlg(key) {\n    switch (key.algorithm.namedCurve) {\n        case 'P-256':\n            return 'ES256';\n        case 'P-384':\n            return 'ES384';\n        case 'P-521':\n            return 'ES512';\n        default:\n            throw new UnsupportedOperationError('unsupported EcKeyAlgorithm namedCurve');\n    }\n}\nfunction keyToJws(key) {\n    switch (key.algorithm.name) {\n        case 'RSA-PSS':\n            return psAlg(key);\n        case 'RSASSA-PKCS1-v1_5':\n            return rsAlg(key);\n        case 'ECDSA':\n            return esAlg(key);\n        case 'Ed25519':\n        case 'Ed448':\n            return 'EdDSA';\n        default:\n            throw new UnsupportedOperationError('unsupported CryptoKey algorithm name');\n    }\n}\nfunction getClockSkew(client) {\n    const skew = client?.[clockSkew];\n    return typeof skew === 'number' && Number.isFinite(skew) ? skew : 0;\n}\nfunction getClockTolerance(client) {\n    const tolerance = client?.[clockTolerance];\n    return typeof tolerance === 'number' && Number.isFinite(tolerance) && Math.sign(tolerance) !== -1\n        ? tolerance\n        : 30;\n}\nfunction epochTime() {\n    return Math.floor(Date.now() / 1000);\n}\nfunction clientAssertion(as, client) {\n    const now = epochTime() + getClockSkew(client);\n    return {\n        jti: randomBytes(),\n        aud: [as.issuer, as.token_endpoint],\n        exp: now + 60,\n        iat: now,\n        nbf: now,\n        iss: client.client_id,\n        sub: client.client_id,\n    };\n}\nasync function privateKeyJwt(as, client, key, kid) {\n    return jwt({\n        alg: keyToJws(key),\n        kid,\n    }, clientAssertion(as, client), key);\n}\nfunction assertAs(as) {\n    if (typeof as !== 'object' || as === null) {\n        throw new TypeError('\"as\" must be an object');\n    }\n    if (!validateString(as.issuer)) {\n        throw new TypeError('\"as.issuer\" property must be a non-empty string');\n    }\n    return true;\n}\nfunction assertClient(client) {\n    if (typeof client !== 'object' || client === null) {\n        throw new TypeError('\"client\" must be an object');\n    }\n    if (!validateString(client.client_id)) {\n        throw new TypeError('\"client.client_id\" property must be a non-empty string');\n    }\n    return true;\n}\nfunction assertClientSecret(clientSecret) {\n    if (!validateString(clientSecret)) {\n        throw new TypeError('\"client.client_secret\" property must be a non-empty string');\n    }\n    return clientSecret;\n}\nfunction assertNoClientPrivateKey(clientAuthMethod, clientPrivateKey) {\n    if (clientPrivateKey !== undefined) {\n        throw new TypeError(`\"options.clientPrivateKey\" property must not be provided when ${clientAuthMethod} client authentication method is used.`);\n    }\n}\nfunction assertNoClientSecret(clientAuthMethod, clientSecret) {\n    if (clientSecret !== undefined) {\n        throw new TypeError(`\"client.client_secret\" property must not be provided when ${clientAuthMethod} client authentication method is used.`);\n    }\n}\nasync function clientAuthentication(as, client, body, headers, clientPrivateKey) {\n    body.delete('client_secret');\n    body.delete('client_assertion_type');\n    body.delete('client_assertion');\n    switch (client.token_endpoint_auth_method) {\n        case undefined:\n        case 'client_secret_basic': {\n            assertNoClientPrivateKey('client_secret_basic', clientPrivateKey);\n            headers.set('authorization', clientSecretBasic(client.client_id, assertClientSecret(client.client_secret)));\n            break;\n        }\n        case 'client_secret_post': {\n            assertNoClientPrivateKey('client_secret_post', clientPrivateKey);\n            body.set('client_id', client.client_id);\n            body.set('client_secret', assertClientSecret(client.client_secret));\n            break;\n        }\n        case 'private_key_jwt': {\n            assertNoClientSecret('private_key_jwt', client.client_secret);\n            if (clientPrivateKey === undefined) {\n                throw new TypeError('\"options.clientPrivateKey\" must be provided when \"client.token_endpoint_auth_method\" is \"private_key_jwt\"');\n            }\n            const { key, kid } = getKeyAndKid(clientPrivateKey);\n            if (!isPrivateKey(key)) {\n                throw new TypeError('\"options.clientPrivateKey.key\" must be a private CryptoKey');\n            }\n            body.set('client_id', client.client_id);\n            body.set('client_assertion_type', 'urn:ietf:params:oauth:client-assertion-type:jwt-bearer');\n            body.set('client_assertion', await privateKeyJwt(as, client, key, kid));\n            break;\n        }\n        case 'tls_client_auth':\n        case 'self_signed_tls_client_auth':\n        case 'none': {\n            assertNoClientSecret(client.token_endpoint_auth_method, client.client_secret);\n            assertNoClientPrivateKey(client.token_endpoint_auth_method, clientPrivateKey);\n            body.set('client_id', client.client_id);\n            break;\n        }\n        default:\n            throw new UnsupportedOperationError('unsupported client token_endpoint_auth_method');\n    }\n}\nasync function jwt(header, claimsSet, key) {\n    if (!key.usages.includes('sign')) {\n        throw new TypeError('CryptoKey instances used for signing assertions must include \"sign\" in their \"usages\"');\n    }\n    const input = `${b64u(buf(JSON.stringify(header)))}.${b64u(buf(JSON.stringify(claimsSet)))}`;\n    const signature = b64u(await crypto.subtle.sign(keyToSubtle(key), key, buf(input)));\n    return `${input}.${signature}`;\n}\nexport async function issueRequestObject(as, client, parameters, privateKey) {\n    assertAs(as);\n    assertClient(client);\n    parameters = new URLSearchParams(parameters);\n    const { key, kid } = getKeyAndKid(privateKey);\n    if (!isPrivateKey(key)) {\n        throw new TypeError('\"privateKey.key\" must be a private CryptoKey');\n    }\n    parameters.set('client_id', client.client_id);\n    const now = epochTime() + getClockSkew(client);\n    const claims = {\n        ...Object.fromEntries(parameters.entries()),\n        jti: randomBytes(),\n        aud: as.issuer,\n        exp: now + 60,\n        iat: now,\n        nbf: now,\n        iss: client.client_id,\n    };\n    let resource;\n    if (parameters.has('resource') &&\n        (resource = parameters.getAll('resource')) &&\n        resource.length > 1) {\n        claims.resource = resource;\n    }\n    {\n        let value = parameters.get('max_age');\n        if (value !== null) {\n            claims.max_age = parseInt(value, 10);\n            if (!Number.isFinite(claims.max_age)) {\n                throw new OPE('\"max_age\" parameter must be a number');\n            }\n        }\n    }\n    {\n        let value = parameters.get('claims');\n        if (value !== null) {\n            try {\n                claims.claims = JSON.parse(value);\n            }\n            catch (cause) {\n                throw new OPE('failed to parse the \"claims\" parameter as JSON', { cause });\n            }\n            if (!isJsonObject(claims.claims)) {\n                throw new OPE('\"claims\" parameter must be a JSON with a top level object');\n            }\n        }\n    }\n    {\n        let value = parameters.get('authorization_details');\n        if (value !== null) {\n            try {\n                claims.authorization_details = JSON.parse(value);\n            }\n            catch (cause) {\n                throw new OPE('failed to parse the \"authorization_details\" parameter as JSON', { cause });\n            }\n            if (!Array.isArray(claims.authorization_details)) {\n                throw new OPE('\"authorization_details\" parameter must be a JSON with a top level array');\n            }\n        }\n    }\n    return jwt({\n        alg: keyToJws(key),\n        typ: 'oauth-authz-req+jwt',\n        kid,\n    }, claims, key);\n}\nasync function dpopProofJwt(headers, options, url, htm, clockSkew, accessToken) {\n    const { privateKey, publicKey, nonce = dpopNonces.get(url.origin) } = options;\n    if (!isPrivateKey(privateKey)) {\n        throw new TypeError('\"DPoP.privateKey\" must be a private CryptoKey');\n    }\n    if (!isPublicKey(publicKey)) {\n        throw new TypeError('\"DPoP.publicKey\" must be a public CryptoKey');\n    }\n    if (nonce !== undefined && !validateString(nonce)) {\n        throw new TypeError('\"DPoP.nonce\" must be a non-empty string or undefined');\n    }\n    if (!publicKey.extractable) {\n        throw new TypeError('\"DPoP.publicKey.extractable\" must be true');\n    }\n    const now = epochTime() + clockSkew;\n    const proof = await jwt({\n        alg: keyToJws(privateKey),\n        typ: 'dpop+jwt',\n        jwk: await publicJwk(publicKey),\n    }, {\n        iat: now,\n        jti: randomBytes(),\n        htm,\n        nonce,\n        htu: `${url.origin}${url.pathname}`,\n        ath: accessToken ? b64u(await crypto.subtle.digest('SHA-256', buf(accessToken))) : undefined,\n    }, privateKey);\n    headers.set('dpop', proof);\n}\nlet jwkCache;\nasync function getSetPublicJwkCache(key) {\n    const { kty, e, n, x, y, crv } = await crypto.subtle.exportKey('jwk', key);\n    const jwk = { kty, e, n, x, y, crv };\n    jwkCache.set(key, jwk);\n    return jwk;\n}\nasync function publicJwk(key) {\n    jwkCache || (jwkCache = new WeakMap());\n    return jwkCache.get(key) || getSetPublicJwkCache(key);\n}\nfunction validateEndpoint(value, endpoint, options) {\n    if (typeof value !== 'string') {\n        if (options?.[useMtlsAlias]) {\n            throw new TypeError(`\"as.mtls_endpoint_aliases.${endpoint}\" must be a string`);\n        }\n        throw new TypeError(`\"as.${endpoint}\" must be a string`);\n    }\n    return new URL(value);\n}\nfunction resolveEndpoint(as, endpoint, options) {\n    if (options?.[useMtlsAlias] && as.mtls_endpoint_aliases && endpoint in as.mtls_endpoint_aliases) {\n        return validateEndpoint(as.mtls_endpoint_aliases[endpoint], endpoint, options);\n    }\n    return validateEndpoint(as[endpoint], endpoint);\n}\nexport async function pushedAuthorizationRequest(as, client, parameters, options) {\n    assertAs(as);\n    assertClient(client);\n    const url = resolveEndpoint(as, 'pushed_authorization_request_endpoint', options);\n    const body = new URLSearchParams(parameters);\n    body.set('client_id', client.client_id);\n    const headers = prepareHeaders(options?.headers);\n    headers.set('accept', 'application/json');\n    if (options?.DPoP !== undefined) {\n        await dpopProofJwt(headers, options.DPoP, url, 'POST', getClockSkew(client));\n    }\n    return authenticatedRequest(as, client, 'POST', url, body, headers, options);\n}\nexport function isOAuth2Error(input) {\n    const value = input;\n    if (typeof value !== 'object' || Array.isArray(value) || value === null) {\n        return false;\n    }\n    return value.error !== undefined;\n}\nfunction unquote(value) {\n    if (value.length >= 2 && value[0] === '\"' && value[value.length - 1] === '\"') {\n        return value.slice(1, -1);\n    }\n    return value;\n}\nconst SPLIT_REGEXP = /((?:,|, )?[0-9a-zA-Z!#$%&'*+-.^_`|~]+=)/;\nconst SCHEMES_REGEXP = /(?:^|, ?)([0-9a-zA-Z!#$%&'*+\\-.^_`|~]+)(?=$|[ ,])/g;\nfunction wwwAuth(scheme, params) {\n    const arr = params.split(SPLIT_REGEXP).slice(1);\n    if (!arr.length) {\n        return { scheme: scheme.toLowerCase(), parameters: {} };\n    }\n    arr[arr.length - 1] = arr[arr.length - 1].replace(/,$/, '');\n    const parameters = {};\n    for (let i = 1; i < arr.length; i += 2) {\n        const idx = i;\n        if (arr[idx][0] === '\"') {\n            while (arr[idx].slice(-1) !== '\"' && ++i < arr.length) {\n                arr[idx] += arr[i];\n            }\n        }\n        const key = arr[idx - 1].replace(/^(?:, ?)|=$/g, '').toLowerCase();\n        parameters[key] = unquote(arr[idx]);\n    }\n    return {\n        scheme: scheme.toLowerCase(),\n        parameters,\n    };\n}\nexport function parseWwwAuthenticateChallenges(response) {\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    const header = response.headers.get('www-authenticate');\n    if (header === null) {\n        return undefined;\n    }\n    const result = [];\n    for (const { 1: scheme, index } of header.matchAll(SCHEMES_REGEXP)) {\n        result.push([scheme, index]);\n    }\n    if (!result.length) {\n        return undefined;\n    }\n    const challenges = result.map(([scheme, indexOf], i, others) => {\n        const next = others[i + 1];\n        let parameters;\n        if (next) {\n            parameters = header.slice(indexOf, next[1]);\n        }\n        else {\n            parameters = header.slice(indexOf);\n        }\n        return wwwAuth(scheme, parameters);\n    });\n    return challenges;\n}\nexport async function processPushedAuthorizationResponse(as, client, response) {\n    assertAs(as);\n    assertClient(client);\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 201) {\n        let err;\n        if ((err = await handleOAuthBodyError(response))) {\n            return err;\n        }\n        throw new OPE('\"response\" is not a conform Pushed Authorization Request Endpoint response');\n    }\n    assertReadableResponse(response);\n    let json;\n    try {\n        json = await response.json();\n    }\n    catch (cause) {\n        throw new OPE('failed to parse \"response\" body as JSON', { cause });\n    }\n    if (!isJsonObject(json)) {\n        throw new OPE('\"response\" body must be a top level object');\n    }\n    if (!validateString(json.request_uri)) {\n        throw new OPE('\"response\" body \"request_uri\" property must be a non-empty string');\n    }\n    if (typeof json.expires_in !== 'number' || json.expires_in <= 0) {\n        throw new OPE('\"response\" body \"expires_in\" property must be a positive number');\n    }\n    return json;\n}\nexport async function protectedResourceRequest(accessToken, method, url, headers, body, options) {\n    if (!validateString(accessToken)) {\n        throw new TypeError('\"accessToken\" must be a non-empty string');\n    }\n    if (!(url instanceof URL)) {\n        throw new TypeError('\"url\" must be an instance of URL');\n    }\n    headers = prepareHeaders(headers);\n    if (options?.DPoP === undefined) {\n        headers.set('authorization', `Bearer ${accessToken}`);\n    }\n    else {\n        await dpopProofJwt(headers, options.DPoP, url, 'GET', getClockSkew({ [clockSkew]: options?.[clockSkew] }), accessToken);\n        headers.set('authorization', `DPoP ${accessToken}`);\n    }\n    return (options?.[customFetch] || fetch)(url.href, {\n        body,\n        headers: Object.fromEntries(headers.entries()),\n        method,\n        redirect: 'manual',\n        signal: options?.signal ? signal(options.signal) : null,\n    }).then(processDpopNonce);\n}\nexport async function userInfoRequest(as, client, accessToken, options) {\n    assertAs(as);\n    assertClient(client);\n    const url = resolveEndpoint(as, 'userinfo_endpoint', options);\n    const headers = prepareHeaders(options?.headers);\n    if (client.userinfo_signed_response_alg) {\n        headers.set('accept', 'application/jwt');\n    }\n    else {\n        headers.set('accept', 'application/json');\n        headers.append('accept', 'application/jwt');\n    }\n    return protectedResourceRequest(accessToken, 'GET', url, headers, null, {\n        ...options,\n        [clockSkew]: getClockSkew(client),\n    });\n}\nlet jwksCache;\nasync function getPublicSigKeyFromIssuerJwksUri(as, options, header) {\n    const { alg, kid } = header;\n    checkSupportedJwsAlg(alg);\n    let jwks;\n    let age;\n    jwksCache || (jwksCache = new WeakMap());\n    if (jwksCache.has(as)) {\n        ;\n        ({ jwks, age } = jwksCache.get(as));\n        if (age >= 300) {\n            jwksCache.delete(as);\n            return getPublicSigKeyFromIssuerJwksUri(as, options, header);\n        }\n    }\n    else {\n        jwks = await jwksRequest(as, options).then(processJwksResponse);\n        age = 0;\n        jwksCache.set(as, {\n            jwks,\n            iat: epochTime(),\n            get age() {\n                return epochTime() - this.iat;\n            },\n        });\n    }\n    let kty;\n    switch (alg.slice(0, 2)) {\n        case 'RS':\n        case 'PS':\n            kty = 'RSA';\n            break;\n        case 'ES':\n            kty = 'EC';\n            break;\n        case 'Ed':\n            kty = 'OKP';\n            break;\n        default:\n            throw new UnsupportedOperationError();\n    }\n    const candidates = jwks.keys.filter((jwk) => {\n        if (jwk.kty !== kty) {\n            return false;\n        }\n        if (kid !== undefined && kid !== jwk.kid) {\n            return false;\n        }\n        if (jwk.alg !== undefined && alg !== jwk.alg) {\n            return false;\n        }\n        if (jwk.use !== undefined && jwk.use !== 'sig') {\n            return false;\n        }\n        if (jwk.key_ops?.includes('verify') === false) {\n            return false;\n        }\n        switch (true) {\n            case alg === 'ES256' && jwk.crv !== 'P-256':\n            case alg === 'ES384' && jwk.crv !== 'P-384':\n            case alg === 'ES512' && jwk.crv !== 'P-521':\n            case alg === 'EdDSA' && !(jwk.crv === 'Ed25519' || jwk.crv === 'Ed448'):\n                return false;\n        }\n        return true;\n    });\n    const { 0: jwk, length } = candidates;\n    if (!length) {\n        if (age >= 60) {\n            jwksCache.delete(as);\n            return getPublicSigKeyFromIssuerJwksUri(as, options, header);\n        }\n        throw new OPE('error when selecting a JWT verification key, no applicable keys found');\n    }\n    if (length !== 1) {\n        throw new OPE('error when selecting a JWT verification key, multiple applicable keys found, a \"kid\" JWT Header Parameter is required');\n    }\n    const key = await importJwk(alg, jwk);\n    if (key.type !== 'public') {\n        throw new OPE('jwks_uri must only contain public keys');\n    }\n    return key;\n}\nexport const skipSubjectCheck = Symbol();\nfunction getContentType(response) {\n    return response.headers.get('content-type')?.split(';')[0];\n}\nexport async function processUserInfoResponse(as, client, expectedSubject, response) {\n    assertAs(as);\n    assertClient(client);\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        throw new OPE('\"response\" is not a conform UserInfo Endpoint response');\n    }\n    let json;\n    if (getContentType(response) === 'application/jwt') {\n        assertReadableResponse(response);\n        const { claims } = await validateJwt(await response.text(), checkSigningAlgorithm.bind(undefined, client.userinfo_signed_response_alg, as.userinfo_signing_alg_values_supported), noSignatureCheck, getClockSkew(client), getClockTolerance(client))\n            .then(validateOptionalAudience.bind(undefined, client.client_id))\n            .then(validateOptionalIssuer.bind(undefined, as.issuer));\n        json = claims;\n    }\n    else {\n        if (client.userinfo_signed_response_alg) {\n            throw new OPE('JWT UserInfo Response expected');\n        }\n        assertReadableResponse(response);\n        try {\n            json = await response.json();\n        }\n        catch (cause) {\n            throw new OPE('failed to parse \"response\" body as JSON', { cause });\n        }\n    }\n    if (!isJsonObject(json)) {\n        throw new OPE('\"response\" body must be a top level object');\n    }\n    if (!validateString(json.sub)) {\n        throw new OPE('\"response\" body \"sub\" property must be a non-empty string');\n    }\n    switch (expectedSubject) {\n        case skipSubjectCheck:\n            break;\n        default:\n            if (!validateString(expectedSubject)) {\n                throw new OPE('\"expectedSubject\" must be a non-empty string');\n            }\n            if (json.sub !== expectedSubject) {\n                throw new OPE('unexpected \"response\" body \"sub\" value');\n            }\n    }\n    return json;\n}\nasync function authenticatedRequest(as, client, method, url, body, headers, options) {\n    await clientAuthentication(as, client, body, headers, options?.clientPrivateKey);\n    headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n    return (options?.[customFetch] || fetch)(url.href, {\n        body,\n        headers: Object.fromEntries(headers.entries()),\n        method,\n        redirect: 'manual',\n        signal: options?.signal ? signal(options.signal) : null,\n    }).then(processDpopNonce);\n}\nasync function tokenEndpointRequest(as, client, grantType, parameters, options) {\n    const url = resolveEndpoint(as, 'token_endpoint', options);\n    parameters.set('grant_type', grantType);\n    const headers = prepareHeaders(options?.headers);\n    headers.set('accept', 'application/json');\n    if (options?.DPoP !== undefined) {\n        await dpopProofJwt(headers, options.DPoP, url, 'POST', getClockSkew(client));\n    }\n    return authenticatedRequest(as, client, 'POST', url, parameters, headers, options);\n}\nexport async function refreshTokenGrantRequest(as, client, refreshToken, options) {\n    assertAs(as);\n    assertClient(client);\n    if (!validateString(refreshToken)) {\n        throw new TypeError('\"refreshToken\" must be a non-empty string');\n    }\n    const parameters = new URLSearchParams(options?.additionalParameters);\n    parameters.set('refresh_token', refreshToken);\n    return tokenEndpointRequest(as, client, 'refresh_token', parameters, options);\n}\nconst idTokenClaims = new WeakMap();\nexport function getValidatedIdTokenClaims(ref) {\n    if (!ref.id_token) {\n        return undefined;\n    }\n    const claims = idTokenClaims.get(ref);\n    if (!claims) {\n        throw new TypeError('\"ref\" was already garbage collected or did not resolve from the proper sources');\n    }\n    return claims;\n}\nasync function processGenericAccessTokenResponse(as, client, response, ignoreIdToken = false, ignoreRefreshToken = false) {\n    assertAs(as);\n    assertClient(client);\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        let err;\n        if ((err = await handleOAuthBodyError(response))) {\n            return err;\n        }\n        throw new OPE('\"response\" is not a conform Token Endpoint response');\n    }\n    assertReadableResponse(response);\n    let json;\n    try {\n        json = await response.json();\n    }\n    catch (cause) {\n        throw new OPE('failed to parse \"response\" body as JSON', { cause });\n    }\n    if (!isJsonObject(json)) {\n        throw new OPE('\"response\" body must be a top level object');\n    }\n    if (!validateString(json.access_token)) {\n        throw new OPE('\"response\" body \"access_token\" property must be a non-empty string');\n    }\n    if (!validateString(json.token_type)) {\n        throw new OPE('\"response\" body \"token_type\" property must be a non-empty string');\n    }\n    json.token_type = json.token_type.toLowerCase();\n    if (json.token_type !== 'dpop' && json.token_type !== 'bearer') {\n        throw new UnsupportedOperationError('unsupported `token_type` value');\n    }\n    if (json.expires_in !== undefined &&\n        (typeof json.expires_in !== 'number' || json.expires_in <= 0)) {\n        throw new OPE('\"response\" body \"expires_in\" property must be a positive number');\n    }\n    if (!ignoreRefreshToken &&\n        json.refresh_token !== undefined &&\n        !validateString(json.refresh_token)) {\n        throw new OPE('\"response\" body \"refresh_token\" property must be a non-empty string');\n    }\n    if (json.scope !== undefined && typeof json.scope !== 'string') {\n        throw new OPE('\"response\" body \"scope\" property must be a string');\n    }\n    if (!ignoreIdToken) {\n        if (json.id_token !== undefined && !validateString(json.id_token)) {\n            throw new OPE('\"response\" body \"id_token\" property must be a non-empty string');\n        }\n        if (json.id_token) {\n            const { claims } = await validateJwt(json.id_token, checkSigningAlgorithm.bind(undefined, client.id_token_signed_response_alg, as.id_token_signing_alg_values_supported), noSignatureCheck, getClockSkew(client), getClockTolerance(client))\n                .then(validatePresence.bind(undefined, ['aud', 'exp', 'iat', 'iss', 'sub']))\n                .then(validateIssuer.bind(undefined, as.issuer))\n                .then(validateAudience.bind(undefined, client.client_id));\n            if (Array.isArray(claims.aud) && claims.aud.length !== 1 && claims.azp !== client.client_id) {\n                throw new OPE('unexpected ID Token \"azp\" (authorized party) claim value');\n            }\n            if (client.require_auth_time && typeof claims.auth_time !== 'number') {\n                throw new OPE('unexpected ID Token \"auth_time\" (authentication time) claim value');\n            }\n            idTokenClaims.set(json, claims);\n        }\n    }\n    return json;\n}\nexport async function processRefreshTokenResponse(as, client, response) {\n    return processGenericAccessTokenResponse(as, client, response);\n}\nfunction validateOptionalAudience(expected, result) {\n    if (result.claims.aud !== undefined) {\n        return validateAudience(expected, result);\n    }\n    return result;\n}\nfunction validateAudience(expected, result) {\n    if (Array.isArray(result.claims.aud)) {\n        if (!result.claims.aud.includes(expected)) {\n            throw new OPE('unexpected JWT \"aud\" (audience) claim value');\n        }\n    }\n    else if (result.claims.aud !== expected) {\n        throw new OPE('unexpected JWT \"aud\" (audience) claim value');\n    }\n    return result;\n}\nfunction validateOptionalIssuer(expected, result) {\n    if (result.claims.iss !== undefined) {\n        return validateIssuer(expected, result);\n    }\n    return result;\n}\nfunction validateIssuer(expected, result) {\n    if (result.claims.iss !== expected) {\n        throw new OPE('unexpected JWT \"iss\" (issuer) claim value');\n    }\n    return result;\n}\nconst branded = new WeakSet();\nfunction brand(searchParams) {\n    branded.add(searchParams);\n    return searchParams;\n}\nexport async function authorizationCodeGrantRequest(as, client, callbackParameters, redirectUri, codeVerifier, options) {\n    assertAs(as);\n    assertClient(client);\n    if (!branded.has(callbackParameters)) {\n        throw new TypeError('\"callbackParameters\" must be an instance of URLSearchParams obtained from \"validateAuthResponse()\", or \"validateJwtAuthResponse()');\n    }\n    if (!validateString(redirectUri)) {\n        throw new TypeError('\"redirectUri\" must be a non-empty string');\n    }\n    if (!validateString(codeVerifier)) {\n        throw new TypeError('\"codeVerifier\" must be a non-empty string');\n    }\n    const code = getURLSearchParameter(callbackParameters, 'code');\n    if (!code) {\n        throw new OPE('no authorization code in \"callbackParameters\"');\n    }\n    const parameters = new URLSearchParams(options?.additionalParameters);\n    parameters.set('redirect_uri', redirectUri);\n    parameters.set('code_verifier', codeVerifier);\n    parameters.set('code', code);\n    return tokenEndpointRequest(as, client, 'authorization_code', parameters, options);\n}\nconst jwtClaimNames = {\n    aud: 'audience',\n    c_hash: 'code hash',\n    client_id: 'client id',\n    exp: 'expiration time',\n    iat: 'issued at',\n    iss: 'issuer',\n    jti: 'jwt id',\n    nonce: 'nonce',\n    s_hash: 'state hash',\n    sub: 'subject',\n    ath: 'access token hash',\n    htm: 'http method',\n    htu: 'http uri',\n    cnf: 'confirmation',\n};\nfunction validatePresence(required, result) {\n    for (const claim of required) {\n        if (result.claims[claim] === undefined) {\n            throw new OPE(`JWT \"${claim}\" (${jwtClaimNames[claim]}) claim missing`);\n        }\n    }\n    return result;\n}\nexport const expectNoNonce = Symbol();\nexport const skipAuthTimeCheck = Symbol();\nexport async function processAuthorizationCodeOpenIDResponse(as, client, response, expectedNonce, maxAge) {\n    const result = await processGenericAccessTokenResponse(as, client, response);\n    if (isOAuth2Error(result)) {\n        return result;\n    }\n    if (!validateString(result.id_token)) {\n        throw new OPE('\"response\" body \"id_token\" property must be a non-empty string');\n    }\n    maxAge ?? (maxAge = client.default_max_age ?? skipAuthTimeCheck);\n    const claims = getValidatedIdTokenClaims(result);\n    if ((client.require_auth_time || maxAge !== skipAuthTimeCheck) &&\n        claims.auth_time === undefined) {\n        throw new OPE('ID Token \"auth_time\" (authentication time) claim missing');\n    }\n    if (maxAge !== skipAuthTimeCheck) {\n        if (typeof maxAge !== 'number' || maxAge < 0) {\n            throw new TypeError('\"options.max_age\" must be a non-negative number');\n        }\n        const now = epochTime() + getClockSkew(client);\n        const tolerance = getClockTolerance(client);\n        if (claims.auth_time + maxAge < now - tolerance) {\n            throw new OPE('too much time has elapsed since the last End-User authentication');\n        }\n    }\n    switch (expectedNonce) {\n        case undefined:\n        case expectNoNonce:\n            if (claims.nonce !== undefined) {\n                throw new OPE('unexpected ID Token \"nonce\" claim value');\n            }\n            break;\n        default:\n            if (!validateString(expectedNonce)) {\n                throw new TypeError('\"expectedNonce\" must be a non-empty string');\n            }\n            if (claims.nonce === undefined) {\n                throw new OPE('ID Token \"nonce\" claim missing');\n            }\n            if (claims.nonce !== expectedNonce) {\n                throw new OPE('unexpected ID Token \"nonce\" claim value');\n            }\n    }\n    return result;\n}\nexport async function processAuthorizationCodeOAuth2Response(as, client, response) {\n    const result = await processGenericAccessTokenResponse(as, client, response, true);\n    if (isOAuth2Error(result)) {\n        return result;\n    }\n    if (result.id_token !== undefined) {\n        if (typeof result.id_token === 'string' && result.id_token.length) {\n            throw new OPE('Unexpected ID Token returned, use processAuthorizationCodeOpenIDResponse() for OpenID Connect callback processing');\n        }\n        delete result.id_token;\n    }\n    return result;\n}\nfunction checkJwtType(expected, result) {\n    if (typeof result.header.typ !== 'string' || normalizeTyp(result.header.typ) !== expected) {\n        throw new OPE('unexpected JWT \"typ\" header parameter value');\n    }\n    return result;\n}\nexport async function clientCredentialsGrantRequest(as, client, parameters, options) {\n    assertAs(as);\n    assertClient(client);\n    return tokenEndpointRequest(as, client, 'client_credentials', new URLSearchParams(parameters), options);\n}\nexport async function processClientCredentialsResponse(as, client, response) {\n    const result = await processGenericAccessTokenResponse(as, client, response, true, true);\n    if (isOAuth2Error(result)) {\n        return result;\n    }\n    return result;\n}\nexport async function revocationRequest(as, client, token, options) {\n    assertAs(as);\n    assertClient(client);\n    if (!validateString(token)) {\n        throw new TypeError('\"token\" must be a non-empty string');\n    }\n    const url = resolveEndpoint(as, 'revocation_endpoint', options);\n    const body = new URLSearchParams(options?.additionalParameters);\n    body.set('token', token);\n    const headers = prepareHeaders(options?.headers);\n    headers.delete('accept');\n    return authenticatedRequest(as, client, 'POST', url, body, headers, options);\n}\nexport async function processRevocationResponse(response) {\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        let err;\n        if ((err = await handleOAuthBodyError(response))) {\n            return err;\n        }\n        throw new OPE('\"response\" is not a conform Revocation Endpoint response');\n    }\n    return undefined;\n}\nfunction assertReadableResponse(response) {\n    if (response.bodyUsed) {\n        throw new TypeError('\"response\" body has been used already');\n    }\n}\nexport async function introspectionRequest(as, client, token, options) {\n    assertAs(as);\n    assertClient(client);\n    if (!validateString(token)) {\n        throw new TypeError('\"token\" must be a non-empty string');\n    }\n    const url = resolveEndpoint(as, 'introspection_endpoint', options);\n    const body = new URLSearchParams(options?.additionalParameters);\n    body.set('token', token);\n    const headers = prepareHeaders(options?.headers);\n    if (options?.requestJwtResponse ?? client.introspection_signed_response_alg) {\n        headers.set('accept', 'application/token-introspection+jwt');\n    }\n    else {\n        headers.set('accept', 'application/json');\n    }\n    return authenticatedRequest(as, client, 'POST', url, body, headers, options);\n}\nexport async function processIntrospectionResponse(as, client, response) {\n    assertAs(as);\n    assertClient(client);\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        let err;\n        if ((err = await handleOAuthBodyError(response))) {\n            return err;\n        }\n        throw new OPE('\"response\" is not a conform Introspection Endpoint response');\n    }\n    let json;\n    if (getContentType(response) === 'application/token-introspection+jwt') {\n        assertReadableResponse(response);\n        const { claims } = await validateJwt(await response.text(), checkSigningAlgorithm.bind(undefined, client.introspection_signed_response_alg, as.introspection_signing_alg_values_supported), noSignatureCheck, getClockSkew(client), getClockTolerance(client))\n            .then(checkJwtType.bind(undefined, 'token-introspection+jwt'))\n            .then(validatePresence.bind(undefined, ['aud', 'iat', 'iss']))\n            .then(validateIssuer.bind(undefined, as.issuer))\n            .then(validateAudience.bind(undefined, client.client_id));\n        json = claims.token_introspection;\n        if (!isJsonObject(json)) {\n            throw new OPE('JWT \"token_introspection\" claim must be a JSON object');\n        }\n    }\n    else {\n        assertReadableResponse(response);\n        try {\n            json = await response.json();\n        }\n        catch (cause) {\n            throw new OPE('failed to parse \"response\" body as JSON', { cause });\n        }\n        if (!isJsonObject(json)) {\n            throw new OPE('\"response\" body must be a top level object');\n        }\n    }\n    if (typeof json.active !== 'boolean') {\n        throw new OPE('\"response\" body \"active\" property must be a boolean');\n    }\n    return json;\n}\nasync function jwksRequest(as, options) {\n    assertAs(as);\n    const url = resolveEndpoint(as, 'jwks_uri');\n    const headers = prepareHeaders(options?.headers);\n    headers.set('accept', 'application/json');\n    headers.append('accept', 'application/jwk-set+json');\n    return (options?.[customFetch] || fetch)(url.href, {\n        headers: Object.fromEntries(headers.entries()),\n        method: 'GET',\n        redirect: 'manual',\n        signal: options?.signal ? signal(options.signal) : null,\n    }).then(processDpopNonce);\n}\nasync function processJwksResponse(response) {\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        throw new OPE('\"response\" is not a conform JSON Web Key Set response');\n    }\n    assertReadableResponse(response);\n    let json;\n    try {\n        json = await response.json();\n    }\n    catch (cause) {\n        throw new OPE('failed to parse \"response\" body as JSON', { cause });\n    }\n    if (!isJsonObject(json)) {\n        throw new OPE('\"response\" body must be a top level object');\n    }\n    if (!Array.isArray(json.keys)) {\n        throw new OPE('\"response\" body \"keys\" property must be an array');\n    }\n    if (!Array.prototype.every.call(json.keys, isJsonObject)) {\n        throw new OPE('\"response\" body \"keys\" property members must be JWK formatted objects');\n    }\n    return json;\n}\nasync function handleOAuthBodyError(response) {\n    if (response.status > 399 && response.status < 500) {\n        assertReadableResponse(response);\n        try {\n            const json = await response.json();\n            if (isJsonObject(json) && typeof json.error === 'string' && json.error.length) {\n                if (json.error_description !== undefined && typeof json.error_description !== 'string') {\n                    delete json.error_description;\n                }\n                if (json.error_uri !== undefined && typeof json.error_uri !== 'string') {\n                    delete json.error_uri;\n                }\n                if (json.algs !== undefined && typeof json.algs !== 'string') {\n                    delete json.algs;\n                }\n                if (json.scope !== undefined && typeof json.scope !== 'string') {\n                    delete json.scope;\n                }\n                return json;\n            }\n        }\n        catch { }\n    }\n    return undefined;\n}\nfunction checkSupportedJwsAlg(alg) {\n    if (!SUPPORTED_JWS_ALGS.includes(alg)) {\n        throw new UnsupportedOperationError('unsupported JWS \"alg\" identifier');\n    }\n    return alg;\n}\nfunction checkRsaKeyAlgorithm(algorithm) {\n    if (typeof algorithm.modulusLength !== 'number' || algorithm.modulusLength < 2048) {\n        throw new OPE(`${algorithm.name} modulusLength must be at least 2048 bits`);\n    }\n}\nfunction ecdsaHashName(namedCurve) {\n    switch (namedCurve) {\n        case 'P-256':\n            return 'SHA-256';\n        case 'P-384':\n            return 'SHA-384';\n        case 'P-521':\n            return 'SHA-512';\n        default:\n            throw new UnsupportedOperationError();\n    }\n}\nfunction keyToSubtle(key) {\n    switch (key.algorithm.name) {\n        case 'ECDSA':\n            return {\n                name: key.algorithm.name,\n                hash: ecdsaHashName(key.algorithm.namedCurve),\n            };\n        case 'RSA-PSS': {\n            checkRsaKeyAlgorithm(key.algorithm);\n            switch (key.algorithm.hash.name) {\n                case 'SHA-256':\n                case 'SHA-384':\n                case 'SHA-512':\n                    return {\n                        name: key.algorithm.name,\n                        saltLength: parseInt(key.algorithm.hash.name.slice(-3), 10) >> 3,\n                    };\n                default:\n                    throw new UnsupportedOperationError();\n            }\n        }\n        case 'RSASSA-PKCS1-v1_5':\n            checkRsaKeyAlgorithm(key.algorithm);\n            return key.algorithm.name;\n        case 'Ed448':\n        case 'Ed25519':\n            return key.algorithm.name;\n    }\n    throw new UnsupportedOperationError();\n}\nconst noSignatureCheck = Symbol();\nasync function validateJwt(jws, checkAlg, getKey, clockSkew, clockTolerance) {\n    const { 0: protectedHeader, 1: payload, 2: encodedSignature, length } = jws.split('.');\n    if (length === 5) {\n        throw new UnsupportedOperationError('JWE structure JWTs are not supported');\n    }\n    if (length !== 3) {\n        throw new OPE('Invalid JWT');\n    }\n    let header;\n    try {\n        header = JSON.parse(buf(b64u(protectedHeader)));\n    }\n    catch (cause) {\n        throw new OPE('failed to parse JWT Header body as base64url encoded JSON', { cause });\n    }\n    if (!isJsonObject(header)) {\n        throw new OPE('JWT Header must be a top level object');\n    }\n    checkAlg(header);\n    if (header.crit !== undefined) {\n        throw new OPE('unexpected JWT \"crit\" header parameter');\n    }\n    const signature = b64u(encodedSignature);\n    let key;\n    if (getKey !== noSignatureCheck) {\n        key = await getKey(header);\n        const input = `${protectedHeader}.${payload}`;\n        const verified = await crypto.subtle.verify(keyToSubtle(key), key, signature, buf(input));\n        if (!verified) {\n            throw new OPE('JWT signature verification failed');\n        }\n    }\n    let claims;\n    try {\n        claims = JSON.parse(buf(b64u(payload)));\n    }\n    catch (cause) {\n        throw new OPE('failed to parse JWT Payload body as base64url encoded JSON', { cause });\n    }\n    if (!isJsonObject(claims)) {\n        throw new OPE('JWT Payload must be a top level object');\n    }\n    const now = epochTime() + clockSkew;\n    if (claims.exp !== undefined) {\n        if (typeof claims.exp !== 'number') {\n            throw new OPE('unexpected JWT \"exp\" (expiration time) claim type');\n        }\n        if (claims.exp <= now - clockTolerance) {\n            throw new OPE('unexpected JWT \"exp\" (expiration time) claim value, timestamp is <= now()');\n        }\n    }\n    if (claims.iat !== undefined) {\n        if (typeof claims.iat !== 'number') {\n            throw new OPE('unexpected JWT \"iat\" (issued at) claim type');\n        }\n    }\n    if (claims.iss !== undefined) {\n        if (typeof claims.iss !== 'string') {\n            throw new OPE('unexpected JWT \"iss\" (issuer) claim type');\n        }\n    }\n    if (claims.nbf !== undefined) {\n        if (typeof claims.nbf !== 'number') {\n            throw new OPE('unexpected JWT \"nbf\" (not before) claim type');\n        }\n        if (claims.nbf > now + clockTolerance) {\n            throw new OPE('unexpected JWT \"nbf\" (not before) claim value, timestamp is > now()');\n        }\n    }\n    if (claims.aud !== undefined) {\n        if (typeof claims.aud !== 'string' && !Array.isArray(claims.aud)) {\n            throw new OPE('unexpected JWT \"aud\" (audience) claim type');\n        }\n    }\n    return { header, claims, signature, key };\n}\nexport async function validateJwtAuthResponse(as, client, parameters, expectedState, options) {\n    assertAs(as);\n    assertClient(client);\n    if (parameters instanceof URL) {\n        parameters = parameters.searchParams;\n    }\n    if (!(parameters instanceof URLSearchParams)) {\n        throw new TypeError('\"parameters\" must be an instance of URLSearchParams, or URL');\n    }\n    const response = getURLSearchParameter(parameters, 'response');\n    if (!response) {\n        throw new OPE('\"parameters\" does not contain a JARM response');\n    }\n    if (typeof as.jwks_uri !== 'string') {\n        throw new TypeError('\"as.jwks_uri\" must be a string');\n    }\n    const { claims } = await validateJwt(response, checkSigningAlgorithm.bind(undefined, client.authorization_signed_response_alg, as.authorization_signing_alg_values_supported), getPublicSigKeyFromIssuerJwksUri.bind(undefined, as, options), getClockSkew(client), getClockTolerance(client))\n        .then(validatePresence.bind(undefined, ['aud', 'exp', 'iss']))\n        .then(validateIssuer.bind(undefined, as.issuer))\n        .then(validateAudience.bind(undefined, client.client_id));\n    const result = new URLSearchParams();\n    for (const [key, value] of Object.entries(claims)) {\n        if (typeof value === 'string' && key !== 'aud') {\n            result.set(key, value);\n        }\n    }\n    return validateAuthResponse(as, client, result, expectedState);\n}\nasync function idTokenHash(alg, data, key) {\n    let algorithm;\n    switch (alg) {\n        case 'RS256':\n        case 'PS256':\n        case 'ES256':\n            algorithm = 'SHA-256';\n            break;\n        case 'RS384':\n        case 'PS384':\n        case 'ES384':\n            algorithm = 'SHA-384';\n            break;\n        case 'RS512':\n        case 'PS512':\n        case 'ES512':\n            algorithm = 'SHA-512';\n            break;\n        case 'EdDSA':\n            if (key.algorithm.name === 'Ed25519') {\n                algorithm = 'SHA-512';\n                break;\n            }\n            throw new UnsupportedOperationError();\n        default:\n            throw new UnsupportedOperationError();\n    }\n    const digest = await crypto.subtle.digest(algorithm, buf(data));\n    return b64u(digest.slice(0, digest.byteLength / 2));\n}\nasync function idTokenHashMatches(data, actual, alg, key) {\n    const expected = await idTokenHash(alg, data, key);\n    return actual === expected;\n}\nexport async function validateDetachedSignatureResponse(as, client, parameters, expectedNonce, expectedState, maxAge, options) {\n    assertAs(as);\n    assertClient(client);\n    if (parameters instanceof URL) {\n        if (!parameters.hash.length) {\n            throw new TypeError('\"parameters\" as an instance of URL must contain a hash (fragment) with the Authorization Response parameters');\n        }\n        parameters = new URLSearchParams(parameters.hash.slice(1));\n    }\n    if (!(parameters instanceof URLSearchParams)) {\n        throw new TypeError('\"parameters\" must be an instance of URLSearchParams');\n    }\n    parameters = new URLSearchParams(parameters);\n    const id_token = getURLSearchParameter(parameters, 'id_token');\n    parameters.delete('id_token');\n    switch (expectedState) {\n        case undefined:\n        case expectNoState:\n            break;\n        default:\n            if (!validateString(expectedState)) {\n                throw new TypeError('\"expectedState\" must be a non-empty string');\n            }\n    }\n    const result = validateAuthResponse({\n        ...as,\n        authorization_response_iss_parameter_supported: false,\n    }, client, parameters, expectedState);\n    if (isOAuth2Error(result)) {\n        return result;\n    }\n    if (!id_token) {\n        throw new OPE('\"parameters\" does not contain an ID Token');\n    }\n    const code = getURLSearchParameter(parameters, 'code');\n    if (!code) {\n        throw new OPE('\"parameters\" does not contain an Authorization Code');\n    }\n    if (typeof as.jwks_uri !== 'string') {\n        throw new TypeError('\"as.jwks_uri\" must be a string');\n    }\n    const requiredClaims = [\n        'aud',\n        'exp',\n        'iat',\n        'iss',\n        'sub',\n        'nonce',\n        'c_hash',\n    ];\n    if (typeof expectedState === 'string') {\n        requiredClaims.push('s_hash');\n    }\n    const { claims, header, key } = await validateJwt(id_token, checkSigningAlgorithm.bind(undefined, client.id_token_signed_response_alg, as.id_token_signing_alg_values_supported), getPublicSigKeyFromIssuerJwksUri.bind(undefined, as, options), getClockSkew(client), getClockTolerance(client))\n        .then(validatePresence.bind(undefined, requiredClaims))\n        .then(validateIssuer.bind(undefined, as.issuer))\n        .then(validateAudience.bind(undefined, client.client_id));\n    const clockSkew = getClockSkew(client);\n    const now = epochTime() + clockSkew;\n    if (claims.iat < now - 3600) {\n        throw new OPE('unexpected JWT \"iat\" (issued at) claim value, it is too far in the past');\n    }\n    if (typeof claims.c_hash !== 'string' ||\n        (await idTokenHashMatches(code, claims.c_hash, header.alg, key)) !== true) {\n        throw new OPE('invalid ID Token \"c_hash\" (code hash) claim value');\n    }\n    if (claims.s_hash !== undefined && typeof expectedState !== 'string') {\n        throw new OPE('could not verify ID Token \"s_hash\" (state hash) claim value');\n    }\n    if (typeof expectedState === 'string' &&\n        (typeof claims.s_hash !== 'string' ||\n            (await idTokenHashMatches(expectedState, claims.s_hash, header.alg, key)) !== true)) {\n        throw new OPE('invalid ID Token \"s_hash\" (state hash) claim value');\n    }\n    if (client.require_auth_time !== undefined && typeof claims.auth_time !== 'number') {\n        throw new OPE('unexpected ID Token \"auth_time\" (authentication time) claim value');\n    }\n    maxAge ?? (maxAge = client.default_max_age ?? skipAuthTimeCheck);\n    if ((client.require_auth_time || maxAge !== skipAuthTimeCheck) &&\n        claims.auth_time === undefined) {\n        throw new OPE('ID Token \"auth_time\" (authentication time) claim missing');\n    }\n    if (maxAge !== skipAuthTimeCheck) {\n        if (typeof maxAge !== 'number' || maxAge < 0) {\n            throw new TypeError('\"options.max_age\" must be a non-negative number');\n        }\n        const now = epochTime() + getClockSkew(client);\n        const tolerance = getClockTolerance(client);\n        if (claims.auth_time + maxAge < now - tolerance) {\n            throw new OPE('too much time has elapsed since the last End-User authentication');\n        }\n    }\n    if (!validateString(expectedNonce)) {\n        throw new TypeError('\"expectedNonce\" must be a non-empty string');\n    }\n    if (claims.nonce !== expectedNonce) {\n        throw new OPE('unexpected ID Token \"nonce\" claim value');\n    }\n    if (Array.isArray(claims.aud) && claims.aud.length !== 1 && claims.azp !== client.client_id) {\n        throw new OPE('unexpected ID Token \"azp\" (authorized party) claim value');\n    }\n    return result;\n}\nfunction checkSigningAlgorithm(client, issuer, header) {\n    if (client !== undefined) {\n        if (header.alg !== client) {\n            throw new OPE('unexpected JWT \"alg\" header parameter');\n        }\n        return;\n    }\n    if (Array.isArray(issuer)) {\n        if (!issuer.includes(header.alg)) {\n            throw new OPE('unexpected JWT \"alg\" header parameter');\n        }\n        return;\n    }\n    if (header.alg !== 'RS256') {\n        throw new OPE('unexpected JWT \"alg\" header parameter');\n    }\n}\nfunction getURLSearchParameter(parameters, name) {\n    const { 0: value, length } = parameters.getAll(name);\n    if (length > 1) {\n        throw new OPE(`\"${name}\" parameter must be provided only once`);\n    }\n    return value;\n}\nexport const skipStateCheck = Symbol();\nexport const expectNoState = Symbol();\nexport function validateAuthResponse(as, client, parameters, expectedState) {\n    assertAs(as);\n    assertClient(client);\n    if (parameters instanceof URL) {\n        parameters = parameters.searchParams;\n    }\n    if (!(parameters instanceof URLSearchParams)) {\n        throw new TypeError('\"parameters\" must be an instance of URLSearchParams, or URL');\n    }\n    if (getURLSearchParameter(parameters, 'response')) {\n        throw new OPE('\"parameters\" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()');\n    }\n    const iss = getURLSearchParameter(parameters, 'iss');\n    const state = getURLSearchParameter(parameters, 'state');\n    if (!iss && as.authorization_response_iss_parameter_supported) {\n        throw new OPE('response parameter \"iss\" (issuer) missing');\n    }\n    if (iss && iss !== as.issuer) {\n        throw new OPE('unexpected \"iss\" (issuer) response parameter value');\n    }\n    switch (expectedState) {\n        case undefined:\n        case expectNoState:\n            if (state !== undefined) {\n                throw new OPE('unexpected \"state\" response parameter encountered');\n            }\n            break;\n        case skipStateCheck:\n            break;\n        default:\n            if (!validateString(expectedState)) {\n                throw new OPE('\"expectedState\" must be a non-empty string');\n            }\n            if (state === undefined) {\n                throw new OPE('response parameter \"state\" missing');\n            }\n            if (state !== expectedState) {\n                throw new OPE('unexpected \"state\" response parameter value');\n            }\n    }\n    const error = getURLSearchParameter(parameters, 'error');\n    if (error) {\n        return {\n            error,\n            error_description: getURLSearchParameter(parameters, 'error_description'),\n            error_uri: getURLSearchParameter(parameters, 'error_uri'),\n        };\n    }\n    const id_token = getURLSearchParameter(parameters, 'id_token');\n    const token = getURLSearchParameter(parameters, 'token');\n    if (id_token !== undefined || token !== undefined) {\n        throw new UnsupportedOperationError('implicit and hybrid flows are not supported');\n    }\n    return brand(new URLSearchParams(parameters));\n}\nfunction algToSubtle(alg, crv) {\n    switch (alg) {\n        case 'PS256':\n        case 'PS384':\n        case 'PS512':\n            return { name: 'RSA-PSS', hash: `SHA-${alg.slice(-3)}` };\n        case 'RS256':\n        case 'RS384':\n        case 'RS512':\n            return { name: 'RSASSA-PKCS1-v1_5', hash: `SHA-${alg.slice(-3)}` };\n        case 'ES256':\n        case 'ES384':\n            return { name: 'ECDSA', namedCurve: `P-${alg.slice(-3)}` };\n        case 'ES512':\n            return { name: 'ECDSA', namedCurve: 'P-521' };\n        case 'EdDSA': {\n            switch (crv) {\n                case 'Ed25519':\n                case 'Ed448':\n                    return crv;\n                default:\n                    throw new UnsupportedOperationError();\n            }\n        }\n        default:\n            throw new UnsupportedOperationError();\n    }\n}\nasync function importJwk(alg, jwk) {\n    const { ext, key_ops, use, ...key } = jwk;\n    return crypto.subtle.importKey('jwk', key, algToSubtle(alg, jwk.crv), true, ['verify']);\n}\nexport async function deviceAuthorizationRequest(as, client, parameters, options) {\n    assertAs(as);\n    assertClient(client);\n    const url = resolveEndpoint(as, 'device_authorization_endpoint', options);\n    const body = new URLSearchParams(parameters);\n    body.set('client_id', client.client_id);\n    const headers = prepareHeaders(options?.headers);\n    headers.set('accept', 'application/json');\n    return authenticatedRequest(as, client, 'POST', url, body, headers, options);\n}\nexport async function processDeviceAuthorizationResponse(as, client, response) {\n    assertAs(as);\n    assertClient(client);\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        let err;\n        if ((err = await handleOAuthBodyError(response))) {\n            return err;\n        }\n        throw new OPE('\"response\" is not a conform Device Authorization Endpoint response');\n    }\n    assertReadableResponse(response);\n    let json;\n    try {\n        json = await response.json();\n    }\n    catch (cause) {\n        throw new OPE('failed to parse \"response\" body as JSON', { cause });\n    }\n    if (!isJsonObject(json)) {\n        throw new OPE('\"response\" body must be a top level object');\n    }\n    if (!validateString(json.device_code)) {\n        throw new OPE('\"response\" body \"device_code\" property must be a non-empty string');\n    }\n    if (!validateString(json.user_code)) {\n        throw new OPE('\"response\" body \"user_code\" property must be a non-empty string');\n    }\n    if (!validateString(json.verification_uri)) {\n        throw new OPE('\"response\" body \"verification_uri\" property must be a non-empty string');\n    }\n    if (typeof json.expires_in !== 'number' || json.expires_in <= 0) {\n        throw new OPE('\"response\" body \"expires_in\" property must be a positive number');\n    }\n    if (json.verification_uri_complete !== undefined &&\n        !validateString(json.verification_uri_complete)) {\n        throw new OPE('\"response\" body \"verification_uri_complete\" property must be a non-empty string');\n    }\n    if (json.interval !== undefined && (typeof json.interval !== 'number' || json.interval <= 0)) {\n        throw new OPE('\"response\" body \"interval\" property must be a positive number');\n    }\n    return json;\n}\nexport async function deviceCodeGrantRequest(as, client, deviceCode, options) {\n    assertAs(as);\n    assertClient(client);\n    if (!validateString(deviceCode)) {\n        throw new TypeError('\"deviceCode\" must be a non-empty string');\n    }\n    const parameters = new URLSearchParams(options?.additionalParameters);\n    parameters.set('device_code', deviceCode);\n    return tokenEndpointRequest(as, client, 'urn:ietf:params:oauth:grant-type:device_code', parameters, options);\n}\nexport async function processDeviceCodeResponse(as, client, response) {\n    return processGenericAccessTokenResponse(as, client, response);\n}\nexport async function generateKeyPair(alg, options) {\n    if (!validateString(alg)) {\n        throw new TypeError('\"alg\" must be a non-empty string');\n    }\n    const algorithm = algToSubtle(alg, alg === 'EdDSA' ? options?.crv ?? 'Ed25519' : undefined);\n    if (alg.startsWith('PS') || alg.startsWith('RS')) {\n        Object.assign(algorithm, {\n            modulusLength: options?.modulusLength ?? 2048,\n            publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n        });\n    }\n    return (crypto.subtle.generateKey(algorithm, options?.extractable ?? false, ['sign', 'verify']));\n}\nfunction normalizeHtu(htu) {\n    const url = new URL(htu);\n    url.search = '';\n    url.hash = '';\n    return url.href;\n}\nasync function validateDPoP(as, request, accessToken, accessTokenClaims, options) {\n    const header = request.headers.get('dpop');\n    if (header === null) {\n        throw new OPE('operation indicated DPoP use but the request has no DPoP HTTP Header');\n    }\n    if (request.headers.get('authorization')?.toLowerCase().startsWith('dpop ') === false) {\n        throw new OPE(`operation indicated DPoP use but the request's Authorization HTTP Header scheme is not DPoP`);\n    }\n    if (typeof accessTokenClaims.cnf?.jkt !== 'string') {\n        throw new OPE('operation indicated DPoP use but the JWT Access Token has no jkt confirmation claim');\n    }\n    const clockSkew = getClockSkew(options);\n    const proof = await validateJwt(header, checkSigningAlgorithm.bind(undefined, undefined, as?.dpop_signing_alg_values_supported || SUPPORTED_JWS_ALGS), async ({ jwk, alg }) => {\n        if (!jwk) {\n            throw new OPE('DPoP Proof is missing the jwk header parameter');\n        }\n        const key = await importJwk(alg, jwk);\n        if (key.type !== 'public') {\n            throw new OPE('DPoP Proof jwk header parameter must contain a public key');\n        }\n        return key;\n    }, clockSkew, getClockTolerance(options))\n        .then(checkJwtType.bind(undefined, 'dpop+jwt'))\n        .then(validatePresence.bind(undefined, ['iat', 'jti', 'ath', 'htm', 'htu']));\n    const now = epochTime() + clockSkew;\n    const diff = Math.abs(now - proof.claims.iat);\n    if (diff > 300) {\n        throw new OPE('DPoP Proof iat is not recent enough');\n    }\n    if (proof.claims.htm !== request.method) {\n        throw new OPE('DPoP Proof htm mismatch');\n    }\n    if (typeof proof.claims.htu !== 'string' ||\n        normalizeHtu(proof.claims.htu) !== normalizeHtu(request.url)) {\n        throw new OPE('DPoP Proof htu mismatch');\n    }\n    {\n        const expected = b64u(await crypto.subtle.digest('SHA-256', encoder.encode(accessToken)));\n        if (proof.claims.ath !== expected) {\n            throw new OPE('DPoP Proof ath mismatch');\n        }\n    }\n    {\n        let components;\n        switch (proof.header.jwk.kty) {\n            case 'EC':\n                components = {\n                    crv: proof.header.jwk.crv,\n                    kty: proof.header.jwk.kty,\n                    x: proof.header.jwk.x,\n                    y: proof.header.jwk.y,\n                };\n                break;\n            case 'OKP':\n                components = {\n                    crv: proof.header.jwk.crv,\n                    kty: proof.header.jwk.kty,\n                    x: proof.header.jwk.x,\n                };\n                break;\n            case 'RSA':\n                components = {\n                    e: proof.header.jwk.e,\n                    kty: proof.header.jwk.kty,\n                    n: proof.header.jwk.n,\n                };\n                break;\n            default:\n                throw new UnsupportedOperationError();\n        }\n        const expected = b64u(await crypto.subtle.digest('SHA-256', encoder.encode(JSON.stringify(components))));\n        if (accessTokenClaims.cnf.jkt !== expected) {\n            throw new OPE('JWT Access Token confirmation mismatch');\n        }\n    }\n}\nexport async function validateJwtAccessToken(as, request, expectedAudience, options) {\n    assertAs(as);\n    if (!looseInstanceOf(request, Request)) {\n        throw new TypeError('\"request\" must be an instance of Request');\n    }\n    if (!validateString(expectedAudience)) {\n        throw new OPE('\"expectedAudience\" must be a non-empty string');\n    }\n    const authorization = request.headers.get('authorization');\n    if (authorization === null) {\n        throw new OPE('\"request\" is missing an Authorization HTTP Header');\n    }\n    let { 0: scheme, 1: accessToken, length } = authorization.split(' ');\n    scheme = scheme.toLowerCase();\n    switch (scheme) {\n        case 'dpop':\n        case 'bearer':\n            break;\n        default:\n            throw new UnsupportedOperationError('unsupported Authorization HTTP Header scheme');\n    }\n    if (length !== 2) {\n        throw new OPE('invalid Authorization HTTP Header format');\n    }\n    const requiredClaims = [\n        'iss',\n        'exp',\n        'aud',\n        'sub',\n        'iat',\n        'jti',\n        'client_id',\n    ];\n    if (options?.requireDPoP || scheme === 'dpop' || request.headers.has('dpop')) {\n        requiredClaims.push('cnf');\n    }\n    const { claims } = await validateJwt(accessToken, checkSigningAlgorithm.bind(undefined, undefined, SUPPORTED_JWS_ALGS), getPublicSigKeyFromIssuerJwksUri.bind(undefined, as, options), getClockSkew(options), getClockTolerance(options))\n        .then(checkJwtType.bind(undefined, 'at+jwt'))\n        .then(validatePresence.bind(undefined, requiredClaims))\n        .then(validateIssuer.bind(undefined, as.issuer))\n        .then(validateAudience.bind(undefined, expectedAudience));\n    for (const claim of ['client_id', 'jti', 'sub']) {\n        if (typeof claims[claim] !== 'string') {\n            throw new OPE(`unexpected JWT \"${claim}\" claim type`);\n        }\n    }\n    if ('cnf' in claims) {\n        if (!isJsonObject(claims.cnf)) {\n            throw new OPE('unexpected JWT \"cnf\" (confirmation) claim value');\n        }\n        const { 0: cnf, length } = Object.keys(claims.cnf);\n        if (length) {\n            if (length !== 1) {\n                throw new UnsupportedOperationError('multiple confirmation claims are not supported');\n            }\n            if (cnf !== 'jkt') {\n                throw new UnsupportedOperationError('unsupported JWT Confirmation method');\n            }\n        }\n    }\n    if (options?.requireDPoP ||\n        scheme === 'dpop' ||\n        claims.cnf?.jkt !== undefined ||\n        request.headers.has('dpop')) {\n        await validateDPoP(as, request, accessToken, claims, options);\n    }\n    return claims;\n}\nexport const experimentalCustomFetch = customFetch;\nexport const experimental_customFetch = customFetch;\nexport const experimentalUseMtlsAlias = useMtlsAlias;\nexport const experimental_useMtlsAlias = useMtlsAlias;\nexport const experimental_validateDetachedSignatureResponse = validateDetachedSignatureResponse;\nexport const experimental_validateJwtAccessToken = validateJwtAccessToken;\n","import { generateRandomCodeVerifier, generateRandomState, calculatePKCECodeChallenge } from \"oauth4webapi\";\nimport Cookies from \"js-cookie\";\nimport { cookies as rscCookies } from '@stackframe/stack-sc/force-server';\n\ntype SetCookieOptions = { maxAge?: number };\n\nfunction isRscCookieUnavailableError(e: any) {\n  const allowedMessageSnippets = [\"was called outside a request scope\", \"cookies() expects to have requestAsyncStorage\"];\n  return typeof e?.message === \"string\" && allowedMessageSnippets.some(msg => e.message.includes(msg));\n}\n\nexport function getCookie(name: string): string | null {\n  try {\n    return rscCookies().get(name)?.value ?? null;\n  } catch (e: any) {\n    if (isRscCookieUnavailableError(e)) {\n      return Cookies.get(name) ?? null;\n    } else {\n      throw e;\n    }\n  }\n}\n\nexport function setOrDeleteCookie(name: string, value: string | null, options: SetCookieOptions = {}) {\n  if (value === null) {\n    deleteCookie(name);\n  } else {\n    setCookie(name, value, options);\n  }\n}\n\nexport function deleteCookie(name: string) {\n  try {\n    rscCookies().delete(name);\n  } catch (e: any) {\n    if (isRscCookieUnavailableError(e)) {\n      Cookies.remove(name);\n    } else {\n      throw e;\n    }\n  }\n}\n\nexport function setCookie(name: string, value: string, options: SetCookieOptions = {}) {\n  try {\n    rscCookies().set(name, value, {\n      maxAge: options.maxAge,\n    });\n  } catch (e: any) {\n    if (isRscCookieUnavailableError(e)) {\n      Cookies.set(name, value, {\n        secure: window.location.protocol === \"https:\",\n        expires: options.maxAge === undefined ? undefined : new Date(Date.now() + (options.maxAge) * 1000),\n      });\n    } else {\n      throw e;\n    }\n  }\n}\n\nexport async function saveVerifierAndState() {\n  const codeVerifier = generateRandomCodeVerifier();\n  const codeChallenge = await calculatePKCECodeChallenge(codeVerifier);\n  const state = generateRandomState();\n\n  setCookie(\"stack-code-verifier\", codeVerifier, { maxAge: 60 * 10 });\n  setCookie(\"stack-state\", state, { maxAge: 60 * 10 });\n\n  return {\n    codeChallenge,\n    state,\n  };\n}\n\nexport function getVerifierAndState() {\n  const codeVerifier = getCookie(\"stack-code-verifier\");\n  const state = getCookie(\"stack-state\");\n  return {\n    codeVerifier,\n    state,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/utils/next.tsx"],"sourcesContent":["export function isClient() {\n  // TODO improve function name (could be confused because this may return false in client components during SSR)\n  return typeof window !== \"undefined\";\n}\n"],"names":[],"mappings":";;;;;AAAO,SAAS,WAAW;IAEzB,OAAO,OAAO,2CAAW;AAC3B"}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/utils/url.tsx"],"sourcesContent":["export function autoRedirect() {\n  const url = new URL(window.location.href);\n  const redirectUrl = url.searchParams.get(\"auto-redirect-url\");\n  if (redirectUrl) {\n    const urlObject = new URL(redirectUrl);\n    if (urlObject.origin !== window.location.origin) {\n      throw new Error(\"auto-redirect-url is not same origin (\" + urlObject.origin + \" !== \" + window.location.origin + \")\");\n    }\n    url.searchParams.delete(\"auto-redirect-url\");\n    window.location.replace(urlObject.href);\n  }\n}\n\nexport function constructRedirectUrl(redirectUrl: URL | string | undefined) {\n  const url = redirectUrl ? new URL(redirectUrl, window.location.href) : new URL(window.location.href);\n  return url.href.split(\"#\")[0];\n}\n"],"names":[],"mappings":";;;;;;;AAAO,SAAS,eAAe;IAC7B,MAAM,MAAM,IAAI,IAAI,OAAO,QAAA,CAAS,IAAI;IACxC,MAAM,cAAc,IAAI,YAAA,CAAa,GAAA,CAAI,mBAAmB;IAC5D,IAAI,aAAa;QACf,MAAM,YAAY,IAAI,IAAI,WAAW;QACrC,IAAI,UAAU,MAAA,KAAW,OAAO,QAAA,CAAS,MAAA,EAAQ;YAC/C,MAAM,IAAI,MAAM,2CAA2C,UAAU,MAAA,GAAS,UAAU,OAAO,QAAA,CAAS,MAAA,GAAS,GAAG;QACtH;QACA,IAAI,YAAA,CAAa,MAAA,CAAO,mBAAmB;QAC3C,OAAO,QAAA,CAAS,OAAA,CAAQ,UAAU,IAAI;IACxC;AACF;AAEO,SAAS,qBAAqB,WAAA,EAAuC;IAC1E,MAAM,MAAM,cAAc,IAAI,IAAI,aAAa,OAAO,QAAA,CAAS,IAAI,IAAI,IAAI,IAAI,OAAO,QAAA,CAAS,IAAI;IACnG,OAAO,IAAI,IAAA,CAAK,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA;AAC9B"}},
    {"offset": {"line": 276, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/lib/auth.ts"],"sourcesContent":["import { StackClientInterface } from \"@stackframe/stack-shared\";\nimport { saveVerifierAndState, getVerifierAndState } from \"./cookie\";\nimport { constructRedirectUrl } from \"../utils/url\";\nimport { TokenStore } from \"@stackframe/stack-shared/dist/interface/clientInterface\";\nimport { neverResolve, wait } from \"@stackframe/stack-shared/dist/utils/promises\";\nimport { StackAssertionError } from \"@stackframe/stack-shared/dist/utils/errors\";\n\nexport async function signInWithOAuth(\n  iface: StackClientInterface,\n  {\n    provider,\n    redirectUrl,\n  } : { \n    provider: string,\n    redirectUrl?: string,\n  }\n) {\n  redirectUrl = constructRedirectUrl(redirectUrl);\n  const { codeChallenge, state } = await saveVerifierAndState();\n  const location = await iface.getOAuthUrl(\n    provider,\n    redirectUrl,\n    codeChallenge,\n    state,\n  );\n  window.location.assign(location);\n  await neverResolve();\n}\n\n/**\n * Checks if the current URL has the query parameters for an OAuth callback, and if so, removes them.\n * \n * Must be synchronous for the logic in callOAuthCallback to work without race conditions.\n */\nfunction consumeOAuthCallbackQueryParams(expectedState: string): null | URL {\n  const requiredParams = [\"code\", \"state\"];\n  const originalUrl = new URL(window.location.href);\n  for (const param of requiredParams) {\n    if (!originalUrl.searchParams.has(param)) {\n      return null;\n    }\n  }\n\n  if (expectedState !== originalUrl.searchParams.get(\"state\")) {\n    // If the state doesn't match, then the callback wasn't meant for us.\n    // Maybe the website uses another OAuth library?\n    return null;\n  }\n\n\n  const newUrl = new URL(originalUrl);\n  for (const param of requiredParams) {\n    newUrl.searchParams.delete(param);\n  }\n\n  // let's get rid of the authorization code in the history as we\n  // don't redirect to `redirectUrl` if there's a validation error\n  // (as the redirectUrl might be malicious!).\n  //\n  // We use history.replaceState instead of location.assign(...) to\n  // prevent an unnecessary reload\n  window.history.replaceState({}, \"\", newUrl.toString());\n\n  return originalUrl; \n}\n\nexport async function callOAuthCallback(\n  iface: StackClientInterface,\n  tokenStore: TokenStore,\n  redirectUrl: string,\n) {\n  // note: this part of the function (until the return) needs\n  // to be synchronous, to prevent race conditions when\n  // callOAuthCallback is called multiple times in parallel\n  const { codeVerifier, state } = getVerifierAndState();\n  if (!codeVerifier || !state) {\n    throw new Error(\"Invalid OAuth callback URL parameters. It seems like the OAuth flow was interrupted, so please try again.\");\n  }\n  const originalUrl = consumeOAuthCallbackQueryParams(state);\n  if (!originalUrl) return null;\n\n  // the rest can be asynchronous (we now know that we are the\n  // intended recipient of the callback)\n  try {\n    return await iface.callOAuthCallback(\n      originalUrl.searchParams,\n      constructRedirectUrl(redirectUrl),\n      codeVerifier,\n      state,\n      tokenStore,\n    );\n  } catch (e) {\n    throw new StackAssertionError(\"Error signing in during OAuth callback. Please try again.\", { cause: e });\n  }\n}\n"],"names":[],"mappings":";;;;;;;AACA,SAAS,sBAAsB,2BAA2B;AAC1D,SAAS,4BAA4B;AAErC,SAAS,oBAA0B;AACnC,SAAS,2BAA2B;;;;;AAEpC,eAAsB,gBACpB,KAAA,EACA,EACE,QAAA,EACA,WAAA,EACF,EAIA;IACA,kBAAc,iOAAA,EAAqB,WAAW;IAC9C,MAAM,EAAE,aAAA,EAAe,KAAA,CAAM,CAAA,GAAI,UAAM,kOAAA,CAAqB;IAC5D,MAAM,WAAW,MAAM,MAAM,WAAA,CAC3B,UACA,aACA,eACA;IAEF,OAAO,QAAA,CAAS,MAAA,CAAO,QAAQ;IAC/B,UAAM,0QAAA,CAAa;AACrB;AAOA,SAAS,gCAAgC,aAAA,EAAmC;IAC1E,MAAM,iBAAiB;QAAC;QAAQ,OAAO;KAAA;IACvC,MAAM,cAAc,IAAI,IAAI,OAAO,QAAA,CAAS,IAAI;IAChD,KAAA,MAAW,SAAS,eAAgB;QAClC,IAAI,CAAC,YAAY,YAAA,CAAa,GAAA,CAAI,KAAK,GAAG;YACxC,OAAO;QACT;IACF;IAEA,IAAI,kBAAkB,YAAY,YAAA,CAAa,GAAA,CAAI,OAAO,GAAG;QAG3D,OAAO;IACT;IAGA,MAAM,SAAS,IAAI,IAAI,WAAW;IAClC,KAAA,MAAW,SAAS,eAAgB;QAClC,OAAO,YAAA,CAAa,MAAA,CAAO,KAAK;IAClC;IAQA,OAAO,OAAA,CAAQ,YAAA,CAAa,CAAC,GAAG,IAAI,OAAO,QAAA,CAAS,CAAC;IAErD,OAAO;AACT;AAEA,eAAsB,kBACpB,KAAA,EACA,UAAA,EACA,WAAA,EACA;IAIA,MAAM,EAAE,YAAA,EAAc,KAAA,CAAM,CAAA,OAAI,iOAAA,CAAoB;IACpD,IAAI,CAAC,gBAAgB,CAAC,OAAO;QAC3B,MAAM,IAAI,MAAM,2GAA2G;IAC7H;IACA,MAAM,cAAc,gCAAgC,KAAK;IACzD,IAAI,CAAC,aAAa,OAAO;IAIzB,IAAI;QACF,OAAO,MAAM,MAAM,iBAAA,CACjB,YAAY,YAAA,MACZ,iOAAA,EAAqB,WAAW,GAChC,cACA,OACA;IAEJ,EAAA,OAAS,GAAG;QACV,MAAM,IAAI,+QAAA,CAAoB,6DAA6D;YAAE,OAAO;QAAE,CAAC;IACzG;AACF"}},
    {"offset": {"line": 340, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/lib/stack-app.ts"],"sourcesContent":["import React, { use, useCallback, useMemo } from \"react\";\nimport { KnownError, KnownErrors, OAuthProviderConfigJson, ServerUserJson, StackAdminInterface, StackClientInterface, StackServerInterface } from \"@stackframe/stack-shared\";\nimport { getCookie, setOrDeleteCookie } from \"./cookie\";\nimport { StackAssertionError, throwErr } from \"@stackframe/stack-shared/dist/utils/errors\";\nimport { generateUuid } from \"@stackframe/stack-shared/dist/utils/uuids\";\nimport { AsyncResult, Result } from \"@stackframe/stack-shared/dist/utils/results\";\nimport { suspendIfSsr } from \"@stackframe/stack-shared/dist/utils/react\";\nimport { AsyncStore } from \"@stackframe/stack-shared/dist/utils/stores\";\nimport { ClientProjectJson, UserJson, TokenObject, TokenStore, ProjectJson, EmailConfigJson, DomainConfigJson, ReadonlyTokenStore, getProductionModeErrors, ProductionModeError, UserUpdateJson, TeamJson, PermissionDefinitionJson, PermissionDefinitionScopeJson, TeamMemberJson } from \"@stackframe/stack-shared/dist/interface/clientInterface\";\nimport { isClient } from \"../utils/next\";\nimport { callOAuthCallback, signInWithOAuth } from \"./auth\";\nimport * as NextNavigation from \"next/navigation\";  // import the entire module to get around some static compiler warnings emitted by Next.js in some cases\nimport { ReadonlyJson } from \"@stackframe/stack-shared/dist/utils/json\";\nimport { constructRedirectUrl } from \"../utils/url\";\nimport { filterUndefined, omit } from \"@stackframe/stack-shared/dist/utils/objects\";\nimport { neverResolve, resolved, runAsynchronously, wait } from \"@stackframe/stack-shared/dist/utils/promises\";\nimport { AsyncCache } from \"@stackframe/stack-shared/dist/utils/caches\";\nimport { ApiKeySetBaseJson, ApiKeySetCreateOptions, ApiKeySetFirstViewJson, ApiKeySetJson, ProjectUpdateOptions } from \"@stackframe/stack-shared/dist/interface/adminInterface\";\nimport { suspend } from \"@stackframe/stack-shared/dist/utils/react\";\nimport { ServerPermissionDefinitionCustomizableJson, ServerPermissionDefinitionJson, ServerTeamCustomizableJson, ServerTeamJson, ServerTeamMemberJson, ServerUserUpdateJson } from \"@stackframe/stack-shared/dist/interface/serverInterface\";\n\nconst clientVersion = process.env.STACK_COMPILE_TIME_CLIENT_PACKAGE_VERSION ?? throwErr(\"Missing STACK_COMPILE_TIME_CLIENT_PACKAGE_VERSION. This should be a compile-time variable set by Stack's build system.\");\n\nexport type TokenStoreOptions<HasTokenStore extends boolean = boolean> =\n  HasTokenStore extends true ? \"cookie\" | \"nextjs-cookie\" | \"memory\" :\n  HasTokenStore extends false ? null :\n  TokenStoreOptions<true> | TokenStoreOptions<false>;\n\nexport type HandlerUrls = {\n  handler: string,\n  signIn: string,\n  afterSignIn: string,\n  signUp: string,\n  afterSignUp: string,\n  signOut: string,\n  afterSignOut: string,\n  emailVerification: string,\n  passwordReset: string,\n  forgotPassword: string,\n  home: string,\n  oauthCallback: string,\n  magicLinkCallback: string,\n  accountSettings: string,\n}\n\ntype ProjectCurrentUser<ProjectId> = ProjectId extends \"internal\" ? CurrentInternalUser : CurrentUser;\ntype ProjectCurrentSeverUser<ProjectId> = ProjectId extends \"internal\" ? CurrentInternalServerUser : CurrentServerUser;\n\nfunction permissionDefinitionScopeToType(scope: PermissionDefinitionScopeJson): 'team' | 'global' {\n  return ({\"any-team\": \"team\", \"specific-team\": \"team\", \"global\": \"global\"} as const)[scope.type];\n}\n\nfunction getUrls(partial: Partial<HandlerUrls>): HandlerUrls {\n  const handler = partial.handler ?? \"/handler\";\n  return {\n    handler,\n    signIn: `${handler}/signin`,\n    afterSignIn: \"/\",\n    signUp: `${handler}/signup`,\n    afterSignUp: \"/\",\n    signOut: `${handler}/signout`,\n    afterSignOut: \"/\",\n    emailVerification: `${handler}/email-verification`,\n    passwordReset: `${handler}/password-reset`,\n    forgotPassword: `${handler}/forgot-password`,\n    oauthCallback: `${handler}/oauth-callback`,\n    magicLinkCallback: `${handler}/magic-link-callback`,\n    home: \"/\",\n    accountSettings: `${handler}/account-settings`,\n    ...filterUndefined(partial),\n  };\n}\n\nfunction getDefaultProjectId() {\n  return process.env.NEXT_PUBLIC_STACK_PROJECT_ID || throwErr(new Error(\"Welcome to Stack! It seems that you haven't provided a project ID. Please create a project on the Stack dashboard at https://app.stack-auth.com and put it in the NEXT_PUBLIC_STACK_PROJECT_ID environment variable.\"));\n}\n\nfunction getDefaultPublishableClientKey() {\n  return process.env.NEXT_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY || throwErr(new Error(\"Welcome to Stack! It seems that you haven't provided a publishable client key. Please create an API key for your project on the Stack dashboard at https://app.stack-auth.com and copy your publishable client key into the NEXT_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY environment variable.\"));\n}\n\nfunction getDefaultSecretServerKey() {\n  return process.env.STACK_SECRET_SERVER_KEY || throwErr(new Error(\"No secret server key provided. Please copy your key from the Stack dashboard and put your it in the STACK_SECRET_SERVER_KEY environment variable.\"));\n}\n\nfunction getDefaultSuperSecretAdminKey() {\n  return process.env.STACK_SUPER_SECRET_ADMIN_KEY || throwErr(new Error(\"No super secret admin key provided. Please copy your key from the Stack dashboard and put it in the STACK_SUPER_SECRET_ADMIN_KEY environment variable.\"));\n}\n\nfunction getDefaultBaseUrl() {\n  return process.env.NEXT_PUBLIC_STACK_URL || defaultBaseUrl;\n}\n\nexport type StackClientAppConstructorOptions<HasTokenStore extends boolean, ProjectId extends string> = {\n  baseUrl?: string,\n  projectId?: ProjectId,\n  publishableClientKey?: string,\n  urls?: Partial<HandlerUrls>,\n\n  // we intersect with TokenStoreOptions in the beginning to make TypeScript error messages easier to read\n  tokenStore: TokenStoreOptions<HasTokenStore>,\n};\n\nexport type StackServerAppConstructorOptions<HasTokenStore extends boolean, ProjectId extends string> = StackClientAppConstructorOptions<HasTokenStore, ProjectId> & {\n  secretServerKey?: string,\n};\n\nexport type StackAdminAppConstructorOptions<HasTokenStore extends boolean, ProjectId extends string> = (\n  | (\n    & StackServerAppConstructorOptions<HasTokenStore, ProjectId>\n    & {\n      superSecretAdminKey?: string,\n    }\n  )\n  | (\n    & Omit<StackServerAppConstructorOptions<HasTokenStore, ProjectId>, \"publishableClientKey\" | \"secretServerKey\">\n    & {\n      projectOwnerTokens: ReadonlyTokenStore,\n    }\n  )\n);\n\nexport type StackClientAppJson<HasTokenStore extends boolean, ProjectId extends string> = StackClientAppConstructorOptions<HasTokenStore, ProjectId> & {\n  uniqueIdentifier: string,\n  // note: if you add more fields here, make sure to ensure the checkString in the constructor has/doesn't have them\n};\n\nconst defaultBaseUrl = \"https://app.stack-auth.com\";\n\nfunction createEmptyTokenStore() {\n  const store = new AsyncStore<TokenObject>();\n  store.set({\n    refreshToken: null,\n    accessToken: null,\n  });\n  return store;\n}\n\nconst memoryTokenStore = createEmptyTokenStore();\nlet cookieTokenStore: TokenStore | null = null;\nconst cookieTokenStoreInitializer = (): TokenStore => {\n  if (!isClient()) {\n    throw new Error(\"Cannot use cookie token store on the server!\");\n  }\n\n  if (cookieTokenStore === null) {\n    cookieTokenStore = new AsyncStore<TokenObject>();\n    let hasSucceededInWriting = true;\n\n    setInterval(() => {\n      if (hasSucceededInWriting) {\n        const newValue = {\n          refreshToken: getCookie('stack-refresh'),\n          accessToken: getCookie('stack-access'),\n        };\n        const res = cookieTokenStore!.get();\n        if (res.status !== \"ok\"\n          || res.data.refreshToken !== newValue.refreshToken\n          || res.data.accessToken !== newValue.accessToken\n        ) {\n          cookieTokenStore!.set(newValue);\n        }\n      }\n    }, 10);\n    cookieTokenStore.onChange((value) => {\n      try {\n        setOrDeleteCookie('stack-refresh', value.refreshToken, { maxAge: 60 * 60 * 24 * 365 });\n        setOrDeleteCookie('stack-access', value.accessToken, { maxAge: 60 * 60 * 24 });\n        hasSucceededInWriting = true;\n      } catch (e) {\n        hasSucceededInWriting = false;\n      }\n    });\n  }\n\n  return cookieTokenStore;\n};\n\nconst tokenStoreInitializers = new Map<TokenStoreOptions, () => TokenStore>([\n  [\"cookie\", cookieTokenStoreInitializer],\n  [\"nextjs-cookie\", () => {\n    if (isClient()) {\n      return cookieTokenStoreInitializer();\n    } else {\n      const store = new AsyncStore<TokenObject>();\n      store.set({\n        refreshToken: getCookie('stack-refresh'),\n        accessToken: getCookie('stack-access'),\n      });\n      store.onChange((value) => {\n        try {\n          setOrDeleteCookie('stack-refresh', value.refreshToken, { maxAge: 60 * 60 * 24 * 365 });\n          setOrDeleteCookie('stack-access', value.accessToken, { maxAge: 60 * 60 * 24 });\n        } catch (e) {\n          // ignore\n        }\n      });\n      return store;\n    }\n  }],\n  [\"memory\", () => memoryTokenStore],\n  [null, () => createEmptyTokenStore()],\n]);\nfunction getTokenStore(tokenStoreOptions: TokenStoreOptions) {\n  return (tokenStoreInitializers.get(tokenStoreOptions) ?? throwErr(`Invalid token store ${tokenStoreOptions}`))();\n}\n\nconst loadingSentinel = Symbol(\"stackAppCacheLoadingSentinel\");\nfunction useCache<D extends any[], T>(cache: AsyncCache<D, T>, dependencies: D, caller: string): T {\n  // we explicitly don't want to run this hook in SSR\n  suspendIfSsr(caller);\n\n  const subscribe = useCallback((cb: () => void) => {\n    const { unsubscribe } = cache.onChange(dependencies, () => cb());\n    return unsubscribe;\n  }, [cache, ...dependencies]);\n  const getSnapshot = useCallback(() => {\n    return AsyncResult.or(cache.getIfCached(dependencies), loadingSentinel);\n  }, [cache, ...dependencies]);\n\n  // note: we must use React.useSyncExternalStore instead of importing the function directly, as it will otherwise\n  // throw an error (\"can't import useSyncExternalStore from the server\")\n  const value = React.useSyncExternalStore(subscribe, getSnapshot, getSnapshot);\n\n  if (value === loadingSentinel) {\n    return use(cache.getOrWait(dependencies, \"read-write\"));\n  } else {\n    // still need to call `use` because React expects the control flow to not change across two re-renders with the same props/state and it detects that by hook invocations (including `use`)\n    return use(resolved(value));\n  }\n}\n\nexport const stackAppInternalsSymbol = Symbol.for(\"StackAppInternals\");\n\nconst allClientApps = new Map<string, [checkString: string, app: StackClientApp<any, any>]>();\n\nconst createCache = <D extends any[], T>(fetcher: (dependencies: D) => Promise<T>) => {\n  return new AsyncCache<D, T>(\n    async (dependencies) => await fetcher(dependencies),\n    {},\n  );\n};\n\n// note that we intentionally use TokenStore (a reference type) as a key instead of a stringified version of it, as different token stores with the same tokens should be treated differently\n// (if we wouldn't , we would cache users across requests on the server, which may cause issues)\nconst createCacheByTokenStore = <D extends any[], T>(fetcher: (tokenStore: TokenStore, extraDependencies: D) => Promise<T> ) => {\n  return new AsyncCache<[TokenStore, ...D], T>(\n    async ([tokenStore, ...extraDependencies]) => await fetcher(tokenStore, extraDependencies),\n    {\n      onSubscribe: ([tokenStore], refresh) => {\n        // TODO find a *clean* way to not refresh when the token change was made inside the fetcher (for example due to expired access token)\n        const handlerObj = tokenStore.onChange((newValue, oldValue) => {\n          if (JSON.stringify(newValue) === JSON.stringify(oldValue)) return;\n          refresh();\n        });\n        return () => handlerObj.unsubscribe();\n      },\n    },\n  );\n};\n\n\nclass _StackClientAppImpl<HasTokenStore extends boolean, ProjectId extends string = string> {\n  protected readonly _uniqueIdentifier: string;\n  protected _interface: StackClientInterface;\n  protected readonly _tokenStoreOptions: TokenStoreOptions<HasTokenStore>;\n  protected readonly _urlOptions: Partial<HandlerUrls>;\n\n  private readonly __DEMO_ENABLE_SLIGHT_FETCH_DELAY = false;\n\n  private readonly _currentUserCache = createCacheByTokenStore(async (tokenStore) => {\n    if (this.__DEMO_ENABLE_SLIGHT_FETCH_DELAY) {\n      await wait(2000);\n    }\n    const user = await this._interface.getClientUserByToken(tokenStore);\n    return Result.or(user, null);\n  });\n  private readonly _currentProjectCache = createCache(async () => {\n    return Result.orThrow(await this._interface.getClientProject());\n  });\n  private readonly _ownedProjectsCache = createCacheByTokenStore(async (tokenStore) => {\n    return await this._interface.listProjects(tokenStore);\n  });\n  private readonly _currentUserPermissionsCache = createCacheByTokenStore<\n    [string, 'team' | 'global', boolean], \n    PermissionDefinitionJson[]\n  >(async (tokenStore, [teamId, type, direct]) => {\n    return await this._interface.listClientUserTeamPermissions({ teamId, type, direct }, tokenStore);\n  });\n  private readonly _currentUserTeamsCache = createCacheByTokenStore(async (tokenStore) => {\n    return await this._interface.listClientUserTeams(tokenStore);\n  });\n\n  constructor(options:\n    & {\n      uniqueIdentifier?: string,\n      checkString?: string,\n    }\n    & (\n      | StackClientAppConstructorOptions<HasTokenStore, ProjectId>\n      | Pick<StackClientAppConstructorOptions<HasTokenStore, ProjectId>, \"tokenStore\" | \"urls\"> & {\n        interface: StackClientInterface,\n      }\n    )\n  ) {\n    if (\"interface\" in options) {\n      this._interface = options.interface;\n    } else {\n      this._interface = new StackClientInterface({\n        baseUrl: options.baseUrl ?? getDefaultBaseUrl(),\n        projectId: options.projectId ?? getDefaultProjectId(),\n        clientVersion,\n        publishableClientKey: options.publishableClientKey ?? getDefaultPublishableClientKey(),\n      });\n    }\n\n    this._tokenStoreOptions = options.tokenStore;\n    this._urlOptions = options.urls ?? {};\n\n    this._uniqueIdentifier = options.uniqueIdentifier ?? generateUuid();\n    if (allClientApps.has(this._uniqueIdentifier)) {\n      throw new StackAssertionError(\"A Stack client app with the same unique identifier already exists\");\n    }\n    allClientApps.set(this._uniqueIdentifier, [options.checkString ?? \"default check string\", this]);\n  }\n\n  protected hasPersistentTokenStore(): this is StackClientApp<true, ProjectId> {\n    return this._tokenStoreOptions !== null;\n  }\n\n  protected _ensurePersistentTokenStore(): asserts this is StackClientApp<true, ProjectId>  {\n    if (!this.hasPersistentTokenStore()) {\n      throw new Error(\"Cannot call this function on a Stack app without a persistent token store. Make sure the tokenStore option is set to a non-null value when initializing Stack.\");\n    }\n  }\n\n  protected isInternalProject(): this is { projectId: \"internal\" } {\n    return this.projectId === \"internal\";\n  }\n\n  protected _ensureInternalProject(): asserts this is { projectId: \"internal\" } {\n    if (!this.isInternalProject()) {\n      throw new Error(\"Cannot call this function on a Stack app with a project ID other than 'internal'.\");\n    }\n  }\n\n  protected _permissionFromJson(json: PermissionDefinitionJson): Permission {\n    const type = permissionDefinitionScopeToType(json.scope);\n  \n    if (type === 'team') {\n      return {\n        id: json.id,\n        type,\n        teamId: (json.scope as { teamId: string }).teamId,\n      };\n    } else {\n      return {\n        id: json.id,\n        type,\n      };\n    }\n  }\n\n  protected _teamFromJson(json: TeamJson): Team {\n    return {\n      id: json.id,\n      displayName: json.displayName,\n      createdAt: new Date(json.createdAtMillis),\n      toJson() {\n        return json;\n      },\n    };\n  }\n\n  protected _userFromJson(json: UserJson): User {\n    const app = this;\n    return {\n      projectId: json.projectId,\n      id: json.id,\n      displayName: json.displayName,\n      primaryEmail: json.primaryEmail,\n      primaryEmailVerified: json.primaryEmailVerified,\n      profileImageUrl: json.profileImageUrl,\n      signedUpAt: new Date(json.signedUpAtMillis),\n      clientMetadata: json.clientMetadata,\n      authMethod: json.authMethod,\n      hasPassword: json.hasPassword,\n      authWithEmail: json.authWithEmail,\n      oauthProviders: json.oauthProviders,\n      async getSelectedTeam() {\n        return await this.getTeam(json.selectedTeamId || \"\");\n      },\n      useSelectedTeam() {\n        return this.useTeam(json.selectedTeamId || \"\");\n      },\n      async getTeam(teamId: string) {\n        const teams = await this.listTeams();\n        return teams.find((t) => t.id === teamId) ?? null;\n      },\n      useTeam(teamId: string) {\n        const teams = this.useTeams();\n        return useMemo(() => {\n          return teams.find((t) => t.id === teamId) ?? null;\n        }, [teams, teamId]);\n      },\n      onTeamChange(teamId: string, callback: (team: Team | null) => void) {\n        return this.onTeamsChange((teams) => {\n          // TODO only call callback if the team actually changed\n          const team = teams.find((t) => t.id === teamId) ?? null;\n          callback(team);\n        });\n      },\n      async listTeams() {\n        const teams = await app._currentUserTeamsCache.getOrWait([getTokenStore(app._tokenStoreOptions)], \"write-only\");\n        return teams.map((json) => app._teamFromJson(json));\n      },\n      useTeams() {\n        const teams = useCache(app._currentUserTeamsCache, [getTokenStore(app._tokenStoreOptions)], \"user.useTeams()\");\n        return useMemo(() => teams.map((json) => app._teamFromJson(json)), [teams]);\n      },\n      onTeamsChange(callback: (value: Team[], oldValue: Team[] | undefined) => void) {\n        return app._currentUserTeamsCache.onChange([getTokenStore(app._tokenStoreOptions)], (value, oldValue) => {\n          callback(value.map((json) => app._teamFromJson(json)), oldValue?.map((json) => app._teamFromJson(json)));\n        });\n      },\n      async listPermissions(scope: Team, options?: { direct?: boolean }): Promise<Permission[]> {\n        const permissions = await app._currentUserPermissionsCache.getOrWait([getTokenStore(app._tokenStoreOptions), scope.id, 'team', !!options?.direct], \"write-only\");\n        return permissions.map((json) => app._permissionFromJson(json));\n      },\n      usePermissions(scope: Team, options?: { direct?: boolean }): Permission[] {\n        const permissions = useCache(app._currentUserPermissionsCache, [getTokenStore(app._tokenStoreOptions), scope.id, 'team', !!options?.direct], \"user.usePermissions()\");\n        return useMemo(() => permissions.map((json) => app._permissionFromJson(json)), [permissions]);\n      },\n      usePermission(scope: Team, permissionId: string): Permission | null {\n        const permissions = this.usePermissions(scope);\n        return useMemo(() => permissions.find((p) => p.id === permissionId) ?? null, [permissions, permissionId]);\n      },\n      async getPermission(scope: Team, permissionId: string): Promise<Permission | null> {\n        const permissions = await this.listPermissions(scope);\n        return permissions.find((p) => p.id === permissionId) ?? null;\n      },\n      async hasPermission(scope: Team, permissionId: string): Promise<boolean> {\n        return (await this.getPermission(scope, permissionId)) !== null;\n      },\n      toJson() {\n        return json;\n      },\n    };\n  }\n\n  protected _teamMemberFromJson(json: TeamMemberJson): TeamMember;\n  protected _teamMemberFromJson(json: TeamMemberJson | null): TeamMember | null;\n  protected _teamMemberFromJson(json: TeamMemberJson): TeamMember | null {\n    if (json === null) return null;\n    return {\n      teamId: json.teamId,\n      userId: json.userId,\n      displayName: json.displayName,\n    };\n  }\n\n  protected _currentUserFromJson(json: UserJson, tokenStore: TokenStore): ProjectCurrentUser<ProjectId>;\n  protected _currentUserFromJson(json: UserJson | null, tokenStore: TokenStore): ProjectCurrentUser<ProjectId> | null;\n  protected _currentUserFromJson(json: UserJson | null, tokenStore: TokenStore): ProjectCurrentUser<ProjectId> | null {\n    if (json === null) return null;\n    const app = this;\n    const currentUser: CurrentUser = {\n      ...this._userFromJson(json),\n      tokenStore,\n      async updateSelectedTeam(team: Team | null) {\n        await app._updateUser({ selectedTeamId: team?.id ?? null }, tokenStore);\n      },\n      update(update) {\n        return app._updateUser(update, tokenStore);\n      },\n      signOut() {\n        return app._signOut(tokenStore);\n      },\n      sendVerificationEmail() {\n        return app._sendVerificationEmail(tokenStore);\n      },\n      updatePassword(options: { oldPassword: string, newPassword: string}) {\n        return app._updatePassword(options, tokenStore);\n      },\n    };\n    if (this.isInternalProject()) {\n      const internalUser: CurrentInternalUser = {\n        ...currentUser,\n        createProject(newProject: ProjectUpdateOptions & { displayName: string }) {\n          return app._createProject(newProject);\n        },\n        listOwnedProjects() {\n          return app._listOwnedProjects();\n        },\n        useOwnedProjects() {\n          return app._useOwnedProjects();\n        },\n        onOwnedProjectsChange(callback: (projects: Project[]) => void) {\n          return app._onOwnedProjectsChange(callback);\n        }\n      };\n      Object.freeze(internalUser);\n      return internalUser;\n    } else {\n      Object.freeze(currentUser);\n      return currentUser as any;\n    }\n  }\n\n  protected _projectAdminFromJson(data: ProjectJson, adminInterface: StackAdminInterface, onRefresh: () => Promise<void>): Project {\n    if (data.id !== adminInterface.projectId) {\n      throw new Error(`The project ID of the provided project JSON (${data.id}) does not match the project ID of the app (${adminInterface.projectId})! This is a Stack bug.`);\n    }\n\n    return {\n      id: data.id,\n      displayName: data.displayName,\n      description: data.description,\n      createdAt: new Date(data.createdAtMillis),\n      userCount: data.userCount,\n      isProductionMode: data.isProductionMode,\n      evaluatedConfig: {\n        id: data.evaluatedConfig.id,\n        credentialEnabled: data.evaluatedConfig.credentialEnabled,\n        magicLinkEnabled: data.evaluatedConfig.magicLinkEnabled,\n        allowLocalhost: data.evaluatedConfig.allowLocalhost,\n        oauthProviders: data.evaluatedConfig.oauthProviders,\n        emailConfig: data.evaluatedConfig.emailConfig,\n        domains: data.evaluatedConfig.domains,\n        createTeamOnSignUp: data.evaluatedConfig.createTeamOnSignUp,\n      },\n\n      async update(update: ProjectUpdateOptions) {\n        await adminInterface.updateProject(update);\n        await onRefresh();\n      },\n\n      toJson() {\n        return data;\n      },\n\n      getProductionModeErrors() {\n        return getProductionModeErrors(this.toJson());\n      },\n    };\n  }\n\n  protected _createAdminInterface(forProjectId: string, tokenStore: TokenStore): StackAdminInterface {\n    return new StackAdminInterface({\n      baseUrl: this._interface.options.baseUrl,\n      projectId: forProjectId,\n      clientVersion,\n      projectOwnerTokens: tokenStore,\n    });\n  }\n\n  get projectId(): ProjectId {\n    return this._interface.projectId as ProjectId;\n  }\n\n  get urls(): Readonly<HandlerUrls> {\n    return getUrls(this._urlOptions);\n  }\n\n  protected async _redirectTo(handlerName: keyof HandlerUrls, options?: RedirectToOptions) {\n    const url = this.urls[handlerName];\n    if (!url) {\n      throw new Error(`No URL for handler name ${handlerName}`);\n    }\n\n    if (options?.replace) {\n      window.location.replace(url);\n    } else {\n      window.location.assign(url);\n    }\n    return await wait(2000);\n  }\n\n  async redirectToSignIn() { return await this._redirectTo(\"signIn\"); }\n  async redirectToSignUp() { return await this._redirectTo(\"signUp\"); }\n  async redirectToSignOut() { return await this._redirectTo(\"signOut\"); }\n  async redirectToEmailVerification() { return await this._redirectTo(\"emailVerification\"); }\n  async redirectToPasswordReset() { return await this._redirectTo(\"passwordReset\"); }\n  async redirectToForgotPassword() { return await this._redirectTo(\"forgotPassword\"); }\n  async redirectToHome() { return await this._redirectTo(\"home\"); }\n  async redirectToOAuthCallback() { return await this._redirectTo(\"oauthCallback\"); }\n  async redirectToMagicLinkCallback() { return await this._redirectTo(\"magicLinkCallback\"); }\n  async redirectToAfterSignIn() { return await this._redirectTo(\"afterSignIn\"); }\n  async redirectToAfterSignUp() { return await this._redirectTo(\"afterSignUp\"); }\n  async redirectToAfterSignOut() { return await this._redirectTo(\"afterSignOut\"); }\n  async redirectToAccountSettings() { return await this._redirectTo(\"accountSettings\"); }\n\n  async sendForgotPasswordEmail(email: string): Promise<KnownErrors[\"UserNotFound\"] | undefined> {\n    const redirectUrl = constructRedirectUrl(this.urls.passwordReset);\n    const error = await this._interface.sendForgotPasswordEmail(email, redirectUrl);\n    return error;\n  }\n\n  async sendMagicLinkEmail(email: string): Promise<KnownErrors[\"RedirectUrlNotWhitelisted\"] | undefined> {\n    const magicLinkRedirectUrl = constructRedirectUrl(this.urls.magicLinkCallback);\n    const error = await this._interface.sendMagicLinkEmail(email, magicLinkRedirectUrl);\n    return error;\n  }\n\n  async resetPassword(options: { password: string, code: string }): Promise<KnownErrors[\"PasswordResetError\"] | undefined> {\n    const error = await this._interface.resetPassword(options);\n    return error;\n  }\n\n  async verifyPasswordResetCode(code: string): Promise<KnownErrors[\"PasswordResetCodeError\"] | undefined> {\n    return await this._interface.verifyPasswordResetCode(code);\n  }\n\n  async verifyEmail(code: string): Promise<KnownErrors[\"EmailVerificationError\"] | undefined> {\n    return await this._interface.verifyEmail(code);\n  }\n\n  async getUser(options: GetUserOptions & { or: 'redirect' }): Promise<ProjectCurrentUser<ProjectId>>;\n  async getUser(options: GetUserOptions & { or: 'throw' }): Promise<ProjectCurrentUser<ProjectId>>;\n  async getUser(options?: GetUserOptions): Promise<ProjectCurrentUser<ProjectId> | null>;\n  async getUser(options?: GetUserOptions): Promise<ProjectCurrentUser<ProjectId> | null> {\n    this._ensurePersistentTokenStore();\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    const userJson = await this._currentUserCache.getOrWait([tokenStore], \"write-only\");\n\n    if (userJson === null) {\n      switch (options?.or) {\n        case 'redirect': {\n          NextNavigation.redirect(this.urls.signIn, NextNavigation.RedirectType.replace);\n          throw new Error(\"redirect should never return!\");\n        }\n        case 'throw': {\n          throw new Error(\"User is not signed in but getUser was called with { or: 'throw' }\");\n        }\n        default: {\n          return null;\n        }\n      }\n    }\n\n    return this._currentUserFromJson(userJson, tokenStore);\n  }\n\n  useUser(options: GetUserOptions & { or: 'redirect' }): ProjectCurrentUser<ProjectId>;\n  useUser(options: GetUserOptions & { or: 'throw' }): ProjectCurrentUser<ProjectId>;\n  useUser(options?: GetUserOptions): ProjectCurrentUser<ProjectId> | null;\n  useUser(options?: GetUserOptions): ProjectCurrentUser<ProjectId> | null {\n    this._ensurePersistentTokenStore();\n\n    const router = NextNavigation.useRouter();\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    const userJson = useCache(this._currentUserCache, [tokenStore], \"useUser()\");\n\n    if (userJson === null) {\n      switch (options?.or) {\n        case 'redirect': {\n          router.replace(this.urls.signIn);\n          suspend();\n          throw new StackAssertionError(\"suspend should never return\");\n        }\n        case 'throw': {\n          throw new Error(\"User is not signed in but useUser was called with { or: 'throw' }\");\n        }\n        case undefined:\n        case \"return-null\": {\n          // do nothing\n        }\n      }\n    }\n\n    return useMemo(() => {\n      return this._currentUserFromJson(userJson, tokenStore);\n    }, [userJson, tokenStore, options?.or]);\n  }\n\n  onUserChange(callback: (user: CurrentUser | null) => void) {\n    this._ensurePersistentTokenStore();\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    return this._currentUserCache.onChange([tokenStore], (userJson) => {\n      callback(this._currentUserFromJson(userJson, tokenStore));\n    });\n  }\n\n  protected async _updateUser(update: UserUpdateJson, tokenStore: TokenStore) {\n    const res = await this._interface.setClientUserCustomizableData(update, tokenStore);\n    await this._refreshUser(tokenStore);\n    return res;\n  }\n\n  async signInWithOAuth(provider: string) {\n    this._ensurePersistentTokenStore();\n    await signInWithOAuth(this._interface, { provider, redirectUrl: this.urls.oauthCallback });\n  }\n\n  async signInWithCredential(options: {\n    email: string,\n    password: string,\n  }): Promise<KnownErrors[\"EmailPasswordMismatch\"] | undefined> {\n    this._ensurePersistentTokenStore();\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    const errorCode = await this._interface.signInWithCredential(options.email, options.password, tokenStore);\n    if (!errorCode) {\n      await this.redirectToAfterSignIn({ replace: true });\n    }\n    return errorCode;\n  }\n\n  async signUpWithCredential(options: {\n    email: string,\n    password: string,\n  }): Promise<KnownErrors[\"UserEmailAlreadyExists\"] | KnownErrors['PasswordRequirementsNotMet'] | undefined> {\n    this._ensurePersistentTokenStore();\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    const emailVerificationRedirectUrl = constructRedirectUrl(this.urls.emailVerification);\n    const errorCode = await this._interface.signUpWithCredential(\n      options.email, \n      options.password, \n      emailVerificationRedirectUrl, \n      tokenStore\n    );\n    if (!errorCode) {\n      await this.redirectToAfterSignUp({ replace: true });\n    }\n    return errorCode;\n  }\n\n  async signInWithMagicLink(code: string): Promise<KnownErrors[\"MagicLinkError\"] | undefined> {\n    this._ensurePersistentTokenStore();\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    const result = await this._interface.signInWithMagicLink(code, tokenStore);\n    if (result instanceof KnownError) {\n      return result;\n    }\n    if (result.newUser) {\n      await this.redirectToAfterSignUp({ replace: true });\n    } else {\n      await this.redirectToAfterSignIn({ replace: true });\n    }\n  }\n\n  async callOAuthCallback() {\n    this._ensurePersistentTokenStore();\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    const result = await callOAuthCallback(this._interface, tokenStore, this.urls.oauthCallback);\n    if (result) {\n      if (result.newUser) {\n        await this.redirectToAfterSignUp({ replace: true });\n        return true;\n      } else {\n        await this.redirectToAfterSignIn({ replace: true });\n        return true;\n      }\n    }\n    return false;\n  }\n\n  protected async _signOut(tokenStore: TokenStore): Promise<void> {\n    await this._interface.signOut(tokenStore);\n    await this.redirectToAfterSignOut();\n  }\n\n  protected async _sendVerificationEmail(tokenStore: TokenStore): Promise<KnownErrors[\"EmailAlreadyVerified\"] | undefined> {\n    const emailVerificationRedirectUrl = constructRedirectUrl(this.urls.emailVerification);\n    return await this._interface.sendVerificationEmail(emailVerificationRedirectUrl, tokenStore);\n  }\n\n  protected async _updatePassword(\n    options: { oldPassword: string, newPassword: string }, \n    tokenStore: TokenStore\n  ): Promise<KnownErrors[\"PasswordMismatch\"] | KnownErrors[\"PasswordRequirementsNotMet\"] | undefined> {\n    return await this._interface.updatePassword(options, tokenStore);\n  }\n\n  async signOut(): Promise<void> {\n    const user = await this.getUser();\n    if (user) {\n      await user.signOut();\n    }\n  }\n\n  async getProject(): Promise<ClientProjectJson> {\n    return await this._currentProjectCache.getOrWait([], \"write-only\");\n  }\n\n  useProject(): ClientProjectJson {\n    return useCache(this._currentProjectCache, [], \"useProject()\");\n  }\n\n  onProjectChange(callback: (project: ClientProjectJson) => void) {\n    return this._currentProjectCache.onChange([], callback);\n  }\n\n  protected async _listOwnedProjects(): Promise<Project[]> {\n    this._ensureInternalProject();\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    const json = await this._ownedProjectsCache.getOrWait([tokenStore], \"write-only\");\n    return json.map((j) => this._projectAdminFromJson(\n      j,\n      this._createAdminInterface(j.id, tokenStore),\n      () => this._refreshOwnedProjects(tokenStore),\n    ));\n  }\n\n  protected _useOwnedProjects(): Project[] {\n    this._ensureInternalProject();\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    const json = useCache(this._ownedProjectsCache, [tokenStore], \"useOwnedProjects()\");\n    return useMemo(() => json.map((j) => this._projectAdminFromJson(\n      j,\n      this._createAdminInterface(j.id, tokenStore),\n      () => this._refreshOwnedProjects(tokenStore),\n    )), [json]);\n  }\n\n  protected _onOwnedProjectsChange(callback: (projects: Project[]) => void) {\n    this._ensureInternalProject();\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    return this._ownedProjectsCache.onChange([tokenStore], (projects) => {\n      callback(projects.map((j) => this._projectAdminFromJson(\n        j,\n        this._createAdminInterface(j.id, tokenStore),\n        () => this._refreshOwnedProjects(tokenStore),\n      )));\n    });\n  }\n\n  protected async _createProject(newProject: ProjectUpdateOptions & { displayName: string }): Promise<Project> {\n    this._ensureInternalProject();\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    const json = await this._interface.createProject(newProject, tokenStore);\n    const res = this._projectAdminFromJson(\n      json,\n      this._createAdminInterface(json.id, tokenStore),\n      () => this._refreshOwnedProjects(tokenStore),\n    );\n    await this._refreshOwnedProjects(tokenStore);\n    return res;\n  }\n\n  protected async _refreshUser(tokenStore: TokenStore) {\n    await this._currentUserCache.refresh([tokenStore]);\n  }\n\n  protected async _refreshUsers() {\n    // nothing yet\n  }\n  \n  protected async _refreshProject() {\n    await this._currentProjectCache.refresh([]);\n  }\n\n  protected async _refreshOwnedProjects(tokenStore: TokenStore) {\n    await this._ownedProjectsCache.refresh([tokenStore]);\n  }\n\n  static get [stackAppInternalsSymbol]() {\n    return {\n      fromClientJson: <HasTokenStore extends boolean, ProjectId extends string>(\n        json: StackClientAppJson<HasTokenStore, ProjectId>\n      ): StackClientApp<HasTokenStore, ProjectId> => {\n        const providedCheckString = JSON.stringify(omit(json, [/* none currently */]));\n        const existing = allClientApps.get(json.uniqueIdentifier);\n        if (existing) {\n          const [existingCheckString, clientApp] = existing;\n          if (existingCheckString !== providedCheckString) {\n            throw new StackAssertionError(\"The provided app JSON does not match the configuration of the existing client app with the same unique identifier\", { providedObj: json, existingString: existingCheckString });\n          }\n          return clientApp as any;\n        }\n\n        return new _StackClientAppImpl<HasTokenStore, ProjectId>({\n          ...json,\n          checkString: providedCheckString,\n        });\n      }\n    };\n  }\n\n  get [stackAppInternalsSymbol]() {\n    return {\n      toClientJson: (): StackClientAppJson<HasTokenStore, ProjectId> => {\n        if (!(\"publishableClientKey\" in this._interface.options)) {\n          // TODO find a way to do this\n          throw Error(\"Cannot serialize to JSON from an application without a publishable client key\");\n        }\n\n        return {\n          baseUrl: this._interface.options.baseUrl,\n          projectId: this.projectId,\n          publishableClientKey: this._interface.options.publishableClientKey,\n          tokenStore: this._tokenStoreOptions,\n          urls: this._urlOptions,\n          uniqueIdentifier: this._uniqueIdentifier,\n        };\n      },\n      setCurrentUser: (userJsonPromise: Promise<UserJson | null>) => {\n        runAsynchronously(this._currentUserCache.forceSetCachedValueAsync([getTokenStore(this._tokenStoreOptions)], userJsonPromise));\n      },\n    };\n  };\n}\n\nclass _StackServerAppImpl<HasTokenStore extends boolean, ProjectId extends string> extends _StackClientAppImpl<HasTokenStore, ProjectId>\n{\n  declare protected _interface: StackServerInterface;\n\n  // TODO override the client user cache to use the server user cache, so we save some requests\n  private readonly _currentServerUserCache = createCacheByTokenStore(async (tokenStore) => {\n    const user = await this._interface.getServerUserByToken(tokenStore);\n    return Result.or(user, null);\n  });\n  private readonly _serverUsersCache = createCache(async () => {\n    return await this._interface.listUsers();\n  });\n  private readonly _serverUserCache = createCache<string[], ServerUserJson | null>(async ([userId]) => {\n    const user = await this._interface.getServerUserById(userId);\n    return Result.or(user, null);\n  });\n  private readonly _serverTeamsCache = createCache(async () => {\n    return await this._interface.listTeams();\n  });\n  private readonly _serverTeamMembersCache = createCache<string[], TeamMemberJson[]>(async ([teamId]) => {\n    return await this._interface.listTeamMembers(teamId);\n  });\n  private readonly _serverTeamPermissionDefinitionsCache = createCache(async () => {\n    return await this._interface.listPermissionDefinitions();\n  });\n  private readonly _serverTeamUserPermissionsCache = createCache<\n    [string, string, 'team' | 'global', boolean], \n    ServerPermissionDefinitionJson[]\n  >(async ([teamId, userId, type, direct]) => {\n    return await this._interface.listTeamMemberPermissions({ teamId, userId, type, direct });\n  });\n\n\n  constructor(options: \n    | StackServerAppConstructorOptions<HasTokenStore, ProjectId>\n    | {\n      interface: StackServerInterface,\n      tokenStore: TokenStoreOptions<HasTokenStore>,\n      urls: Partial<HandlerUrls> | undefined,\n    }\n  ) {\n    super(\"interface\" in options ? {\n      interface: options.interface,\n      tokenStore: options.tokenStore,\n      urls: options.urls,\n    } : {\n      interface: new StackServerInterface({\n        baseUrl: options.baseUrl ?? getDefaultBaseUrl(),\n        projectId: options.projectId ?? getDefaultProjectId(),\n        clientVersion,\n        publishableClientKey: options.publishableClientKey ?? getDefaultPublishableClientKey(),\n        secretServerKey: options.secretServerKey ?? getDefaultSecretServerKey(),\n      }),\n      tokenStore: options.tokenStore,\n      urls: options.urls ?? {},\n    });\n  }\n\n  protected _serverUserFromJson(json: ServerUserJson): ServerUser;\n  protected _serverUserFromJson(json: ServerUserJson | null): ServerUser | null;\n  protected _serverUserFromJson(json: ServerUserJson | null): ServerUser | null {\n    if (json === null) return null;\n    const app = this;\n    return {\n      ...this._userFromJson(json),\n      serverMetadata: json.serverMetadata,\n      async delete() {\n        const res = await app._interface.deleteServerUser(this.id);\n        await app._refreshUsers();\n        return res;\n      },\n      async update(update: ServerUserUpdateJson) {\n        const res = await app._interface.setServerUserCustomizableData(this.id, update);\n        await app._refreshUsers();\n        return res;\n      },\n      getClientUser() {\n        return app._userFromJson(json);\n      },\n      async grantPermission(scope: Team, permissionId: string): Promise<void> {\n        await app._interface.grantTeamUserPermission(scope.id, json.id, permissionId, 'team');\n        for (const direct of [true, false]) {\n          await app._serverTeamUserPermissionsCache.refresh([scope.id, json.id, 'team', direct]);\n        }\n      },\n      async revokePermission(scope: Team, permissionId: string): Promise<void> {\n        await app._interface.revokeTeamUserPermission(scope.id, json.id, permissionId, 'team');\n        for (const direct of [true, false]) {\n          await app._serverTeamUserPermissionsCache.refresh([scope.id, json.id, 'team', direct]);\n        }\n      },\n      async getTeam(teamId: string) {\n        const teams = await this.listTeams();\n        return teams.find((t) => t.id === teamId) ?? null;\n      },\n      useTeam(teamId: string) {\n        const teams = this.useTeams();\n        return useMemo(() => {\n          return teams.find((t) => t.id === teamId) ?? null;\n        }, [teams, teamId]);\n      },\n      onTeamChange(teamId: string, callback: (team: ServerTeam | null) => void) {\n        return this.onTeamsChange((teams) => {\n          // TODO only call callback if the team actually changed\n          const team = teams.find((t) => t.id === teamId) ?? null;\n          callback(team);\n        });\n      },\n      async listTeams() {\n        const teams = await app._serverTeamsCache.getOrWait([getTokenStore(app._tokenStoreOptions)], \"write-only\");\n        return teams.map((json) => app._serverTeamFromJson(json));\n      },\n      useTeams() {\n        const teams = useCache(app._serverTeamsCache, [getTokenStore(app._tokenStoreOptions)], \"user.useTeams()\");\n        return useMemo(() => teams.map((json) => app._serverTeamFromJson(json)), [teams]);\n      },\n      onTeamsChange(callback: (value: ServerTeam[], oldValue: ServerTeam[] | undefined) => void) {\n        return app._serverTeamsCache.onChange([getTokenStore(app._tokenStoreOptions)], (value, oldValue) => {\n          callback(value.map((json) => app._serverTeamFromJson(json)), oldValue?.map((json) => app._serverTeamFromJson(json)));\n        });\n      },\n      async listPermissions(scope: Team, options?: { direct?: boolean }): Promise<ServerPermission[]> {\n        const permissions = await app._serverTeamUserPermissionsCache.getOrWait([scope.id, json.id, 'team', !!options?.direct], \"write-only\");\n        return permissions.map((json) => app._serverPermissionFromJson(json));\n      },\n      usePermissions(scope: Team, options?: { direct?: boolean }): ServerPermission[] {\n        const permissions = useCache(app._serverTeamUserPermissionsCache, [scope.id, json.id, 'team', !!options?.direct], \"user.usePermissions()\");\n        return useMemo(() => permissions.map((json) => app._serverPermissionFromJson(json)), [permissions]);\n      },\n      usePermission(scope: Team, permissionId: string): ServerPermission | null {\n        const permissions = this.usePermissions(scope);\n        return useMemo(() => permissions.find((p) => p.id === permissionId) ?? null, [permissions, permissionId]);\n      },\n      async getPermission(scope: Team, permissionId: string): Promise<ServerPermission | null> {\n        const permissions = await this.listPermissions(scope);\n        return permissions.find((p) => p.id === permissionId) ?? null;\n      },\n      async hasPermission(scope: Team, permissionId: string): Promise<boolean> {\n        const permissions = await this.listPermissions(scope);\n        return permissions.some((p) => p.id === permissionId);\n      },\n      toJson() {\n        return json;\n      },\n    };\n  }\n\n  protected _currentServerUserFromJson(json: ServerUserJson, tokenStore: TokenStore): ProjectCurrentSeverUser<ProjectId>;\n  protected _currentServerUserFromJson(json: ServerUserJson | null, tokenStore: TokenStore): ProjectCurrentSeverUser<ProjectId> | null;\n  protected _currentServerUserFromJson(json: ServerUserJson | null, tokenStore: TokenStore): ProjectCurrentSeverUser<ProjectId> | null {\n    if (json === null) return null;\n    const app = this;\n    const nonCurrentServerUser = this._serverUserFromJson(json);\n    const currentUser: CurrentServerUser = {\n      ...nonCurrentServerUser,\n      tokenStore,\n      async delete() {\n        const res = await nonCurrentServerUser.delete();\n        await app._refreshUser(tokenStore);\n        return res;\n      },\n      async updateSelectedTeam(team: Team | null) {\n        await this.update({ selectedTeamId: team?.id ?? null });\n      },\n      async update(update: ServerUserUpdateJson) {\n        const res = await nonCurrentServerUser.update(update);\n        await app._refreshUser(tokenStore);\n        return res;\n      },  \n      signOut() {\n        return app._signOut(tokenStore);\n      },\n      getClientUser() {\n        return app._currentUserFromJson(json, tokenStore);\n      },\n      sendVerificationEmail() {\n        return app._sendVerificationEmail(tokenStore);\n      },\n      updatePassword(options: { oldPassword: string, newPassword: string}) {\n        return app._updatePassword(options, tokenStore);\n      },\n    };\n\n    if (this.isInternalProject()) {\n      const internalUser: CurrentInternalServerUser = {\n        ...currentUser,\n        createProject(newProject: ProjectUpdateOptions & { displayName: string }) {\n          return app._createProject(newProject);\n        },\n        listOwnedProjects() {\n          return app._listOwnedProjects();\n        },\n        useOwnedProjects() {\n          return app._useOwnedProjects();\n        },\n        onOwnedProjectsChange(callback: (projects: Project[]) => void) {\n          return app._onOwnedProjectsChange(callback);\n        }\n      };\n      Object.freeze(internalUser);\n      return internalUser;\n    } else {\n      Object.freeze(currentUser);\n      return currentUser as any;\n    }\n  }\n\n  protected _serverTeamMemberFromJson(json: ServerTeamMemberJson): ServerTeamMember;\n  protected _serverTeamMemberFromJson(json: ServerTeamMemberJson | null): ServerTeamMember | null;\n  protected _serverTeamMemberFromJson(json: ServerTeamMemberJson | null): ServerTeamMember | null {\n    if (json === null) return null;\n    const app = this;\n    return {\n      ...app._teamMemberFromJson(json),\n      async getUser() {\n        const user = app._serverUserFromJson(await app._serverUserCache.getOrWait([json.userId], \"write-only\"));\n        if (!user) throw new Error(`User ${json.userId} not found`);\n        return user;\n      }\n    };\n  }\n\n  protected _serverTeamFromJson(json: ServerTeamJson): ServerTeam {\n    const app = this;\n    return {\n      id: json.id,\n      displayName: json.displayName,\n      createdAt: new Date(json.createdAtMillis),\n      async listMembers() {\n        return (await app._interface.listTeamMembers(json.id)).map((u) => app._serverTeamMemberFromJson(u));\n      },\n      async update(update: Partial<ServerTeamCustomizableJson>) {\n        await app._interface.updateTeam(json.id, update);\n        await app._serverTeamsCache.refresh([]);\n      },\n      async delete() {\n        await app._interface.deleteTeam(json.id);\n        await app._serverTeamsCache.refresh([]);\n      },\n      useMembers() {\n        const result = useCache(app._serverTeamMembersCache, [json.id], \"team.useUsers()\");\n        return useMemo(() => result.map((u) => app._serverTeamMemberFromJson(u)), [result]);\n      },\n      async addUser(userId) {\n        await app._interface.addUserToTeam({\n          teamId: json.id,\n          userId,\n        });\n        await app._serverTeamMembersCache.refresh([json.id]);\n      },\n      async removeUser(userId) {\n        await app._interface.removeUserFromTeam({\n          teamId: json.id,\n          userId,\n        });\n        await app._serverTeamMembersCache.refresh([json.id]);\n      },\n      toJson() {\n        return json;\n      },\n    };\n  }\n\n  async getServerUser(): Promise<ProjectCurrentSeverUser<ProjectId> | null> {\n    this._ensurePersistentTokenStore();\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    const userJson = await this._currentServerUserCache.getOrWait([tokenStore], \"write-only\");\n    return this._currentServerUserFromJson(userJson, tokenStore);\n  }\n\n  async getServerUserById(userId: string): Promise<ServerUser | null> {\n    const json = await this._serverUserCache.getOrWait([userId], \"write-only\");\n    return this._serverUserFromJson(json);\n  }\n\n  useServerUser(options?: { required: boolean }): ProjectCurrentSeverUser<ProjectId> | null {\n    this._ensurePersistentTokenStore();\n\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    const userJson = useCache(this._currentServerUserCache, [tokenStore], \"useServerUser()\");\n\n    return useMemo(() => {\n      if (options?.required && userJson === null) {\n        use(this.redirectToSignIn());\n      }\n\n      return this._currentServerUserFromJson(userJson, tokenStore);\n    }, [userJson, tokenStore, options?.required]);\n  }\n\n  onServerUserChange(callback: (user: CurrentServerUser | null) => void) {\n    this._ensurePersistentTokenStore();\n    const tokenStore = getTokenStore(this._tokenStoreOptions);\n    return this._currentServerUserCache.onChange([tokenStore], (userJson) => {\n      callback(this._currentServerUserFromJson(userJson, tokenStore));\n    });\n  }\n\n  async listServerUsers(): Promise<ServerUser[]> {\n    const json = await this._serverUsersCache.getOrWait([], \"write-only\");\n    return json.map((j) => this._serverUserFromJson(j));\n  }\n\n  useServerUsers(): ServerUser[] {\n    const json = useCache(this._serverUsersCache, [], \"useServerUsers()\");\n    return useMemo(() => {\n      return json.map((j) => this._serverUserFromJson(j));\n    }, [json]);\n  }\n\n  onServerUsersChange(callback: (users: ServerUser[]) => void) {\n    return this._serverUsersCache.onChange([], (users) => {\n      callback(users.map((j) => this._serverUserFromJson(j)));\n    });\n  }\n\n  async listPermissionDefinitions(): Promise<ServerPermissionDefinitionJson[]> {\n    return await this._serverTeamPermissionDefinitionsCache.getOrWait([], \"write-only\");\n  }\n\n  usePermissionDefinitions(): ServerPermissionDefinitionJson[] {\n    return useCache(this._serverTeamPermissionDefinitionsCache, [], \"usePermissions()\");\n  }\n\n  _serverPermissionFromJson(json: ServerPermissionDefinitionJson): ServerPermission {\n    return {\n      ...this._permissionFromJson(json),\n      __databaseUniqueId: json.__databaseUniqueId,\n      description: json.description,\n      containPermissionIds: json.containPermissionIds,\n    };\n  }\n\n  async createPermissionDefinition(data: ServerPermissionDefinitionCustomizableJson): Promise<ServerPermission>{\n    const permission = await this._serverPermissionFromJson(await this._interface.createPermissionDefinition(data));\n    await this._serverTeamPermissionDefinitionsCache.refresh([]);\n    return permission;\n  }\n\n  async updatePermissionDefinition(permissionId: string, data: Partial<ServerPermissionDefinitionCustomizableJson>) {\n    await this._interface.updatePermissionDefinition(permissionId, data);\n    await this._serverTeamPermissionDefinitionsCache.refresh([]);\n  }\n\n  async deletePermissionDefinition(permissionId: string): Promise<void> {\n    await this._interface.deletePermissionDefinition(permissionId);\n    await this._serverTeamPermissionDefinitionsCache.refresh([]);\n  }\n\n  async listTeams(): Promise<ServerTeam[]> {\n    const teams = await this._serverTeamsCache.getOrWait([], \"write-only\");\n    return teams.map((t) => this._serverTeamFromJson(t));\n  }\n\n  async createTeam(data: ServerTeamCustomizableJson) : Promise<ServerTeam> {\n    const team = await this._interface.createTeam(data);\n    await this._serverTeamsCache.refresh([]);\n    return this._serverTeamFromJson(team);\n  }\n\n  useTeams(): ServerTeam[] {\n    const teams = useCache(this._serverTeamsCache, [], \"useServerTeams()\");\n    return useMemo(() => {\n      return teams.map((t) => this._serverTeamFromJson(t));\n    }, [teams]);\n  }\n\n  async getTeam(teamId: string): Promise<ServerTeam | null> {\n    const teams = await this.listTeams();\n    return teams.find((t) => t.id === teamId) ?? null;\n  }\n\n  useTeam(teamId: string): ServerTeam | null {\n    const teams = this.useTeams();\n    return useMemo(() => {\n      return teams.find((t) => t.id === teamId) ?? null;\n    }, [teams, teamId]);\n  }\n\n  protected override async _refreshUser(tokenStore: TokenStore) {\n    await Promise.all([\n      super._refreshUser(tokenStore),\n      this._currentServerUserCache.refresh([tokenStore]),\n    ]);\n  }\n\n  protected override async _refreshUsers() {\n    await Promise.all([\n      super._refreshUsers(),\n      this._serverUsersCache.refresh([]),\n    ]);\n  }\n}\n\nclass _StackAdminAppImpl<HasTokenStore extends boolean, ProjectId extends string> extends _StackServerAppImpl<HasTokenStore, ProjectId>\n{\n  declare protected _interface: StackAdminInterface;\n  \n  private readonly _adminProjectCache = createCache(async () => {\n    return await this._interface.getProject();\n  });\n  private readonly _apiKeySetsCache = createCache(async () => {\n    return await this._interface.listApiKeySets();\n  });\n\n  constructor(options: StackAdminAppConstructorOptions<HasTokenStore, ProjectId>) {\n    super({\n      interface: new StackAdminInterface({\n        baseUrl: options.baseUrl ?? getDefaultBaseUrl(),\n        projectId: options.projectId ?? getDefaultProjectId(),\n        clientVersion,\n        ...\"projectOwnerTokens\" in options ? {\n          projectOwnerTokens: options.projectOwnerTokens,\n        } : {\n          publishableClientKey: options.publishableClientKey ?? getDefaultPublishableClientKey(),\n          secretServerKey: options.secretServerKey ?? getDefaultSecretServerKey(),\n          superSecretAdminKey: options.superSecretAdminKey ?? getDefaultSuperSecretAdminKey(),\n        },\n      }),\n      tokenStore: options.tokenStore,\n      urls: options.urls,\n    });\n  }\n\n\n  protected _createApiKeySetBaseFromJson(data: ApiKeySetBaseJson): ApiKeySetBase {\n    const app = this;\n    return {\n      id: data.id,\n      description: data.description,\n      expiresAt: new Date(data.expiresAtMillis),\n      manuallyRevokedAt: data.manuallyRevokedAtMillis ? new Date(data.manuallyRevokedAtMillis) : null,\n      createdAt: new Date(data.createdAtMillis),\n      isValid() {\n        return this.whyInvalid() === null;\n      },\n      whyInvalid() {\n        if (this.expiresAt.getTime() < Date.now()) return \"expired\";\n        if (this.manuallyRevokedAt) return \"manually-revoked\";\n        return null;\n      },\n      async revoke() {\n        const res = await app._interface.revokeApiKeySetById(data.id);\n        await app._refreshApiKeySets();\n        return res;\n      }\n    };\n  }\n\n  protected _createApiKeySetFromJson(data: ApiKeySetJson): ApiKeySet {\n    return {\n      ...this._createApiKeySetBaseFromJson(data),\n      publishableClientKey: data.publishableClientKey ? { lastFour: data.publishableClientKey.lastFour } : null,\n      secretServerKey: data.secretServerKey ? { lastFour: data.secretServerKey.lastFour } : null,\n      superSecretAdminKey: data.superSecretAdminKey ? { lastFour: data.superSecretAdminKey.lastFour } : null,\n    };\n  }\n\n  protected _createApiKeySetFirstViewFromJson(data: ApiKeySetFirstViewJson): ApiKeySetFirstView {\n    return {\n      ...this._createApiKeySetBaseFromJson(data),\n      publishableClientKey: data.publishableClientKey,\n      secretServerKey: data.secretServerKey,\n      superSecretAdminKey: data.superSecretAdminKey,\n    };\n  }\n\n  async getProjectAdmin(): Promise<Project> {\n    return this._projectAdminFromJson(\n      await this._adminProjectCache.getOrWait([], \"write-only\"),\n      this._interface,\n      () => this._refreshProject()\n    );\n  }\n\n  useProjectAdmin(): Project {\n    const json = useCache(this._adminProjectCache, [], \"useProjectAdmin()\");\n    return useMemo(() => this._projectAdminFromJson(\n      json,\n      this._interface,\n      () => this._refreshProject()\n    ), [json]);\n  }\n\n  onProjectAdminChange(callback: (project: Project) => void) {\n    return this._adminProjectCache.onChange([], (project) => {\n      callback(this._projectAdminFromJson(\n        project,\n        this._interface,\n        () => this._refreshProject()\n      ));\n    });\n  }\n\n  async listApiKeySets(): Promise<ApiKeySet[]> {\n    const json = await this._apiKeySetsCache.getOrWait([], \"write-only\");\n    return json.map((j) => this._createApiKeySetFromJson(j));\n  }\n\n  useApiKeySets(): ApiKeySet[] {\n    const json = useCache(this._apiKeySetsCache, [], \"useApiKeySets()\");\n    return useMemo(() => {\n      return json.map((j) => this._createApiKeySetFromJson(j));\n    }, [json]);\n  }\n\n  onApiKeySetsChange(callback: (apiKeySets: ApiKeySet[]) => void) {\n    return this._apiKeySetsCache.onChange([], (apiKeySets) => {\n      callback(apiKeySets.map((j) => this._createApiKeySetFromJson(j)));\n    });\n  }\n\n  async createApiKeySet(options: ApiKeySetCreateOptions): Promise<ApiKeySetFirstView> {\n    const json = await this._interface.createApiKeySet(options);\n    await this._refreshApiKeySets();\n    return this._createApiKeySetFirstViewFromJson(json);\n  }\n\n  protected override async _refreshProject() {\n    await Promise.all([\n      super._refreshProject(),\n      this._adminProjectCache.refresh([]),\n    ]);\n  }\n\n  protected async _refreshApiKeySets() {\n    await this._apiKeySetsCache.refresh([]);\n  }\n}\n\ntype RedirectToOptions = {\n  replace?: boolean,\n};\n\ntype Auth<T, C> = {\n  readonly tokenStore: ReadonlyTokenStore,\n  updateSelectedTeam(this: T, team: Team | null): Promise<void>,\n  update(this: T, user: C): Promise<void>,\n  signOut(this: T): Promise<void>,\n  sendVerificationEmail(this: T): Promise<KnownErrors[\"EmailAlreadyVerified\"] | undefined>,\n  updatePassword(this: T, options: { oldPassword: string, newPassword: string}): Promise<KnownErrors[\"PasswordMismatch\"] | KnownErrors[\"PasswordRequirementsNotMet\"] | undefined>,\n};\n\ntype InternalAuth<T> = {\n  createProject(this: T, newProject: ProjectUpdateOptions & { displayName: string }): Promise<Project>,\n  listOwnedProjects(this: T): Promise<Project[]>,\n  useOwnedProjects(this: T): Project[],\n  onOwnedProjectsChange(this: T, callback: (projects: Project[]) => void): void,\n};\n\nexport type User = (\n  & {\n    readonly projectId: string,\n    readonly id: string,\n\n    readonly displayName: string | null,\n\n    /**\n     * The user's email address.\n     *\n     * Note: This might NOT be unique across multiple users, so always use `id` for unique identification.\n     */\n    readonly primaryEmail: string | null,\n    readonly primaryEmailVerified: boolean,\n\n    readonly profileImageUrl: string | null,\n\n    readonly signedUpAt: Date,\n\n    readonly clientMetadata: ReadonlyJson,\n\n    readonly authMethod: 'credential' | 'oauth', // not used anymore, for backwards compatibility\n    readonly hasPassword: boolean,\n    readonly authWithEmail: boolean,\n    readonly oauthProviders: readonly string[],\n\n    hasPermission(this: CurrentUser, scope: Team, permissionId: string): Promise<boolean>,\n    getSelectedTeam(this: CurrentUser): Promise<Team | null>,\n    useSelectedTeam(this: CurrentUser): Team | null,\n\n    toJson(this: CurrentUser): UserJson,\n  }\n  & AsyncStoreProperty<\"team\", [id: string], Team | null, false>\n  & AsyncStoreProperty<\"teams\", [], Team[], true>\n  & Omit<AsyncStoreProperty<\"permission\", [scope: Team, permissionId: string, options?: { direct?: boolean }], Permission | null, false>, \"onPermissionChange\">\n  & Omit<AsyncStoreProperty<\"permissions\", [scope: Team, options?: { direct?: boolean }], Permission[], true>, \"onPermissionsChange\">\n);\n\nexport type CurrentUser = Auth<User, UserUpdateJson> & User;\n\nexport type CurrentInternalUser = CurrentUser & InternalAuth<CurrentUser>;\n\n/**\n * A user including sensitive fields that should only be used on the server, never sent to the client\n * (such as sensitive information and serverMetadata).\n */\nexport type ServerUser = (\n  Omit<\n    User, \n    'hasPermission' | 'toJson' \n      | keyof AsyncStoreProperty<\"team\", [], Team | null, false>\n      | keyof AsyncStoreProperty<\"teams\", [], Team[], true>\n      | keyof AsyncStoreProperty<\"permission\", [], Permission[], false> \n      | keyof AsyncStoreProperty<\"permissions\", [], Permission[], true> \n  > & {\n    readonly serverMetadata: ReadonlyJson,\n\n    /**\n     * Returns a new user object with the sensitive fields removed.\n     */\n    getClientUser(this: ServerUser): User,\n\n    update(this: ServerUser, user: Partial<ServerUserUpdateJson>): Promise<void>,\n    delete(this: ServerUser): Promise<void>,\n\n    grantPermission(scope: Team, permissionId: string): Promise<void>,\n    revokePermission(scope: Team, permissionId: string): Promise<void>,\n\n    hasPermission(scope: Team, permissionId: string): Promise<boolean>,\n\n    toJson(this: ServerUser): ServerUserJson,\n  } \n  & AsyncStoreProperty<\"team\", [id: string], ServerTeam | null, false>\n  & AsyncStoreProperty<\"teams\", [], ServerTeam[], true>\n  & Omit<AsyncStoreProperty<\"permission\", [scope: Team, permissionId: string, options?: { direct?: boolean }], ServerPermission | null, false>, \"onPermissionChange\">\n  & Omit<AsyncStoreProperty<\"permissions\", [scope: Team, options?: { direct?: boolean }], ServerPermission[], true>, \"onPermissionsChange\">\n)\n\nexport type CurrentServerUser = Auth<ServerUser, ServerUserUpdateJson> & Omit<ServerUser, \"getClientUser\"> & {\n  getClientUser(this: CurrentServerUser): CurrentUser,\n};\n\nexport type CurrentInternalServerUser = CurrentServerUser & InternalAuth<CurrentServerUser>;\n\nexport type Project = {\n  readonly id: string,\n  readonly displayName: string,\n  readonly description?: string,\n  readonly createdAt: Date,\n  readonly userCount: number,\n  readonly isProductionMode: boolean,\n  readonly evaluatedConfig: {\n    readonly id: string,\n    readonly allowLocalhost: boolean,\n    readonly credentialEnabled: boolean,\n    readonly magicLinkEnabled: boolean,\n    readonly oauthProviders: OAuthProviderConfig[],\n    readonly emailConfig?: EmailConfig,\n    readonly domains: DomainConfig[],\n    readonly createTeamOnSignUp: boolean,\n  },\n\n  update(this: Project, update: ProjectUpdateOptions): Promise<void>,\n\n  toJson(this: Project): ProjectJson,\n\n  getProductionModeErrors(this: Project): ProductionModeError[],\n};\n\nexport type Team = {\n  id: string,\n  displayName: string,\n  createdAt: Date,\n\n  toJson(this: Team): TeamJson,\n};\n\nexport type ServerTeam = Team & {\n  listMembers(): Promise<ServerTeamMember[]>,\n  useMembers(): ServerTeamMember[],\n  update(update: Partial<ServerTeamCustomizableJson>): Promise<void>,\n  delete(): Promise<void>,\n  addUser(userId: string): Promise<void>,\n  removeUser(userId: string): Promise<void>,\n};\n\nexport type TeamMember = {\n  userId: string,\n  teamId: string,\n  displayName: string | null,\n}\n\nexport type ServerTeamMember = TeamMember & {\n  getUser(): Promise<ServerUser>,\n}\n\nexport type Permission = {\n  id: string,\n} & (\n  | { type: \"global\" }\n  | { type: \"team\", teamId: string }\n);\n\nexport type ServerPermission = Permission & {\n  readonly __databaseUniqueId: string,\n  readonly description?: string,\n  readonly containPermissionIds: string[],\n};\n\n\nexport type ApiKeySetBase = {\n  id: string,\n  description: string,\n  expiresAt: Date,\n  manuallyRevokedAt: Date | null,\n  createdAt: Date,\n  isValid(): boolean,\n  whyInvalid(): \"expired\" | \"manually-revoked\" | null,\n  revoke(): Promise<void>,\n};\n\nexport type ApiKeySetFirstView = ApiKeySetBase & {\n  publishableClientKey?: string,\n  secretServerKey?: string,\n  superSecretAdminKey?: string,\n};\n\nexport type ApiKeySet = ApiKeySetBase & {\n  publishableClientKey: null | {\n    lastFour: string,\n  },\n  secretServerKey: null | {\n    lastFour: string,\n  },\n  superSecretAdminKey: null | {\n    lastFour: string,\n  },\n};\n\n\nexport type EmailConfig = EmailConfigJson;\n\nexport type DomainConfig = DomainConfigJson;\n\nexport type OAuthProviderConfig = OAuthProviderConfigJson;\n\nexport type GetUserOptions = {\n  or?: 'redirect' | 'throw' | 'return-null',\n};\n\ntype SplitArgs<T extends any[], U extends number> = [\n  ...Parameters<Extract<T[U], (...args: any) => any>>,\n  Omit<T, U>\n];\n\ntype AsyncStoreProperty<Name extends string, Args extends any[], Value, IsMultiple extends boolean> =\n  & { [key in `${IsMultiple extends true ? \"list\" : \"get\"}${Capitalize<Name>}`]: (...args: Args) => Promise<Value> }\n  & { [key in `on${Capitalize<Name>}Change`]: (...tupleArgs: [...args: Args, callback: (value: Value) => void]) => void }\n  & { [key in `use${Capitalize<Name>}`]: (...args: Args) => Value }\n\nexport type StackClientApp<HasTokenStore extends boolean = boolean, ProjectId extends string = string> = (\n  & {\n    readonly projectId: ProjectId,\n\n    readonly urls: Readonly<HandlerUrls>,\n\n    signInWithOAuth(provider: string): Promise<void>,\n    signInWithCredential(options: { email: string, password: string }): Promise<KnownErrors[\"EmailPasswordMismatch\"] | undefined>,\n    signUpWithCredential(options: { email: string, password: string }): Promise<KnownErrors[\"UserEmailAlreadyExists\"] | KnownErrors[\"PasswordRequirementsNotMet\"] | undefined>,\n    callOAuthCallback(): Promise<boolean>,\n    sendForgotPasswordEmail(email: string): Promise<KnownErrors[\"UserNotFound\"] | undefined>,\n    sendMagicLinkEmail(email: string): Promise<KnownErrors[\"RedirectUrlNotWhitelisted\"] | undefined>,\n    resetPassword(options: { code: string, password: string }): Promise<KnownErrors[\"PasswordResetError\"] | undefined>,\n    verifyPasswordResetCode(code: string): Promise<KnownErrors[\"PasswordResetCodeError\"] | undefined>,\n    verifyEmail(code: string): Promise<KnownErrors[\"EmailVerificationError\"] | undefined>,\n    signInWithMagicLink(code: string): Promise<KnownErrors[\"MagicLinkError\"] | undefined>,\n\n    [stackAppInternalsSymbol]: {\n      toClientJson(): StackClientAppJson<HasTokenStore, ProjectId>,\n      setCurrentUser(userJsonPromise: Promise<UserJson | null>): void,\n    },\n  }\n  & AsyncStoreProperty<\"project\", [], ClientProjectJson, false>\n  & { [K in `redirectTo${Capitalize<keyof Omit<HandlerUrls, 'handler' | 'oauthCallback'>>}`]: (options?: RedirectToOptions) => Promise<void> }\n  & (HasTokenStore extends false\n    ? {}\n    : {\n      redirectToOAuthCallback(): Promise<void>,\n      useUser(options: GetUserOptions & { or: 'redirect' }): ProjectCurrentUser<ProjectId>,\n      useUser(options: GetUserOptions & { or: 'throw' }): ProjectCurrentUser<ProjectId>,\n      useUser(options?: GetUserOptions): ProjectCurrentUser<ProjectId> | null,\n      getUser(options: GetUserOptions & { or: 'redirect' }): Promise<ProjectCurrentUser<ProjectId>>,\n      getUser(options: GetUserOptions & { or: 'throw' }): Promise<ProjectCurrentUser<ProjectId>>,\n      getUser(options?: GetUserOptions): Promise<ProjectCurrentUser<ProjectId> | null>,\n      onUserChange: AsyncStoreProperty<\"user\", [], CurrentUser | null, false>[\"onUserChange\"],\n    })\n);\ntype StackClientAppConstructor = {\n  new <\n    TokenStoreType extends string,\n    HasTokenStore extends (TokenStoreType extends {} ? true : boolean),\n    ProjectId extends string\n  >(options: StackClientAppConstructorOptions<HasTokenStore, ProjectId>): StackClientApp<HasTokenStore, ProjectId>,\n  new (options: StackClientAppConstructorOptions<boolean, string>): StackClientApp<boolean, string>,\n\n  [stackAppInternalsSymbol]: {\n    fromClientJson<HasTokenStore extends boolean, ProjectId extends string>(\n      json: StackClientAppJson<HasTokenStore, ProjectId>\n    ): StackClientApp<HasTokenStore, ProjectId>,\n  },\n};\nexport const StackClientApp: StackClientAppConstructor = _StackClientAppImpl;\n\nexport type StackServerApp<HasTokenStore extends boolean = boolean, ProjectId extends string = string> = (\n  & StackClientApp<HasTokenStore, ProjectId>\n  & {\n    createTeam(data: ServerTeamCustomizableJson): Promise<ServerTeam>,\n    createPermissionDefinition(data: ServerPermissionDefinitionCustomizableJson): Promise<ServerPermission>,\n    updatePermissionDefinition(permissionId: string, data: Partial<ServerPermissionDefinitionCustomizableJson>): Promise<void>,\n    deletePermissionDefinition(permissionId: string): Promise<void>,\n    listPermissionDefinitions(): Promise<ServerPermissionDefinitionJson[]>,\n    usePermissionDefinitions(): ServerPermissionDefinitionJson[],\n  }\n  & AsyncStoreProperty<\"serverUser\", [], CurrentServerUser | null, false>\n  & AsyncStoreProperty<\"serverUsers\", [], ServerUser[], true>\n  & Omit<AsyncStoreProperty<\"team\", [id: string], ServerTeam | null, false>, \"onTeamChange\">\n  & Omit<AsyncStoreProperty<\"teams\", [], ServerTeam[], true>, \"onTeamsChange\">\n);\ntype StackServerAppConstructor = {\n  new <\n    TokenStoreType extends string,\n    HasTokenStore extends (TokenStoreType extends {} ? true : boolean),\n    ProjectId extends string\n  >(options: StackServerAppConstructorOptions<HasTokenStore, ProjectId>): StackServerApp<HasTokenStore, ProjectId>,\n  new (options: StackServerAppConstructorOptions<boolean, string>): StackServerApp<boolean, string>,\n};\nexport const StackServerApp: StackServerAppConstructor = _StackServerAppImpl;\n\nexport type StackAdminApp<HasTokenStore extends boolean = boolean, ProjectId extends string = string> = (\n  & StackServerApp<HasTokenStore, ProjectId>\n  & AsyncStoreProperty<\"projectAdmin\", [], Project, false>\n  & AsyncStoreProperty<\"apiKeySets\", [], ApiKeySet[], true>\n  & {\n    createApiKeySet(options: ApiKeySetCreateOptions): Promise<ApiKeySetFirstView>,\n  }\n);\ntype StackAdminAppConstructor = {\n  new <\n    HasTokenStore extends boolean,\n    ProjectId extends string\n  >(options: StackAdminAppConstructorOptions<HasTokenStore, ProjectId>): StackAdminApp<HasTokenStore, ProjectId>,\n  new (options: StackAdminAppConstructorOptions<boolean, string>): StackAdminApp<boolean, string>,\n};\nexport const StackAdminApp: StackAdminAppConstructor = _StackAdminAppImpl;\n"],"names":["json"],"mappings":"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"}},
    {"offset": {"line": 1727, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/lib/hooks.ts"],"sourcesContent":["import { CurrentUser, GetUserOptions as AppGetUserOptions, StackClientApp, CurrentInternalUser } from \"./stack-app\";\nimport { StackContext } from \"../providers/stack-provider-client\";\nimport { useContext } from \"react\";\n\n/**\n * Returns the current user object. Equivalent to `useStackApp().useUser()`.\n * \n * @returns the current user\n */\n\ntype GetUserOptions = AppGetUserOptions & {\n  projectIdMustMatch?: string,\n}\n\nexport function useUser(options: GetUserOptions & { or: 'redirect' | 'throw', projectIdMustMatch: \"internal\" }): CurrentInternalUser;\nexport function useUser(options: GetUserOptions & { or: 'redirect' | 'throw' }): CurrentUser;\nexport function useUser(options: GetUserOptions & { projectIdMustMatch: \"internal\" }): CurrentInternalUser | null;\nexport function useUser(options?: GetUserOptions): CurrentUser | CurrentInternalUser | null;\nexport function useUser(options: GetUserOptions = {}): CurrentUser | CurrentInternalUser | null {\n  const stackApp = useStackApp(options);\n  if (options.projectIdMustMatch && stackApp.projectId !== options.projectIdMustMatch) {\n    throw new Error(\"Unexpected project ID in useStackApp: \" + stackApp.projectId);\n  }\n  if (options.projectIdMustMatch === \"internal\") {\n    return stackApp.useUser(options) as CurrentInternalUser;\n  } else {\n    return stackApp.useUser(options) as CurrentUser;\n  }\n}\n\n/**\n * Returns the current Stack app associated with the StackProvider.\n * \n * @returns the current Stack app\n */\nexport function useStackApp<ProjectId extends string>(options: { projectIdMustMatch?: ProjectId } = {}): StackClientApp<true, ProjectId> {\n  const context = useContext(StackContext);\n  if (context === null) {\n    throw new Error(\"useStackApp must be used within a StackProvider\");\n  }\n  const stackApp = context.app;\n  if (options.projectIdMustMatch && stackApp.projectId !== options.projectIdMustMatch) {\n    throw new Error(\"Unexpected project ID in useStackApp: \" + stackApp.projectId);\n  }\n  return stackApp as StackClientApp<true, ProjectId>;\n}\n"],"names":[],"mappings":";;;;;;;AACA,SAAS,oBAAoB;AAC7B,SAAS,kBAAkB;;;AAgBpB,SAAS,QAAQ,UAA0B,CAAC,CAAA,EAA6C;IAC9F,MAAM,WAAW,YAAY,OAAO;IACpC,IAAI,QAAQ,kBAAA,IAAsB,SAAS,SAAA,KAAc,QAAQ,kBAAA,EAAoB;QACnF,MAAM,IAAI,MAAM,2CAA2C,SAAS,SAAS;IAC/E;IACA,IAAI,QAAQ,kBAAA,KAAuB,YAAY;QAC7C,OAAO,SAAS,OAAA,CAAQ,OAAO;IACjC,OAAO;QACL,OAAO,SAAS,OAAA,CAAQ,OAAO;IACjC;AACF;AAOO,SAAS,YAAsC,UAA8C,CAAC,CAAA,EAAoC;IACvI,MAAM,cAAU,wPAAA,EAAW,qPAAY;IACvC,IAAI,YAAY,MAAM;QACpB,MAAM,IAAI,MAAM,iDAAiD;IACnE;IACA,MAAM,WAAW,QAAQ,GAAA;IACzB,IAAI,QAAQ,kBAAA,IAAsB,SAAS,SAAA,KAAc,QAAQ,kBAAA,EAAoB;QACnF,MAAM,IAAI,MAAM,2CAA2C,SAAS,SAAS;IAC/E;IACA,OAAO;AACT"}},
    {"offset": {"line": 1766, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/providers/stack-provider-client.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { StackClientApp, StackClientAppJson, stackAppInternalsSymbol } from \"../lib/stack-app\";\nimport React from \"react\";\nimport { UserJson } from \"@stackframe/stack-shared\";\nimport { useStackApp } from \"..\";\n\nexport const StackContext = React.createContext<null | {\n  app: StackClientApp<true>,\n}>(null);\n\nexport function StackProviderClient(props: {\n  appJson: StackClientAppJson<true, string>,\n  children?: React.ReactNode,\n}) {\n  const appJson = props.appJson;\n  const app = StackClientApp[stackAppInternalsSymbol].fromClientJson(appJson);\n\n  if (process.env.NODE_ENV === \"development\") {\n    (globalThis as any).stackApp = app;\n  }\n  \n  return (\n    <StackContext.Provider value={{ app }}>\n      {props.children}\n    </StackContext.Provider>\n  );\n}\n\nexport function UserSetter(props: { userJsonPromise: Promise<UserJson | null> }) {\n  const app = useStackApp();\n  useEffect(() => {\n    const promise = (async () => await props.userJsonPromise)();  // there is a Next.js bug where Promises passed by server components return `undefined` as their `then` value, so wrap it in a normal promise\n    app[stackAppInternalsSymbol].setCurrentUser(promise);\n  }, []);\n  return null;\n}\n"],"names":[],"mappings":";;;;;;;;AAEA,SAAS,iBAAiB,gBAAA;AAC1B,SAAS,gBAAoC,+BAA+B;AAC5E,OAAO,WAAW;AAoBd;AAhBG,IAAM,eAAe,MAAM,cAE/B,IAAI;;;;;;;;AAEA,IAAA,KAAS,UAAA,qPAAA,CAAA,IAAoB,OAGjC,EAAA,CAAA;AACD,QAAM,CAAA,SAAU,MAAM,KAAA,KAAA;IACtB,MAAM,MAAM,IAAA,MAAA,KAAe,EAAA,qBAAuB,EAAE,eAAe,OAAO;IAE1E,IAAI,EAAA,MAAQ,IAAI,8NAAA,CAAA,EAAa,eAAe,0NAAA,CAAA,CAAA,cAAA,CAAA;IAC1C,EAAC,WAAmB,WAAW,gBAAA;QACjC,WAAA,QAAA,GAAA;IAEA,OACE,oBAAC,aAAa,UAAb,EAAsB,OAAO,EAAE,IAAI,GACjC,gBAAM,UACT;IAEJ,OAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,aAAA,QAAA,EAAA;QAAA,OAAA;YAAA;QAAA;QAAA,UAAA,MAAA,QAAA;IAAA;AAEO,SAAS,WAAW,OAAsD;AAC/E,QAAM,CAAA,KAAM,MAAA,KAAA,CAAY;IACxB,MAAA,IAAU,EAAA,IAAA,IAAM,oNAAA;IACd,IAAA,QAAM,+OAAA,EAAA,SAAW,YAAY,MAAM,MAAM,iBAAiB;QAC1D,IAAI,EAAA,UAAA,CAAA,UAAuB,AAAE,MAAA,MAAA,GAAe,OAAO,KAAA;QACrD,CAAG,CAAC,CAAC,CAAA,2OAAA,CAAA,CAAA,cAAA,CAAA;IACL,GAAA,EAAA,EAAO;IACT,OAAA"}},
    {"offset": {"line": 1814, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/utils/constants.tsx"],"sourcesContent":["export const FONT_SIZES = {'xs': '0.75rem', 'sm': '0.875rem', 'md': '1rem', 'lg': '1.25rem', 'xl': '1.5rem'};\nexport const LINE_HEIGHTS = {'xs': '1rem', 'sm': '1.25rem', 'md': '1.5rem', 'lg': '1.75rem', 'xl': '2rem'};\nexport const FONT_FAMILY = 'ui-sans-serif, system-ui, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"';\nexport const PRIMARY_FONT_COLORS = { 'dark': 'white', 'light': 'black' };\nexport const SECONDARY_FONT_COLORS = { 'dark': '#a8a8a8', 'light': '#737373' };\nexport const SELECTED_BACKGROUND_COLORS = { 'dark': 'rgba(255, 255, 255, 0.1)', 'light': 'rgba(0, 0, 0, 0.04)' };\nexport const LINK_COLORS = { 'dark': '#fff', 'light': '#000' };\nexport const BORDER_RADIUS = '0.375rem';\nexport const DEFAULT_COLORS = ({\n  dark: {\n    primaryColor: '#570df8',\n    secondaryColor: '#404040',\n    backgroundColor: 'black',\n    neutralColor: '#27272a',\n  },\n  light: {\n    primaryColor: '#570df8',\n    secondaryColor: '#e0e0e0',\n    backgroundColor: 'white',\n    neutralColor: '#e4e4e7',\n  },\n} as const);"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAO,IAAM,aAAa;IAAC,MAAM;IAAW,MAAM;IAAY,MAAM;IAAQ,MAAM;IAAW,MAAM;AAAQ;AACpG,IAAM,eAAe;IAAC,MAAM;IAAQ,MAAM;IAAW,MAAM;IAAU,MAAM;IAAW,MAAM;AAAM;AAClG,IAAM,cAAc;AACpB,IAAM,sBAAsB;IAAE,QAAQ;IAAS,SAAS;AAAQ;AAChE,IAAM,wBAAwB;IAAE,QAAQ;IAAW,SAAS;AAAU;AACtE,IAAM,6BAA6B;IAAE,QAAQ;IAA4B,SAAS;AAAsB;AACxG,IAAM,cAAc;IAAE,QAAQ;IAAQ,SAAS;AAAO;AACtD,IAAM,gBAAgB;AACtB,IAAM,iBAAkB;IAC7B,MAAM;QACJ,cAAc;QACd,gBAAgB;QAChB,iBAAiB;QACjB,cAAc;IAChB;IACA,OAAO;QACL,cAAc;QACd,gBAAgB;QAChB,iBAAiB;QACjB,cAAc;IAChB;AACF"}},
    {"offset": {"line": 1887, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/providers/design-provider.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { createContext, useContext } from \"react\";\nimport { DEFAULT_COLORS } from '../utils/constants';\n\ntype Colors = {\n  primaryColor: string,\n  secondaryColor: string,\n  backgroundColor: string,\n  neutralColor: string,\n}\n\nexport type ColorPalette = {\n  light: Colors,\n  dark: Colors,\n};\n\ntype Breakpoints = {\n  xs: number,\n  sm: number,\n  md: number,\n  lg: number,\n  xl: number,\n};\n\ntype DesignContextValue = {\n  colors: ColorPalette,\n  breakpoints: Breakpoints,\n}\n\nexport type DesignConfig = {\n  colors?: Partial<ColorPalette>,\n  breakpoints?: Partial<Breakpoints>,\n}\n\nconst DesignContext = createContext<DesignContextValue | undefined>(undefined);\n\nconst defaultBreakpoints: Breakpoints = {\n  xs: 400,\n  sm: 600,\n  md: 900,\n  lg: 1200,\n  xl: 1536,\n};\n\nexport function StackDesignProvider(props: { children?: React.ReactNode } & DesignConfig) {\n  const designValue = {\n    colors: { \n      dark: { ...DEFAULT_COLORS.dark, ...props.colors?.dark }, \n      light: { ...DEFAULT_COLORS.light, ...props.colors?.light } \n    },\n    breakpoints: { ...defaultBreakpoints, ...props.breakpoints },\n  };\n\n  return (\n    <DesignContext.Provider value={designValue}>\n      {props.children}\n    </DesignContext.Provider> \n  );\n}\n\nexport function useDesign(): DesignContextValue {\n  const context = useContext(DesignContext);\n  if (!context) {\n    throw new Error(\"useDesign must be used within a StackTheme\");\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;AAGA,SAAS,eAAe,YAAA,MAAkB;AAC1C,SAAS,sBAAsB;AAoD3B;AApBJ,IAAM,gBAAgB,cAA8C,MAAS;;;;;;AAE7E,IAAM,gBAAA,IAAA,KAAkC,sPAAA,EAAA,KAAA;AAAA,EACtC,EAAA,EAAI,mBAAA;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACN,IAAA;AAEO,SAAS,oBAAoB,OAAsD;AACxF,QAAM,CAAA,aAAc,OAAA,KAAA;IAAA,EAClB,IAAA,IAAQ,UAAA;QAAA,EACN,MAAM,EAAE,GAAG,eAAe,MAAM,GAAG,MAAM,QAAQ,KAAK;YACtD,MAAA,CAAO;gBAAA,CAAE,EAAA,CAAG,gOAAA,CAAA,CAAe,GAAA;gBAAA,EAAO,CAAA,EAAG,IAAA,EAAM,IAAA,EAAA,EAAQ,EAAA;YAAA,GAAM;YAC3D,OAAA;gBAAA,GAAA,iOAAA,CAAA,KAAA;gBAAA,GAAA,MAAA,MAAA,EAAA,KAAA;YAAA;QACA,aAAa,EAAE,GAAG,oBAAoB,GAAG,MAAM,YAAY;QAC7D,aAAA;YAAA,GAAA,kBAAA;YAAA,GAAA,MAAA,WAAA;QAAA;IAEA,OACE,oBAAC,cAAc,UAAd,EAAuB,OAAO,aAC5B,gBAAM,UACT;IAEJ,OAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,cAAA,QAAA,EAAA;QAAA,OAAA;QAAA,UAAA,MAAA,QAAA;IAAA;AAEO,SAAS,YAAgC;AAC9C,QAAM,CAAA,SAAU,WAAW,aAAa;IACxC,IAAI,CAAC,CAAA,QAAS,EAAA,IAAA,wPAAA,EAAA;IACZ,IAAA,CAAA,GAAM,IAAI,EAAA,IAAM,4CAA4C;QAC9D,MAAA,IAAA,MAAA;IACA,OAAO;IACT,OAAA"}},
    {"offset": {"line": 1945, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/loading-indicator.tsx"],"sourcesContent":["import styled, { keyframes } from 'styled-components';\n\nconst l7 = keyframes`\n  33% { background-size: calc(100%/3) 0%, calc(100%/3) 100%, calc(100%/3) 100%; }\n  50% { background-size: calc(100%/3) 100%, calc(100%/3) 0%, calc(100%/3) 100%; }\n  66% { background-size: calc(100%/3) 100%, calc(100%/3) 100%, calc(100%/3) 0%; }\n`;\n\nconst StyledLoadingIndicator = styled.div<{ $color: { light: string, dark: string }, $size?: number }>`\n  width: ${props => props.$size || 36}px;\n  aspect-ratio: 4;\n  background: \n    var(--_g) 0% 50%, \n    var(--_g) 50% 50%, \n    var(--_g) 100% 50%;\n  background-size: calc(100%/3) 100%;\n  animation: ${l7} 1s infinite linear;\n\n  --_g: no-repeat radial-gradient(circle closest-side, ${props => props.$color.light} 90%, #0000);\n\n  html[data-stack-theme='dark'] & {\n    --_g: no-repeat radial-gradient(circle closest-side, ${props => props.$color.dark} 90%, #0000);\n  }\n`;\n\nexport default function LoadingIndicator(props: { size?: number, color: { light: string, dark: string } }) {\n  return <StyledLoadingIndicator $size={props.size} $color={props.color} />;\n}"],"names":[],"mappings":";;;;;AAAA,OAAO,UAAU,iBAAiB;AA0BzB;;;AAxBT,IAAM,KAAK,sQAAA,CAAA;;;;AAAA,CAAA;AAMX,IAAM,yBAAyB,oQAAA,CAAO,GAAA,CAAA;SAAA,EAC3B,CAAA,QAAS,MAAM,KAAA,IAAS,EAAE,CAAA;;;;;;;aAAA,EAOtB,EAAE,CAAA;;uDAAA,EAEwC,CAAA,QAAS,MAAM,MAAA,CAAO,KAAK,CAAA;;;yDAAA,EAGzB,CAAA,QAAS,MAAM,MAAA,CAAO,IAAI,CAAA;;AAAA,CAAA;AAItE,SAAR,iBAAkC,KAAA,EAAkE;IACzG,OAAO,aAAA,GAAA,IAAA,mQAAA,EAAC,wBAAA;QAAuB,OAAO,MAAM,IAAA;QAAM,QAAQ,MAAM,KAAA;IAAA,CAAO;AACzE"}},
    {"offset": {"line": 1987, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/button.tsx"],"sourcesContent":["'use client';\n\nimport React, { useMemo } from \"react\";\nimport { useDesign } from \"../providers/design-provider\";\nimport Color from 'color';\nimport styled from 'styled-components';\nimport { BORDER_RADIUS, FONT_FAMILY, FONT_SIZES } from \"../utils/constants\";\nimport LoadingIndicator from \"./loading-indicator\";\n\nfunction getColors({\n  propsColor, \n  colors, \n  variant, \n}: {\n  propsColor?: string, \n  colors: { primaryColor: string, secondaryColor: string, backgroundColor: string },\n  variant: 'primary' | 'secondary' | 'warning',\n}): { \n  bgColor: string, \n  hoverBgColor: string,\n  activeBgColor: string,\n  textColor: string,\n} {\n  let bgColor;\n  switch (variant) {\n    case 'primary': {\n      bgColor = colors.primaryColor;\n      break;\n    }\n    case 'secondary': {\n      bgColor = colors.secondaryColor;\n      break;\n    }\n    case 'warning': {\n      bgColor = '#ff4500';\n      break;\n    }\n  }\n  if (propsColor) {\n    bgColor = propsColor;\n  }\n\n  const c = Color(bgColor);\n  const pc = Color(colors.primaryColor);\n\n  const changeColor = (value: number) => {\n    return c.hsl(c.hue(), c.saturationl(), c.lightness() + value).toString();\n  };\n  \n  const getAlpha = (alpha: number) => {\n    return Color(\n      pc.isDark() ? 'white' : 'black'\n    ).alpha(alpha).toString();\n  };\n\n  if (c.alpha() === 0) {\n    return {\n      bgColor: 'transparent',\n      hoverBgColor: getAlpha(0.1),\n      activeBgColor: getAlpha(0.2),\n      textColor: colors.primaryColor,\n    };\n  } else if (c.isLight()) {\n    return {\n      bgColor,\n      hoverBgColor: changeColor(-10),\n      activeBgColor: changeColor(-20),\n      textColor: 'black',\n    };\n  } else {\n    return {\n      bgColor,\n      hoverBgColor: changeColor(10),\n      activeBgColor: changeColor(20),\n      textColor: 'white',\n    };\n  }\n}\n\nexport type ButtonProps = {\n  variant?: 'primary' | 'secondary' | 'warning',\n  color?: string,\n  size?: 'sm' | 'md' | 'lg',\n  loading?: boolean,\n  onClick?: (() => void) | (() => Promise<void>),\n} & Omit<React.HTMLProps<HTMLButtonElement>, 'size' | 'type' | 'onClick'>\n\ntype ButtonColors = {\n  bgColor: string, \n  hoverBgColor: string,\n  activeBgColor: string,\n  textColor: string,\n}\n\nconst StyledButton = styled.button<{\n  $size: 'sm' | 'md' | 'lg',\n  $loading: boolean,\n  $colors: {\n    dark: ButtonColors,\n    light: ButtonColors,\n  },\n}>`\n  border: 0;\n  border-radius: ${BORDER_RADIUS};\n  padding: ${props => {\n    switch (props.$size) {\n      case 'sm': { return '0rem 0.75rem'; }\n      case 'md': { return '0rem 1rem'; }\n      case 'lg': { return '0rem 2rem'; }\n    }\n  }};\n  height: ${props => {\n    switch (props.$size) {\n      case 'sm': { return '2rem'; }\n      case 'md': { return '2.5rem'; }\n      case 'lg': { return '3rem'; }\n    }\n  }};\n  font-family: ${FONT_FAMILY};\n  font-size: ${FONT_SIZES.md};\n  opacity: ${props => props.disabled ? 0.5 : 1};\n  transition: background-color 0.05s;\n  cursor: pointer;\n  position: relative;\n  &:disabled {\n    cursor: auto;\n    opacity: 0.5;\n  }\n\n  background-color: ${props => props.$colors.light.bgColor};\n  color: ${props => props.$colors.light.textColor};\n  &:not([disabled]) {\n    &:active,&:hover:active {\n      background-color: ${props => props.$colors.light.activeBgColor};\n    }\n    &:hover {\n      background-color: ${props => props.$colors.light.hoverBgColor};\n    }\n  }\n\n  html[data-stack-theme='dark'] & {\n    background-color: ${props => props.$colors.dark.bgColor};\n    color: ${props => props.$colors.dark.textColor};\n    &:not([disabled]) {\n      &:active,&:hover:active {\n        background-color: ${props => props.$colors.dark.activeBgColor};\n      }\n      &:hover {\n        background-color: ${props => props.$colors.dark.hoverBgColor};\n      }\n    }\n  }\n`;\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({\n    variant='primary',\n    size='md',\n    loading=false,\n    ...props\n  }, ref) => {\n    const { colors } = useDesign();\n\n    const { dark, light } = useMemo(() => {\n      return {\n        dark: getColors({ propsColor: props.color, colors: colors.dark, variant }),\n        light: getColors({ propsColor: props.color, colors: colors.light, variant }),\n      };\n    }, [props.color, colors, variant]);\n\n    return (\n      <StyledButton\n        ref={ref}\n        $size={size}\n        $loading={loading}\n        $colors={{ dark, light }}\n        {...props}\n      >\n        <span style={{ position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)', visibility: loading ? 'visible' : 'hidden' }}>\n          <LoadingIndicator color={{ light: light.textColor, dark: dark.textColor }}/>\n        </span>\n        <span style={{ visibility: loading ? 'hidden' : 'visible', whiteSpace: 'nowrap' }}>\n          {props.children}\n        </span>\n      </StyledButton>\n    );\n  }\n);\n\nButton.displayName = 'Button';\n\nexport {\n  Button,\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2193, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/container.tsx"],"sourcesContent":["'use client';\n\nimport { useDesign } from \"../providers/design-provider\";\nimport styled from 'styled-components';\n\ntype ContainerProps = {\n  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl' | number,\n} & Omit<React.HTMLProps<HTMLDivElement>, 'size'>\n\nconst OuterContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  width: 100%;\n`;\n\nconst InnerContainer = styled.div<{ $breakpoint: number }>`\n  width: 100%;\n  @media (min-width: ${props => props.$breakpoint}px) {\n    width: ${props => props.$breakpoint}px;\n  }\n`;\n\nexport function Container({\n  size='md',\n  ...props\n} : ContainerProps) {\n  const { breakpoints } = useDesign();\n  return (\n    <OuterContainer>\n      <InnerContainer\n        $breakpoint={typeof size === 'number' ? size : breakpoints[size]}\n        {...props}\n      >\n        {props.children}\n      </InnerContainer>\n    </OuterContainer>\n  );\n}"],"names":[],"mappings":";;;;AAEA,SAAS,iBAAiB,UAAA;AAC1B,OAAO,YAAY;AA0Bb;AApBN,IAAM,iBAAiB,OAAO;;;;;;AAAA,IAAA,iBAAA,oQAAA,CAAA,GAAA,CAAA;;;;AAM9B,CAAA,GAAM,iBAAiB,OAAO;AAAA,IAAA,iBAAA,oQAAA,CAAA,GAAA,CAAA;;qBAGjB,EAAA,CAAS,MAAM,EAAA,MAAA,CAAW,UAAA,CAAA;WAAA,EAAA,CAAA,QAAA,MAAA,WAAA,CAAA;;AAIhC,CAAA,QAAS,UAAU;AAAA,EACxB,OAAK,UAAA,EACL,GAAG,IAAA,IAAA,EACL,CAAoB,EAAA,OAClB,OAAM,EAAE,YAAY,IAAI,UAAU;IAClC,MAAA,CACE,CAAA,WAAA,EAAA,GAAA,IAAA,GAAC,sOAAA,YACC;IAAA,EAAC,KAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,gBAAA;QAAA,UAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,gBAAA,EACC,aAAa,OAAO,SAAS,WAAW,OAAO,YAAY,IAAI;YAC9D,GAAG,UAAA,OAAA,SAAA,WAAA,OAAA,WAAA,CAAA,KAAA;YAEH,GAAA,KAAA,QAAM;YAAA,UAAA,MAAA,QAAA;QACT,CACF;IAEJ"}},
    {"offset": {"line": 2233, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/separator.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport * as SeparatorPrimitive from '@radix-ui/react-separator';\nimport styled from 'styled-components';\nimport { useDesign } from '..';\nimport { ColorPalette } from '../providers/design-provider';\n\nconst StyledSeparator = styled(SeparatorPrimitive.Root)<{ \n  $orientation: string,\n  $color: ColorPalette,\n}>`\n  flex-shrink: 0;\n  ${(props) =>\n    props.$orientation === 'horizontal'\n      ? 'height: 1px; width: 100%;'\n      : 'height: 100%; width: 1px;'}\n  \n  background-color: ${props => props.$color.light.neutralColor};\n\n  html[data-stack-theme='dark'] & {\n    background-color: ${props => props.$color.dark.neutralColor};\n  }\n`;\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(({ orientation = 'horizontal', decorative = true, ...props }, ref) => {\n  const { colors } = useDesign();\n\n  return <StyledSeparator\n    ref={ref}\n    decorative={decorative}\n    $orientation={orientation}\n    $color={colors}\n    {...props}\n  />;\n});\n\nSeparator.displayName = 'Separator';\n\nexport { Separator };\n"],"names":[],"mappings":";;;;AAEA,OAAO,WAAW,kBAAA;AAClB,YAAY,wBAAwB;AACpC,OAAO,YAAY;AACnB,SAAS,iBAAiB;AA0BjB;AAvBT,IAAM,kBAAkB,OAA0B,uBAAI;;;;;;;;AAAA,IAAA,kBAAA,IAAA,oQAAA,EAAA,2PAAA,CAAA,CAAA;;EAQnB,EAAA,CAAA,QAAA,MAAA,YAAA,KAAA,eAAA,8BAAA,4BAAA;;oBAE2B,EAAA,CAAA,QAAA,MAAA,MAAA,CAAA,KAAA,CAAA,YAAA,CAAA;;;sBAGC,EAAA,CAAA,QAAA,MAAA,MAAA,CAAA,IAAA,CAAA,YAAA,CAAA;;AAI/D,CAAA,GAAM,YAAY,MAAM,WAGtB,CAAC,EAAE,cAAc,cAAc,aAAa,MAAM,GAAG,MAAM,GAAG,QAAQ;AACtE,IAAA,IAAM,EAAE,MAAA,CAAO,oPAAI,CAAA,SAAU,CAAA,CAAA,CAAA,EAAA,cAAA,YAAA,EAAA,aAAA,IAAA,EAAA,GAAA,OAAA,EAAA;IAE7B,MAAA,CAAO,CAAA,MAAA,EAAA,GAAA,IAAA,yOAAA;IAAA,EAAC,KAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,iBAAA,EACN;QACA;QACA,cAAc;QACd,QAAQ,MAAA;QACP,GAAG,KAAA;QAAA,GAAA,KAAA;IACN;AAGF,UAAU,cAAc"}},
    {"offset": {"line": 2277, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/input.tsx"],"sourcesContent":["'use client';\n\nimport React from \"react\";\nimport { ColorPalette, useDesign } from \"../providers/design-provider\";\nimport styled from 'styled-components';\nimport { BORDER_RADIUS, FONT_FAMILY, FONT_SIZES, PRIMARY_FONT_COLORS, SECONDARY_FONT_COLORS } from \"../utils/constants\";\n\ntype InputProps = React.InputHTMLAttributes<HTMLInputElement> & Pick<React.HTMLProps<HTMLInputElement>, 'ref'>\n\n\nconst StyledInput = styled.input<{\n  $colors: ColorPalette,\n}>`\n  font-family: ${FONT_FAMILY};\n  font-size: ${FONT_SIZES.md};\n  height: 2.5rem;\n  border-radius: ${BORDER_RADIUS};\n  background-color: transparent;\n  border: 1px solid;\n  padding: 0rem 1rem;\n  &:disabled {\n    cursor: auto;\n    opacity: 0.5;\n  }\n  &[type=file]::file-selector-button{\n    border: none;\n    background-color: transparent;\n    height: 2.5rem;\n    margin-right: 0.5rem;\n    padding: 0;\n  }\n\n  border-color: ${props => props.$colors.light.neutralColor};\n  color: ${PRIMARY_FONT_COLORS.light};\n  &::placeholder {\n    color: ${SECONDARY_FONT_COLORS.light};\n  }\n  &:focus-visible {\n    outline: none;\n    box-shadow: 0 0 0 2px ${props => props.$colors.light.primaryColor};\n  }\n  &[type=file] {\n    color: ${SECONDARY_FONT_COLORS.light};\n  }\n  &[type=file]::file-selector-button{\n    color: ${PRIMARY_FONT_COLORS.light};\n  }\n\n  html[data-stack-theme='dark'] & {\n    border-color: ${props => props.$colors.dark.neutralColor};\n    color: ${PRIMARY_FONT_COLORS.dark};\n    &::placeholder {\n      color: ${SECONDARY_FONT_COLORS.dark};\n    }\n    &:focus-visible {\n      outline: none;\n      box-shadow: 0 0 0 2px ${props => props.$colors.dark.primaryColor};\n    }\n    &[type=file] {\n      color: ${SECONDARY_FONT_COLORS.dark};\n    }\n    &[type=file]::file-selector-button{\n      color: ${PRIMARY_FONT_COLORS.dark};\n    }\n  }\n`;\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  (props, ref) => {\n    const { colors } = useDesign();\n    return (\n      <StyledInput\n        ref={ref}\n        $colors={colors}\n        {...props}\n      />\n    );\n  }\n);\nInput.displayName = 'Input';\n\nexport { Input };"],"names":[],"mappings":";;;;AAEA,OAAO,WAAW,cAAA;AAClB,SAAuB,iBAAiB;AACxC,OAAO,YAAY;AACnB,SAAS,eAAe,aAAa,YAAY,qBAAqB,6BAA6B;AAkE7F;AA7DN,IAAM,cAAc,OAAO;;;;;;;;AAAA,IAAA,aAGV,CAAA,oQAAA,CAAA,GAAW,EAAA,CAAA;eACb,EAAA,SAAW,qNAAE,CAAA;aAAA,EAAA,6NAAA,CAAA,EAAA,CAAA;;iBAEI,EAAA,gOAAA,CAAA;;;;;;;;;;;;;;;;gBAiBrB,EAAA,CAAA,QAAA,EAAoB,IAAA,CAAK,MAAA,CAAA,KAAA,CAAA,YAAA,CAAA;SAAA,EAAA,sOAAA,CAAA,KAAA,CAAA;;WAEI,EAAA,wOAAA,CAAA,KAAA,CAAA;;;;0BAI6B,EAAA,CAAA,QAAA,MAAA,OAAA,CAAA,KAAA,CAAA,YAAA,CAAA;;;WAG7B,EAAA,wOAAA,CAAA,KAAA,CAAA;;;WAGF,EAAA,sOAAA,CAAA,KAAA,CAAA;;;;kBAKzB,EAAA,CAAA,QAAA,EAAoB,IAAI,OAAA,CAAA,IAAA,CAAA,YAAA,CAAA;WAAA,EAAA,sOAAA,CAAA,IAAA,CAAA;;aAEI,EAAA,wOAAA,CAAA,IAAA,CAAA;;;;4BAI6B,EAAA,CAAA,QAAA,MAAA,OAAA,CAAA,IAAA,CAAA,YAAA,CAAA;;;aAG7B,EAAA,wOAAA,CAAA,IAAA,CAAA;;;aAGF,EAAA,sOAAA,CAAA,IAAA,CAAA;;;AAKvC,CAAA,GAAM,QAAQ,MAAM;AAAA,EAClB,CAAC,CAAA,MAAO,EAAA,qPAAA,CAAQ,UAAA,CACd,CAAA,OAAM,EAAE,OAAO,IAAI,UAAU;IAC7B,MAAA,CACE,CAAA,MAAA,EAAA,GAAA,IAAA,yOAAA;IAAA,EAAC,KAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,aAAA,EACC;QACA,SAAS;QACR,GAAG,MAAA;QAAA,GAAA,KAAA;IACN;AAGN"}},
    {"offset": {"line": 2363, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/link.tsx"],"sourcesContent":["'use client';\n\nimport NextLink from \"next/link\";\nimport { FONT_FAMILY, FONT_SIZES, LINE_HEIGHTS, LINK_COLORS } from \"../utils/constants\";\nimport { Url } from \"url\";\nimport React from \"react\";\nimport styled from \"styled-components\";\n\ntype LinkProps = {\n  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl',\n  href: Url | string,\n} & Omit<React.HTMLProps<HTMLLinkElement>, 'size' | 'href'>\n\nconst StyledNextLink = styled(NextLink)<{ \n  $size: 'xs' | 'sm' | 'md' | 'lg' | 'xl',\n}>`\n  font-size: ${props => FONT_SIZES[props.$size]};\n  line-height: ${props => LINE_HEIGHTS[props.$size]};\n  font-weight: 500;\n  font-family: ${FONT_FAMILY};\n  text-decoration: underline;\n  margin: 0;\n  padding: 0;\n\n  color: ${LINK_COLORS.light};\n\n  html[data-stack-theme='dark'] & {\n    color: ${LINK_COLORS.dark};\n  }\n`;\n\nexport const Link = React.forwardRef<\n  React.ElementRef<typeof StyledNextLink>,\n  LinkProps\n>(({ size='md', href, ...props }, ref) => {\n  return (\n    <StyledNextLink\n      $size={size}\n      href={href}\n      style={props.style}\n      children={props.children}\n    />\n  );\n});"],"names":[],"mappings":";;;;AAEA,OAAO,cAAc,UAAA;AACrB,SAAS,aAAa,YAAY,cAAc,mBAAmB;AAEnE,OAAO,WAAW;AAClB,OAAO,YAAY;AA8Bf;AAvBJ,IAAM,iBAAiB,OAAO,QAAQ;;;;;;;;AAAA,IAAA,WAGvB,MAAA,IAAA,KAAS,+PAAA,EAAA,4MAAA,CAAW,CAAA,KAAM,KAAK,CAAC;aAAA,EAAA,CAAA,CAC9B,OAAA,EAAS,2NAAA,CAAA,IAAa,EAAA,IAAM,CAAA,CAAA,CAAA,EAAK,CAAC;eAAA,EAAA,CAAA,QAAA,+NAAA,CAAA,MAAA,KAAA,CAAA,CAAA;;eAEvB,EAAA,8NAAA,CAAA;;;;;SAKA,EAAA,8NAAA,CAAA,KAAA,CAAA;;;WAGC,EAAA,8NAAA,CAAA,IAAA,CAAA;;AAItB,CAAA,GAAM,OAAO,MAAM,WAGxB,CAAC,EAAE,OAAK,MAAM,MAAM,GAAG,MAAM,GAAG,QAAQ;AACxC,IAAA,KACE,EAAA,qPAAA,CAAA,UAAA,CAAA,CAAA,EAAA,OAAA,IAAA,EAAA,IAAA,EAAA,GAAA,OAAA,EAAA;IAAA,EAAC,KAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,gBAAA,EACC,OAAO;QACP,OAAA;QACA,OAAO,MAAM;QACb,OAAA,GAAU,GAAA,GAAM,EAAA;QAAA,UAAA,MAAA,QAAA;IAClB"}},
    {"offset": {"line": 2409, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/label.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport styled from 'styled-components';\nimport { FONT_FAMILY, FONT_SIZES, SECONDARY_FONT_COLORS } from \"../utils/constants\";\nimport { useDesign } from \"../providers/design-provider\";\n\nconst Primitive = styled(LabelPrimitive.Root)`\n  font-size: ${FONT_SIZES.sm};\n  line-height: 1;\n  font-weight: 500;\n  font-family: ${FONT_FAMILY};\n  display: block;\n  margin-bottom: 0.5rem;\n\n  color: ${SECONDARY_FONT_COLORS.light};\n\n  html[data-stack-theme='dark'] & {\n    color: ${SECONDARY_FONT_COLORS.dark};\n  }\n`;\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(\n  (props, ref) => {\n    return <Primitive\n      ref={ref}\n      {...props}\n    />;\n  }\n);\nLabel.displayName = LabelPrimitive.Root.displayName;\n\nexport { Label };\n"],"names":[],"mappings":";;;;AAEA,OAAO,WAAW,cAAA;AAClB,YAAY,oBAAoB;AAChC,OAAO,YAAY;AACnB,SAAS,aAAa,YAAY,6BAA6B;AAuBpD;AApBX,IAAM,YAAY,OAAsB,mBAAI;;;;;;;;AAAA,IAAA,WAC7B,CAAA,IAAA,oQAAA,EAAA,GAAW,EAAE,kPAAA,CAAA,CAAA;aAAA,EAAA,6NAAA,CAAA,EAAA,CAAA;;;eAGA,EAAA,8NAAA,CAAA;;;;SAIU,EAAA,wOAAA,CAAA,KAAA,CAAA;;;WAGC,EAAA,wOAAA,CAAA,IAAA,CAAA;;AAIvC,CAAA,GAAM,QAAQ,MAAM;AAAA,EAIlB,CAAC,CAAA,MAAO,EAAA,qPAAA,CAAQ,UAAA,CACd,CAAA,OAAA,CAAO;IAAA,EAAC,KAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,WAAA,EACN;QACC,GAAG;QAAA,GAAA,KAAA;IACN;AAEJ"}},
    {"offset": {"line": 2453, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/text.tsx"],"sourcesContent":["'use client';\n\nimport React from \"react\";\nimport { createElement } from \"react\";\nimport { FONT_FAMILY, FONT_SIZES, LINE_HEIGHTS, PRIMARY_FONT_COLORS, SECONDARY_FONT_COLORS } from \"../utils/constants\";\nimport styled from \"styled-components\";\nimport { typedFromEntries } from \"@stackframe/stack-shared/dist/utils/objects\";\n\nconst components = ['p', 'h6', 'h5', 'h4', 'h3', 'h2', 'h1'] as const;\nconst StyledComponents = typedFromEntries(components.map((component) => {\n  return [\n    component,\n    styled(component)<{\n      $size: 'xs' | 'sm' | 'md' | 'lg' | 'xl',\n      $textColor: { light: string, dark: string },\n    }>`\n      font-family: ${FONT_FAMILY};\n      font-size: ${props => FONT_SIZES[props.$size]};\n      line-height: ${props => LINE_HEIGHTS[props.$size]};\n      margin: 0;\n      padding: 0;\n      color: ${props => props.$textColor.light};\n      \n      html[data-stack-theme='dark'] & {\n        color: ${props => props.$textColor.dark};\n      }\n    `\n  ] as const;\n}));\n\n\ntype TextProps = {\n  variant?: 'primary' | 'secondary' | 'warning' | 'success',\n  as?: 'p' | 'h6'| 'h5' | 'h4' | 'h3' | 'h2' | 'h1',\n  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl',\n} & Omit<React.HTMLProps<HTMLParagraphElement>, 'size'>\n\nconst Text = React.forwardRef<HTMLParagraphElement, TextProps>(({\n  variant='primary',\n  size='md',\n  as='p',\n  ...props\n} : TextProps, ref) => {\n  let textColor: { light: string, dark: string };\n  switch (variant) {\n    case 'primary': {\n      textColor = PRIMARY_FONT_COLORS;\n      break;\n    }\n    case 'secondary': {\n      textColor = SECONDARY_FONT_COLORS;\n      break;\n    }\n    case 'warning': {\n      textColor = { light: '#b33b1d', dark: '#ff7b5c' };\n      break;\n    }\n    case 'success': {\n      textColor = { light: '#3da63d', dark: '#3da63d' };\n      break;\n    }\n  }\n  return createElement(StyledComponents[as], {\n    $size: size,\n    $textColor: textColor,\n    ...props,\n    ref,\n  });\n});\n\nText.displayName = 'Text';\n\nexport { Text };"],"names":[],"mappings":";;;;AAEA,OAAO,WAAW,aAAA;AAClB,SAAS,qBAAqB;AAE9B,OAAO,YAAY;AACnB,SAAS,wBAAwB;AAEjC,IAAM,aAAa,CAAC,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI;;;;;;;;AAC3D,IAAM,aAAA;IAAA;IAAmB;IAAA;IAAA,KAAiB;IAAA;IAAA,IAAW;IAAA,EAAI,CAAC;CAAA,YAAc;AACtE,IAAA,KAAO,cAAA,IAAA,6QAAA,EAAA,WAAA,GAAA,CAAA,CAAA;IAAA,EACL,KAAA;QACA,OAAO,SAAS;QAAA,IAAA,oQAAA,EAAA,UAIC,CAAA,UAAW;mBACb,EAAA,SAAS,qNAAA,CAAA,QAAW,MAAM,KAAK,CAAC;iBAAA,EAAA,CAAA,CAC9B,OAAA,EAAS,2NAAA,CAAA,IAAa,EAAA,IAAM,CAAA,CAAA,CAAA,EAAK,CAAC;mBAAA,EAAA,CAAA,QAAA,+NAAA,CAAA,MAAA,KAAA,CAAA,CAAA;;;aAGT,EAAA,CAAA,QAAA,MAAA,UAAA,CAAA,KAAA,CAAA;;;eAGC,EAAA,CAAA,QAAA,MAAA,UAAA,CAAA,IAAA,CAAA;;IAG7C,CAAA;KACA;AASF,IAAM,OAAO,MAAM,WAA4C,CAAC;AAAA,EAC9D,EAAA,OAAA,CAAQ,oPAAA,CAAA,UAAA,CAAA,CAAA,EACR,OAAK,GAAA,SAAA,EACL,KAAG,EAAA,IAAA,EACH,GAAG,EAAA,GAAA,EACL,CAAe,EAAA,MAAQ,CACrB,EAAA,GAAI;IACJ,IAAA,IAAQ,SAAS;IAAA,EACf,KAAK,UAAW;QACd,KAAA,SAAY;YAAA;gBACZ,YAAA,sOAAA;gBACF;YACA,KAAK,aAAa;QAChB,KAAA,SAAY;YAAA;gBACZ,YAAA,wOAAA;gBACF;YACA,KAAK,WAAW;QACd,KAAA,SAAY;YAAE,OAAO,WAAW,MAAM,UAAU;gBAChD,YAAA;oBAAA,OAAA;oBAAA,MAAA;gBAAA;gBACF;YACA,KAAK,WAAW;QACd,KAAA,SAAY;YAAE,OAAO,WAAW,MAAM,UAAU;gBAChD,YAAA;oBAAA,OAAA;oBAAA,MAAA;gBAAA;gBACF;YACF;IACA,OAAO,cAAc,iBAAiB,EAAE,GAAG;IAAA,EACzC,KAAA,IAAA,EAAO,yPAAA,EAAA,gBAAA,CAAA,GAAA,EAAA;QACP,OAAA,KAAY;QACZ,GAAG,SAAA;QACH,GAAA,KAAA;QACD;IACF;AAED,KAAK,cAAc"}},
    {"offset": {"line": 2539, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/card.tsx"],"sourcesContent":["'use client';\n\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { useDesign } from \"..\";\nimport { ColorPalette } from \"../providers/design-provider\";\n\nconst StyledCard = styled.div<{ \n  $colors: ColorPalette,\n}>`\n  border-radius: 0.5rem;\n  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.05);\n  padding: 1.5rem;\n\n  border: 1px solid ${props => props.$colors.light.neutralColor};\n  background-color: ${props => props.$colors.light.backgroundColor};\n\n  html[data-stack-theme='dark'] & {\n    border-color: ${props => props.$colors.dark.neutralColor};\n    background-color: ${props => props.$colors.dark.backgroundColor};\n  }\n`;\n\nconst StyledCardHeader = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.375rem;\n  margin-bottom: 1.5rem;\n`;\n\nconst StyledCardContent = styled.div`\n`;\n\nconst StyledCardFooter = styled.div`\n  display: flex;\n  align-items: center;\n  margin-top: 1.5rem;\n`;\n\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>((props, ref) => {\n  const { colors } = useDesign();\n  return <StyledCard ref={ref} {...props} $colors={colors} />;\n});\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>((props, ref) => (\n  <StyledCardHeader ref={ref} {...props} />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>((props, ref) => (\n  <StyledCardContent ref={ref} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>((props, ref) => (\n  <StyledCardFooter ref={ref} {...props} />\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport { \n  Card, \n  CardHeader, \n  CardFooter, \n  CardContent,\n};\n"],"names":[],"mappings":";;;;;;;;;;AAEA,YAAY,WAAW,QAAA;AACvB,OAAO,YAAY;AACnB,SAAS,iBAAiB;AAqCjB;AAlCT,IAAM,aAAa,OAAO;;;;;;;AAAA,IAAA,aAAA,oQAAA,CAAA,GAAA,CAAA;;;;;oBAOqC,EACzC,CAAA,QAAS,MAAM,OAAA,CAAQ,KAAA,CAAM,YAAA,CAAA,EAAe;oBAAA,EAAA,CAAA,QAAA,MAAA,OAAA,CAAA,KAAA,CAAA,eAAA,CAAA;;;kBAGN,EAAA,CAAA,GACpC,KAAA,IAAS,EAAA,IAAM,GAAA,CAAA,IAAQ,CAAA,IAAK,QAAA,CAAA,MAAe;sBAAA,EAAA,CAAA,QAAA,MAAA,OAAA,CAAA,IAAA,CAAA,eAAA,CAAA;;AAInE,CAAA,GAAM,mBAAmB,OAAO;AAAA,IAAA,mBAAA,oQAAA,CAAA,GAAA,CAAA;;;;;AAOhC,CAAA,GAAM,oBAAoB,OAAO;AAAA,IAAA,oBAAA,oQAAA,CAAA,GAAA,CAAA;AAGjC,CAAA,GAAM,mBAAmB,OAAO;AAAA,IAAA,mBAAA,oQAAA,CAAA,GAAA,CAAA;;;;AAMhC,CAAA,GAAM,OAAa,iBAAiE,CAAC,OAAO,QAAQ;AAClG,IAAA,IAAM,EAAE,CAAA,MAAO,IAAI,8OAAA,CAAA,CAAA,EAAU,KAAA;IAC7B,MAAA,CAAO,CAAA,MAAA,EAAA,GAAA,IAAA,QAAC,iOAAA,aAAW,KAAW,GAAG,OAAO,SAAS,QAAQ;IAC1D,OAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,YAAA;QAAA;QAAA,GAAA,KAAA;QAAA,SAAA;IAAA;AACD,KAAK,cAAc;AAEnB,IAAM,CAAA,WAAA,CAAmB,EAAA,eAAiE,CAAC,OAAO,QAChG,oBAAC,oBAAiB,KAAW,GAAG,OAAO,CACxC;AACD,IAAA,OAAW,MAAA,QAAc,gPAAA,CAAA,CAAA,OAAA,MAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,kBAAA;QAAA;QAAA,GAAA,KAAA;IAAA;AAEzB,IAAM,OAAA,OAAoB,IAAA,GAAA,UAAiE,CAAC,OAAO,QACjG,oBAAC,qBAAkB,KAAW,GAAG,OAAO,CACzC;AACD,IAAA,QAAY,MAAA,QAAc,gPAAA,CAAA,CAAA,OAAA,MAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,mBAAA;QAAA;QAAA,GAAA,KAAA;IAAA;AAE1B,IAAM,QAAA,KAAmB,MAAA,GAAA,QAAiE,CAAC,OAAO,QAChG,oBAAC,oBAAiB,KAAW,GAAG,OAAO,CACxC;AACD,IAAA,OAAW,MAAA,QAAc,gPAAA,CAAA,CAAA,OAAA,MAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,kBAAA;QAAA;QAAA,GAAA,KAAA;IAAA"}},
    {"offset": {"line": 2616, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/popover.tsx"],"sourcesContent":["import React from 'react';\nimport * as PopoverPrimitive from '@radix-ui/react-popover';\nimport styled, { css } from 'styled-components';\nimport { useDesign } from '..';\nimport { ColorPalette } from '../providers/design-provider';\n\nconst Popover = PopoverPrimitive.Root;\n\nconst PopoverTrigger = PopoverPrimitive.Trigger;\n\nconst StyledContent = styled(PopoverPrimitive.Content)<{\n  $colors: ColorPalette,\n}>`\n  z-index: 50;\n  width: 18rem;\n  border-radius: 0.375rem;\n  padding: 1rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);\n  outline: none;\n\n  border: 1px solid ${({ $colors }) => $colors.light.neutralColor};\n  background-color: ${({ $colors }) => $colors.light.backgroundColor};\n\n  html[data-stack-theme='dark'] & {\n    border-color: ${({ $colors }) => $colors.dark.neutralColor};\n    background-color: ${({ $colors }) => $colors.dark.backgroundColor};\n  }\n`;\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ align = 'center', sideOffset = 4, ...props }, ref) => {\n  const { colors } = useDesign();\n  return (\n    <PopoverPrimitive.Portal>\n      <StyledContent\n        $colors={colors}\n        ref={ref}\n        align={align}\n        sideOffset={sideOffset}\n        {...props}\n      />\n    </PopoverPrimitive.Portal>\n  );\n});\nPopoverContent.displayName = 'PopoverContent';\n\nexport { Popover, PopoverTrigger, PopoverContent };\n"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,WAAW;AAClB,YAAY,sBAAsB;AAClC,OAAO,YAAqB;AAC5B,SAAS,iBAAiB;AAiCpB;;;;;;AA9BN,IAAM,UAA2B,yPAAA;AAEjC,IAAM,iBAAkC,4PAAA;AAExC,IAAM,oBAAgB,oQAAA,EAAwB,4PAAO,CAAA,CAAA;;;;;;;;oBAAA,EAU/B,CAAC,EAAE,OAAA,CAAQ,CAAA,GAAM,QAAQ,KAAA,CAAM,YAAY,CAAA;oBAAA,EAC3C,CAAC,EAAE,OAAA,CAAQ,CAAA,GAAM,QAAQ,KAAA,CAAM,eAAe,CAAA;;;kBAAA,EAGhD,CAAC,EAAE,OAAA,CAAQ,CAAA,GAAM,QAAQ,IAAA,CAAK,YAAY,CAAA;sBAAA,EACtC,CAAC,EAAE,OAAA,CAAQ,CAAA,GAAM,QAAQ,IAAA,CAAK,eAAe,CAAA;;AAAA,CAAA;AAIrE,IAAM,iBAAiB,qPAAA,CAAM,UAAA,CAG3B,CAAC,EAAE,QAAQ,QAAA,EAAU,aAAa,CAAA,EAAG,GAAG,MAAM,CAAA,EAAG,QAAQ;IACzD,MAAM,EAAE,MAAA,CAAO,CAAA,OAAI,yOAAA,CAAU;IAC7B,OACE,aAAA,GAAA,IAAA,mQAAA,EAAkB,2PAAA,EAAjB;QACC,UAAA,aAAA,GAAA,IAAA,mQAAA,EAAC,eAAA;YACC,SAAS;YACT;YACA;YACA;YACC,GAAG,KAAA;QAAA;IACN,CACF;AAEJ,CAAC;AACD,eAAe,WAAA,GAAc"}},
    {"offset": {"line": 2672, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/dropdown.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu';\nimport { useDesign } from '..';\nimport { SELECTED_BACKGROUND_COLORS } from '../utils/constants';\nimport { ColorPalette } from '../providers/design-provider';\n\nconst DropdownMenu = DropdownMenuPrimitive.Root;\n\nconst StyledTrigger = styled(DropdownMenuPrimitive.Trigger)`\n  all: unset;\n  &:focus {\n    outline: none;\n    box-shadow: 0;\n  }\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst DropdownMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <StyledTrigger ref={ref} {...props} />\n));\n\nconst StyledContent = styled(DropdownMenuPrimitive.Content)<{\n  $colors: ColorPalette,\n}>`\n  z-index: 50;\n  min-width: 8rem;\n  overflow: hidden;\n  border-radius: 4px;\n  padding: 0.25rem;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n\n  border: 1px solid ${({ $colors }) => $colors.light.neutralColor};\n  background: ${({ $colors }) => $colors.light.backgroundColor};\n\n  html[data-stack-theme='dark'] & {\n    border-color: ${({ $colors }) => $colors.dark.neutralColor};\n    background: ${({ $colors }) => $colors.dark.backgroundColor};\n  }\n`;\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => {\n  const { colors } = useDesign();\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <StyledContent \n        $colors={colors}\n        sideOffset={sideOffset} \n        ref={ref} \n        {...props}  \n      />\n    </DropdownMenuPrimitive.Portal>\n  );\n});\nDropdownMenuContent.displayName = 'DropdownMenuContent';\n\nconst StyledItem = styled(DropdownMenuPrimitive.Item)<{ \n  $inset?: boolean,\n}>`\n  display: flex;\n  cursor: default;\n  align-items: center;\n  border-radius: 4px;\n  padding: 0.375rem 0.5rem;\n  font-size: 0.875rem;\n  outline: none;\n  transition: color 0.2s ease;\n  &:focus {\n    background-color: var(--accent);\n    color: var(--accent-foreground);\n  }\n  ${({ $inset }) => $inset && 'padding-left: 2rem;'}\n\n  &:hover {\n    background-color: ${SELECTED_BACKGROUND_COLORS.light};\n  }\n\n  html[data-stack-theme='dark'] & {\n    &:hover {\n      background-color: ${SELECTED_BACKGROUND_COLORS.dark};\n    }\n  }\n`;\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean,\n  }\n>(({ className, inset, ...props }, ref) => {\n  return <StyledItem ref={ref} {...props} $inset={inset} />;\n});\nDropdownMenuItem.displayName = 'DropdownMenuItem';\n\nconst StyledLabel = styled(DropdownMenuPrimitive.Label)<{ inset?: boolean }>`\n  padding: 0.375rem 0.5rem;\n  font-size: 0.875rem;\n  ${({ inset }) => inset && 'padding-left: 2rem;'}\n`;\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean,\n  }\n>(({ className, inset, ...props }, ref) => (\n  <StyledLabel ref={ref} {...props} inset={inset} />\n));\nDropdownMenuLabel.displayName = 'DropdownMenuLabel';\n\nconst StyledSeparator = styled(DropdownMenuPrimitive.Separator)<{\n  $colors: ColorPalette,\n}>`\n  margin: 0.25rem -0.25rem;\n  height: 1px;\n  background-color: ${({ $colors }) => $colors.light.neutralColor};\n\n  html[data-stack-theme='dark'] & {\n    background-color: ${({ $colors }) => $colors.dark.neutralColor};\n  }\n`;\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => {\n  const { colors } = useDesign();\n  return <StyledSeparator ref={ref} {...props} $colors={colors} />;\n});\nDropdownMenuSeparator.displayName = 'DropdownMenuSeparator';\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2812, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/avatar.tsx"],"sourcesContent":["import * as React from 'react';\nimport * as AvatarPrimitive from '@radix-ui/react-avatar';\nimport styled from 'styled-components';\nimport { useDesign } from '..';\nimport { ColorPalette } from '../providers/design-provider';\n\nconst StyledAvatar = styled(AvatarPrimitive.Root)`\n  position: relative;\n  display: flex;\n  height: 2rem;\n  width: 2rem;\n  flex-shrink: 0;\n  overflow: hidden;\n  border-radius: 9999px;\n`;\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <StyledAvatar ref={ref} className={className} {...props} />\n));\nAvatar.displayName = 'Avatar';\n\nconst StyledAvatarImage = styled(AvatarPrimitive.Image)`\n  aspect-ratio: 1 / 1;\n  height: 100%;\n  width: 100%;\n`;\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <StyledAvatarImage ref={ref} className={className} {...props} />\n));\nAvatarImage.displayName = 'AvatarImage';\n\nconst StyledAvatarFallback = styled(AvatarPrimitive.Fallback)<{\n  $colors: ColorPalette,\n}>`\n  display: flex;\n  height: 100%;\n  width: 100%;\n  align-items: center;\n  justify-content: center;\n  border-radius: 9999px;\n  \n  background-color: ${({ $colors }) => $colors.light.secondaryColor};\n\n  html[data-stack-theme='dark'] & {\n    background-color: ${({ $colors }) => $colors.dark.secondaryColor};\n  }\n`;\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => {\n  const { colors } = useDesign();\n  return <StyledAvatarFallback \n    ref={ref} \n    className={className} \n    $colors={colors}\n    {...props} \n  />;\n});\nAvatarFallback.displayName = 'AvatarFallback';\n\nexport { Avatar, AvatarImage, AvatarFallback };\n"],"names":[],"mappings":";;;;;;;;;AAAA,YAAY,WAAW;AACvB,YAAY,qBAAqB;AACjC,OAAO,YAAY;AACnB,SAAS,iBAAiB;AAiBxB;;;;;;AAdF,IAAM,mBAAe,oQAAA,EAAuB,wPAAI,CAAA,CAAA;;;;;;;;AAAA,CAAA;AAUhD,IAAM,SAAe,wPAAA,CAGnB,CAAC,EAAE,SAAA,EAAW,GAAG,MAAM,CAAA,EAAG,MAC1B,aAAA,GAAA,IAAA,mQAAA,EAAC,cAAA;QAAa;QAAU;QAAuB,GAAG,KAAA;IAAA,CAAO,CAC1D;AACD,OAAO,WAAA,GAAc;AAErB,IAAM,wBAAoB,oQAAA,EAAuB,yPAAK,CAAA,CAAA;;;;AAAA,CAAA;AAMtD,IAAM,cAAoB,wPAAA,CAGxB,CAAC,EAAE,SAAA,EAAW,GAAG,MAAM,CAAA,EAAG,MAC1B,aAAA,GAAA,IAAA,mQAAA,EAAC,mBAAA;QAAkB;QAAU;QAAuB,GAAG,KAAA;IAAA,CAAO,CAC/D;AACD,YAAY,WAAA,GAAc;AAE1B,IAAM,2BAAuB,oQAAA,EAAuB,4PAAQ,CAAA,CAAA;;;;;;;;oBAAA,EAUtC,CAAC,EAAE,OAAA,CAAQ,CAAA,GAAM,QAAQ,KAAA,CAAM,cAAc,CAAA;;;sBAAA,EAG3C,CAAC,EAAE,OAAA,CAAQ,CAAA,GAAM,QAAQ,IAAA,CAAK,cAAc,CAAA;;AAAA,CAAA;AAIpE,IAAM,iBAAuB,wPAAA,CAG3B,CAAC,EAAE,SAAA,EAAW,GAAG,MAAM,CAAA,EAAG,QAAQ;IAClC,MAAM,EAAE,MAAA,CAAO,CAAA,OAAI,yOAAA,CAAU;IAC7B,OAAO,aAAA,GAAA,IAAA,mQAAA,EAAC,sBAAA;QACN;QACA;QACA,SAAS;QACR,GAAG,KAAA;IAAA;AAER,CAAC;AACD,eAAe,WAAA,GAAc"}},
    {"offset": {"line": 2887, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/collapsible.tsx"],"sourcesContent":["\"use client\";\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\";\n\nconst Collapsible = CollapsiblePrimitive.Root;\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger;\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent;\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent };\n"],"names":["CollapsibleTrigger","CollapsibleContent"],"mappings":";;;;;;;;AAEA,YAAY,0BAA0B;AAEtC,IAAM,cAAmC;;;;AACzC,IAAMA,cAAAA,QAA0C,qPAAA;AAChD,IAAMC,sBAA0C,2QAAA"}},
    {"offset": {"line": 2909, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/index.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { forwardRef } from 'react';\nimport { Components, useComponents } from '../providers/component-provider';\nimport type { Button as StaticButton } from './button';\nimport { useAsyncCallbackWithLoggedError } from '@stackframe/stack-shared/dist/hooks/use-async-callback';\n\nexport const Button = forwardRef<\n  HTMLButtonElement, \n  React.ComponentProps<typeof StaticButton>\n>((props, ref) => {\n  const { Button } = useComponents();\n  const [onClick, onClickLoading] = useAsyncCallbackWithLoggedError(async () => {\n    return await props.onClick?.();\n  }, [props.onClick]);\n\n  return <Button\n    {...props}\n    onClick={props.onClick && onClick}\n    loading={props.loading || onClickLoading}\n    disabled={props.disabled || onClickLoading}\n    ref={ref}\n  />;\n});\n\nfunction createDynamicComponent<T extends keyof typeof Components>(\n  component: T\n): React.ForwardRefExoticComponent<\n  React.PropsWithoutRef<React.ComponentProps<typeof Components[T]>> & \n  React.RefAttributes<React.ElementRef<typeof Components[T]>>\n> {\n  return forwardRef<\n    React.ElementRef<typeof Components[T]>,\n    React.ComponentProps<typeof Components[T]>\n  >((props, ref) => {\n    const Component = useComponents()[component] as any;\n    return <Component {...props} ref={ref} />;\n  });\n};\n\nexport const Input = createDynamicComponent('Input');\nexport const Container = createDynamicComponent('Container');\nexport const Separator = createDynamicComponent('Separator');\nexport const Label = createDynamicComponent('Label');\nexport const Link = createDynamicComponent('Link');\nexport const Text = createDynamicComponent('Text');\nexport const Popover = createDynamicComponent('Popover');\nexport const PopoverTrigger = createDynamicComponent('PopoverTrigger');\nexport const PopoverContent = createDynamicComponent('PopoverContent');\nexport const DropdownMenu = createDynamicComponent('DropdownMenu');\nexport const DropdownMenuTrigger = createDynamicComponent('DropdownMenuTrigger');\nexport const DropdownMenuContent = createDynamicComponent('DropdownMenuContent');\nexport const DropdownMenuItem = createDynamicComponent('DropdownMenuItem');\nexport const DropdownMenuLabel = createDynamicComponent('DropdownMenuLabel');\nexport const DropdownMenuSeparator = createDynamicComponent('DropdownMenuSeparator');\nexport const Avatar = createDynamicComponent('Avatar');\nexport const AvatarFallback = createDynamicComponent('AvatarFallback');\nexport const AvatarImage = createDynamicComponent('AvatarImage');\nexport const Collapsible = createDynamicComponent('Collapsible');\nexport const CollapsibleTrigger = createDynamicComponent('CollapsibleTrigger');\nexport const CollapsibleContent = createDynamicComponent('CollapsibleContent');\nexport const Card = createDynamicComponent('Card');\nexport const CardHeader = createDynamicComponent('CardHeader');\nexport const CardContent = createDynamicComponent('CardContent');\nexport const CardFooter = createDynamicComponent('CardFooter');\nexport const Tabs = createDynamicComponent('Tabs');\nexport const TabsList = createDynamicComponent('TabsList');\nexport const TabsContent = createDynamicComponent('TabsContent');\nexport const TabsTrigger = createDynamicComponent('TabsTrigger');\nexport const Skeleton = createDynamicComponent('Skeleton');\n"],"names":["Button"],"mappings":"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"}},
    {"offset": {"line": 3044, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/tabs.tsx"],"sourcesContent":["import * as React from 'react';\nimport * as TabsPrimitive from '@radix-ui/react-tabs';\nimport styled from 'styled-components';\nimport { Text, useDesign } from '..';\nimport { ColorPalette } from '../providers/design-provider';\n\nconst Tabs = TabsPrimitive.Root;\n\nconst StyledTabsList = styled(TabsPrimitive.List)`\n  display: flex;\n  height: 2.5rem\n  align-items: center;\n  justify-content: center;\n  border-radius: 0.375rem;\n  padding: 0.25rem;\n\n  background-color: rgb(244, 244, 245);\n\n  html[data-stack-theme='dark'] & {\n    background-color: rgb(39, 39, 42);\n  }\n`;\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentProps<typeof TabsPrimitive.List>\n>((props, ref) => {\n  return <StyledTabsList\n    {...props} \n    ref={ref} \n  />;\n});\n\nconst StyledTabsTrigger = styled(TabsPrimitive.Trigger)<{\n  $colors: ColorPalette,\n}>`\n  all: unset;\n  display: flex;\n  flex-grow: 1;\n  align-items: center;\n  justify-content: center;\n  white-space: nowrap;\n  border-radius: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  transition: all;\n  outline: none;\n\n  &:disabled {\n    pointer-events: none;\n    opacity: 0.5;\n  }\n\n  &[data-state='active'] {\n    background-color: ${({ $colors }) => $colors.light.backgroundColor};\n  }\n\n  html[data-stack-theme='dark'] & {\n    &[data-state='active'] {\n      background-color: ${({ $colors }) => $colors.dark.backgroundColor};\n    }\n  }\n`;\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentProps<typeof TabsPrimitive.Trigger>\n>(({children, ...props}, ref) => {\n  const { colors } = useDesign();\n  return <StyledTabsTrigger \n    $colors={colors}\n    {...props} \n    ref={ref} \n  >\n    <Text>{children}</Text>\n  </StyledTabsTrigger>;\n});\n\nconst StyledTabsContent = styled(TabsPrimitive.Content)`\n  margin-top: 1.5rem;\n`;\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentProps<typeof TabsPrimitive.Content>\n>((props, ref) => {\n  return <StyledTabsContent {...props} ref={ref} />;\n});\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\n"],"names":[],"mappings":";;;;;;;;;;;AAAA,YAAY,WAAW;AACvB,YAAY,mBAAmB;AAC/B,OAAO,YAAY;;AACnB,SAAS,MAAM,iBAAiB;AAwBvB;;;;;;AArBT,IAAM,OAAqB,sPAAA;AAE3B,IAAM,qBAAiB,oQAAA,EAAqB,sPAAI,CAAA,CAAA;;;;;;;;;;;;;AAAA,CAAA;AAehD,IAAM,WAAiB,wPAAA,CAGrB,CAAC,OAAO,QAAQ;IAChB,OAAO,aAAA,GAAA,IAAA,mQAAA,EAAC,gBAAA;QACL,GAAG,KAAA;QACJ;IAAA;AAEJ,CAAC;AAED,IAAM,wBAAoB,oQAAA,EAAqB,yPAAO,CAAA,CAAA;;;;;;;;;;;;;;;;;;sBAAA,EAoB9B,CAAC,EAAE,OAAA,CAAQ,CAAA,GAAM,QAAQ,KAAA,CAAM,eAAe,CAAA;;;;;wBAAA,EAK5C,CAAC,EAAE,OAAA,CAAQ,CAAA,GAAM,QAAQ,IAAA,CAAK,eAAe,CAAA;;;AAAA,CAAA;AAKvE,IAAM,cAAoB,wPAAA,CAGxB,CAAC,EAAC,QAAA,EAAU,GAAG,MAAK,CAAA,EAAG,QAAQ;IAC/B,MAAM,EAAE,MAAA,CAAO,CAAA,OAAI,yOAAA,CAAU;IAC7B,OAAO,aAAA,GAAA,IAAA,mQAAA,EAAC,mBAAA;QACN,SAAS;QACR,GAAG,KAAA;QACJ;QAEA,UAAA,aAAA,GAAA,IAAA,mQAAA,EAAC,gOAAA,EAAA;YAAM;QAAA,CAAS;IAAA;AAEpB,CAAC;AAED,IAAM,wBAAoB,oQAAA,EAAqB,yPAAO,CAAA,CAAA;;AAAA,CAAA;AAItD,IAAM,cAAoB,wPAAA,CAGxB,CAAC,OAAO,QAAQ;IAChB,OAAO,aAAA,GAAA,IAAA,mQAAA,EAAC,mBAAA;QAAmB,GAAG,KAAA;QAAO;IAAA,CAAU;AACjD,CAAC"}},
    {"offset": {"line": 3140, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/components-core/skeleton.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport styled, { keyframes } from 'styled-components';\n\nconst getFilterString = (brightness1: number, brightness2: number) => {\n  return `\n    0% {\n      filter: grayscale(1) contrast(0) brightness(0) invert(1) brightness(${brightness1});\n    }\n    100% {\n      filter: grayscale(1) contrast(0) brightness(0) invert(1) brightness(${brightness2});\n    }\n  `;\n};\n\nconst animationLight = keyframes`${getFilterString(0.8, 0.9)}`;\nconst animationDark = keyframes`${getFilterString(0.2, 0.1)}`;\n\nconst Primitive = styled(\"span\")`\n  &[data-stack-state=\"activated\"], &[data-stack-state=\"activated\"] * {\n    pointer-events: none !important;\n    -webkit-user-select: none !important;\n    -moz-user-select: none !important;\n    user-select: none !important;\n    cursor: default !important;\n  }\n\n  &[data-stack-state=\"activated\"] {\n    animation: ${animationLight} 1s infinite alternate-reverse !important;\n  }\n\n  html[data-stack-theme='dark'] &[data-stack-state=\"activated\"] {\n    animation: ${animationDark} 1s infinite alternate-reverse !important;\n  }\n`;\n\nconst Skeleton = React.forwardRef<\n  React.ElementRef<\"span\">,\n  React.ComponentPropsWithoutRef<\"span\"> & { deactivated?: boolean }\n>(\n  (props, ref) => {\n    return <Primitive\n      ref={ref}\n      data-stack-state={props.deactivated ? \"deactivated\" : \"activated\"}\n      {...props}\n    />;\n  }\n);\nSkeleton.displayName = \"Skeleton\";\n\nexport { Skeleton };\n"],"names":[],"mappings":";;;;AAEA,OAAO,WAAW,iBAAA;AAClB,OAAO,UAAU,iBAAiB;AAuCvB;AArCX,IAAM,kBAAkB,CAAC,aAAqB,gBAAwB;;;;;;AACpE,IAAA,KAAO,aAAA,CAAA,aAAA;IAAA,OAAA,CAAA;;0EAE8E,EAAA,YAAA;;;0EAGA,EAAA,YAAA;;EAGvF,CAAA;AAEA,IAAM,iBAAiB,YAAY,gBAAgB,KAAK,GAAG,CAAC;AAC5D,IAAM,gBAAgB,CAAA,sQAAA,CAAA,CAAY,CAAA,eAAgB,CAAA,IAAK,CAAA,EAAG,CAAC,EAAA,CAAA;AAE3D,IAAM,YAAY,IAAA,GAAO,mQAAM,CAAA,EAAA,gBAAA,KAAA,KAAA,CAAA;AAAA,IAAA,YAAA,IAAA,oQAAA,EAAA,OAAA,CAAA;;;;;;;;;;eAUA,EAAA,eAAA;;;;eAID,EAAA,cAAA;;AAI9B,CAAA,GAAM,WAAW,MAAM;AAAA,EAIrB,CAAC,CAAA,MAAO,KAAA,GAAQ,kPAAA,CAAA,UAAA,CACd,CAAA,OAAA,CAAO;IAAA,EAAC,KAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,WAAA,EACN;QACA,oBAAkB,MAAM,cAAc,gBAAgB;QACrD,GAAG,iBAAA,MAAA,WAAA,GAAA,gBAAA;QAAA,GAAA,KAAA;IACN;AAEJ"}},
    {"offset": {"line": 3196, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/providers/component-provider.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext } from 'react';\nimport { Button } from '../components-core/button';\nimport { Container } from '../components-core/container';\nimport { Separator } from '../components-core/separator';\nimport { Input } from '../components-core/input';\nimport { Link } from '../components-core/link';\nimport { Label } from '../components-core/label';\nimport { Text } from '../components-core/text';\nimport { Card, CardHeader, CardContent, CardFooter } from '../components-core/card';\nimport { Popover, PopoverTrigger, PopoverContent } from '../components-core/popover';\nimport { \n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n} from '../components-core/dropdown';\nimport { Avatar, AvatarFallback, AvatarImage } from '../components-core/avatar';\nimport { Collapsible, CollapsibleTrigger, CollapsibleContent } from '../components-core/collapsible';\nimport { Tabs, TabsList, TabsContent, TabsTrigger } from '../components-core/tabs';\nimport { Skeleton } from '../components-core/skeleton';\n\nexport const Components = {\n  Input,\n  Button,\n  Container,\n  Separator,\n  Label,\n  Link,\n  Text,\n  Popover,\n  PopoverTrigger,\n  PopoverContent,\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  Avatar,\n  AvatarFallback,\n  AvatarImage,\n  Collapsible,\n  CollapsibleTrigger,\n  CollapsibleContent,\n  Card,\n  CardHeader,\n  CardContent,\n  CardFooter,\n  Tabs,\n  TabsList,\n  TabsContent,\n  TabsTrigger,\n  Skeleton,\n} as const;\n\nexport type ComponentConfig = {\n  components?: Partial<typeof Components>,\n}\n\nconst ComponentContext = createContext<typeof Components | undefined>(undefined);\n\nexport function useComponents() {\n  const context = useContext(ComponentContext);\n  if (!context) {\n    throw new Error('Stack UI components must be used within a StackTheme');\n  }\n  return context;\n}\n\nexport function StackComponentProvider(props: { children?: React.ReactNode } & ComponentConfig) {\n  return (\n    <ComponentContext.Provider value={{ ...Components, ...props.components }}>\n      {props.children}\n    </ComponentContext.Provider>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;AAEA,SAAgB,eAAe,eAAA,GAAkB;AACjD,SAAS,cAAc;AACvB,SAAS,iBAAiB;AAC1B,SAAS,iBAAiB;AAC1B,SAAS,aAAa;AACtB,SAAS,YAAY;AACrB,SAAS,aAAa;AACtB,SAAS,YAAY;AACrB,SAAS,MAAM,YAAY,aAAa,kBAAkB;AAC1D,SAAS,SAAS,gBAAgB,sBAAsB;AACxD;AAAA,EACE;AAQF,SAAS,aAAa,oBAAoB,0BAA0B;AACpE,SAAS,MAAM,UAAU,aAAa,mBAAmB;AACzD,SAAS,gBAAgB;AAoDrB;AAlDG,IAAM,aAAa;;;;;;;;;;;;;;;;;;;AAAA,EACxB,EAAA,aAAA;WACA,iOAAA;YACA,mOAAA;eACA,yOAAA;eACA,yOAAA;WACA,iOAAA;UACA,+NAAA;UACA,+NAAA;aACA,qOAAA;oBACA,4OAAA;IACA,4PAAA;kBACA,2OAAA;yBACA,kPAAA;yBACA,kPAAA;sBACA,+OAAA;uBACA,gPAAA;2BACA,oPAAA;YACA,mOAAA;oBACA,2OAAA;iBACA,wOAAA;iBACA,6OAAA;wBACA,oPAAA;wBACA,oPAAA;UACA,+NAAA;gBACA,qOAAA;IACA,mPAAA;gBACA,qOAAA;UACA,+NAAA;cACA,mOAAA;iBACA,sOAAA;iBACA,sOAAA;IACF,UAAA,uOAAA;AAMA,IAAM,mBAAmB,cAA6C,MAAS;AAExE,IAAA,KAAS,cAAA,IAAA,EAAgB,yPAAA,EAAA,KAAA;AAC9B,QAAM,CAAA,SAAU,WAAW,gBAAgB;IAC3C,IAAI,CAAC,CAAA,QAAS,EAAA,IAAA,wPAAA,EAAA;IACZ,IAAA,CAAA,GAAM,IAAI,EAAA,IAAM,sDAAsD;QACxE,MAAA,IAAA,MAAA;IACA,OAAO;IACT,OAAA;AAEO,SAAS,uBAAuB,OAAyD;AAC9F,SACE,oBAAC,GAAA,KAAA,SAAiB,UAAjB,EAA0B,OAAO,EAAE,GAAG,YAAY,GAAG,MAAM,WAAW,GACpE,gBAAM,UACT;IAEJ,OAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,iBAAA,QAAA,EAAA;QAAA,OAAA;YAAA,GAAA,UAAA;YAAA,GAAA,MAAA,UAAA;QAAA;QAAA,UAAA,MAAA,QAAA;IAAA"}},
    {"offset": {"line": 3295, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/providers/styled-components-registry.tsx"],"sourcesContent":["'use client';\n \nimport React, { useState } from 'react';\nimport { useServerInsertedHTML } from 'next/navigation';\nimport { ServerStyleSheet, StyleSheetManager } from 'styled-components';\n \nexport default function StyledComponentsRegistry({\n  children,\n}: {\n  children: React.ReactNode,\n}) {\n  // Only create stylesheet once with lazy initial state\n  // x-ref: https://reactjs.org/docs/hooks-reference.html#lazy-initial-state\n  const [styledComponentsStyleSheet] = useState(() => new ServerStyleSheet());\n \n  useServerInsertedHTML(() => {\n    const styles = styledComponentsStyleSheet.getStyleElement();\n    styledComponentsStyleSheet.instance.clearTag();\n    return <>{styles}</>;\n  });\n \n  if (typeof window !== 'undefined') return <>{children}</>;\n \n  return (\n    <StyleSheetManager sheet={styledComponentsStyleSheet.instance}>\n      {children}\n    </StyleSheetManager>\n  );\n}"],"names":[],"mappings":";;;;AAEA,SAAgB,gBAAgB,sBAAA;AAChC,SAAS,6BAA6B;AACtC,SAAS,kBAAkB,yBAAyB;AAczC;AAZI,SAAR,yBAA0C;;;;;;;AAAA,EAC/C,OAAA,yBAAA,EACF,CAEG,OAAA,EAGD,OAAM,CAAC,0BAA0B,IAAI,SAAS,MAAM,IAAI,iBAAiB,CAAC;IAE1E,MAAA,CAAA,eAAsB,MAAM,MAAA,GAAA,IAAA,sPAAA,EAAA,IAAA,IAAA,6QAAA;IAC1B,IAAA,QAAM,SAAS,+KAAA,EAAA,sBAA2B,gBAAgB;QAC1D,MAAA,SAAA,YAA2B,SAAS,MAAA,GAAS,YAAA;QAC7C,OAAO,oBAAA,QAAA,CAAA,GAAG,KAAA,aAAO;QAClB,OAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,wQAAA,EAAA;YAAA,UAAA;QAAA;IAED,IAAI,OAAO,WAAW;IAAa,SAAO,gCAAG,UAAS;;IAOxD,OAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,8QAAA,EAAA;QAAA,OAAA,2BAAA,QAAA;QAAA;IAAA"}},
    {"offset": {"line": 3332, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/utils/browser-script.tsx"],"sourcesContent":["const script = () => {\n  const attributes = ['data-joy-color-scheme', 'data-mui-color-scheme', 'data-theme', 'data-color-scheme', 'class'];\n\n  const observer = new MutationObserver((mutations) => {\n    mutations.forEach((mutation) => {\n      for (const attributeName of attributes) {\n        if (mutation.attributeName === attributeName) {\n          const colorTheme = document.documentElement.getAttribute(attributeName);\n          if (!colorTheme) {\n            continue;\n          }\n          const darkMode = colorTheme.includes('dark');\n          const lightMode = colorTheme.includes('light');\n          if (!darkMode && !lightMode) {\n            continue;\n          }\n          document.documentElement.setAttribute('data-stack-theme', darkMode ? 'dark' : 'light');\n        }\n      }\n    });\n  });\n\n  observer.observe(document.documentElement, {\n    attributes: true,\n    attributeFilter: attributes,\n  });\n};\n\nexport function BrowserScript() {\n  return (\n    <script dangerouslySetInnerHTML={{ __html: `(${script.toString()})()` }}/>\n  );\n}"],"names":[],"mappings":";;;;;AA8BI;;AA9BJ,IAAM,SAAS,MAAM;IACnB,MAAM,aAAa;QAAC;QAAyB;QAAyB;QAAc;QAAqB,OAAO;KAAA;IAEhH,MAAM,WAAW,IAAI,iBAAiB,CAAC,cAAc;QACnD,UAAU,OAAA,CAAQ,CAAC,aAAa;YAC9B,KAAA,MAAW,iBAAiB,WAAY;gBACtC,IAAI,SAAS,aAAA,KAAkB,eAAe;oBAC5C,MAAM,aAAa,SAAS,eAAA,CAAgB,YAAA,CAAa,aAAa;oBACtE,IAAI,CAAC,YAAY;wBACf;oBACF;oBACA,MAAM,WAAW,WAAW,QAAA,CAAS,MAAM;oBAC3C,MAAM,YAAY,WAAW,QAAA,CAAS,OAAO;oBAC7C,IAAI,CAAC,YAAY,CAAC,WAAW;wBAC3B;oBACF;oBACA,SAAS,eAAA,CAAgB,YAAA,CAAa,oBAAoB,WAAW,SAAS,OAAO;gBACvF;YACF;QACF,CAAC;IACH,CAAC;IAED,SAAS,OAAA,CAAQ,SAAS,eAAA,EAAiB;QACzC,YAAY;QACZ,iBAAiB;IACnB,CAAC;AACH;AAEO,SAAS,gBAAgB;IAC9B,OACE,aAAA,GAAA,IAAA,mQAAA,EAAC,UAAA;QAAO,yBAAyB;YAAE,QAAQ,CAAA,CAAA,EAAI,OAAO,QAAA,CAAS,CAAC,CAAA,GAAA,CAAA;QAAM;IAAA,CAAE;AAE5E"}},
    {"offset": {"line": 3383, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/node_modules/%40stackframe/stack/src/providers/theme-provider.tsx"],"sourcesContent":["'use client';\n\nimport React from \"react\";\nimport { StackDesignProvider, DesignConfig } from \"./design-provider\";\nimport { StackComponentProvider, ComponentConfig } from \"./component-provider\";\nimport StyledComponentsRegistry from \"./styled-components-registry\";\nimport { BrowserScript } from \"../utils/browser-script\";\n\nexport type ThemeConfig = DesignConfig & ComponentConfig;\n\nexport function StackTheme({\n  theme,\n  children,\n} : { \n  children?: React.ReactNode,\n  theme?: DesignConfig & ComponentConfig,\n}) {\n  const componentProps = { components: theme?.components };\n\n  return (\n    <StyledComponentsRegistry>\n      <BrowserScript />\n      <StackDesignProvider {...theme}>\n        <StackComponentProvider {...componentProps}>\n          {children}\n        </StackComponentProvider>\n      </StackDesignProvider>\n    </StyledComponentsRegistry>\n  );\n}"],"names":[],"mappings":";;;;AAGA,SAAS,0BAAA,CAAyC;AAClD,SAAS,8BAA+C;AACxD,OAAO,8BAA8B;AACrC,SAAS,qBAAqB;AAc1B,SACE,KADF;AAVG,SAAS,WAAW;;;;;;;;AAAA,EACzB,OAAA,WAAA,EACA,KAAA,EACF,CAGG,OAAA,EACD,OAAM,iBAAiB,EAAE,YAAY,OAAO,WAAW;IAEvD,MAAA,CACE,gBAAA;QAAA,GAAC,SAAA,OAAA;IAAA,CACC;IAAA,OAAA,aAAA,EAAC,CAAA,IAAA,oQAAA,EAAA,WAAc,0OAAA,EAAA;QAAA,UAAA;YACf,aAAA,GAAA,IAAA,mQAAA,EAAC,wOAAA,EAAA,CAAA,OAAqB,GAAG,OACvB,8BAAC,0BAAwB,GAAG,gBACzB,UACH,GACF;YAAA,CACF,YAAA,GAAA,IAAA,mQAAA,EAAA,mPAAA,EAAA;gBAAA,GAAA,KAAA;gBAAA,UAAA,aAAA,GAAA,IAAA,mQAAA,EAAA,yPAAA,EAAA;oBAAA,GAAA,cAAA;oBAAA;gBAAA;YAAA;SAEJ;IAAA"}}]
}