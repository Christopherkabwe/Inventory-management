{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/CHRISTOPHER%20KABWE/Desktop/Inventory/my-app/src/app/inventory/transfers/page.tsx"],"sourcesContent":["\"use client\";\r\nimport Sidebar from \"@/components/sidebar2\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\ntype Product = { id: string; name: string };\r\ntype Location = { id: string; name: string };\r\ntype Transfer = {\r\n    id: string;\r\n    product: Product;\r\n    fromLocation: Location | null;\r\n    toLocation: Location | null;\r\n    quantity: number;\r\n    transferDate: string;\r\n};\r\n\r\nexport default function TransfersPage() {\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [locations, setLocations] = useState<Location[]>([]);\r\n    const [transfers, setTransfers] = useState<Transfer[]>([]);\r\n    const [form, setForm] = useState({\r\n        productId: \"\",\r\n        fromLocationId: \"\",\r\n        toLocationId: \"\",\r\n        quantity: 0,\r\n    });\r\n\r\n    // Load products, locations, and recent transfers\r\n    useEffect(() => {\r\n        async function loadData() {\r\n            try {\r\n                const [productsRes, locationsRes, transfersRes] = await Promise.all([\r\n                    fetch(\"/api/products\").then(r => r.json()),\r\n                    fetch(\"/api/locations\").then(r => r.json()),\r\n                    fetch(\"/api/transfers?limit=10\").then(r => r.json()),\r\n                ]);\r\n\r\n                setProducts(Array.isArray(productsRes) ? productsRes : productsRes.products || []);\r\n                setLocations(Array.isArray(locationsRes) ? locationsRes : locationsRes.locations || []);\r\n                setTransfers(Array.isArray(transfersRes) ? transfersRes : transfersRes.transfers || []);\r\n            } catch (err) {\r\n                console.error(\"Failed to load data\", err);\r\n            }\r\n        }\r\n        loadData();\r\n    }, []);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (form.fromLocationId === form.toLocationId) {\r\n            alert(\"Source and destination cannot be the same\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const res = await fetch(\"/api/transfers\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                    productId: form.productId,\r\n                    fromLocationId: form.fromLocationId || null,\r\n                    toLocationId: form.toLocationId || null,\r\n                    quantity: form.quantity,\r\n                }),\r\n            });\r\n\r\n            if (!res.ok) throw new Error(\"Failed to create transfer\");\r\n\r\n            const newTransfer = await res.json();\r\n            alert(\"Transfer created!\");\r\n\r\n            // Reset form\r\n            setForm({ productId: \"\", fromLocationId: \"\", toLocationId: \"\", quantity: 0 });\r\n\r\n            // Add new transfer at the top of the table\r\n            setTransfers(prev => [newTransfer.transfer, ...prev.slice(0, 9)]);\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert(\"Failed to create transfer\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6\">\r\n            <h1 className=\"text-2xl font-bold mb-4\">Create Stock Transfer</h1>\r\n            <main>\r\n                {/* Transfer Form */}\r\n                <form onSubmit={handleSubmit} className=\"space-y-4 max-w-md\">\r\n                    <select\r\n                        required\r\n                        value={form.productId}\r\n                        onChange={e => setForm({ ...form, productId: e.target.value })}\r\n                        className=\"border p-2 w-full\"\r\n                    >\r\n                        <option value=\"\">Select Product</option>\r\n                        {products.map(p => <option key={p.id} value={p.id}>{p.name}</option>)}\r\n                    </select>\r\n\r\n                    <select\r\n                        required\r\n                        value={form.fromLocationId}\r\n                        onChange={e => setForm({ ...form, fromLocationId: e.target.value })}\r\n                        className=\"border p-2 w-full\"\r\n                    >\r\n                        <option value=\"\">From Location</option>\r\n                        {locations.map(l => <option key={l.id} value={l.id}>{l.name}</option>)}\r\n                    </select>\r\n\r\n                    <select\r\n                        required\r\n                        value={form.toLocationId}\r\n                        onChange={e => setForm({ ...form, toLocationId: e.target.value })}\r\n                        className=\"border p-2 w-full\"\r\n                    >\r\n                        <option value=\"\">To Location</option>\r\n                        {locations.map(l => <option key={l.id} value={l.id}>{l.name}</option>)}\r\n                    </select>\r\n\r\n                    <input\r\n                        type=\"number\"\r\n                        min={1}\r\n                        required\r\n                        value={form.quantity}\r\n                        onChange={e => setForm({ ...form, quantity: Number(e.target.value) })}\r\n                        placeholder=\"Quantity\"\r\n                        className=\"border p-2 w-full\"\r\n                    />\r\n\r\n                    <button type=\"submit\" className=\"bg-yellow-500 text-white px-4 py-2 rounded\">Create Transfer</button>\r\n                </form>\r\n\r\n                {/* Recent Transfers Table */}\r\n                <h2 className=\"text-xl font-semibold mt-8 mb-4\">Recent Transfers</h2>\r\n                {transfers.length === 0 ? (\r\n                    <p>No recent transfers.</p>\r\n                ) : (\r\n                    <table className=\"w-full border-collapse border\">\r\n                        <thead>\r\n                            <tr className=\"border-b\">\r\n                                <th className=\"p-2 text-left\">Product</th>\r\n                                <th className=\"p-2 text-left\">From</th>\r\n                                <th className=\"p-2 text-left\">To</th>\r\n                                <th className=\"p-2 text-left\">Quantity</th>\r\n                                <th className=\"p-2 text-left\">Date</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {transfers.map(t => (\r\n                                <tr key={t.id} className=\"border-b\">\r\n                                    <td className=\"p-2\">{t.product?.name || \"-\"}</td>\r\n                                    <td className=\"p-2\">{t.fromLocation?.name || \"-\"}</td>\r\n                                    <td className=\"p-2\">{t.toLocation?.name || \"-\"}</td>\r\n                                    <td className=\"p-2\">{t.quantity}</td>\r\n                                    <td className=\"p-2\">{new Date(t.transferDate).toLocaleString()}</td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                )}\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}